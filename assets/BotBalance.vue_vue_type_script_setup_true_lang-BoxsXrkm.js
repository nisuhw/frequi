import{a2 as I,ae as S,d as G,r as C,bi as q,N as H,p,J as x,y as _,q as $,a as o,f as t,bj as R,B as O,m as g,c as f,e as l,u as J,o as K,t as v,b as i,g as U,h as u,S as Q,D as W,F as X,v as Y,aV as Z,j as ee,K as te,I as ne}from"./index-BoH2X4lE.js";import{s as ae,a as oe}from"./index-XMmgsqZe.js";import{u as re,E as se,i as ce,a as le,b as ie,c as ue,d as _e}from"./installCanvasRenderer-Db7nzp7W.js";import{i as de,a as me}from"./install-ClPI-YBr.js";var pe=I.extend({name:"columngroup"}),fe={name:"BaseColumnGroup",extends:S,props:{type:{type:String,default:null}},style:pe,provide:function(){return{$pcColumnGroup:this,$parentInstance:this}}},he={name:"ColumnGroup",extends:fe,inheritAttrs:!1,inject:["$columnGroups"],mounted:function(){var e;(e=this.$columnGroups)===null||e===void 0||e.add(this.$)},unmounted:function(){var e;(e=this.$columnGroups)===null||e===void 0||e.delete(this.$)},render:function(){return null}},ve={name:"Row",extends:S,inject:["$rows"],mounted:function(){var e;(e=this.$rows)===null||e===void 0||e.add(this.$)},unmounted:function(){var e;(e=this.$rows)===null||e===void 0||e.delete(this.$)},render:function(){return null}};const ye=G({__name:"BalanceChart",props:{currencies:{required:!0,type:Array},showTitle:{required:!1,type:Boolean}},setup(r){re([de,ce,le,ie,ue,_e,me]);const e=C(null),{width:d}=q(e),a=r,B=H(),s=p(()=>({title:{text:"Balance",show:a.showTitle},center:["50%","50%"],backgroundColor:"rgba(0, 0, 0, 0)",dataset:{dimensions:["balance","currency","est_stake","free","used","stake"],source:a.currencies},tooltip:{trigger:"item",formatter:c=>`${x(c.value.balance,c.value.currency,8)}<br />${c.percent}% (${x(c.value.est_stake,c.value.stake)})`},series:[{type:"pie",radius:["40%","70%"],encode:{value:"est_stake",itemName:"currency",tooltip:["balance","currency"]},label:{formatter:"{b} - {d}%"},tooltip:{show:!0}}]}));return(c,h)=>r.currencies?(o(),_(t(se),{key:0,ref_key:"balanceChart",ref:e,option:t(s),theme:t(B).chartTheme,style:R({height:t(d)*.6+"px"}),autoresize:""},null,8,["option","theme","style"])):$("",!0)}}),be=O(ye,[["__scopeId","data-v-2b19abc8"]]),$e={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Be(r,e){return o(),f("svg",$e,e[0]||(e[0]=[l("path",{fill:"currentColor",d:"M12 9a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5a5 5 0 0 1 5-5a5 5 0 0 1 5 5a5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5"},null,-1)]))}const ke=g({name:"mdi-eye",render:Be}),Ce={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ge(r,e){return o(),f("svg",Ce,e[0]||(e[0]=[l("path",{fill:"currentColor",d:"M11.83 9L15 12.16V12a3 3 0 0 0-3-3zm-4.3.8l1.55 1.55c-.05.21-.08.42-.08.65a3 3 0 0 0 3 3c.22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53a5 5 0 0 1-5-5c0-.79.2-1.53.53-2.2M2 4.27l2.28 2.28l.45.45C3.08 8.3 1.78 10 1 12c1.73 4.39 6 7.5 11 7.5c1.55 0 3.03-.3 4.38-.84l.43.42L19.73 22L21 20.73L3.27 3M12 7a5 5 0 0 1 5 5c0 .64-.13 1.26-.36 1.82l2.93 2.93c1.5-1.25 2.7-2.89 3.43-4.75c-1.73-4.39-6-7.5-11-7.5c-1.4 0-2.74.25-4 .7l2.17 2.15C10.74 7.13 11.35 7 12 7"},null,-1)]))}const we=g({name:"mdi-eye-off",render:ge}),xe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Se(r,e){return o(),f("svg",xe,e[0]||(e[0]=[l("path",{fill:"currentColor",d:"M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2M7.5 13A2.5 2.5 0 0 0 5 15.5A2.5 2.5 0 0 0 7.5 18a2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 7.5 13m9 0a2.5 2.5 0 0 0-2.5 2.5a2.5 2.5 0 0 0 2.5 2.5a2.5 2.5 0 0 0 2.5-2.5a2.5 2.5 0 0 0-2.5-2.5"},null,-1)]))}const Ge=g({name:"mdi-robot",render:Se}),Ve={class:"flex flex-wrap flex-row mb-2 justify-end items-center"},Ae={class:"text-xl ms-1 me-auto mb-0"},Le={class:"flex flex-row gap-1"},Me={key:0},Ne=["title"],Pe=G({__name:"BotBalance",setup(r){const e=J(),d=C(!0),a=C(!0),B=p(()=>Number((1.1**e.activeBot.stakeCurrencyDecimals).toFixed(8))),s=p(()=>e.activeBot.botFeatures.hasBotBalance),c=p(()=>e.activeBot.balance.currencies?.filter(n=>(!d.value||n.est_stake>=B.value)&&(!s.value||!a.value||(n.is_bot_managed??!0)===!0))),h=n=>n?ne(n,e.activeBot.stakeCurrencyDecimals):"",V=p(()=>c.value?.map(n=>({balance:a.value&&s.value&&n.bot_owned!=null?n.bot_owned:n.is_position===!0?n.position:n.balance,currency:n.currency,est_stake:a.value&&s.value?n.est_stake_bot??n.est_stake:n.est_stake,free:a.value&&s.value?n.bot_owned??n.free:n.free,used:n.used,stake:n.stake}))),A=p(()=>[{field:"currency",header:"Currency"},{field:a.value&&s.value?"bot_owned":"free",header:"Available",asCurrency:!0},{field:a.value&&s.value?"est_stake_bot":"est_stake",header:`in ${e.activeBot.balance.stake}`,asCurrency:!0}]);async function w(){e.activeBot.getBalance()}return K(()=>{w()}),(n,y)=>{const L=Ge,M=Q,k=U,N=we,T=ke,j=W,D=be,b=oe,F=ve,P=he,z=ae;return o(),f("div",null,[l("div",Ve,[l("label",Ae,v(t(a)?"Bot":"Account")+" Balance",1),l("div",Le,[t(s)?(o(),_(k,{key:0,severity:"secondary",tooltip:t(a)?"Showing Bot balance":"Showing Account balance",onClick:y[0]||(y[0]=m=>a.value=!t(a))},{icon:u(()=>[t(a)?(o(),_(L,{key:0})):(o(),_(M,{key:1}))]),_:1},8,["tooltip"])):$("",!0),i(k,{severity:"secondary",tooltip:t(d)?"Show all balances":"Hide small balances",onClick:y[1]||(y[1]=m=>d.value=!t(d))},{icon:u(()=>[t(d)?(o(),_(N,{key:0})):(o(),_(T,{key:1}))]),_:1},8,["tooltip"]),i(k,{severity:"secondary",onClick:w},{icon:u(()=>[i(j)]),_:1})])]),t(c)?(o(),_(D,{key:0,currencies:t(V)},null,8,["currencies"])):$("",!0),l("div",null,[t(e).activeBot.balance.note?(o(),f("p",Me,[l("strong",null,v(t(e).activeBot.balance.note),1)])):$("",!0),i(z,{value:t(c),footer:""},{default:u(()=>[(o(!0),f(X,null,Y(t(A),m=>(o(),_(b,{key:m.field,field:m.field,header:m.header},Z({_:2},[m.asCurrency?{name:"body",fn:u(({data:E})=>[ee(v(h(E[m.field])),1)]),key:"0"}:void 0]),1032,["field","header"]))),128)),i(P,{type:"footer"},{default:u(()=>[i(F,null,{default:u(()=>[i(b,{footer:"Total",f:""}),i(b,null,{footer:u(()=>[l("span",{class:"font-italic",title:`Increase over initial capital of ${h(t(e).activeBot.balance.starting_capital)} ${t(e).activeBot.balance.stake}`},v(("formatPercent"in n?n.formatPercent:t(te))(t(e).activeBot.balance.starting_capital_ratio)),9,Ne)]),_:1}),i(b,null,{footer:u(()=>[l("strong",null,v(t(a)&&t(s)?h(t(e).activeBot.balance.total_bot):h(t(e).activeBot.balance.total)),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["value"])])])}}});export{Pe as _};
//# sourceMappingURL=BotBalance.vue_vue_type_script_setup_true_lang-BoxsXrkm.js.map
