import{_ as D}from"./CandleChartContainer.vue_vue_type_script_setup_true_lang-CdCmWOZD.js";import{s as L}from"./index-D4FZArAM.js";import{_ as W}from"./TimeRangeSelect.vue_vue_type_script_setup_true_lang-BN5-zynJ.js";import{_ as U,a as N}from"./StrategySelect.vue_vue_type_script_setup_true_lang-DtRygdXd.js";import{_ as O}from"./ExchangeSelect.vue_vue_type_script_setup_true_lang-Cia2q3LO.js";import{R as P,r as c,d as $,u as R,j as p,o as H,S as j,U as z,V as A,c as _,a as g,k as h,e as m,f as a,b as d,h as u,W as x,X as F,x as B,Y as b,z as V,Z as I,l as X}from"./index-D29yCp72.js";import"./index-DkSGa2Ur.js";import"./index-BVqpLxLT.js";import"./check-BvKfympZ.js";import"./plus-box-outline-B84fhGS0.js";import"./installCanvasRenderer-CZoFrcfF.js";import"./chartZoom-HUt5osHp.js";import"./index-DdoQYVm8.js";import"./index-i8dkdNPL.js";const Y=P("chartConfig",()=>{const v=c(""),e=c(!1),o=c("1h"),l=c("");return{strategy:v,useLiveData:e,selectedTimeframe:o,timerange:l}},{persist:{key:"ftUIChartSettings",pick:["useLiveData"]}}),Z={class:"flex flex-col h-full"},q={key:0,class:"md:mx-3 mt-2 px-1"},G={class:"mb-2 border dark:border-surface-700 border-surface-300 rounded-md p-2 text-start"},J={class:"flex flex-row gap-5"},K={class:"grid grid-cols-3 md:grid-cols-5 mx-1 gap-1 md:gap-2"},Q={class:"text-start md:me-1 col-span-2"},ee={class:"flex flex-col text-start"},te={class:"md:mx-2 mt-2 pb-1 h-full"},pe=$({__name:"ChartsView",setup(v){const e=R(),o=Y(),l=p(()=>e.activeBot.isWebserverMode?o.selectedTimeframe||e.activeBot.strategy.timeframe||"":e.activeBot.timeframe),y=p(()=>{if(e.activeBot.isWebserverMode){if(o.useLiveData)return Object.keys(f.value?.markets||{}).sort()||[];if(l.value&&l.value!==""){const i=l.value;return e.activeBot.pairlistWithTimeframe.filter(([t,n])=>n===i).map(([t])=>t)}return e.activeBot.pairlist}return e.activeBot.whitelist});H(()=>{e.activeBot.isWebserverMode?e.activeBot.getAvailablePairs({}):(!e.activeBot.whitelist||e.activeBot.whitelist.length===0)&&e.activeBot.getWhitelist()});function E(i,t){if(console.log("Refreshing OHLCV for pair:",i,l.value,"with columns:",t),e.activeBot.isWebserverMode&&l.value){const n={pair:i,timeframe:l.value,timerange:o.timerange,strategy:o.strategy,columns:t,live_mode:o.useLiveData};s.value.customExchange&&(n.exchange=s.value.selectedExchange.exchange,n.trading_mode=s.value.selectedExchange.trade_mode.trading_mode,n.margin_mode=s.value.selectedExchange.trade_mode.margin_mode),e.activeBot.getPairHistory(n)}else e.activeBot.getPairCandles({pair:i,timeframe:l.value,columns:t})}const s=c({customExchange:!1,selectedExchange:{exchange:e.activeBot.botState.exchange,trade_mode:{margin_mode:z.NONE,trading_mode:j.SPOT}}}),f=c(null);return A(()=>o.useLiveData,async()=>{if(e.activeBot.isWebserverMode&&o.useLiveData){const i={};s.value.customExchange&&(i.exchange=s.value.selectedExchange.exchange,i.trading_mode=s.value.selectedExchange.trade_mode.trading_mode,i.margin_mode=s.value.selectedExchange.trade_mode.margin_mode),f.value=await e.activeBot.getMarkets(i)}},{immediate:!0}),(i,t)=>{const n=F,S=O,C=U,k=N,w=W,M=L,T=D;return g(),_("div",Z,[a(e).activeBot.isWebserverMode?(g(),_("div",q,[d(M,{header:"Settings",toggleable:""},{default:u(()=>[m("div",G,[m("div",J,[d(n,{modelValue:a(s).customExchange,"onUpdate:modelValue":t[0]||(t[0]=r=>a(s).customExchange=r),class:"mb-2"},{default:u(()=>[...t[6]||(t[6]=[B(" Custom Exchange ",-1)])]),_:1},8,["modelValue"]),x(m("span",null," Current Exchange: "+V(a(e).activeBot.botState.exchange)+" "+V(a(e).activeBot.botState.trading_mode),513),[[b,!a(s).customExchange]])]),d(I,{name:"fade"},{default:u(()=>[x(d(S,{modelValue:a(s).selectedExchange,"onUpdate:modelValue":t[1]||(t[1]=r=>a(s).selectedExchange=r)},null,8,["modelValue"]),[[b,a(s).customExchange]])]),_:1})]),m("div",K,[m("div",Q,[t[8]||(t[8]=m("span",null,"Strategy",-1)),d(C,{modelValue:a(o).strategy,"onUpdate:modelValue":t[2]||(t[2]=r=>a(o).strategy=r),class:"mt-1 mb-1"},null,8,["modelValue"]),a(e).activeBot.botFeatures.chartLiveData?(g(),X(n,{key:0,modelValue:a(o).useLiveData,"onUpdate:modelValue":t[3]||(t[3]=r=>a(o).useLiveData=r),class:"align-self-center",title:"Use live data from the exchange. Only use if you don't have data downloaded locally."},{default:u(()=>[...t[7]||(t[7]=[B(" Use Live Data ",-1)])]),_:1},8,["modelValue"])):h("",!0)]),m("div",ee,[t[9]||(t[9]=m("span",null,"Timeframe",-1)),d(k,{modelValue:a(o).selectedTimeframe,"onUpdate:modelValue":t[4]||(t[4]=r=>a(o).selectedTimeframe=r),class:"mt-1"},null,8,["modelValue"])]),d(w,{modelValue:a(o).timerange,"onUpdate:modelValue":t[5]||(t[5]=r=>a(o).timerange=r),class:"col-span-3 md:col-span-2"},null,8,["modelValue"])])]),_:1})])):h("",!0),m("div",te,[d(T,{"available-pairs":a(y),"historic-view":a(e).activeBot.isWebserverMode,timeframe:a(l),trades:a(e).activeBot.allTrades,timerange:a(e).activeBot.isWebserverMode?a(o).timerange:void 0,strategy:a(e).activeBot.isWebserverMode?a(o).strategy:void 0,onRefreshData:E},null,8,["available-pairs","historic-view","timeframe","trades","timerange","strategy"])])])}}});export{pe as default};
//# sourceMappingURL=ChartsView-BxOuEspz.js.map
