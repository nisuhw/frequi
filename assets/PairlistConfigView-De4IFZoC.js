import{c as D,s as te,a as oe,_ as se,b as ne}from"./index-BVqpLxLT.js";import{_ as le}from"./check-circle-DCvWSv3P.js";import{d as k,c4 as ae,c as f,a as l,e as i,f as e,k as v,l as m,z as V,aV as G,a5 as L,s as R,X as j,a6 as M,j as F,b as u,_ as J,a3 as ie,n as U,h as g,F as E,m as I,Z as q,r as S,i as W,g as A,x as T,I as X,u as re,o as ue,V as ce,c5 as de,t as Z}from"./index-D29yCp72.js";import{s as me}from"./index-9K5Hdp12.js";import{P,_ as pe,u as N,a as _e}from"./pairlistConfig-Ca4jY707.js";import{_ as fe,u as O,m as ge}from"./useSortable-jtnNPDb0-BdVWS7cl.js";import{s as ve}from"./index-D4FZArAM.js";import{_ as xe}from"./ExchangeSelect.vue_vue_type_script_setup_true_lang-Cia2q3LO.js";import"./check-BvKfympZ.js";import"./plus-box-outline-B84fhGS0.js";import"./index-i8dkdNPL.js";const be={class:"relative group copy-container"},ye={key:0,class:"text-sm"},Ve={class:"text-start border rounded-sm border-surface-500 p-2 m-0 bg-surface-50 dark:bg-surface-900 overflow-auto"},Ce=k({__name:"CopyableTextfield",props:{content:{},isValid:{type:Boolean,default:!0}},setup(r){const{copy:o,isSupported:t,copied:n}=ae();return(p,c)=>{const d=le,x=D;return l(),f("div",be,[i("div",{class:"absolute right-2 top-2 opacity-0 group-hover:opacity-100 transition-opacity hover:cursor-pointer flex dark:bg-surface-700 bg-surface-200 p-1 rounded-sm items-center justify-center flex-row",onClick:c[0]||(c[0]=s=>e(o)(typeof r.content=="string"?r.content:JSON.stringify(r.content)))},[e(n)?(l(),f("span",ye,"Copied!")):v("",!0),e(t)&&e(n)?(l(),m(d,{key:1})):v("",!0),!e(n)&&e(t)&&r.isValid?(l(),m(x,{key:2})):v("",!0)]),i("pre",Ve,[i("code",null,V(r.content),1)])])}}}),ke={class:"pb-1 flex flex-row text-start"},we={class:"w-2/5"},he={class:"flex flex-col w-full"},$e={class:"text-muted text-sm text-surface-500"},Pe=k({__name:"PairlistConfigParameter",props:G({param:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const o=L(r,"modelValue");return(t,n)=>{const p=R,c=j,d=M,x=pe;return l(),f("div",ke,[i("label",we,V(r.param.description),1),i("div",he,[r.param.type===e(P).string||r.param.type===e(P).number?(l(),m(p,{key:0,modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=s=>o.value=s),size:"small"},null,8,["modelValue"])):v("",!0),r.param.type===e(P).boolean?(l(),m(c,{key:1,modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=s=>o.value=s)},null,8,["modelValue"])):v("",!0),r.param.type===e(P).option?(l(),m(d,{key:2,modelValue:o.value,"onUpdate:modelValue":n[2]||(n[2]=s=>o.value=s),options:r.param.options},null,8,["modelValue","options"])):v("",!0),r.param.type===e(P).list?(l(),m(x,{key:3,modelValue:o.value,"onUpdate:modelValue":n[3]||(n[3]=s=>o.value=s)},null,8,["modelValue"])):v("",!0),i("span",$e,V(r.param.help),1)])])}}}),Se={class:"shadow-sm rounded-sm border border-surface-300 dark:border-surface-700"},Be={class:"flex w-full text-start items-center bg-surface-200 dark:bg-surface-700 p-2 border-b border-surface-300 dark:border-surface-600"},ze={class:"flex grow items-center"},Ue={class:"font-bold"},Ee={class:"text-sm"},Ie={key:0,class:"p-2"},Ne=k({__name:"PairlistConfigItem",props:G({index:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const o=N(),t=L(r,"modelValue"),n=F(()=>Object.keys(t.value.params).length>0);function p(){n.value&&(t.value.showParameters=!t.value.showParameters)}return(c,d)=>{const x=fe,s=J,a=ie,w=_e,h=Pe;return l(),f("div",Se,[i("div",Be,[i("div",ze,[u(x,{role:"button",class:"handle me-2 ms-2 flex-auto shrink",width:"24",height:"24"}),i("div",{role:"button",class:"flex items-start flex-col user-select-none w-full",onClick:p},[i("span",Ue,V(t.value.name),1),i("span",Ee,V(t.value.description),1)])]),u(s,{role:"button",width:"24",height:"24",class:"mx-2",onClick:d[0]||(d[0]=b=>e(o).removeFromConfig(r.index))}),t.value.showParameters?v("",!0):(l(),m(a,{key:0,class:U([e(n)&&!t.value.showParameters?"visible":"invisible","fs-4"]),role:"button",onClick:p},null,8,["class"])),t.value.showParameters?(l(),m(w,{key:1,class:U([e(n)&&t.value.showParameters?"visible":"invisible","fs-4"]),role:"button",onClick:p},null,8,["class"])):v("",!0)]),u(q,null,{default:g(()=>[t.value.showParameters?(l(),f("div",Ie,[(l(!0),f(E,null,I(t.value.params,(b,$)=>(l(),m(h,{key:$,modelValue:b.value,"onUpdate:modelValue":y=>b.value=y,param:b},null,8,["modelValue","onUpdate:modelValue","param"]))),128))])):v("",!0)]),_:1})])}}}),Te={class:"flex mb-4 items-center gap-2"},Re=k({__name:"PairlistConfigBlacklist",setup(r){const o=N(),t=S(""),n=F(()=>o.savedConfigs.filter(p=>p.name!==o.config.name).map(p=>p.name));return(p,c)=>{const d=M,x=D,s=A,a=R,w=J,h=oe,b=te,$=ve;return l(),m($,{toggleable:"",header:"Blacklist",collapsed:""},{default:g(()=>[i("div",Te,[c[3]||(c[3]=i("span",{class:"col-auto"},"Copy from:",-1)),u(d,{modelValue:e(t),"onUpdate:modelValue":c[0]||(c[0]=y=>W(t)?t.value=y:null),size:"small",class:"grow",options:e(n)},null,8,["modelValue","options"]),u(s,{title:"Copy",size:"small",severity:"secondary",onClick:c[1]||(c[1]=y=>e(o).duplicateBlacklist(e(t)))},{icon:g(()=>[u(x)]),_:1})]),(l(!0),f(E,null,I(e(o).config.blacklist,(y,C)=>(l(),m(b,{key:C,class:"mb-2",size:"sm"},{default:g(()=>[u(a,{modelValue:e(o).config.blacklist[C],"onUpdate:modelValue":B=>e(o).config.blacklist[C]=B,size:"small"},null,8,["modelValue","onUpdate:modelValue"]),u(h,null,{default:g(()=>[u(s,{size:"small",severity:"secondary",onClick:B=>e(o).removeFromBlacklist(C)},{icon:g(()=>[u(w)]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),u(s,{size:"small",onClick:c[2]||(c[2]=y=>e(o).addToBlacklist())},{default:g(()=>[...c[4]||(c[4]=[T("Add",-1)])]),_:1})]),_:1})}}}),Me={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Fe(r,o){return l(),f("svg",Me,[...o[0]||(o[0]=[i("path",{fill:"currentColor",d:"M15 9H5V5h10m-3 14a3 3 0 0 1-3-3a3 3 0 0 1 3-3a3 3 0 0 1 3 3a3 3 0 0 1-3 3m5-16H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V7z"},null,-1)])])}const Ae=X({name:"mdi-content-save",render:Fe}),He={class:"flex flex-col sm:flex-row mb-2 gap-2"},Oe={key:1},De=k({__name:"PairlistConfigActions",setup(r){const o=N();return(t,n)=>{const p=Ae,c=A,d=M,x=ne;return l(),f("div",He,[u(c,{title:"Save configuration",size:"small",severity:"primary",onClick:n[0]||(n[0]=s=>e(o).saveConfig(e(o).config.name))},{icon:g(()=>[u(p)]),_:1}),u(se,{modelValue:e(o).config.name,"onUpdate:modelValue":n[3]||(n[3]=s=>e(o).config.name=s),"editable-name":"config","allow-add":!0,"allow-duplicate":!0,"allow-edit":!0,class:"flex grow",onDelete:e(o).deleteConfig,onDuplicate:n[4]||(n[4]=(s,a)=>e(o).duplicateConfig(a)),onNew:n[5]||(n[5]=s=>e(o).newConfig(s)),onRename:n[6]||(n[6]=(s,a)=>e(o).saveConfig(a))},{default:g(()=>[u(d,{modelValue:e(o).configName,"onUpdate:modelValue":[n[1]||(n[1]=s=>e(o).configName=s),n[2]||(n[2]=s=>e(o).selectOrCreateConfig(s))],size:"small",class:"w-full text-start",options:e(o).savedConfigs.map(s=>s.name)},null,8,["modelValue","options"])]),_:1},8,["modelValue","onDelete"]),u(c,{title:"Evaluate pairlist",disabled:e(o).evaluating||!e(o).pairlistValid,severity:"primary",class:"px-5",size:"small",onClick:n[7]||(n[7]=s=>e(o).startPairlistEvaluation())},{default:g(()=>[e(o).evaluating?(l(),m(x,{key:0,class:"h-5 w-5"})):(l(),f("span",Oe,"Evaluate"))]),_:1},8,["disabled"])])}}}),Ge={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Le(r,o){return l(),f("svg",Ge,[...o[0]||(o[0]=[i("path",{fill:"currentColor",d:"m17 12l-5 5v-3H8v-4h4V7zM3 19V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2m2 0h14V5H5z"},null,-1)])])}const je=X({name:"mdi-arrow-right-bold-box-outline",render:Le}),Je={class:"grid grid-cols-1 lg:grid-cols-[auto_1fr_auto] px-3 mb-3 gap-3 w-full"},qe={class:"flex grow items-start flex-col"},We={class:"font-bold"},Xe={class:"text-sm text-muted-color"},Ze={class:"flex flex-col"},Ke={class:"border rounded-sm border-surface-500 p-2 mb-2"},Qe={class:"flex items-center gap-2 my-2"},Ye={class:"mb-2 border rounded-sm border-surface-500 p-2 text-start"},et={class:"flex flex-col w-full min-w-72"},tt={class:"relative overflow-auto"},ot=k({__name:"PairlistConfigurator",setup(r){const o=re(),t=N(),n=S([]),p=S(null),c=S(null),d=S("Config"),x=F(()=>t.config.pairlists.length==0);return O(c,n.value,{group:{name:"configurator",pull:"clone",put:!1},sort:!1,filter:".no-drag",dragClass:"dragging"}),O(p,t.config.pairlists,{handle:".handle",group:"configurator",onUpdate:async s=>{ge(t.config.pairlists,s.oldIndex,s.newIndex)},onAdd:s=>{const a=n.value[s.oldIndex];if(!a){console.error("Pairlist not found");return}t.addToConfig(a,s.newIndex),s.clone.replaceWith(s.item),s.clone.remove()}}),ue(async()=>{n.value=(await o.activeBot.getPairlists()).pairlists.sort((s,a)=>s.is_pairlist_generator===a.is_pairlist_generator?s.name.localeCompare(a.name):s.is_pairlist_generator?-1:1),t.selectOrCreateConfig(t.isSavedConfig(t.configName)?t.configName:"default")}),ce(()=>t.whitelist,()=>{d.value="Results"}),t.whitelist.length>0&&(d.value="Results"),(s,a)=>{const w=je,h=A,b=De,$=R,y=j,C=xe,B=Re,K=de,Q=Ne,Y=me,H=Ce;return l(),f("div",Je,[i("ul",{ref_key:"availablePairlistsEl",ref:c,class:"divide-y border-x border-surface-500 rounded-sm border-y divide-solid divide-surface-500 min-w-72"},[(l(!0),f(E,null,I(e(n),_=>(l(),f("li",{key:_.name,class:U([{"no-drag text-gray-500 hover:cursor-default":e(t).config.pairlists.length==0&&!_.is_pairlist_generator},"pairlist flex text-start items-center py-2 px-3 hover:cursor-grab"])},[i("div",qe,[i("span",We,V(_.name),1),i("span",Xe,V(_.description),1)]),u(h,{severity:"secondary",class:"dark:text-white",variant:"text",disabled:e(t).config.pairlists.length==0&&!_.is_pairlist_generator,onClick:z=>e(t).addToConfig(_,e(t).config.pairlists.length)},{icon:g(()=>[u(w)]),_:1},8,["disabled","onClick"])],2))),128))],512),i("div",Ze,[u(b),i("div",Ke,[i("div",Qe,[a[4]||(a[4]=i("span",{class:"col-auto"},"Stake currency: ",-1)),u($,{modelValue:e(t).stakeCurrency,"onUpdate:modelValue":a[0]||(a[0]=_=>e(t).stakeCurrency=_),size:"small"},null,8,["modelValue"])]),i("div",Ye,[u(y,{modelValue:e(t).customExchange,"onUpdate:modelValue":a[1]||(a[1]=_=>e(t).customExchange=_),class:"mb-2"},{default:g(()=>[...a[5]||(a[5]=[T(" Custom Exchange ",-1)])]),_:1},8,["modelValue"]),u(q,{name:"fade"},{default:g(()=>[e(t).customExchange?(l(),m(C,{key:0,modelValue:e(t).selectedExchange,"onUpdate:modelValue":a[2]||(a[2]=_=>e(t).selectedExchange=_)},null,8,["modelValue"])):v("",!0)]),_:1})])]),u(B),e(t).config.pairlists.length>0&&!e(t).firstPairlistIsGenerator?(l(),m(K,{key:0,class:"my-2",severity:"warn"},{default:g(()=>[...a[6]||(a[6]=[T(" First entry in the pairlist must be a Generating pairlist, like StaticPairList or VolumePairList. ",-1)])]),_:1})):v("",!0),i("div",{ref_key:"pairlistConfigsEl",ref:p,class:U(["flex flex-col grow relative border rounded-sm border-surface-500 p-1 gap-2 min-h-32",{empty:e(x)}])},[(l(!0),f(E,null,I(e(t).config.pairlists,(_,z)=>(l(),m(Q,{key:_.id,modelValue:e(t).config.pairlists[z],"onUpdate:modelValue":ee=>e(t).config.pairlists[z]=ee,index:z,onRemove:e(t).removeFromConfig},null,8,["modelValue","onUpdate:modelValue","index","onRemove"]))),128))],2)]),i("div",et,[u(Y,{modelValue:e(d),"onUpdate:modelValue":a[3]||(a[3]=_=>W(d)?d.value=_:null),class:"mb-2",size:"small","allow-empty":!1,"option-label":"value","option-value":"value",options:[{value:"Config"},{value:"Results",disabled:e(t).whitelist.length===0}],"option-disabled":"disabled"},null,8,["modelValue","options"]),i("div",tt,[e(d)==="Config"?(l(),m(H,{key:0,class:"lg:a22bsolute w-full",content:e(t).configJSON,"is-valid":e(t).pairlistValid},null,8,["content","is-valid"])):v("",!0),e(d)==="Results"?(l(),m(H,{key:1,class:"lg:abs22olute w-full",content:e(t).whitelist},null,8,["content"])):v("",!0)])])])}}}),st=Z(ot,[["__scopeId","data-v-b8083543"]]),nt={};function lt(r,o){const t=st;return l(),m(t,{class:"pt-4"})}const vt=Z(nt,[["render",lt]]);export{vt as default};
//# sourceMappingURL=PairlistConfigView-De4IFZoC.js.map
