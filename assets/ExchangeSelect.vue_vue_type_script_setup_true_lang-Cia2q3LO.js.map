{"version":3,"file":"ExchangeSelect.vue_vue_type_script_setup_true_lang-Cia2q3LO.js","sources":["../../src/components/ftbot/ExchangeSelect.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport type { ExchangeSelection } from '@/types';\n\nconst exchangeModel = defineModel<ExchangeSelection>({ required: true });\n\nconst botStore = useBotStore();\n\nconst exchangeList = computed(() => {\n  const supported = botStore.activeBot.exchangeList\n    .filter((ex) => ex.valid && ex.supported)\n    .sort((a, b) => a.name.localeCompare(b.name));\n\n  const unsupported = botStore.activeBot.exchangeList\n    .filter((ex) => ex.valid && !ex.supported)\n    .sort((a, b) => a.name.localeCompare(b.name));\n\n  return [\n    {\n      label: 'Supported',\n      options: supported.map((e) => ({ value: e.classname ?? e.name, text: e.name })),\n    },\n    {\n      label: 'Unsupported',\n      options: unsupported.map((e) => ({ value: e.classname ?? e.name, text: e.name })),\n    },\n  ];\n});\n\nconst tradeModesTyped = computed(() => {\n  const val = botStore.activeBot.exchangeList.find(\n    (ex) =>\n      ex.name === exchangeModel.value.exchange || ex.classname === exchangeModel.value.exchange,\n  )?.trade_modes;\n  return val ?? [];\n});\n\nconst tradeModes = computed(() => {\n  return tradeModesTyped.value.map((tm) => {\n    return {\n      text: `${tm.margin_mode} ${tm.trading_mode}`,\n      value: tm,\n    };\n  });\n});\n\nwatch(\n  () => exchangeModel.value.exchange,\n  () => {\n    if (tradeModesTyped.value.length < 2 && tradeModesTyped.value[0]) {\n      exchangeModel.value.trade_mode = tradeModesTyped.value[0];\n    }\n  },\n);\n\nonMounted(() => {\n  if (botStore.activeBot.exchangeList.length === 0) {\n    botStore.activeBot.getExchangeList();\n  }\n});\n</script>\n\n<template>\n  <div class=\"w-full flex\">\n    <Select\n      id=\"exchange-select\"\n      v-model=\"exchangeModel.exchange\"\n      size=\"small\"\n      class=\"min-w-52\"\n      filter\n      option-group-label=\"label\"\n      option-group-children=\"options\"\n      option-label=\"text\"\n      option-value=\"value\"\n      :options=\"exchangeList\"\n    >\n    </Select>\n    <Select\n      id=\"tradeMode-select\"\n      v-model=\"exchangeModel.trade_mode\"\n      size=\"small\"\n      class=\"min-w-44\"\n      :options=\"tradeModes\"\n      option-label=\"text\"\n      option-value=\"value\"\n      :disabled=\"tradeModes.length < 2\"\n    >\n    </Select>\n    <Button\n      severity=\"secondary\"\n      variant=\"outlined\"\n      class=\"ms-2 no-min-w\"\n      size=\"small\"\n      @click=\"botStore.activeBot.getExchangeList\"\n    >\n      <template #icon>\n        <i-mdi-refresh />\n      </template>\n    </Button>\n  </div>\n</template>\n"],"names":["exchangeModel","_useModel","botStore","useBotStore","exchangeList","computed","supported","ex","a","b","unsupported","tradeModesTyped","tradeModes","tm","watch","onMounted","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_Select","_cache","$event","_unref","_component_Button","_component_i_mdi_refresh"],"mappings":"wRAGA,MAAMA,EAAgBC,gBAAiD,EAEjEC,EAAWC,EAAA,EAEXC,EAAeC,EAAS,IAAM,CAClC,MAAMC,EAAYJ,EAAS,UAAU,aAClC,OAAQK,GAAOA,EAAG,OAASA,EAAG,SAAS,EACvC,KAAK,CAACC,EAAGC,IAAMD,EAAE,KAAK,cAAcC,EAAE,IAAI,CAAC,EAExCC,EAAcR,EAAS,UAAU,aACpC,OAAQK,GAAOA,EAAG,OAAS,CAACA,EAAG,SAAS,EACxC,KAAK,CAACC,EAAGC,IAAMD,EAAE,KAAK,cAAcC,EAAE,IAAI,CAAC,EAE9C,MAAO,CACL,CACE,MAAO,YACP,QAASH,EAAU,IAAK,IAAO,CAAE,MAAO,EAAE,WAAa,EAAE,KAAM,KAAM,EAAE,MAAO,CAAA,EAEhF,CACE,MAAO,cACP,QAASI,EAAY,IAAK,IAAO,CAAE,MAAO,EAAE,WAAa,EAAE,KAAM,KAAM,EAAE,MAAO,CAAA,CAClF,CAEJ,CAAC,EAEKC,EAAkBN,EAAS,IACnBH,EAAS,UAAU,aAAa,KACzCK,GACCA,EAAG,OAASP,EAAc,MAAM,UAAYO,EAAG,YAAcP,EAAc,MAAM,QAAA,GAClF,aACW,CAAA,CACf,EAEKY,EAAaP,EAAS,IACnBM,EAAgB,MAAM,IAAKE,IACzB,CACL,KAAM,GAAGA,EAAG,WAAW,IAAIA,EAAG,YAAY,GAC1C,MAAOA,CAAA,EAEV,CACF,EAED,OAAAC,EACE,IAAMd,EAAc,MAAM,SAC1B,IAAM,CACAW,EAAgB,MAAM,OAAS,GAAKA,EAAgB,MAAM,CAAC,IAC7DX,EAAc,MAAM,WAAaW,EAAgB,MAAM,CAAC,EAE5D,CAAA,EAGFI,EAAU,IAAM,CACVb,EAAS,UAAU,aAAa,SAAW,GAC7CA,EAAS,UAAU,gBAAA,CAEvB,CAAC,4BAIC,OAAAc,EAAA,EAAAC,EAoCM,MApCNC,EAoCM,CAnCJC,EAYSC,EAAA,CAXP,GAAG,kBACM,WAAApB,EAAA,MAAc,SAAd,sBAAAqB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAtB,EAAA,MAAc,SAAQsB,GAC/B,KAAK,QACL,MAAM,WACN,OAAA,GACA,qBAAmB,QACnB,wBAAsB,UACtB,eAAa,OACb,eAAa,QACZ,QAASC,EAAAnB,CAAA,CAAA,mCAGZe,EAUSC,EAAA,CATP,GAAG,mBACM,WAAApB,EAAA,MAAc,WAAd,sBAAAqB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAtB,EAAA,MAAc,WAAUsB,GACjC,KAAK,QACL,MAAM,WACL,QAASC,EAAAX,CAAA,EACV,eAAa,OACb,eAAa,QACZ,SAAUW,EAAAX,CAAA,EAAW,OAAM,CAAA,8CAG9BO,EAUSK,EAAA,CATP,SAAS,YACT,QAAQ,WACR,MAAM,gBACN,KAAK,QACJ,QAAOD,EAAArB,CAAA,EAAS,UAAU,eAAA,GAEhB,OACT,IAAiB,CAAjBiB,EAAiBM,CAAA,CAAA"}