{"version":3,"file":"chartZoom-HUt5osHp.js","sources":["../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/model/referHelper.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/helper/createSeriesData.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/axisModelCommonMixin.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/Axis.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/line/LineSeries.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/helper/labelHelper.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/helper/Symbol.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/helper/SymbolDraw.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/line/helper.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/line/lineAnimationDiff.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/line/poly.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/helper/createClipPathFromCoordSys.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/CoordinateSystem.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/line/LineView.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/layout/points.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/processor/dataSample.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/line/install.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/bar/BaseBarSeries.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/bar/BarSeries.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/util/shape/sausage.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/label/sectorLabel.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/bar/BarView.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/bar/install.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/scatter/ScatterSeries.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/helper/LargeSymbolDraw.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/scatter/ScatterView.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/cartesian/GridModel.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/cartesian/AxisModel.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/axisDefault.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/axisCommonTypes.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/axisModelCreator.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/cartesian/Cartesian.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/cartesian/Cartesian2D.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/cartesian/Axis2D.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/axisAlignTicks.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/cartesian/Grid.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/axis/axisSplitHelper.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/axis/CartesianAxisView.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/grid/installSimple.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/util/jitter.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/scatter/jitterLayout.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/scatter/install.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/helper/interactionMutex.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/helper/cursorHelper.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/helper/RoamController.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/visual/VisualMapping.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/helper/LinePath.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/helper/Line.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/helper/LineDraw.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/helper/sliderMove.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/helper/BrushController.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/helper/brushHelper.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/helper/whiskerBoxCommon.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/candlestick/candlestickVisual.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/candlestick/CandlestickView.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/candlestick/CandlestickSeries.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/candlestick/preprocessor.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/candlestick/candlestickLayout.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/candlestick/install.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/util/styleCompat.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/animation/customGraphicTransition.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/animation/customGraphicKeyframeAnimation.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/grid/install.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/calendar/CalendarModel.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/calendar/CalendarView.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/calendar/Calendar.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/calendar/install.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/graphic/GraphicModel.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/graphic/GraphicView.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/graphic/install.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/helper.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/DataZoomModel.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/SelectZoomModel.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/DataZoomView.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/SelectZoomView.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/AxisProxy.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/dataZoomProcessor.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/dataZoomAction.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/installCommon.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/installDataZoomSelect.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/toolbox/featureManager.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/toolbox/ToolboxModel.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/toolbox/ToolboxView.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/toolbox/feature/SaveAsImage.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/toolbox/feature/MagicType.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/toolbox/feature/DataView.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/history.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/toolbox/feature/Restore.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/helper/BrushTargetManager.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/toolbox/feature/DataZoom.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/toolbox/install.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/visual/visualSolution.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/timeline/TimelineModel.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/timeline/SliderTimelineModel.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/timeline/TimelineView.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/timeline/TimelineAxis.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/timeline/SliderTimelineView.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/timeline/timelineAction.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/timeline/preprocessor.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/timeline/install.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/marker/checkMarkerInSeries.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/marker/MarkerModel.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/marker/markerHelper.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/marker/MarkerView.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/marker/MarkLineModel.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/marker/MarkLineView.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/marker/installMarkLine.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/marker/MarkAreaModel.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/marker/MarkAreaView.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/marker/installMarkArea.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/InsideZoomModel.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/roams.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/InsideZoomView.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/installDataZoomInside.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/SliderZoomModel.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/SliderZoomView.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/installDataZoomSlider.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/install.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/visual/visualDefault.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/visualMap/VisualMapModel.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/visualMap/ContinuousModel.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/visualMap/VisualMapView.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/visualMap/helper.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/visualMap/ContinuousView.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/visualMap/visualMapAction.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/visualMap/visualEncoding.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/visualMap/preprocessor.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/visualMap/installCommon.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/visualMap/installVisualMapContinuous.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/visualMap/PiecewiseModel.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/visualMap/PiecewiseView.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/visualMap/installVisualMapPiecewise.js","../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/visualMap/install.js","../../src/utils/charts/chartZoom.ts"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/**\n * Helper for model references.\n * There are many manners to refer axis/coordSys.\n */\n// TODO\n// merge relevant logic to this file?\n// check: \"modelHelper\" of tooltip and \"BrushTargetManager\".\nimport { createHashMap, retrieve, each } from 'zrender/lib/core/util.js';\nimport { SINGLE_REFERRING } from '../util/model.js';\n/**\n * @class\n * For example:\n * {\n *     coordSysName: 'cartesian2d',\n *     coordSysDims: ['x', 'y', ...],\n *     axisMap: HashMap({\n *         x: xAxisModel,\n *         y: yAxisModel\n *     }),\n *     categoryAxisMap: HashMap({\n *         x: xAxisModel,\n *         y: undefined\n *     }),\n *     // The index of the first category axis in `coordSysDims`.\n *     // `null/undefined` means no category axis exists.\n *     firstCategoryDimIndex: 1,\n *     // To replace user specified encode.\n * }\n */\nvar CoordSysInfo = /** @class */function () {\n  function CoordSysInfo(coordSysName) {\n    this.coordSysDims = [];\n    this.axisMap = createHashMap();\n    this.categoryAxisMap = createHashMap();\n    this.coordSysName = coordSysName;\n  }\n  return CoordSysInfo;\n}();\nexport function getCoordSysInfoBySeries(seriesModel) {\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var result = new CoordSysInfo(coordSysName);\n  var fetch = fetchers[coordSysName];\n  if (fetch) {\n    fetch(seriesModel, result, result.axisMap, result.categoryAxisMap);\n    return result;\n  }\n}\n// TODO: refactor them to static member of each coord sys, rather than hard code here.\nvar fetchers = {\n  cartesian2d: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var xAxisModel = seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n    var yAxisModel = seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n    if (process.env.NODE_ENV !== 'production') {\n      if (!xAxisModel) {\n        throw new Error('xAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('xAxisId'), 0) + '\" not found');\n      }\n      if (!yAxisModel) {\n        throw new Error('yAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('yAxisId'), 0) + '\" not found');\n      }\n    }\n    result.coordSysDims = ['x', 'y'];\n    axisMap.set('x', xAxisModel);\n    axisMap.set('y', yAxisModel);\n    if (isCategory(xAxisModel)) {\n      categoryAxisMap.set('x', xAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n    if (isCategory(yAxisModel)) {\n      categoryAxisMap.set('y', yAxisModel);\n      result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\n    }\n  },\n  singleAxis: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var singleAxisModel = seriesModel.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n    if (process.env.NODE_ENV !== 'production') {\n      if (!singleAxisModel) {\n        throw new Error('singleAxis should be specified.');\n      }\n    }\n    result.coordSysDims = ['single'];\n    axisMap.set('single', singleAxisModel);\n    if (isCategory(singleAxisModel)) {\n      categoryAxisMap.set('single', singleAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n  },\n  polar: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var polarModel = seriesModel.getReferringComponents('polar', SINGLE_REFERRING).models[0];\n    var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\n    var angleAxisModel = polarModel.findAxisModel('angleAxis');\n    if (process.env.NODE_ENV !== 'production') {\n      if (!angleAxisModel) {\n        throw new Error('angleAxis option not found');\n      }\n      if (!radiusAxisModel) {\n        throw new Error('radiusAxis option not found');\n      }\n    }\n    result.coordSysDims = ['radius', 'angle'];\n    axisMap.set('radius', radiusAxisModel);\n    axisMap.set('angle', angleAxisModel);\n    if (isCategory(radiusAxisModel)) {\n      categoryAxisMap.set('radius', radiusAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n    if (isCategory(angleAxisModel)) {\n      categoryAxisMap.set('angle', angleAxisModel);\n      result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\n    }\n  },\n  geo: function (seriesModel, result, axisMap, categoryAxisMap) {\n    result.coordSysDims = ['lng', 'lat'];\n  },\n  parallel: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var ecModel = seriesModel.ecModel;\n    var parallelModel = ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\n    var coordSysDims = result.coordSysDims = parallelModel.dimensions.slice();\n    each(parallelModel.parallelAxisIndex, function (axisIndex, index) {\n      var axisModel = ecModel.getComponent('parallelAxis', axisIndex);\n      var axisDim = coordSysDims[index];\n      axisMap.set(axisDim, axisModel);\n      if (isCategory(axisModel)) {\n        categoryAxisMap.set(axisDim, axisModel);\n        if (result.firstCategoryDimIndex == null) {\n          result.firstCategoryDimIndex = index;\n        }\n      }\n    });\n  },\n  matrix: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var matrixModel = seriesModel.getReferringComponents('matrix', SINGLE_REFERRING).models[0];\n    if (process.env.NODE_ENV !== 'production') {\n      if (!matrixModel) {\n        throw new Error('matrix coordinate system should be specified.');\n      }\n    }\n    result.coordSysDims = ['x', 'y'];\n    var xModel = matrixModel.getDimensionModel('x');\n    var yModel = matrixModel.getDimensionModel('y');\n    axisMap.set('x', xModel);\n    axisMap.set('y', yModel);\n    categoryAxisMap.set('x', xModel);\n    categoryAxisMap.set('y', yModel);\n  }\n};\nfunction isCategory(axisModel) {\n  return axisModel.get('type') === 'category';\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper.js';\nimport { getDataItemValue } from '../../util/model.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nimport { getCoordSysInfoBySeries } from '../../model/referHelper.js';\nimport { createSourceFromSeriesDataOption } from '../../data/Source.js';\nimport { enableDataStack } from '../../data/helper/dataStackHelper.js';\nimport { makeSeriesEncodeForAxisCoordSys } from '../../data/helper/sourceHelper.js';\nimport { SOURCE_FORMAT_ORIGINAL } from '../../util/types.js';\nfunction getCoordSysDimDefs(seriesModel, coordSysInfo) {\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var registeredCoordSys = CoordinateSystem.get(coordSysName);\n  var coordSysDimDefs;\n  if (coordSysInfo && coordSysInfo.coordSysDims) {\n    coordSysDimDefs = zrUtil.map(coordSysInfo.coordSysDims, function (dim) {\n      var dimInfo = {\n        name: dim\n      };\n      var axisModel = coordSysInfo.axisMap.get(dim);\n      if (axisModel) {\n        var axisType = axisModel.get('type');\n        dimInfo.type = getDimensionTypeByAxis(axisType);\n      }\n      return dimInfo;\n    });\n  }\n  if (!coordSysDimDefs) {\n    // Get dimensions from registered coordinate system\n    coordSysDimDefs = registeredCoordSys && (registeredCoordSys.getDimensionsInfo ? registeredCoordSys.getDimensionsInfo() : registeredCoordSys.dimensions.slice()) || ['x', 'y'];\n  }\n  return coordSysDimDefs;\n}\nfunction injectOrdinalMeta(dimInfoList, createInvertedIndices, coordSysInfo) {\n  var firstCategoryDimIndex;\n  var hasNameEncode;\n  coordSysInfo && zrUtil.each(dimInfoList, function (dimInfo, dimIndex) {\n    var coordDim = dimInfo.coordDim;\n    var categoryAxisModel = coordSysInfo.categoryAxisMap.get(coordDim);\n    if (categoryAxisModel) {\n      if (firstCategoryDimIndex == null) {\n        firstCategoryDimIndex = dimIndex;\n      }\n      dimInfo.ordinalMeta = categoryAxisModel.getOrdinalMeta();\n      if (createInvertedIndices) {\n        dimInfo.createInvertedIndices = true;\n      }\n    }\n    if (dimInfo.otherDims.itemName != null) {\n      hasNameEncode = true;\n    }\n  });\n  if (!hasNameEncode && firstCategoryDimIndex != null) {\n    dimInfoList[firstCategoryDimIndex].otherDims.itemName = 0;\n  }\n  return firstCategoryDimIndex;\n}\n/**\n * Caution: there are side effects to `sourceManager` in this method.\n * Should better only be called in `Series['getInitialData']`.\n */\nfunction createSeriesData(sourceRaw, seriesModel, opt) {\n  opt = opt || {};\n  var sourceManager = seriesModel.getSourceManager();\n  var source;\n  var isOriginalSource = false;\n  if (sourceRaw) {\n    isOriginalSource = true;\n    source = createSourceFromSeriesDataOption(sourceRaw);\n  } else {\n    source = sourceManager.getSource();\n    // Is series.data. not dataset.\n    isOriginalSource = source.sourceFormat === SOURCE_FORMAT_ORIGINAL;\n  }\n  var coordSysInfo = getCoordSysInfoBySeries(seriesModel);\n  var coordSysDimDefs = getCoordSysDimDefs(seriesModel, coordSysInfo);\n  var useEncodeDefaulter = opt.useEncodeDefaulter;\n  var encodeDefaulter = zrUtil.isFunction(useEncodeDefaulter) ? useEncodeDefaulter : useEncodeDefaulter ? zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordSysDimDefs, seriesModel) : null;\n  var createDimensionOptions = {\n    coordDimensions: coordSysDimDefs,\n    generateCoord: opt.generateCoord,\n    encodeDefine: seriesModel.getEncode(),\n    encodeDefaulter: encodeDefaulter,\n    canOmitUnusedDimensions: !isOriginalSource\n  };\n  var schema = prepareSeriesDataSchema(source, createDimensionOptions);\n  var firstCategoryDimIndex = injectOrdinalMeta(schema.dimensions, opt.createInvertedIndices, coordSysInfo);\n  var store = !isOriginalSource ? sourceManager.getSharedDataStore(schema) : null;\n  var stackCalculationInfo = enableDataStack(seriesModel, {\n    schema: schema,\n    store: store\n  });\n  var data = new SeriesData(schema, seriesModel);\n  data.setCalculationInfo(stackCalculationInfo);\n  var dimValueGetter = firstCategoryDimIndex != null && isNeedCompleteOrdinalData(source)\n  /**\n   * This serves this case:\n   *  var echarts_option = {\n   *      xAxis: { data: ['a', 'b', 'c'] },\n   *      yAxis: {}\n   *      series: { data: [555, 666, 777] }\n   *  };\n   * The `series.data` is completed to:\n   *  [[0, 555], [1, 666], [2, 777]]\n   */ ? function (itemOpt, dimName, dataIndex, dimIndex) {\n    // Use dataIndex as ordinal value in categoryAxis\n    return dimIndex === firstCategoryDimIndex ? dataIndex : this.defaultDimValueGetter(itemOpt, dimName, dataIndex, dimIndex);\n  } : null;\n  data.hasItemOption = false;\n  data.initData(\n  // Try to reuse the data store in sourceManager if using dataset.\n  isOriginalSource ? source : store, null, dimValueGetter);\n  return data;\n}\nfunction isNeedCompleteOrdinalData(source) {\n  if (source.sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var sampleItem = firstDataNotNull(source.data || []);\n    return !zrUtil.isArray(getDataItemValue(sampleItem));\n  }\n}\nfunction firstDataNotNull(arr) {\n  var i = 0;\n  while (i < arr.length && arr[i] == null) {\n    i++;\n  }\n  return arr[i];\n}\nexport default createSeriesData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nvar AxisModelCommonMixin = /** @class */function () {\n  function AxisModelCommonMixin() {}\n  AxisModelCommonMixin.prototype.getNeedCrossZero = function () {\n    var option = this.option;\n    return !option.scale;\n  };\n  /**\n   * Should be implemented by each axis model if necessary.\n   * @return coordinate system model\n   */\n  AxisModelCommonMixin.prototype.getCoordSysModel = function () {\n    return;\n  };\n  return AxisModelCommonMixin;\n}();\nexport { AxisModelCommonMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, map } from 'zrender/lib/core/util.js';\nimport { linearMap, getPixelPrecision, round } from '../util/number.js';\nimport { createAxisTicks, createAxisLabels, calculateCategoryInterval, AxisTickLabelComputingKind, createAxisLabelsComputingContext } from './axisTickLabelBuilder.js';\nvar NORMALIZED_EXTENT = [0, 1];\n/**\n * Base class of Axis.\n *\n * Lifetime: recreate for each main process.\n * [NOTICE]: Some caches is stored on the axis instance (see `axisTickLabelBuilder.ts`)\n *  which is based on this lifetime.\n */\nvar Axis = /** @class */function () {\n  function Axis(dim, scale, extent) {\n    this.onBand = false;\n    // Make sure that `extent[0] > extent[1]` only if `inverse: true`.\n    // `inverse` can be inferred by `extent` unless `extent[0] === extent[1]`.\n    this.inverse = false;\n    this.dim = dim;\n    this.scale = scale;\n    this._extent = extent || [0, 0];\n  }\n  /**\n   * If axis extent contain given coord\n   */\n  Axis.prototype.contain = function (coord) {\n    var extent = this._extent;\n    var min = Math.min(extent[0], extent[1]);\n    var max = Math.max(extent[0], extent[1]);\n    return coord >= min && coord <= max;\n  };\n  /**\n   * If axis extent contain given data\n   */\n  Axis.prototype.containData = function (data) {\n    return this.scale.contain(this.scale.parse(data));\n  };\n  /**\n   * Get coord extent.\n   */\n  Axis.prototype.getExtent = function () {\n    return this._extent.slice();\n  };\n  /**\n   * Get precision used for formatting\n   */\n  Axis.prototype.getPixelPrecision = function (dataExtent) {\n    return getPixelPrecision(dataExtent || this.scale.getExtent(), this._extent);\n  };\n  /**\n   * Set coord extent\n   */\n  Axis.prototype.setExtent = function (start, end) {\n    var extent = this._extent;\n    extent[0] = start;\n    extent[1] = end;\n  };\n  /**\n   * Convert data to coord. Data is the rank if it has an ordinal scale\n   */\n  Axis.prototype.dataToCoord = function (data, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n    data = scale.normalize(scale.parse(data));\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n    return linearMap(data, NORMALIZED_EXTENT, extent, clamp);\n  };\n  /**\n   * Convert coord to data. Data is the rank if it has an ordinal scale\n   */\n  Axis.prototype.coordToData = function (coord, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n    var t = linearMap(coord, extent, NORMALIZED_EXTENT, clamp);\n    return this.scale.scale(t);\n  };\n  /**\n   * Convert pixel point to data in axis\n   */\n  Axis.prototype.pointToData = function (point, clamp) {\n    // Should be implemented in derived class if necessary.\n    return;\n  };\n  /**\n   * Different from `zrUtil.map(axis.getTicks(), axis.dataToCoord, axis)`,\n   * `axis.getTicksCoords` considers `onBand`, which is used by\n   * `boundaryGap:true` of category axis and splitLine and splitArea.\n   * @param opt.tickModel default: axis.model.getModel('axisTick')\n   * @param opt.clamp If `true`, the first and the last\n   *        tick must be at the axis end points. Otherwise, clip ticks\n   *        that outside the axis extent.\n   */\n  Axis.prototype.getTicksCoords = function (opt) {\n    opt = opt || {};\n    var tickModel = opt.tickModel || this.getTickModel();\n    var result = createAxisTicks(this, tickModel, {\n      breakTicks: opt.breakTicks,\n      pruneByBreak: opt.pruneByBreak\n    });\n    var ticks = result.ticks;\n    var ticksCoords = map(ticks, function (tickVal) {\n      return {\n        coord: this.dataToCoord(this.scale.type === 'ordinal' ? this.scale.getRawOrdinalNumber(tickVal) : tickVal),\n        tickValue: tickVal\n      };\n    }, this);\n    var alignWithLabel = tickModel.get('alignWithLabel');\n    fixOnBandTicksCoords(this, ticksCoords, alignWithLabel, opt.clamp);\n    return ticksCoords;\n  };\n  Axis.prototype.getMinorTicksCoords = function () {\n    if (this.scale.type === 'ordinal') {\n      // Category axis doesn't support minor ticks\n      return [];\n    }\n    var minorTickModel = this.model.getModel('minorTick');\n    var splitNumber = minorTickModel.get('splitNumber');\n    // Protection.\n    if (!(splitNumber > 0 && splitNumber < 100)) {\n      splitNumber = 5;\n    }\n    var minorTicks = this.scale.getMinorTicks(splitNumber);\n    var minorTicksCoords = map(minorTicks, function (minorTicksGroup) {\n      return map(minorTicksGroup, function (minorTick) {\n        return {\n          coord: this.dataToCoord(minorTick),\n          tickValue: minorTick\n        };\n      }, this);\n    }, this);\n    return minorTicksCoords;\n  };\n  Axis.prototype.getViewLabels = function (ctx) {\n    ctx = ctx || createAxisLabelsComputingContext(AxisTickLabelComputingKind.determine);\n    return createAxisLabels(this, ctx).labels;\n  };\n  Axis.prototype.getLabelModel = function () {\n    return this.model.getModel('axisLabel');\n  };\n  /**\n   * Notice here we only get the default tick model. For splitLine\n   * or splitArea, we should pass the splitLineModel or splitAreaModel\n   * manually when calling `getTicksCoords`.\n   * In GL, this method may be overridden to:\n   * `axisModel.getModel('axisTick', grid3DModel.getModel('axisTick'));`\n   */\n  Axis.prototype.getTickModel = function () {\n    return this.model.getModel('axisTick');\n  };\n  /**\n   * Get width of band\n   */\n  Axis.prototype.getBandWidth = function () {\n    var axisExtent = this._extent;\n    var dataExtent = this.scale.getExtent();\n    var len = dataExtent[1] - dataExtent[0] + (this.onBand ? 1 : 0);\n    // Fix #2728, avoid NaN when only one data.\n    len === 0 && (len = 1);\n    var size = Math.abs(axisExtent[1] - axisExtent[0]);\n    return Math.abs(size) / len;\n  };\n  /**\n   * Only be called in category axis.\n   * Can be overridden, consider other axes like in 3D.\n   * @return Auto interval for cateogry axis tick and label\n   */\n  Axis.prototype.calculateCategoryInterval = function (ctx) {\n    ctx = ctx || createAxisLabelsComputingContext(AxisTickLabelComputingKind.determine);\n    return calculateCategoryInterval(this, ctx);\n  };\n  return Axis;\n}();\nfunction fixExtentWithBands(extent, nTick) {\n  var size = extent[1] - extent[0];\n  var len = nTick;\n  var margin = size / len / 2;\n  extent[0] += margin;\n  extent[1] -= margin;\n}\n// If axis has labels [1, 2, 3, 4]. Bands on the axis are\n// |---1---|---2---|---3---|---4---|.\n// So the displayed ticks and splitLine/splitArea should between\n// each data item, otherwise cause misleading (e.g., split tow bars\n// of a single data item when there are two bar series).\n// Also consider if tickCategoryInterval > 0 and onBand, ticks and\n// splitLine/spliteArea should layout appropriately corresponding\n// to displayed labels. (So we should not use `getBandWidth` in this\n// case).\nfunction fixOnBandTicksCoords(axis, ticksCoords, alignWithLabel, clamp) {\n  var ticksLen = ticksCoords.length;\n  if (!axis.onBand || alignWithLabel || !ticksLen) {\n    return;\n  }\n  var axisExtent = axis.getExtent();\n  var last;\n  var diffSize;\n  if (ticksLen === 1) {\n    ticksCoords[0].coord = axisExtent[0];\n    ticksCoords[0].onBand = true;\n    last = ticksCoords[1] = {\n      coord: axisExtent[1],\n      tickValue: ticksCoords[0].tickValue,\n      onBand: true\n    };\n  } else {\n    var crossLen = ticksCoords[ticksLen - 1].tickValue - ticksCoords[0].tickValue;\n    var shift_1 = (ticksCoords[ticksLen - 1].coord - ticksCoords[0].coord) / crossLen;\n    each(ticksCoords, function (ticksItem) {\n      ticksItem.coord -= shift_1 / 2;\n      ticksItem.onBand = true;\n    });\n    var dataExtent = axis.scale.getExtent();\n    diffSize = 1 + dataExtent[1] - ticksCoords[ticksLen - 1].tickValue;\n    last = {\n      coord: ticksCoords[ticksLen - 1].coord + shift_1 * diffSize,\n      tickValue: dataExtent[1] + 1,\n      onBand: true\n    };\n    ticksCoords.push(last);\n  }\n  var inverse = axisExtent[0] > axisExtent[1];\n  // Handling clamp.\n  if (littleThan(ticksCoords[0].coord, axisExtent[0])) {\n    clamp ? ticksCoords[0].coord = axisExtent[0] : ticksCoords.shift();\n  }\n  if (clamp && littleThan(axisExtent[0], ticksCoords[0].coord)) {\n    ticksCoords.unshift({\n      coord: axisExtent[0],\n      onBand: true\n    });\n  }\n  if (littleThan(axisExtent[1], last.coord)) {\n    clamp ? last.coord = axisExtent[1] : ticksCoords.pop();\n  }\n  if (clamp && littleThan(last.coord, axisExtent[1])) {\n    ticksCoords.push({\n      coord: axisExtent[1],\n      onBand: true\n    });\n  }\n  function littleThan(a, b) {\n    // Avoid rounding error cause calculated tick coord different with extent.\n    // It may cause an extra unnecessary tick added.\n    a = round(a);\n    b = round(b);\n    return inverse ? a > b : a < b;\n  }\n}\nexport default Axis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData.js';\nimport SeriesModel from '../../model/Series.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport { Group } from '../../util/graphic.js';\nimport tokens from '../../visual/tokens.js';\nvar LineSeriesModel = /** @class */function (_super) {\n  __extends(LineSeriesModel, _super);\n  function LineSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = LineSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n  LineSeriesModel.prototype.getInitialData = function (option) {\n    if (process.env.NODE_ENV !== 'production') {\n      var coordSys = option.coordinateSystem;\n      if (coordSys !== 'polar' && coordSys !== 'cartesian2d') {\n        throw new Error('Line not support coordinateSystem besides cartesian and polar');\n      }\n    }\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n  LineSeriesModel.prototype.getLegendIcon = function (opt) {\n    var group = new Group();\n    var line = createSymbol('line', 0, opt.itemHeight / 2, opt.itemWidth, 0, opt.lineStyle.stroke, false);\n    group.add(line);\n    line.setStyle(opt.lineStyle);\n    var visualType = this.getData().getVisual('symbol');\n    var visualRotate = this.getData().getVisual('symbolRotate');\n    var symbolType = visualType === 'none' ? 'circle' : visualType;\n    // Symbol size is 80% when there is a line\n    var size = opt.itemHeight * 0.8;\n    var symbol = createSymbol(symbolType, (opt.itemWidth - size) / 2, (opt.itemHeight - size) / 2, size, size, opt.itemStyle.fill);\n    group.add(symbol);\n    symbol.setStyle(opt.itemStyle);\n    var symbolRotate = opt.iconRotate === 'inherit' ? visualRotate : opt.iconRotate || 0;\n    symbol.rotation = symbolRotate * Math.PI / 180;\n    symbol.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n    if (symbolType.indexOf('empty') > -1) {\n      symbol.style.stroke = symbol.style.fill;\n      symbol.style.fill = tokens.color.neutral00;\n      symbol.style.lineWidth = 2;\n    }\n    return group;\n  };\n  LineSeriesModel.type = 'series.line';\n  LineSeriesModel.dependencies = ['grid', 'polar'];\n  LineSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 3,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    clip: true,\n    label: {\n      position: 'top'\n    },\n    // itemStyle: {\n    // },\n    endLabel: {\n      show: false,\n      valueAnimation: true,\n      distance: 8\n    },\n    lineStyle: {\n      width: 2,\n      type: 'solid'\n    },\n    emphasis: {\n      scale: true\n    },\n    // areaStyle: {\n    // origin of areaStyle. Valid values:\n    // `'auto'/null/undefined`: from axisLine to data\n    // `'start'`: from min to data\n    // `'end'`: from data to max\n    // origin: 'auto'\n    // },\n    // false, 'start', 'end', 'middle'\n    step: false,\n    // Disabled if step is true\n    smooth: false,\n    smoothMonotone: null,\n    symbol: 'emptyCircle',\n    symbolSize: 6,\n    symbolRotate: null,\n    showSymbol: true,\n    // `false`: follow the label interval strategy.\n    // `true`: show all symbols.\n    // `'auto'`: If possible, show all symbols, otherwise\n    //           follow the label interval strategy.\n    showAllSymbol: 'auto',\n    // Whether to connect break point.\n    connectNulls: false,\n    // Sampling for large data. Can be: 'average', 'max', 'min', 'sum', 'lttb'.\n    sampling: 'none',\n    animationEasing: 'linear',\n    // Disable progressive\n    progressive: 0,\n    hoverLayerThreshold: Infinity,\n    universalTransition: {\n      divideShape: 'clone'\n    },\n    triggerLineEvent: false\n  };\n  return LineSeriesModel;\n}(SeriesModel);\nexport default LineSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { isArray } from 'zrender/lib/core/util.js';\n/**\n * @return label string. Not null/undefined\n */\nexport function getDefaultLabel(data, dataIndex) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n  var len = labelDims.length;\n  // Simple optimization (in lots of cases, label dims length is 1)\n  if (len === 1) {\n    var rawVal = retrieveRawValue(data, dataIndex, labelDims[0]);\n    return rawVal != null ? rawVal + '' : null;\n  } else if (len) {\n    var vals = [];\n    for (var i = 0; i < labelDims.length; i++) {\n      vals.push(retrieveRawValue(data, dataIndex, labelDims[i]));\n    }\n    return vals.join(' ');\n  }\n}\nexport function getDefaultInterpolatedLabel(data, interpolatedValue) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n  if (!isArray(interpolatedValue)) {\n    return interpolatedValue + '';\n  }\n  var vals = [];\n  for (var i = 0; i < labelDims.length; i++) {\n    var dimIndex = data.getDimensionIndex(labelDims[i]);\n    if (dimIndex >= 0) {\n      vals.push(interpolatedValue[dimIndex]);\n    }\n  }\n  return vals.join(' ');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis } from '../../util/states.js';\nimport { getDefaultLabel } from './labelHelper.js';\nimport { extend, retrieve2 } from 'zrender/lib/core/util.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar Symbol = /** @class */function (_super) {\n  __extends(Symbol, _super);\n  function Symbol(data, idx, seriesScope, opts) {\n    var _this = _super.call(this) || this;\n    _this.updateData(data, idx, seriesScope, opts);\n    return _this;\n  }\n  Symbol.prototype._createSymbol = function (symbolType, data, idx, symbolSize, z2, keepAspect) {\n    // Remove paths created before\n    this.removeAll();\n    // let symbolPath = createSymbol(\n    //     symbolType, -0.5, -0.5, 1, 1, color\n    // );\n    // If width/height are set too small (e.g., set to 1) on ios10\n    // and macOS Sierra, a circle stroke become a rect, no matter what\n    // the scale is set. So we set width/height as 2. See #4150.\n    var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, null, keepAspect);\n    symbolPath.attr({\n      z2: retrieve2(z2, 100),\n      culling: true,\n      scaleX: symbolSize[0] / 2,\n      scaleY: symbolSize[1] / 2\n    });\n    // Rewrite drift method\n    symbolPath.drift = driftSymbol;\n    this._symbolType = symbolType;\n    this.add(symbolPath);\n  };\n  /**\n   * Stop animation\n   * @param {boolean} toLastFrame\n   */\n  Symbol.prototype.stopSymbolAnimation = function (toLastFrame) {\n    this.childAt(0).stopAnimation(null, toLastFrame);\n  };\n  Symbol.prototype.getSymbolType = function () {\n    return this._symbolType;\n  };\n  /**\n   * FIXME:\n   * Caution: This method breaks the encapsulation of this module,\n   * but it indeed brings convenience. So do not use the method\n   * unless you detailedly know all the implements of `Symbol`,\n   * especially animation.\n   *\n   * Get symbol path element.\n   */\n  Symbol.prototype.getSymbolPath = function () {\n    return this.childAt(0);\n  };\n  /**\n   * Highlight symbol\n   */\n  Symbol.prototype.highlight = function () {\n    enterEmphasis(this.childAt(0));\n  };\n  /**\n   * Downplay symbol\n   */\n  Symbol.prototype.downplay = function () {\n    leaveEmphasis(this.childAt(0));\n  };\n  /**\n   * @param {number} zlevel\n   * @param {number} z\n   */\n  Symbol.prototype.setZ = function (zlevel, z) {\n    var symbolPath = this.childAt(0);\n    symbolPath.zlevel = zlevel;\n    symbolPath.z = z;\n  };\n  Symbol.prototype.setDraggable = function (draggable, hasCursorOption) {\n    var symbolPath = this.childAt(0);\n    symbolPath.draggable = draggable;\n    symbolPath.cursor = !hasCursorOption && draggable ? 'move' : symbolPath.cursor;\n  };\n  /**\n   * Update symbol properties\n   */\n  Symbol.prototype.updateData = function (data, idx, seriesScope, opts) {\n    this.silent = false;\n    var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n    var seriesModel = data.hostModel;\n    var symbolSize = Symbol.getSymbolSize(data, idx);\n    var z2 = Symbol.getSymbolZ2(data, idx);\n    var isInit = symbolType !== this._symbolType;\n    var disableAnimation = opts && opts.disableAnimation;\n    if (isInit) {\n      var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n      this._createSymbol(symbolType, data, idx, symbolSize, z2, keepAspect);\n    } else {\n      var symbolPath = this.childAt(0);\n      symbolPath.silent = false;\n      var target = {\n        scaleX: symbolSize[0] / 2,\n        scaleY: symbolSize[1] / 2\n      };\n      disableAnimation ? symbolPath.attr(target) : graphic.updateProps(symbolPath, target, seriesModel, idx);\n      saveOldStyle(symbolPath);\n    }\n    this._updateCommon(data, idx, symbolSize, seriesScope, opts);\n    if (isInit) {\n      var symbolPath = this.childAt(0);\n      if (!disableAnimation) {\n        var target = {\n          scaleX: this._sizeX,\n          scaleY: this._sizeY,\n          style: {\n            // Always fadeIn. Because it has fadeOut animation when symbol is removed..\n            opacity: symbolPath.style.opacity\n          }\n        };\n        symbolPath.scaleX = symbolPath.scaleY = 0;\n        symbolPath.style.opacity = 0;\n        graphic.initProps(symbolPath, target, seriesModel, idx);\n      }\n    }\n    if (disableAnimation) {\n      // Must stop leave transition manually if don't call initProps or updateProps.\n      this.childAt(0).stopAnimation('leave');\n    }\n  };\n  Symbol.prototype._updateCommon = function (data, idx, symbolSize, seriesScope, opts) {\n    var symbolPath = this.childAt(0);\n    var seriesModel = data.hostModel;\n    var emphasisItemStyle;\n    var blurItemStyle;\n    var selectItemStyle;\n    var focus;\n    var blurScope;\n    var emphasisDisabled;\n    var labelStatesModels;\n    var hoverScale;\n    var cursorStyle;\n    if (seriesScope) {\n      emphasisItemStyle = seriesScope.emphasisItemStyle;\n      blurItemStyle = seriesScope.blurItemStyle;\n      selectItemStyle = seriesScope.selectItemStyle;\n      focus = seriesScope.focus;\n      blurScope = seriesScope.blurScope;\n      labelStatesModels = seriesScope.labelStatesModels;\n      hoverScale = seriesScope.hoverScale;\n      cursorStyle = seriesScope.cursorStyle;\n      emphasisDisabled = seriesScope.emphasisDisabled;\n    }\n    if (!seriesScope || data.hasItemOption) {\n      var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n      selectItemStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n      blurItemStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n      emphasisDisabled = emphasisModel.get('disabled');\n      labelStatesModels = getLabelStatesModels(itemModel);\n      hoverScale = emphasisModel.getShallow('scale');\n      cursorStyle = itemModel.getShallow('cursor');\n    }\n    var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n    symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n    var symbolOffset = normalizeSymbolOffset(data.getItemVisual(idx, 'symbolOffset'), symbolSize);\n    if (symbolOffset) {\n      symbolPath.x = symbolOffset[0];\n      symbolPath.y = symbolOffset[1];\n    }\n    cursorStyle && symbolPath.attr('cursor', cursorStyle);\n    var symbolStyle = data.getItemVisual(idx, 'style');\n    var visualColor = symbolStyle.fill;\n    if (symbolPath instanceof ZRImage) {\n      var pathStyle = symbolPath.style;\n      symbolPath.useStyle(extend({\n        // TODO other properties like x, y ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, symbolStyle));\n    } else {\n      if (symbolPath.__isEmptyBrush) {\n        // fill and stroke will be swapped if it's empty.\n        // So we cloned a new style to avoid it affecting the original style in visual storage.\n        // TODO Better implementation. No empty logic!\n        symbolPath.useStyle(extend({}, symbolStyle));\n      } else {\n        symbolPath.useStyle(symbolStyle);\n      }\n      // Disable decal because symbol scale will been applied on the decal.\n      symbolPath.style.decal = null;\n      symbolPath.setColor(visualColor, opts && opts.symbolInnerColor);\n      symbolPath.style.strokeNoScale = true;\n    }\n    var liftZ = data.getItemVisual(idx, 'liftZ');\n    var z2Origin = this._z2;\n    if (liftZ != null) {\n      if (z2Origin == null) {\n        this._z2 = symbolPath.z2;\n        symbolPath.z2 += liftZ;\n      }\n    } else if (z2Origin != null) {\n      symbolPath.z2 = z2Origin;\n      this._z2 = null;\n    }\n    var useNameLabel = opts && opts.useNameLabel;\n    setLabelStyle(symbolPath, labelStatesModels, {\n      labelFetcher: seriesModel,\n      labelDataIndex: idx,\n      defaultText: getLabelDefaultText,\n      inheritColor: visualColor,\n      defaultOpacity: symbolStyle.opacity\n    });\n    // Do not execute util needed.\n    function getLabelDefaultText(idx) {\n      return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n    }\n    this._sizeX = symbolSize[0] / 2;\n    this._sizeY = symbolSize[1] / 2;\n    var emphasisState = symbolPath.ensureState('emphasis');\n    emphasisState.style = emphasisItemStyle;\n    symbolPath.ensureState('select').style = selectItemStyle;\n    symbolPath.ensureState('blur').style = blurItemStyle;\n    // null / undefined / true means to use default strategy.\n    // 0 / false / negative number / NaN / Infinity means no scale.\n    var scaleRatio = hoverScale == null || hoverScale === true ? Math.max(1.1, 3 / this._sizeY)\n    // PENDING: restrict hoverScale > 1? It seems unreasonable to scale down\n    : isFinite(hoverScale) && hoverScale > 0 ? +hoverScale : 1;\n    // always set scale to allow resetting\n    emphasisState.scaleX = this._sizeX * scaleRatio;\n    emphasisState.scaleY = this._sizeY * scaleRatio;\n    this.setSymbolScale(1);\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n  };\n  Symbol.prototype.setSymbolScale = function (scale) {\n    this.scaleX = this.scaleY = scale;\n  };\n  Symbol.prototype.fadeOut = function (cb, seriesModel, opt) {\n    var symbolPath = this.childAt(0);\n    var dataIndex = getECData(this).dataIndex;\n    var animationOpt = opt && opt.animation;\n    // Avoid mistaken hover when fading out\n    this.silent = symbolPath.silent = true;\n    // Not show text when animating\n    if (opt && opt.fadeLabel) {\n      var textContent = symbolPath.getTextContent();\n      if (textContent) {\n        graphic.removeElement(textContent, {\n          style: {\n            opacity: 0\n          }\n        }, seriesModel, {\n          dataIndex: dataIndex,\n          removeOpt: animationOpt,\n          cb: function () {\n            symbolPath.removeTextContent();\n          }\n        });\n      }\n    } else {\n      symbolPath.removeTextContent();\n    }\n    graphic.removeElement(symbolPath, {\n      style: {\n        opacity: 0\n      },\n      scaleX: 0,\n      scaleY: 0\n    }, seriesModel, {\n      dataIndex: dataIndex,\n      cb: cb,\n      removeOpt: animationOpt\n    });\n  };\n  Symbol.getSymbolSize = function (data, idx) {\n    return normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n  };\n  Symbol.getSymbolZ2 = function (data, idx) {\n    return data.getItemVisual(idx, 'z2');\n  };\n  return Symbol;\n}(graphic.Group);\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\nexport default Symbol;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic.js';\nimport SymbolClz from './Symbol.js';\nimport { isObject } from 'zrender/lib/core/util.js';\nimport { getLabelStatesModels } from '../../label/labelStyle.js';\nfunction symbolNeedsDraw(data, point, idx, opt) {\n  return point && !isNaN(point[0]) && !isNaN(point[1]) && !(opt.isIgnore && opt.isIgnore(idx))\n  // We do not set clipShape on group, because it will cut part of\n  // the symbol element shape. We use the same clip shape here as\n  // the line clip.\n  && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1])) && data.getItemVisual(idx, 'symbol') !== 'none';\n}\nfunction normalizeUpdateOpt(opt) {\n  if (opt != null && !isObject(opt)) {\n    opt = {\n      isIgnore: opt\n    };\n  }\n  return opt || {};\n}\nfunction makeSeriesScope(data) {\n  var seriesModel = data.hostModel;\n  var emphasisModel = seriesModel.getModel('emphasis');\n  return {\n    emphasisItemStyle: emphasisModel.getModel('itemStyle').getItemStyle(),\n    blurItemStyle: seriesModel.getModel(['blur', 'itemStyle']).getItemStyle(),\n    selectItemStyle: seriesModel.getModel(['select', 'itemStyle']).getItemStyle(),\n    focus: emphasisModel.get('focus'),\n    blurScope: emphasisModel.get('blurScope'),\n    emphasisDisabled: emphasisModel.get('disabled'),\n    hoverScale: emphasisModel.get('scale'),\n    labelStatesModels: getLabelStatesModels(seriesModel),\n    cursorStyle: seriesModel.get('cursor')\n  };\n}\nvar SymbolDraw = /** @class */function () {\n  function SymbolDraw(SymbolCtor) {\n    this.group = new graphic.Group();\n    this._SymbolCtor = SymbolCtor || SymbolClz;\n  }\n  /**\n   * Update symbols draw by new data\n   */\n  SymbolDraw.prototype.updateData = function (data, opt) {\n    // Remove progressive els.\n    this._progressiveEls = null;\n    opt = normalizeUpdateOpt(opt);\n    var group = this.group;\n    var seriesModel = data.hostModel;\n    var oldData = this._data;\n    var SymbolCtor = this._SymbolCtor;\n    var disableAnimation = opt.disableAnimation;\n    var seriesScope = makeSeriesScope(data);\n    var symbolUpdateOpt = {\n      disableAnimation: disableAnimation\n    };\n    var getSymbolPoint = opt.getSymbolPoint || function (idx) {\n      return data.getItemLayout(idx);\n    };\n    // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n    if (!oldData) {\n      group.removeAll();\n    }\n    data.diff(oldData).add(function (newIdx) {\n      var point = getSymbolPoint(newIdx);\n      if (symbolNeedsDraw(data, point, newIdx, opt)) {\n        var symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n        data.setItemGraphicEl(newIdx, symbolEl);\n        group.add(symbolEl);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n      var point = getSymbolPoint(newIdx);\n      if (!symbolNeedsDraw(data, point, newIdx, opt)) {\n        group.remove(symbolEl);\n        return;\n      }\n      var newSymbolType = data.getItemVisual(newIdx, 'symbol') || 'circle';\n      var oldSymbolType = symbolEl && symbolEl.getSymbolType && symbolEl.getSymbolType();\n      if (!symbolEl\n      // Create a new if symbol type changed.\n      || oldSymbolType && oldSymbolType !== newSymbolType) {\n        group.remove(symbolEl);\n        symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n      } else {\n        symbolEl.updateData(data, newIdx, seriesScope, symbolUpdateOpt);\n        var target = {\n          x: point[0],\n          y: point[1]\n        };\n        disableAnimation ? symbolEl.attr(target) : graphic.updateProps(symbolEl, target, seriesModel);\n      }\n      // Add back\n      group.add(symbolEl);\n      data.setItemGraphicEl(newIdx, symbolEl);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && el.fadeOut(function () {\n        group.remove(el);\n      }, seriesModel);\n    }).execute();\n    this._getSymbolPoint = getSymbolPoint;\n    this._data = data;\n  };\n  ;\n  SymbolDraw.prototype.updateLayout = function () {\n    var _this = this;\n    var data = this._data;\n    if (data) {\n      // Not use animation\n      data.eachItemGraphicEl(function (el, idx) {\n        var point = _this._getSymbolPoint(idx);\n        el.setPosition(point);\n        el.markRedraw();\n      });\n    }\n  };\n  ;\n  SymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this._seriesScope = makeSeriesScope(data);\n    this._data = null;\n    this.group.removeAll();\n  };\n  ;\n  /**\n   * Update symbols draw by new data\n   */\n  SymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    // Clear\n    this._progressiveEls = [];\n    opt = normalizeUpdateOpt(opt);\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var point = data.getItemLayout(idx);\n      if (symbolNeedsDraw(data, point, idx, opt)) {\n        var el = new this._SymbolCtor(data, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        el.setPosition(point);\n        this.group.add(el);\n        data.setItemGraphicEl(idx, el);\n        this._progressiveEls.push(el);\n      }\n    }\n  };\n  ;\n  SymbolDraw.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n  SymbolDraw.prototype.remove = function (enableAnimation) {\n    var group = this.group;\n    var data = this._data;\n    // Incremental model do not have this._data.\n    if (data && enableAnimation) {\n      data.eachItemGraphicEl(function (el) {\n        el.fadeOut(function () {\n          group.remove(el);\n        }, data.hostModel);\n      });\n    } else {\n      group.removeAll();\n    }\n  };\n  ;\n  return SymbolDraw;\n}();\nexport default SymbolDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isDimensionStacked } from '../../data/helper/dataStackHelper.js';\nimport { isNumber, map } from 'zrender/lib/core/util.js';\nexport function prepareDataCoordInfo(coordSys, data, valueOrigin) {\n  var baseAxis = coordSys.getBaseAxis();\n  var valueAxis = coordSys.getOtherAxis(baseAxis);\n  var valueStart = getValueStart(valueAxis, valueOrigin);\n  var baseAxisDim = baseAxis.dim;\n  var valueAxisDim = valueAxis.dim;\n  var valueDim = data.mapDimension(valueAxisDim);\n  var baseDim = data.mapDimension(baseAxisDim);\n  var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n  var dims = map(coordSys.dimensions, function (coordDim) {\n    return data.mapDimension(coordDim);\n  });\n  var stacked = false;\n  var stackResultDim = data.getCalculationInfo('stackResultDimension');\n  if (isDimensionStacked(data, dims[0] /* , dims[1] */)) {\n    // jshint ignore:line\n    stacked = true;\n    dims[0] = stackResultDim;\n  }\n  if (isDimensionStacked(data, dims[1] /* , dims[0] */)) {\n    // jshint ignore:line\n    stacked = true;\n    dims[1] = stackResultDim;\n  }\n  return {\n    dataDimsForPoint: dims,\n    valueStart: valueStart,\n    valueAxisDim: valueAxisDim,\n    baseAxisDim: baseAxisDim,\n    stacked: !!stacked,\n    valueDim: valueDim,\n    baseDim: baseDim,\n    baseDataOffset: baseDataOffset,\n    stackedOverDimension: data.getCalculationInfo('stackedOverDimension')\n  };\n}\nfunction getValueStart(valueAxis, valueOrigin) {\n  var valueStart = 0;\n  var extent = valueAxis.scale.getExtent();\n  if (valueOrigin === 'start') {\n    valueStart = extent[0];\n  } else if (valueOrigin === 'end') {\n    valueStart = extent[1];\n  }\n  // If origin is specified as a number, use it as\n  // valueStart directly\n  else if (isNumber(valueOrigin) && !isNaN(valueOrigin)) {\n    valueStart = valueOrigin;\n  }\n  // auto\n  else {\n    // Both positive\n    if (extent[0] > 0) {\n      valueStart = extent[0];\n    }\n    // Both negative\n    else if (extent[1] < 0) {\n      valueStart = extent[1];\n    }\n    // If is one positive, and one negative, onZero shall be true\n  }\n  return valueStart;\n}\nexport function getStackedOnPoint(dataCoordInfo, coordSys, data, idx) {\n  var value = NaN;\n  if (dataCoordInfo.stacked) {\n    value = data.get(data.getCalculationInfo('stackedOverDimension'), idx);\n  }\n  if (isNaN(value)) {\n    value = dataCoordInfo.valueStart;\n  }\n  var baseDataOffset = dataCoordInfo.baseDataOffset;\n  var stackedData = [];\n  stackedData[baseDataOffset] = data.get(dataCoordInfo.baseDim, idx);\n  stackedData[1 - baseDataOffset] = value;\n  return coordSys.dataToPoint(stackedData);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { prepareDataCoordInfo, getStackedOnPoint } from './helper.js';\nimport { createFloat32Array } from '../../util/vendor.js';\nfunction diffData(oldData, newData) {\n  var diffResult = [];\n  newData.diff(oldData).add(function (idx) {\n    diffResult.push({\n      cmd: '+',\n      idx: idx\n    });\n  }).update(function (newIdx, oldIdx) {\n    diffResult.push({\n      cmd: '=',\n      idx: oldIdx,\n      idx1: newIdx\n    });\n  }).remove(function (idx) {\n    diffResult.push({\n      cmd: '-',\n      idx: idx\n    });\n  }).execute();\n  return diffResult;\n}\nexport default function lineAnimationDiff(oldData, newData, oldStackedOnPoints, newStackedOnPoints, oldCoordSys, newCoordSys, oldValueOrigin, newValueOrigin) {\n  var diff = diffData(oldData, newData);\n  // let newIdList = newData.mapArray(newData.getId);\n  // let oldIdList = oldData.mapArray(oldData.getId);\n  // convertToIntId(newIdList, oldIdList);\n  // // FIXME One data ?\n  // diff = arrayDiff(oldIdList, newIdList);\n  var currPoints = [];\n  var nextPoints = [];\n  // Points for stacking base line\n  var currStackedPoints = [];\n  var nextStackedPoints = [];\n  var status = [];\n  var sortedIndices = [];\n  var rawIndices = [];\n  var newDataOldCoordInfo = prepareDataCoordInfo(oldCoordSys, newData, oldValueOrigin);\n  // const oldDataNewCoordInfo = prepareDataCoordInfo(newCoordSys, oldData, newValueOrigin);\n  var oldPoints = oldData.getLayout('points') || [];\n  var newPoints = newData.getLayout('points') || [];\n  for (var i = 0; i < diff.length; i++) {\n    var diffItem = diff[i];\n    var pointAdded = true;\n    var oldIdx2 = void 0;\n    var newIdx2 = void 0;\n    // FIXME, animation is not so perfect when dataZoom window moves fast\n    // Which is in case remvoing or add more than one data in the tail or head\n    switch (diffItem.cmd) {\n      case '=':\n        oldIdx2 = diffItem.idx * 2;\n        newIdx2 = diffItem.idx1 * 2;\n        var currentX = oldPoints[oldIdx2];\n        var currentY = oldPoints[oldIdx2 + 1];\n        var nextX = newPoints[newIdx2];\n        var nextY = newPoints[newIdx2 + 1];\n        // If previous data is NaN, use next point directly\n        if (isNaN(currentX) || isNaN(currentY)) {\n          currentX = nextX;\n          currentY = nextY;\n        }\n        currPoints.push(currentX, currentY);\n        nextPoints.push(nextX, nextY);\n        currStackedPoints.push(oldStackedOnPoints[oldIdx2], oldStackedOnPoints[oldIdx2 + 1]);\n        nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\n        rawIndices.push(newData.getRawIndex(diffItem.idx1));\n        break;\n      case '+':\n        var newIdx = diffItem.idx;\n        var newDataDimsForPoint = newDataOldCoordInfo.dataDimsForPoint;\n        var oldPt = oldCoordSys.dataToPoint([newData.get(newDataDimsForPoint[0], newIdx), newData.get(newDataDimsForPoint[1], newIdx)]);\n        newIdx2 = newIdx * 2;\n        currPoints.push(oldPt[0], oldPt[1]);\n        nextPoints.push(newPoints[newIdx2], newPoints[newIdx2 + 1]);\n        var stackedOnPoint = getStackedOnPoint(newDataOldCoordInfo, oldCoordSys, newData, newIdx);\n        currStackedPoints.push(stackedOnPoint[0], stackedOnPoint[1]);\n        nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\n        rawIndices.push(newData.getRawIndex(newIdx));\n        break;\n      case '-':\n        pointAdded = false;\n    }\n    // Original indices\n    if (pointAdded) {\n      status.push(diffItem);\n      sortedIndices.push(sortedIndices.length);\n    }\n  }\n  // Diff result may be crossed if all items are changed\n  // Sort by data index\n  sortedIndices.sort(function (a, b) {\n    return rawIndices[a] - rawIndices[b];\n  });\n  var len = currPoints.length;\n  var sortedCurrPoints = createFloat32Array(len);\n  var sortedNextPoints = createFloat32Array(len);\n  var sortedCurrStackedPoints = createFloat32Array(len);\n  var sortedNextStackedPoints = createFloat32Array(len);\n  var sortedStatus = [];\n  for (var i = 0; i < sortedIndices.length; i++) {\n    var idx = sortedIndices[i];\n    var i2 = i * 2;\n    var idx2 = idx * 2;\n    sortedCurrPoints[i2] = currPoints[idx2];\n    sortedCurrPoints[i2 + 1] = currPoints[idx2 + 1];\n    sortedNextPoints[i2] = nextPoints[idx2];\n    sortedNextPoints[i2 + 1] = nextPoints[idx2 + 1];\n    sortedCurrStackedPoints[i2] = currStackedPoints[idx2];\n    sortedCurrStackedPoints[i2 + 1] = currStackedPoints[idx2 + 1];\n    sortedNextStackedPoints[i2] = nextStackedPoints[idx2];\n    sortedNextStackedPoints[i2 + 1] = nextStackedPoints[idx2 + 1];\n    sortedStatus[i] = status[idx];\n  }\n  return {\n    current: sortedCurrPoints,\n    next: sortedNextPoints,\n    stackedOnCurrent: sortedCurrStackedPoints,\n    stackedOnNext: sortedNextStackedPoints,\n    status: sortedStatus\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n// Poly path support NaN point\nimport Path from 'zrender/lib/graphic/Path.js';\nimport PathProxy from 'zrender/lib/core/PathProxy.js';\nimport { cubicRootAt, cubicAt } from 'zrender/lib/core/curve.js';\nimport tokens from '../../visual/tokens.js';\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nfunction isPointNull(x, y) {\n  return isNaN(x) || isNaN(y);\n}\n/**\n * Draw smoothed line in non-monotone, in may cause undesired curve in extreme\n * situations. This should be used when points are non-monotone neither in x or\n * y dimension.\n */\nfunction drawSegment(ctx, points, start, segLen, allLen, dir, smooth, smoothMonotone, connectNulls) {\n  var prevX;\n  var prevY;\n  var cpx0;\n  var cpy0;\n  var cpx1;\n  var cpy1;\n  var idx = start;\n  var k = 0;\n  for (; k < segLen; k++) {\n    var x = points[idx * 2];\n    var y = points[idx * 2 + 1];\n    if (idx >= allLen || idx < 0) {\n      break;\n    }\n    if (isPointNull(x, y)) {\n      if (connectNulls) {\n        idx += dir;\n        continue;\n      }\n      break;\n    }\n    if (idx === start) {\n      ctx[dir > 0 ? 'moveTo' : 'lineTo'](x, y);\n      cpx0 = x;\n      cpy0 = y;\n    } else {\n      var dx = x - prevX;\n      var dy = y - prevY;\n      // Ignore tiny segment.\n      if (dx * dx + dy * dy < 0.5) {\n        idx += dir;\n        continue;\n      }\n      if (smooth > 0) {\n        var nextIdx = idx + dir;\n        var nextX = points[nextIdx * 2];\n        var nextY = points[nextIdx * 2 + 1];\n        // Ignore duplicate point\n        while (nextX === x && nextY === y && k < segLen) {\n          k++;\n          nextIdx += dir;\n          idx += dir;\n          nextX = points[nextIdx * 2];\n          nextY = points[nextIdx * 2 + 1];\n          x = points[idx * 2];\n          y = points[idx * 2 + 1];\n          dx = x - prevX;\n          dy = y - prevY;\n        }\n        var tmpK = k + 1;\n        if (connectNulls) {\n          // Find next point not null\n          while (isPointNull(nextX, nextY) && tmpK < segLen) {\n            tmpK++;\n            nextIdx += dir;\n            nextX = points[nextIdx * 2];\n            nextY = points[nextIdx * 2 + 1];\n          }\n        }\n        var ratioNextSeg = 0.5;\n        var vx = 0;\n        var vy = 0;\n        var nextCpx0 = void 0;\n        var nextCpy0 = void 0;\n        // Is last point\n        if (tmpK >= segLen || isPointNull(nextX, nextY)) {\n          cpx1 = x;\n          cpy1 = y;\n        } else {\n          vx = nextX - prevX;\n          vy = nextY - prevY;\n          var dx0 = x - prevX;\n          var dx1 = nextX - x;\n          var dy0 = y - prevY;\n          var dy1 = nextY - y;\n          var lenPrevSeg = void 0;\n          var lenNextSeg = void 0;\n          if (smoothMonotone === 'x') {\n            lenPrevSeg = Math.abs(dx0);\n            lenNextSeg = Math.abs(dx1);\n            var dir_1 = vx > 0 ? 1 : -1;\n            cpx1 = x - dir_1 * lenPrevSeg * smooth;\n            cpy1 = y;\n            nextCpx0 = x + dir_1 * lenNextSeg * smooth;\n            nextCpy0 = y;\n          } else if (smoothMonotone === 'y') {\n            lenPrevSeg = Math.abs(dy0);\n            lenNextSeg = Math.abs(dy1);\n            var dir_2 = vy > 0 ? 1 : -1;\n            cpx1 = x;\n            cpy1 = y - dir_2 * lenPrevSeg * smooth;\n            nextCpx0 = x;\n            nextCpy0 = y + dir_2 * lenNextSeg * smooth;\n          } else {\n            lenPrevSeg = Math.sqrt(dx0 * dx0 + dy0 * dy0);\n            lenNextSeg = Math.sqrt(dx1 * dx1 + dy1 * dy1);\n            // Use ratio of seg length\n            ratioNextSeg = lenNextSeg / (lenNextSeg + lenPrevSeg);\n            cpx1 = x - vx * smooth * (1 - ratioNextSeg);\n            cpy1 = y - vy * smooth * (1 - ratioNextSeg);\n            // cp0 of next segment\n            nextCpx0 = x + vx * smooth * ratioNextSeg;\n            nextCpy0 = y + vy * smooth * ratioNextSeg;\n            // Smooth constraint between point and next point.\n            // Avoid exceeding extreme after smoothing.\n            nextCpx0 = mathMin(nextCpx0, mathMax(nextX, x));\n            nextCpy0 = mathMin(nextCpy0, mathMax(nextY, y));\n            nextCpx0 = mathMax(nextCpx0, mathMin(nextX, x));\n            nextCpy0 = mathMax(nextCpy0, mathMin(nextY, y));\n            // Reclaculate cp1 based on the adjusted cp0 of next seg.\n            vx = nextCpx0 - x;\n            vy = nextCpy0 - y;\n            cpx1 = x - vx * lenPrevSeg / lenNextSeg;\n            cpy1 = y - vy * lenPrevSeg / lenNextSeg;\n            // Smooth constraint between point and prev point.\n            // Avoid exceeding extreme after smoothing.\n            cpx1 = mathMin(cpx1, mathMax(prevX, x));\n            cpy1 = mathMin(cpy1, mathMax(prevY, y));\n            cpx1 = mathMax(cpx1, mathMin(prevX, x));\n            cpy1 = mathMax(cpy1, mathMin(prevY, y));\n            // Adjust next cp0 again.\n            vx = x - cpx1;\n            vy = y - cpy1;\n            nextCpx0 = x + vx * lenNextSeg / lenPrevSeg;\n            nextCpy0 = y + vy * lenNextSeg / lenPrevSeg;\n          }\n        }\n        ctx.bezierCurveTo(cpx0, cpy0, cpx1, cpy1, x, y);\n        cpx0 = nextCpx0;\n        cpy0 = nextCpy0;\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n    prevX = x;\n    prevY = y;\n    idx += dir;\n  }\n  return k;\n}\nvar ECPolylineShape = /** @class */function () {\n  function ECPolylineShape() {\n    this.smooth = 0;\n    this.smoothConstraint = true;\n  }\n  return ECPolylineShape;\n}();\nvar ECPolyline = /** @class */function (_super) {\n  __extends(ECPolyline, _super);\n  function ECPolyline(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'ec-polyline';\n    return _this;\n  }\n  ECPolyline.prototype.getDefaultStyle = function () {\n    return {\n      stroke: tokens.color.neutral99,\n      fill: null\n    };\n  };\n  ECPolyline.prototype.getDefaultShape = function () {\n    return new ECPolylineShape();\n  };\n  ECPolyline.prototype.buildPath = function (ctx, shape) {\n    var points = shape.points;\n    var i = 0;\n    var len = points.length / 2;\n    // const result = getBoundingBox(points, shape.smoothConstraint);\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n          break;\n        }\n      }\n      for (; i < len; i++) {\n        if (!isPointNull(points[i * 2], points[i * 2 + 1])) {\n          break;\n        }\n      }\n    }\n    while (i < len) {\n      i += drawSegment(ctx, points, i, len, len, 1, shape.smooth, shape.smoothMonotone, shape.connectNulls) + 1;\n    }\n  };\n  ECPolyline.prototype.getPointOn = function (xOrY, dim) {\n    if (!this.path) {\n      this.createPathProxy();\n      this.buildPath(this.path, this.shape);\n    }\n    var path = this.path;\n    var data = path.data;\n    var CMD = PathProxy.CMD;\n    var x0;\n    var y0;\n    var isDimX = dim === 'x';\n    var roots = [];\n    for (var i = 0; i < data.length;) {\n      var cmd = data[i++];\n      var x = void 0;\n      var y = void 0;\n      var x2 = void 0;\n      var y2 = void 0;\n      var x3 = void 0;\n      var y3 = void 0;\n      var t = void 0;\n      switch (cmd) {\n        case CMD.M:\n          x0 = data[i++];\n          y0 = data[i++];\n          break;\n        case CMD.L:\n          x = data[i++];\n          y = data[i++];\n          t = isDimX ? (xOrY - x0) / (x - x0) : (xOrY - y0) / (y - y0);\n          if (t <= 1 && t >= 0) {\n            var val = isDimX ? (y - y0) * t + y0 : (x - x0) * t + x0;\n            return isDimX ? [xOrY, val] : [val, xOrY];\n          }\n          x0 = x;\n          y0 = y;\n          break;\n        case CMD.C:\n          x = data[i++];\n          y = data[i++];\n          x2 = data[i++];\n          y2 = data[i++];\n          x3 = data[i++];\n          y3 = data[i++];\n          var nRoot = isDimX ? cubicRootAt(x0, x, x2, x3, xOrY, roots) : cubicRootAt(y0, y, y2, y3, xOrY, roots);\n          if (nRoot > 0) {\n            for (var i_1 = 0; i_1 < nRoot; i_1++) {\n              var t_1 = roots[i_1];\n              if (t_1 <= 1 && t_1 >= 0) {\n                var val = isDimX ? cubicAt(y0, y, y2, y3, t_1) : cubicAt(x0, x, x2, x3, t_1);\n                return isDimX ? [xOrY, val] : [val, xOrY];\n              }\n            }\n          }\n          x0 = x3;\n          y0 = y3;\n          break;\n      }\n    }\n  };\n  return ECPolyline;\n}(Path);\nexport { ECPolyline };\nvar ECPolygonShape = /** @class */function (_super) {\n  __extends(ECPolygonShape, _super);\n  function ECPolygonShape() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return ECPolygonShape;\n}(ECPolylineShape);\nvar ECPolygon = /** @class */function (_super) {\n  __extends(ECPolygon, _super);\n  function ECPolygon(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'ec-polygon';\n    return _this;\n  }\n  ECPolygon.prototype.getDefaultShape = function () {\n    return new ECPolygonShape();\n  };\n  ECPolygon.prototype.buildPath = function (ctx, shape) {\n    var points = shape.points;\n    var stackedOnPoints = shape.stackedOnPoints;\n    var i = 0;\n    var len = points.length / 2;\n    var smoothMonotone = shape.smoothMonotone;\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n          break;\n        }\n      }\n      for (; i < len; i++) {\n        if (!isPointNull(points[i * 2], points[i * 2 + 1])) {\n          break;\n        }\n      }\n    }\n    while (i < len) {\n      var k = drawSegment(ctx, points, i, len, len, 1, shape.smooth, smoothMonotone, shape.connectNulls);\n      drawSegment(ctx, stackedOnPoints, i + k - 1, k, len, -1, shape.stackedOnSmooth, smoothMonotone, shape.connectNulls);\n      i += k + 1;\n      ctx.closePath();\n    }\n  };\n  return ECPolygon;\n}(Path);\nexport { ECPolygon };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic.js';\nimport { round } from '../../util/number.js';\nimport { isFunction } from 'zrender/lib/core/util.js';\nfunction createGridClipPath(cartesian, hasAnimation, seriesModel, done, during) {\n  var rect = cartesian.getArea();\n  var x = rect.x;\n  var y = rect.y;\n  var width = rect.width;\n  var height = rect.height;\n  var lineWidth = seriesModel.get(['lineStyle', 'width']) || 0;\n  // Expand the clip path a bit to avoid the border is clipped and looks thinner\n  x -= lineWidth / 2;\n  y -= lineWidth / 2;\n  width += lineWidth;\n  height += lineWidth;\n  // fix: https://github.com/apache/incubator-echarts/issues/11369\n  width = Math.ceil(width);\n  if (x !== Math.floor(x)) {\n    x = Math.floor(x);\n    // if no extra 1px on `width`, it will still be clipped since `x` is floored\n    width++;\n  }\n  var clipPath = new graphic.Rect({\n    shape: {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    }\n  });\n  if (hasAnimation) {\n    var baseAxis = cartesian.getBaseAxis();\n    var isHorizontal = baseAxis.isHorizontal();\n    var isAxisInversed = baseAxis.inverse;\n    if (isHorizontal) {\n      if (isAxisInversed) {\n        clipPath.shape.x += width;\n      }\n      clipPath.shape.width = 0;\n    } else {\n      if (!isAxisInversed) {\n        clipPath.shape.y += height;\n      }\n      clipPath.shape.height = 0;\n    }\n    var duringCb = isFunction(during) ? function (percent) {\n      during(percent, clipPath);\n    } : null;\n    graphic.initProps(clipPath, {\n      shape: {\n        width: width,\n        height: height,\n        x: x,\n        y: y\n      }\n    }, seriesModel, null, done, duringCb);\n  }\n  return clipPath;\n}\nfunction createPolarClipPath(polar, hasAnimation, seriesModel) {\n  var sectorArea = polar.getArea();\n  // Avoid float number rounding error for symbol on the edge of axis extent.\n  var r0 = round(sectorArea.r0, 1);\n  var r = round(sectorArea.r, 1);\n  var clipPath = new graphic.Sector({\n    shape: {\n      cx: round(polar.cx, 1),\n      cy: round(polar.cy, 1),\n      r0: r0,\n      r: r,\n      startAngle: sectorArea.startAngle,\n      endAngle: sectorArea.endAngle,\n      clockwise: sectorArea.clockwise\n    }\n  });\n  if (hasAnimation) {\n    var isRadial = polar.getBaseAxis().dim === 'angle';\n    if (isRadial) {\n      clipPath.shape.endAngle = sectorArea.startAngle;\n    } else {\n      clipPath.shape.r = r0;\n    }\n    graphic.initProps(clipPath, {\n      shape: {\n        endAngle: sectorArea.endAngle,\n        r: r\n      }\n    }, seriesModel);\n  }\n  return clipPath;\n}\nfunction createClipPath(coordSys, hasAnimation, seriesModel, done, during) {\n  if (!coordSys) {\n    return null;\n  } else if (coordSys.type === 'polar') {\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  } else if (coordSys.type === 'cartesian2d') {\n    return createGridClipPath(coordSys, hasAnimation, seriesModel, done, during);\n  }\n  return null;\n}\nexport { createGridClipPath, createPolarClipPath, createClipPath };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function isCoordinateSystemType(coordSys, type) {\n  return coordSys.type === type;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n// FIXME step not support polar\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport SymbolClz from '../helper/Symbol.js';\nimport lineAnimationDiff from './lineAnimationDiff.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as modelUtil from '../../util/model.js';\nimport { ECPolyline, ECPolygon } from './poly.js';\nimport ChartView from '../../view/Chart.js';\nimport { prepareDataCoordInfo, getStackedOnPoint } from './helper.js';\nimport { createGridClipPath, createPolarClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport { setStatesStylesFromModel, setStatesFlag, toggleHoverEmphasis, SPECIAL_STATES } from '../../util/states.js';\nimport { setLabelStyle, getLabelStatesModels, labelInner } from '../../label/labelStyle.js';\nimport { getDefaultLabel, getDefaultInterpolatedLabel } from '../helper/labelHelper.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createFloat32Array } from '../../util/vendor.js';\nimport { convertToColorString } from '../../util/format.js';\nimport { lerp } from 'zrender/lib/tool/color.js';\nfunction isPointsSame(points1, points2) {\n  if (points1.length !== points2.length) {\n    return;\n  }\n  for (var i = 0; i < points1.length; i++) {\n    if (points1[i] !== points2[i]) {\n      return;\n    }\n  }\n  return true;\n}\nfunction bboxFromPoints(points) {\n  var minX = Infinity;\n  var minY = Infinity;\n  var maxX = -Infinity;\n  var maxY = -Infinity;\n  for (var i = 0; i < points.length;) {\n    var x = points[i++];\n    var y = points[i++];\n    if (!isNaN(x)) {\n      minX = Math.min(x, minX);\n      maxX = Math.max(x, maxX);\n    }\n    if (!isNaN(y)) {\n      minY = Math.min(y, minY);\n      maxY = Math.max(y, maxY);\n    }\n  }\n  return [[minX, minY], [maxX, maxY]];\n}\nfunction getBoundingDiff(points1, points2) {\n  var _a = bboxFromPoints(points1),\n    min1 = _a[0],\n    max1 = _a[1];\n  var _b = bboxFromPoints(points2),\n    min2 = _b[0],\n    max2 = _b[1];\n  // Get a max value from each corner of two boundings.\n  return Math.max(Math.abs(min1[0] - min2[0]), Math.abs(min1[1] - min2[1]), Math.abs(max1[0] - max2[0]), Math.abs(max1[1] - max2[1]));\n}\nfunction getSmooth(smooth) {\n  return zrUtil.isNumber(smooth) ? smooth : smooth ? 0.5 : 0;\n}\nfunction getStackedOnPoints(coordSys, data, dataCoordInfo) {\n  if (!dataCoordInfo.valueDim) {\n    return [];\n  }\n  var len = data.count();\n  var points = createFloat32Array(len * 2);\n  for (var idx = 0; idx < len; idx++) {\n    var pt = getStackedOnPoint(dataCoordInfo, coordSys, data, idx);\n    points[idx * 2] = pt[0];\n    points[idx * 2 + 1] = pt[1];\n  }\n  return points;\n}\n/**\n * Filter the null data and extend data for step considering `stepTurnAt`\n *\n * @param points data to convert, that may containing null\n * @param basePoints base data to reference, used only for areaStyle points\n * @param coordSys coordinate system\n * @param stepTurnAt 'start' | 'end' | 'middle' | true\n * @param connectNulls whether to connect nulls\n * @returns converted point positions\n */\nfunction turnPointsIntoStep(points, basePoints, coordSys, stepTurnAt, connectNulls) {\n  var baseAxis = coordSys.getBaseAxis();\n  var baseIndex = baseAxis.dim === 'x' || baseAxis.dim === 'radius' ? 0 : 1;\n  var stepPoints = [];\n  var i = 0;\n  var stepPt = [];\n  var pt = [];\n  var nextPt = [];\n  var filteredPoints = [];\n  if (connectNulls) {\n    for (i = 0; i < points.length; i += 2) {\n      /**\n       * For areaStyle of stepped lines, `stackedOnPoints` should be\n       * filtered the same as `points` so that the base axis values\n       * should stay the same as the lines above. See #20021\n       */\n      var reference = basePoints || points;\n      if (!isNaN(reference[i]) && !isNaN(reference[i + 1])) {\n        filteredPoints.push(points[i], points[i + 1]);\n      }\n    }\n    points = filteredPoints;\n  }\n  for (i = 0; i < points.length - 2; i += 2) {\n    nextPt[0] = points[i + 2];\n    nextPt[1] = points[i + 3];\n    pt[0] = points[i];\n    pt[1] = points[i + 1];\n    stepPoints.push(pt[0], pt[1]);\n    switch (stepTurnAt) {\n      case 'end':\n        stepPt[baseIndex] = nextPt[baseIndex];\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n        break;\n      case 'middle':\n        var middle = (pt[baseIndex] + nextPt[baseIndex]) / 2;\n        var stepPt2 = [];\n        stepPt[baseIndex] = stepPt2[baseIndex] = middle;\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPt2[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n        stepPoints.push(stepPt2[0], stepPt2[1]);\n        break;\n      default:\n        // default is start\n        stepPt[baseIndex] = pt[baseIndex];\n        stepPt[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n    }\n  }\n  // Last points\n  stepPoints.push(points[i++], points[i++]);\n  return stepPoints;\n}\n/**\n * Clip color stops to edge. Avoid creating too large gradients.\n * Which may lead to blurry when GPU acceleration is enabled. See #15680\n *\n * The stops has been sorted from small to large.\n */\nfunction clipColorStops(colorStops, maxSize) {\n  var newColorStops = [];\n  var len = colorStops.length;\n  // coord will always < 0 in prevOutOfRangeColorStop.\n  var prevOutOfRangeColorStop;\n  var prevInRangeColorStop;\n  function lerpStop(stop0, stop1, clippedCoord) {\n    var coord0 = stop0.coord;\n    var p = (clippedCoord - coord0) / (stop1.coord - coord0);\n    var color = lerp(p, [stop0.color, stop1.color]);\n    return {\n      coord: clippedCoord,\n      color: color\n    };\n  }\n  for (var i = 0; i < len; i++) {\n    var stop_1 = colorStops[i];\n    var coord = stop_1.coord;\n    if (coord < 0) {\n      prevOutOfRangeColorStop = stop_1;\n    } else if (coord > maxSize) {\n      if (prevInRangeColorStop) {\n        newColorStops.push(lerpStop(prevInRangeColorStop, stop_1, maxSize));\n      } else if (prevOutOfRangeColorStop) {\n        // If there are two stops and coord range is between these two stops\n        newColorStops.push(lerpStop(prevOutOfRangeColorStop, stop_1, 0), lerpStop(prevOutOfRangeColorStop, stop_1, maxSize));\n      }\n      // All following stop will be out of range. So just ignore them.\n      break;\n    } else {\n      if (prevOutOfRangeColorStop) {\n        newColorStops.push(lerpStop(prevOutOfRangeColorStop, stop_1, 0));\n        // Reset\n        prevOutOfRangeColorStop = null;\n      }\n      newColorStops.push(stop_1);\n      prevInRangeColorStop = stop_1;\n    }\n  }\n  return newColorStops;\n}\nfunction getVisualGradient(data, coordSys, api) {\n  var visualMetaList = data.getVisual('visualMeta');\n  if (!visualMetaList || !visualMetaList.length || !data.count()) {\n    // When data.count() is 0, gradient range can not be calculated.\n    return;\n  }\n  if (coordSys.type !== 'cartesian2d') {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Visual map on line style is only supported on cartesian2d.');\n    }\n    return;\n  }\n  var coordDim;\n  var visualMeta;\n  for (var i = visualMetaList.length - 1; i >= 0; i--) {\n    var dimInfo = data.getDimensionInfo(visualMetaList[i].dimension);\n    coordDim = dimInfo && dimInfo.coordDim;\n    // Can only be x or y\n    if (coordDim === 'x' || coordDim === 'y') {\n      visualMeta = visualMetaList[i];\n      break;\n    }\n  }\n  if (!visualMeta) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Visual map on line style only support x or y dimension.');\n    }\n    return;\n  }\n  // If the area to be rendered is bigger than area defined by LinearGradient,\n  // the canvas spec prescribes that the color of the first stop and the last\n  // stop should be used. But if two stops are added at offset 0, in effect\n  // browsers use the color of the second stop to render area outside\n  // LinearGradient. So we can only infinitesimally extend area defined in\n  // LinearGradient to render `outerColors`.\n  var axis = coordSys.getAxis(coordDim);\n  // dataToCoord mapping may not be linear, but must be monotonic.\n  var colorStops = zrUtil.map(visualMeta.stops, function (stop) {\n    // offset will be calculated later.\n    return {\n      coord: axis.toGlobalCoord(axis.dataToCoord(stop.value)),\n      color: stop.color\n    };\n  });\n  var stopLen = colorStops.length;\n  var outerColors = visualMeta.outerColors.slice();\n  if (stopLen && colorStops[0].coord > colorStops[stopLen - 1].coord) {\n    colorStops.reverse();\n    outerColors.reverse();\n  }\n  var colorStopsInRange = clipColorStops(colorStops, coordDim === 'x' ? api.getWidth() : api.getHeight());\n  var inRangeStopLen = colorStopsInRange.length;\n  if (!inRangeStopLen && stopLen) {\n    // All stops are out of range. All will be the same color.\n    return colorStops[0].coord < 0 ? outerColors[1] ? outerColors[1] : colorStops[stopLen - 1].color : outerColors[0] ? outerColors[0] : colorStops[0].color;\n  }\n  var tinyExtent = 10; // Arbitrary value: 10px\n  var minCoord = colorStopsInRange[0].coord - tinyExtent;\n  var maxCoord = colorStopsInRange[inRangeStopLen - 1].coord + tinyExtent;\n  var coordSpan = maxCoord - minCoord;\n  if (coordSpan < 1e-3) {\n    return 'transparent';\n  }\n  zrUtil.each(colorStopsInRange, function (stop) {\n    stop.offset = (stop.coord - minCoord) / coordSpan;\n  });\n  colorStopsInRange.push({\n    // NOTE: inRangeStopLen may still be 0 if stoplen is zero.\n    offset: inRangeStopLen ? colorStopsInRange[inRangeStopLen - 1].offset : 0.5,\n    color: outerColors[1] || 'transparent'\n  });\n  colorStopsInRange.unshift({\n    offset: inRangeStopLen ? colorStopsInRange[0].offset : 0.5,\n    color: outerColors[0] || 'transparent'\n  });\n  var gradient = new graphic.LinearGradient(0, 0, 0, 0, colorStopsInRange, true);\n  gradient[coordDim] = minCoord;\n  gradient[coordDim + '2'] = maxCoord;\n  return gradient;\n}\nfunction getIsIgnoreFunc(seriesModel, data, coordSys) {\n  var showAllSymbol = seriesModel.get('showAllSymbol');\n  var isAuto = showAllSymbol === 'auto';\n  if (showAllSymbol && !isAuto) {\n    return;\n  }\n  var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n  if (!categoryAxis) {\n    return;\n  }\n  // Note that category label interval strategy might bring some weird effect\n  // in some scenario: users may wonder why some of the symbols are not\n  // displayed. So we show all symbols as possible as we can.\n  if (isAuto\n  // Simplify the logic, do not determine label overlap here.\n  && canShowAllSymbolForCategory(categoryAxis, data)) {\n    return;\n  }\n  // Otherwise follow the label interval strategy on category axis.\n  var categoryDataDim = data.mapDimension(categoryAxis.dim);\n  var labelMap = {};\n  zrUtil.each(categoryAxis.getViewLabels(), function (labelItem) {\n    var ordinalNumber = categoryAxis.scale.getRawOrdinalNumber(labelItem.tickValue);\n    labelMap[ordinalNumber] = 1;\n  });\n  return function (dataIndex) {\n    return !labelMap.hasOwnProperty(data.get(categoryDataDim, dataIndex));\n  };\n}\nfunction canShowAllSymbolForCategory(categoryAxis, data) {\n  // In most cases, line is monotonous on category axis, and the label size\n  // is close with each other. So we check the symbol size and some of the\n  // label size alone with the category axis to estimate whether all symbol\n  // can be shown without overlap.\n  var axisExtent = categoryAxis.getExtent();\n  var availSize = Math.abs(axisExtent[1] - axisExtent[0]) / categoryAxis.scale.count();\n  isNaN(availSize) && (availSize = 0); // 0/0 is NaN.\n  // Sampling some points, max 5.\n  var dataLen = data.count();\n  var step = Math.max(1, Math.round(dataLen / 5));\n  for (var dataIndex = 0; dataIndex < dataLen; dataIndex += step) {\n    if (SymbolClz.getSymbolSize(data, dataIndex\n    // Only for cartesian, where `isHorizontal` exists.\n    )[categoryAxis.isHorizontal() ? 1 : 0]\n    // Empirical number\n    * 1.5 > availSize) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction isPointNull(x, y) {\n  return isNaN(x) || isNaN(y);\n}\nfunction getLastIndexNotNull(points) {\n  var len = points.length / 2;\n  for (; len > 0; len--) {\n    if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n      break;\n    }\n  }\n  return len - 1;\n}\nfunction getPointAtIndex(points, idx) {\n  return [points[idx * 2], points[idx * 2 + 1]];\n}\nfunction getIndexRange(points, xOrY, dim) {\n  var len = points.length / 2;\n  var dimIdx = dim === 'x' ? 0 : 1;\n  var a;\n  var b;\n  var prevIndex = 0;\n  var nextIndex = -1;\n  for (var i = 0; i < len; i++) {\n    b = points[i * 2 + dimIdx];\n    if (isNaN(b) || isNaN(points[i * 2 + 1 - dimIdx])) {\n      continue;\n    }\n    if (i === 0) {\n      a = b;\n      continue;\n    }\n    if (a <= xOrY && b >= xOrY || a >= xOrY && b <= xOrY) {\n      nextIndex = i;\n      break;\n    }\n    prevIndex = i;\n    a = b;\n  }\n  return {\n    range: [prevIndex, nextIndex],\n    t: (xOrY - a) / (b - a)\n  };\n}\nfunction anyStateShowEndLabel(seriesModel) {\n  if (seriesModel.get(['endLabel', 'show'])) {\n    return true;\n  }\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    if (seriesModel.get([SPECIAL_STATES[i], 'endLabel', 'show'])) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction createLineClipPath(lineView, coordSys, hasAnimation, seriesModel) {\n  if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n    var endLabelModel_1 = seriesModel.getModel('endLabel');\n    var valueAnimation_1 = endLabelModel_1.get('valueAnimation');\n    var data_1 = seriesModel.getData();\n    var labelAnimationRecord_1 = {\n      lastFrameIndex: 0\n    };\n    var during = anyStateShowEndLabel(seriesModel) ? function (percent, clipRect) {\n      lineView._endLabelOnDuring(percent, clipRect, data_1, labelAnimationRecord_1, valueAnimation_1, endLabelModel_1, coordSys);\n    } : null;\n    var isHorizontal = coordSys.getBaseAxis().isHorizontal();\n    var clipPath = createGridClipPath(coordSys, hasAnimation, seriesModel, function () {\n      var endLabel = lineView._endLabel;\n      if (endLabel && hasAnimation) {\n        if (labelAnimationRecord_1.originalX != null) {\n          endLabel.attr({\n            x: labelAnimationRecord_1.originalX,\n            y: labelAnimationRecord_1.originalY\n          });\n        }\n      }\n    }, during);\n    // Expand clip shape to avoid clipping when line value exceeds axis\n    if (!seriesModel.get('clip', true)) {\n      var rectShape = clipPath.shape;\n      var expandSize = Math.max(rectShape.width, rectShape.height);\n      if (isHorizontal) {\n        rectShape.y -= expandSize;\n        rectShape.height += expandSize * 2;\n      } else {\n        rectShape.x -= expandSize;\n        rectShape.width += expandSize * 2;\n      }\n    }\n    // Set to the final frame. To make sure label layout is right.\n    if (during) {\n      during(1, clipPath);\n    }\n    return clipPath;\n  } else {\n    if (process.env.NODE_ENV !== 'production') {\n      if (seriesModel.get(['endLabel', 'show'])) {\n        console.warn('endLabel is not supported for lines in polar systems.');\n      }\n    }\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  }\n}\nfunction getEndLabelStateSpecified(endLabelModel, coordSys) {\n  var baseAxis = coordSys.getBaseAxis();\n  var isHorizontal = baseAxis.isHorizontal();\n  var isBaseInversed = baseAxis.inverse;\n  var align = isHorizontal ? isBaseInversed ? 'right' : 'left' : 'center';\n  var verticalAlign = isHorizontal ? 'middle' : isBaseInversed ? 'top' : 'bottom';\n  return {\n    normal: {\n      align: endLabelModel.get('align') || align,\n      verticalAlign: endLabelModel.get('verticalAlign') || verticalAlign\n    }\n  };\n}\nvar LineView = /** @class */function (_super) {\n  __extends(LineView, _super);\n  function LineView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  LineView.prototype.init = function () {\n    var lineGroup = new graphic.Group();\n    var symbolDraw = new SymbolDraw();\n    this.group.add(symbolDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineGroup = lineGroup;\n    this._changePolyState = zrUtil.bind(this._changePolyState, this);\n  };\n  LineView.prototype.render = function (seriesModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var lineStyleModel = seriesModel.getModel('lineStyle');\n    var areaStyleModel = seriesModel.getModel('areaStyle');\n    var points = data.getLayout('points') || [];\n    var isCoordSysPolar = coordSys.type === 'polar';\n    var prevCoordSys = this._coordSys;\n    var symbolDraw = this._symbolDraw;\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var lineGroup = this._lineGroup;\n    var hasAnimation = !ecModel.ssr && seriesModel.get('animation');\n    var isAreaChart = !areaStyleModel.isEmpty();\n    var valueOrigin = areaStyleModel.get('origin');\n    var dataCoordInfo = prepareDataCoordInfo(coordSys, data, valueOrigin);\n    var stackedOnPoints = isAreaChart && getStackedOnPoints(coordSys, data, dataCoordInfo);\n    var showSymbol = seriesModel.get('showSymbol');\n    var connectNulls = seriesModel.get('connectNulls');\n    var isIgnoreFunc = showSymbol && !isCoordSysPolar && getIsIgnoreFunc(seriesModel, data, coordSys);\n    // Remove temporary symbols\n    var oldData = this._data;\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    });\n    // Remove previous created symbols if showSymbol changed to false\n    if (!showSymbol) {\n      symbolDraw.remove();\n    }\n    group.add(lineGroup);\n    // FIXME step not support polar\n    var step = !isCoordSysPolar ? seriesModel.get('step') : false;\n    var clipShapeForSymbol;\n    if (coordSys && coordSys.getArea && seriesModel.get('clip', true)) {\n      clipShapeForSymbol = coordSys.getArea();\n      // Avoid float number rounding error for symbol on the edge of axis extent.\n      // See #7913 and `test/dataZoom-clip.html`.\n      if (clipShapeForSymbol.width != null) {\n        clipShapeForSymbol.x -= 0.1;\n        clipShapeForSymbol.y -= 0.1;\n        clipShapeForSymbol.width += 0.2;\n        clipShapeForSymbol.height += 0.2;\n      } else if (clipShapeForSymbol.r0) {\n        clipShapeForSymbol.r0 -= 0.5;\n        clipShapeForSymbol.r += 0.5;\n      }\n    }\n    this._clipShapeForSymbol = clipShapeForSymbol;\n    var visualColor = getVisualGradient(data, coordSys, api) || data.getVisual('style')[data.getVisual('drawType')];\n    // Initialization animation or coordinate system changed\n    if (!(polyline && prevCoordSys.type === coordSys.type && step === this._step)) {\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol,\n        disableAnimation: true,\n        getSymbolPoint: function (idx) {\n          return [points[idx * 2], points[idx * 2 + 1]];\n        }\n      });\n      hasAnimation && this._initSymbolLabelAnimation(data, coordSys, clipShapeForSymbol);\n      if (step) {\n        if (stackedOnPoints) {\n          stackedOnPoints = turnPointsIntoStep(stackedOnPoints, points, coordSys, step, connectNulls);\n        }\n        // TODO If stacked series is not step\n        points = turnPointsIntoStep(points, null, coordSys, step, connectNulls);\n      }\n      polyline = this._newPolyline(points);\n      if (isAreaChart) {\n        polygon = this._newPolygon(points, stackedOnPoints);\n      } // If areaStyle is removed\n      else if (polygon) {\n        lineGroup.remove(polygon);\n        polygon = this._polygon = null;\n      }\n      // NOTE: Must update _endLabel before setClipPath.\n      if (!isCoordSysPolar) {\n        this._initOrUpdateEndLabel(seriesModel, coordSys, convertToColorString(visualColor));\n      }\n      lineGroup.setClipPath(createLineClipPath(this, coordSys, true, seriesModel));\n    } else {\n      if (isAreaChart && !polygon) {\n        // If areaStyle is added\n        polygon = this._newPolygon(points, stackedOnPoints);\n      } else if (polygon && !isAreaChart) {\n        // If areaStyle is removed\n        lineGroup.remove(polygon);\n        polygon = this._polygon = null;\n      }\n      // NOTE: Must update _endLabel before setClipPath.\n      if (!isCoordSysPolar) {\n        this._initOrUpdateEndLabel(seriesModel, coordSys, convertToColorString(visualColor));\n      }\n      // Update clipPath\n      var oldClipPath = lineGroup.getClipPath();\n      if (oldClipPath) {\n        var newClipPath = createLineClipPath(this, coordSys, false, seriesModel);\n        graphic.initProps(oldClipPath, {\n          shape: newClipPath.shape\n        }, seriesModel);\n      } else {\n        lineGroup.setClipPath(createLineClipPath(this, coordSys, true, seriesModel));\n      }\n      // Always update, or it is wrong in the case turning on legend\n      // because points are not changed.\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol,\n        disableAnimation: true,\n        getSymbolPoint: function (idx) {\n          return [points[idx * 2], points[idx * 2 + 1]];\n        }\n      });\n      // In the case data zoom triggered refreshing frequently\n      // Data may not change if line has a category axis. So it should animate nothing.\n      if (!isPointsSame(this._stackedOnPoints, stackedOnPoints) || !isPointsSame(this._points, points)) {\n        if (hasAnimation) {\n          this._doUpdateAnimation(data, stackedOnPoints, coordSys, api, step, valueOrigin, connectNulls);\n        } else {\n          // Not do it in update with animation\n          if (step) {\n            if (stackedOnPoints) {\n              stackedOnPoints = turnPointsIntoStep(stackedOnPoints, points, coordSys, step, connectNulls);\n            }\n            // TODO If stacked series is not step\n            points = turnPointsIntoStep(points, null, coordSys, step, connectNulls);\n          }\n          polyline.setShape({\n            points: points\n          });\n          polygon && polygon.setShape({\n            points: points,\n            stackedOnPoints: stackedOnPoints\n          });\n        }\n      }\n    }\n    var emphasisModel = seriesModel.getModel('emphasis');\n    var focus = emphasisModel.get('focus');\n    var blurScope = emphasisModel.get('blurScope');\n    var emphasisDisabled = emphasisModel.get('disabled');\n    polyline.useStyle(zrUtil.defaults(\n    // Use color in lineStyle first\n    lineStyleModel.getLineStyle(), {\n      fill: 'none',\n      stroke: visualColor,\n      lineJoin: 'bevel'\n    }));\n    setStatesStylesFromModel(polyline, seriesModel, 'lineStyle');\n    if (polyline.style.lineWidth > 0 && seriesModel.get(['emphasis', 'lineStyle', 'width']) === 'bolder') {\n      var emphasisLineStyle = polyline.getState('emphasis').style;\n      emphasisLineStyle.lineWidth = +polyline.style.lineWidth + 1;\n    }\n    // Needs seriesIndex for focus\n    getECData(polyline).seriesIndex = seriesModel.seriesIndex;\n    toggleHoverEmphasis(polyline, focus, blurScope, emphasisDisabled);\n    var smooth = getSmooth(seriesModel.get('smooth'));\n    var smoothMonotone = seriesModel.get('smoothMonotone');\n    polyline.setShape({\n      smooth: smooth,\n      smoothMonotone: smoothMonotone,\n      connectNulls: connectNulls\n    });\n    if (polygon) {\n      var stackedOnSeries = data.getCalculationInfo('stackedOnSeries');\n      var stackedOnSmooth = 0;\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: visualColor,\n        opacity: 0.7,\n        lineJoin: 'bevel',\n        decal: data.getVisual('style').decal\n      }));\n      if (stackedOnSeries) {\n        stackedOnSmooth = getSmooth(stackedOnSeries.get('smooth'));\n      }\n      polygon.setShape({\n        smooth: smooth,\n        stackedOnSmooth: stackedOnSmooth,\n        smoothMonotone: smoothMonotone,\n        connectNulls: connectNulls\n      });\n      setStatesStylesFromModel(polygon, seriesModel, 'areaStyle');\n      // Needs seriesIndex for focus\n      getECData(polygon).seriesIndex = seriesModel.seriesIndex;\n      toggleHoverEmphasis(polygon, focus, blurScope, emphasisDisabled);\n    }\n    var changePolyState = this._changePolyState;\n    data.eachItemGraphicEl(function (el) {\n      // Switch polyline / polygon state if element changed its state.\n      el && (el.onHoverStateChange = changePolyState);\n    });\n    this._polyline.onHoverStateChange = changePolyState;\n    this._data = data;\n    // Save the coordinate system for transition animation when data changed\n    this._coordSys = coordSys;\n    this._stackedOnPoints = stackedOnPoints;\n    this._points = points;\n    this._step = step;\n    this._valueOrigin = valueOrigin;\n    if (seriesModel.get('triggerLineEvent')) {\n      this.packEventData(seriesModel, polyline);\n      polygon && this.packEventData(seriesModel, polygon);\n    }\n  };\n  LineView.prototype.packEventData = function (seriesModel, el) {\n    getECData(el).eventData = {\n      componentType: 'series',\n      componentSubType: 'line',\n      componentIndex: seriesModel.componentIndex,\n      seriesIndex: seriesModel.seriesIndex,\n      seriesName: seriesModel.name,\n      seriesType: 'line'\n    };\n  };\n  LineView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n    this._changePolyState('emphasis');\n    if (!(dataIndex instanceof Array) && dataIndex != null && dataIndex >= 0) {\n      var points = data.getLayout('points');\n      var symbol = data.getItemGraphicEl(dataIndex);\n      if (!symbol) {\n        // Create a temporary symbol if it is not exists\n        var x = points[dataIndex * 2];\n        var y = points[dataIndex * 2 + 1];\n        if (isNaN(x) || isNaN(y)) {\n          // Null data\n          return;\n        }\n        // fix #11360: shouldn't draw symbol outside clipShapeForSymbol\n        if (this._clipShapeForSymbol && !this._clipShapeForSymbol.contain(x, y)) {\n          return;\n        }\n        var zlevel = seriesModel.get('zlevel') || 0;\n        var z = seriesModel.get('z') || 0;\n        symbol = new SymbolClz(data, dataIndex);\n        symbol.x = x;\n        symbol.y = y;\n        symbol.setZ(zlevel, z);\n        // ensure label text of the temporary symbol is in front of line and area polygon\n        var symbolLabel = symbol.getSymbolPath().getTextContent();\n        if (symbolLabel) {\n          symbolLabel.zlevel = zlevel;\n          symbolLabel.z = z;\n          symbolLabel.z2 = this._polyline.z2 + 1;\n        }\n        symbol.__temp = true;\n        data.setItemGraphicEl(dataIndex, symbol);\n        // Stop scale animation\n        symbol.stopSymbolAnimation(true);\n        this.group.add(symbol);\n      }\n      symbol.highlight();\n    } else {\n      // Highlight whole series\n      ChartView.prototype.highlight.call(this, seriesModel, ecModel, api, payload);\n    }\n  };\n  LineView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n    this._changePolyState('normal');\n    if (dataIndex != null && dataIndex >= 0) {\n      var symbol = data.getItemGraphicEl(dataIndex);\n      if (symbol) {\n        if (symbol.__temp) {\n          data.setItemGraphicEl(dataIndex, null);\n          this.group.remove(symbol);\n        } else {\n          symbol.downplay();\n        }\n      }\n    } else {\n      // FIXME\n      // can not downplay completely.\n      // Downplay whole series\n      ChartView.prototype.downplay.call(this, seriesModel, ecModel, api, payload);\n    }\n  };\n  LineView.prototype._changePolyState = function (toState) {\n    var polygon = this._polygon;\n    setStatesFlag(this._polyline, toState);\n    polygon && setStatesFlag(polygon, toState);\n  };\n  LineView.prototype._newPolyline = function (points) {\n    var polyline = this._polyline;\n    // Remove previous created polyline\n    if (polyline) {\n      this._lineGroup.remove(polyline);\n    }\n    polyline = new ECPolyline({\n      shape: {\n        points: points\n      },\n      segmentIgnoreThreshold: 2,\n      z2: 10\n    });\n    this._lineGroup.add(polyline);\n    this._polyline = polyline;\n    return polyline;\n  };\n  LineView.prototype._newPolygon = function (points, stackedOnPoints) {\n    var polygon = this._polygon;\n    // Remove previous created polygon\n    if (polygon) {\n      this._lineGroup.remove(polygon);\n    }\n    polygon = new ECPolygon({\n      shape: {\n        points: points,\n        stackedOnPoints: stackedOnPoints\n      },\n      segmentIgnoreThreshold: 2\n    });\n    this._lineGroup.add(polygon);\n    this._polygon = polygon;\n    return polygon;\n  };\n  LineView.prototype._initSymbolLabelAnimation = function (data, coordSys, clipShape) {\n    var isHorizontalOrRadial;\n    var isCoordSysPolar;\n    var baseAxis = coordSys.getBaseAxis();\n    var isAxisInverse = baseAxis.inverse;\n    if (coordSys.type === 'cartesian2d') {\n      isHorizontalOrRadial = baseAxis.isHorizontal();\n      isCoordSysPolar = false;\n    } else if (coordSys.type === 'polar') {\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\n      isCoordSysPolar = true;\n    }\n    var seriesModel = data.hostModel;\n    var seriesDuration = seriesModel.get('animationDuration');\n    if (zrUtil.isFunction(seriesDuration)) {\n      seriesDuration = seriesDuration(null);\n    }\n    var seriesDelay = seriesModel.get('animationDelay') || 0;\n    var seriesDelayValue = zrUtil.isFunction(seriesDelay) ? seriesDelay(null) : seriesDelay;\n    data.eachItemGraphicEl(function (symbol, idx) {\n      var el = symbol;\n      if (el) {\n        var point = [symbol.x, symbol.y];\n        var start = void 0;\n        var end = void 0;\n        var current = void 0;\n        if (clipShape) {\n          if (isCoordSysPolar) {\n            var polarClip = clipShape;\n            var coord = coordSys.pointToCoord(point);\n            if (isHorizontalOrRadial) {\n              start = polarClip.startAngle;\n              end = polarClip.endAngle;\n              current = -coord[1] / 180 * Math.PI;\n            } else {\n              start = polarClip.r0;\n              end = polarClip.r;\n              current = coord[0];\n            }\n          } else {\n            var gridClip = clipShape;\n            if (isHorizontalOrRadial) {\n              start = gridClip.x;\n              end = gridClip.x + gridClip.width;\n              current = symbol.x;\n            } else {\n              start = gridClip.y + gridClip.height;\n              end = gridClip.y;\n              current = symbol.y;\n            }\n          }\n        }\n        var ratio = end === start ? 0 : (current - start) / (end - start);\n        if (isAxisInverse) {\n          ratio = 1 - ratio;\n        }\n        var delay = zrUtil.isFunction(seriesDelay) ? seriesDelay(idx) : seriesDuration * ratio + seriesDelayValue;\n        var symbolPath = el.getSymbolPath();\n        var text = symbolPath.getTextContent();\n        el.attr({\n          scaleX: 0,\n          scaleY: 0\n        });\n        el.animateTo({\n          scaleX: 1,\n          scaleY: 1\n        }, {\n          duration: 200,\n          setToFinal: true,\n          delay: delay\n        });\n        if (text) {\n          text.animateFrom({\n            style: {\n              opacity: 0\n            }\n          }, {\n            duration: 300,\n            delay: delay\n          });\n        }\n        symbolPath.disableLabelAnimation = true;\n      }\n    });\n  };\n  LineView.prototype._initOrUpdateEndLabel = function (seriesModel, coordSys, inheritColor) {\n    var endLabelModel = seriesModel.getModel('endLabel');\n    if (anyStateShowEndLabel(seriesModel)) {\n      var data_2 = seriesModel.getData();\n      var polyline = this._polyline;\n      // series may be filtered.\n      var points = data_2.getLayout('points');\n      if (!points) {\n        polyline.removeTextContent();\n        this._endLabel = null;\n        return;\n      }\n      var endLabel = this._endLabel;\n      if (!endLabel) {\n        endLabel = this._endLabel = new graphic.Text({\n          z2: 200 // should be higher than item symbol\n        });\n        endLabel.ignoreClip = true;\n        polyline.setTextContent(this._endLabel);\n        polyline.disableLabelAnimation = true;\n      }\n      // Find last non-NaN data to display data\n      var dataIndex = getLastIndexNotNull(points);\n      if (dataIndex >= 0) {\n        setLabelStyle(polyline, getLabelStatesModels(seriesModel, 'endLabel'), {\n          inheritColor: inheritColor,\n          labelFetcher: seriesModel,\n          labelDataIndex: dataIndex,\n          defaultText: function (dataIndex, opt, interpolatedValue) {\n            return interpolatedValue != null ? getDefaultInterpolatedLabel(data_2, interpolatedValue) : getDefaultLabel(data_2, dataIndex);\n          },\n          enableTextSetter: true\n        }, getEndLabelStateSpecified(endLabelModel, coordSys));\n        polyline.textConfig.position = null;\n      }\n    } else if (this._endLabel) {\n      this._polyline.removeTextContent();\n      this._endLabel = null;\n    }\n  };\n  LineView.prototype._endLabelOnDuring = function (percent, clipRect, data, animationRecord, valueAnimation, endLabelModel, coordSys) {\n    var endLabel = this._endLabel;\n    var polyline = this._polyline;\n    if (endLabel) {\n      // NOTE: Don't remove percent < 1. percent === 1 means the first frame during render.\n      // The label is not prepared at this time.\n      if (percent < 1 && animationRecord.originalX == null) {\n        animationRecord.originalX = endLabel.x;\n        animationRecord.originalY = endLabel.y;\n      }\n      var points = data.getLayout('points');\n      var seriesModel = data.hostModel;\n      var connectNulls = seriesModel.get('connectNulls');\n      var precision = endLabelModel.get('precision');\n      var distance = endLabelModel.get('distance') || 0;\n      var baseAxis = coordSys.getBaseAxis();\n      var isHorizontal = baseAxis.isHorizontal();\n      var isBaseInversed = baseAxis.inverse;\n      var clipShape = clipRect.shape;\n      var xOrY = isBaseInversed ? isHorizontal ? clipShape.x : clipShape.y + clipShape.height : isHorizontal ? clipShape.x + clipShape.width : clipShape.y;\n      var distanceX = (isHorizontal ? distance : 0) * (isBaseInversed ? -1 : 1);\n      var distanceY = (isHorizontal ? 0 : -distance) * (isBaseInversed ? -1 : 1);\n      var dim = isHorizontal ? 'x' : 'y';\n      var dataIndexRange = getIndexRange(points, xOrY, dim);\n      var indices = dataIndexRange.range;\n      var diff = indices[1] - indices[0];\n      var value = void 0;\n      if (diff >= 1) {\n        // diff > 1 && connectNulls, which is on the null data.\n        if (diff > 1 && !connectNulls) {\n          var pt = getPointAtIndex(points, indices[0]);\n          endLabel.attr({\n            x: pt[0] + distanceX,\n            y: pt[1] + distanceY\n          });\n          valueAnimation && (value = seriesModel.getRawValue(indices[0]));\n        } else {\n          var pt = polyline.getPointOn(xOrY, dim);\n          pt && endLabel.attr({\n            x: pt[0] + distanceX,\n            y: pt[1] + distanceY\n          });\n          var startValue = seriesModel.getRawValue(indices[0]);\n          var endValue = seriesModel.getRawValue(indices[1]);\n          valueAnimation && (value = modelUtil.interpolateRawValues(data, precision, startValue, endValue, dataIndexRange.t));\n        }\n        animationRecord.lastFrameIndex = indices[0];\n      } else {\n        // If diff <= 0, which is the range is not found(Include NaN)\n        // Choose the first point or last point.\n        var idx = percent === 1 || animationRecord.lastFrameIndex > 0 ? indices[0] : 0;\n        var pt = getPointAtIndex(points, idx);\n        valueAnimation && (value = seriesModel.getRawValue(idx));\n        endLabel.attr({\n          x: pt[0] + distanceX,\n          y: pt[1] + distanceY\n        });\n      }\n      if (valueAnimation) {\n        var inner = labelInner(endLabel);\n        if (typeof inner.setLabelText === 'function') {\n          inner.setLabelText(value);\n        }\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  // FIXME Two value axis\n  LineView.prototype._doUpdateAnimation = function (data, stackedOnPoints, coordSys, api, step, valueOrigin, connectNulls) {\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var seriesModel = data.hostModel;\n    var diff = lineAnimationDiff(this._data, data, this._stackedOnPoints, stackedOnPoints, this._coordSys, coordSys, this._valueOrigin, valueOrigin);\n    var current = diff.current;\n    var stackedOnCurrent = diff.stackedOnCurrent;\n    var next = diff.next;\n    var stackedOnNext = diff.stackedOnNext;\n    if (step) {\n      // TODO If stacked series is not step\n      stackedOnCurrent = turnPointsIntoStep(diff.stackedOnCurrent, diff.current, coordSys, step, connectNulls);\n      current = turnPointsIntoStep(diff.current, null, coordSys, step, connectNulls);\n      stackedOnNext = turnPointsIntoStep(diff.stackedOnNext, diff.next, coordSys, step, connectNulls);\n      next = turnPointsIntoStep(diff.next, null, coordSys, step, connectNulls);\n    }\n    // Don't apply animation if diff is large.\n    // For better result and avoid memory explosion problems like\n    // https://github.com/apache/incubator-echarts/issues/12229\n    if (getBoundingDiff(current, next) > 3000 || polygon && getBoundingDiff(stackedOnCurrent, stackedOnNext) > 3000) {\n      polyline.stopAnimation();\n      polyline.setShape({\n        points: next\n      });\n      if (polygon) {\n        polygon.stopAnimation();\n        polygon.setShape({\n          points: next,\n          stackedOnPoints: stackedOnNext\n        });\n      }\n      return;\n    }\n    polyline.shape.__points = diff.current;\n    polyline.shape.points = current;\n    var target = {\n      shape: {\n        points: next\n      }\n    };\n    // Also animate the original points.\n    // If points reference is changed when turning into step line.\n    if (diff.current !== current) {\n      target.shape.__points = diff.next;\n    }\n    // Stop previous animation.\n    polyline.stopAnimation();\n    graphic.updateProps(polyline, target, seriesModel);\n    if (polygon) {\n      polygon.setShape({\n        // Reuse the points with polyline.\n        points: current,\n        stackedOnPoints: stackedOnCurrent\n      });\n      polygon.stopAnimation();\n      graphic.updateProps(polygon, {\n        shape: {\n          stackedOnPoints: stackedOnNext\n        }\n      }, seriesModel);\n      // If use attr directly in updateProps.\n      if (polyline.shape.points !== polygon.shape.points) {\n        polygon.shape.points = polyline.shape.points;\n      }\n    }\n    var updatedDataInfo = [];\n    var diffStatus = diff.status;\n    for (var i = 0; i < diffStatus.length; i++) {\n      var cmd = diffStatus[i].cmd;\n      if (cmd === '=') {\n        var el = data.getItemGraphicEl(diffStatus[i].idx1);\n        if (el) {\n          updatedDataInfo.push({\n            el: el,\n            ptIdx: i // Index of points\n          });\n        }\n      }\n    }\n    if (polyline.animators && polyline.animators.length) {\n      polyline.animators[0].during(function () {\n        polygon && polygon.dirtyShape();\n        var points = polyline.shape.__points;\n        for (var i = 0; i < updatedDataInfo.length; i++) {\n          var el = updatedDataInfo[i].el;\n          var offset = updatedDataInfo[i].ptIdx * 2;\n          el.x = points[offset];\n          el.y = points[offset + 1];\n          el.markRedraw();\n        }\n      });\n    }\n  };\n  LineView.prototype.remove = function (ecModel) {\n    var group = this.group;\n    var oldData = this._data;\n    this._lineGroup.removeAll();\n    this._symbolDraw.remove(true);\n    // Remove temporary created elements when highlighting\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    });\n    this._polyline = this._polygon = this._coordSys = this._points = this._stackedOnPoints = this._endLabel = this._data = null;\n  };\n  LineView.type = 'line';\n  return LineView;\n}(ChartView);\nexport default LineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { map } from 'zrender/lib/core/util.js';\nimport createRenderPlanner from '../chart/helper/createRenderPlanner.js';\nimport { isDimensionStacked } from '../data/helper/dataStackHelper.js';\nimport { createFloat32Array } from '../util/vendor.js';\nexport default function pointsLayout(seriesType, forceStoreInTypedArray) {\n  return {\n    seriesType: seriesType,\n    plan: createRenderPlanner(),\n    reset: function (seriesModel) {\n      var data = seriesModel.getData();\n      var coordSys = seriesModel.coordinateSystem;\n      var pipelineContext = seriesModel.pipelineContext;\n      var useTypedArray = forceStoreInTypedArray || pipelineContext.large;\n      if (!coordSys) {\n        return;\n      }\n      var dims = map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }).slice(0, 2);\n      var dimLen = dims.length;\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\n      if (isDimensionStacked(data, dims[0])) {\n        dims[0] = stackResultDim;\n      }\n      if (isDimensionStacked(data, dims[1])) {\n        dims[1] = stackResultDim;\n      }\n      var store = data.getStore();\n      var dimIdx0 = data.getDimensionIndex(dims[0]);\n      var dimIdx1 = data.getDimensionIndex(dims[1]);\n      return dimLen && {\n        progress: function (params, data) {\n          var segCount = params.end - params.start;\n          var points = useTypedArray && createFloat32Array(segCount * dimLen);\n          var tmpIn = [];\n          var tmpOut = [];\n          for (var i = params.start, offset = 0; i < params.end; i++) {\n            var point = void 0;\n            if (dimLen === 1) {\n              var x = store.get(dimIdx0, i);\n              // NOTE: Make sure the second parameter is null to use default strategy.\n              point = coordSys.dataToPoint(x, null, tmpOut);\n            } else {\n              tmpIn[0] = store.get(dimIdx0, i);\n              tmpIn[1] = store.get(dimIdx1, i);\n              // Let coordinate system to handle the NaN data.\n              point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n            }\n            if (useTypedArray) {\n              points[offset++] = point[0];\n              points[offset++] = point[1];\n            } else {\n              data.setItemLayout(i, point.slice());\n            }\n          }\n          useTypedArray && data.setLayout('points', points);\n        }\n      };\n    }\n  };\n}\n;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isFunction, isString } from 'zrender/lib/core/util.js';\nvar samplers = {\n  average: function (frame) {\n    var sum = 0;\n    var count = 0;\n    for (var i = 0; i < frame.length; i++) {\n      if (!isNaN(frame[i])) {\n        sum += frame[i];\n        count++;\n      }\n    }\n    // Return NaN if count is 0\n    return count === 0 ? NaN : sum / count;\n  },\n  sum: function (frame) {\n    var sum = 0;\n    for (var i = 0; i < frame.length; i++) {\n      // Ignore NaN\n      sum += frame[i] || 0;\n    }\n    return sum;\n  },\n  max: function (frame) {\n    var max = -Infinity;\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] > max && (max = frame[i]);\n    }\n    // NaN will cause illegal axis extent.\n    return isFinite(max) ? max : NaN;\n  },\n  min: function (frame) {\n    var min = Infinity;\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] < min && (min = frame[i]);\n    }\n    // NaN will cause illegal axis extent.\n    return isFinite(min) ? min : NaN;\n  },\n  // TODO\n  // Median\n  nearest: function (frame) {\n    return frame[0];\n  }\n};\nvar indexSampler = function (frame) {\n  return Math.round(frame.length / 2);\n};\nexport default function dataSample(seriesType) {\n  return {\n    seriesType: seriesType,\n    // FIXME:TS never used, so comment it\n    // modifyOutputEnd: true,\n    reset: function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var sampling = seriesModel.get('sampling');\n      var coordSys = seriesModel.coordinateSystem;\n      var count = data.count();\n      // Only cartesian2d support down sampling. Disable it when there is few data.\n      if (count > 10 && coordSys.type === 'cartesian2d' && sampling) {\n        var baseAxis = coordSys.getBaseAxis();\n        var valueAxis = coordSys.getOtherAxis(baseAxis);\n        var extent = baseAxis.getExtent();\n        var dpr = api.getDevicePixelRatio();\n        // Coordinste system has been resized\n        var size = Math.abs(extent[1] - extent[0]) * (dpr || 1);\n        var rate = Math.round(count / size);\n        if (isFinite(rate) && rate > 1) {\n          if (sampling === 'lttb') {\n            seriesModel.setData(data.lttbDownSample(data.mapDimension(valueAxis.dim), 1 / rate));\n          } else if (sampling === 'minmax') {\n            seriesModel.setData(data.minmaxDownSample(data.mapDimension(valueAxis.dim), 1 / rate));\n          }\n          var sampler = void 0;\n          if (isString(sampling)) {\n            sampler = samplers[sampling];\n          } else if (isFunction(sampling)) {\n            sampler = sampling;\n          }\n          if (sampler) {\n            // Only support sample the first dim mapped from value axis.\n            seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim), 1 / rate, sampler, indexSampler));\n          }\n        }\n      }\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport LineSeries from './LineSeries.js';\nimport LineView from './LineView.js';\n// In case developer forget to include grid component\nimport layoutPoints from '../../layout/points.js';\nimport dataSample from '../../processor/dataSample.js';\nexport function install(registers) {\n  registers.registerChartView(LineView);\n  registers.registerSeriesModel(LineSeries);\n  registers.registerLayout(layoutPoints('line', true));\n  registers.registerVisual({\n    seriesType: 'line',\n    reset: function (seriesModel) {\n      var data = seriesModel.getData();\n      // Visual coding for legend\n      var lineStyle = seriesModel.getModel('lineStyle').getLineStyle();\n      if (lineStyle && !lineStyle.stroke) {\n        // Fill in visual should be palette color if\n        // has color callback\n        lineStyle.stroke = data.getVisual('style').fill;\n      }\n      data.setVisual('legendLineStyle', lineStyle);\n    }\n  });\n  // Down sample after filter\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('line'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport createSeriesData from '../helper/createSeriesData.js';\nimport { each } from 'zrender/lib/core/util.js';\nvar BaseBarSeriesModel = /** @class */function (_super) {\n  __extends(BaseBarSeriesModel, _super);\n  function BaseBarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = BaseBarSeriesModel.type;\n    return _this;\n  }\n  BaseBarSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n  BaseBarSeriesModel.prototype.getMarkerPosition = function (value, dims, startingAtTick) {\n    var coordSys = this.coordinateSystem;\n    if (coordSys && coordSys.clampData) {\n      // PENDING if clamp ?\n      var clampData_1 = coordSys.clampData(value);\n      var pt_1 = coordSys.dataToPoint(clampData_1);\n      if (startingAtTick) {\n        each(coordSys.getAxes(), function (axis, idx) {\n          // If axis type is category, use tick coords instead\n          if (axis.type === 'category' && dims != null) {\n            var tickCoords = axis.getTicksCoords();\n            var alignTicksWithLabel = axis.getTickModel().get('alignWithLabel');\n            var targetTickId = clampData_1[idx];\n            // The index of rightmost tick of markArea is 1 larger than x1/y1 index\n            var isEnd = dims[idx] === 'x1' || dims[idx] === 'y1';\n            if (isEnd && !alignTicksWithLabel) {\n              targetTickId += 1;\n            }\n            // The only contains one tick, tickCoords is\n            // like [{coord: 0, tickValue: 0}, {coord: 0}]\n            // to the length should always be larger than 1\n            if (tickCoords.length < 2) {\n              return;\n            } else if (tickCoords.length === 2) {\n              // The left value and right value of the axis are\n              // the same. coord is 0 in both items. Use the max\n              // value of the axis as the coord\n              pt_1[idx] = axis.toGlobalCoord(axis.getExtent()[isEnd ? 1 : 0]);\n              return;\n            }\n            var leftCoord = void 0;\n            var coord = void 0;\n            var stepTickValue = 1;\n            for (var i = 0; i < tickCoords.length; i++) {\n              var tickCoord = tickCoords[i].coord;\n              // The last item of tickCoords doesn't contain\n              // tickValue\n              var tickValue = i === tickCoords.length - 1 ? tickCoords[i - 1].tickValue + stepTickValue : tickCoords[i].tickValue;\n              if (tickValue === targetTickId) {\n                coord = tickCoord;\n                break;\n              } else if (tickValue < targetTickId) {\n                leftCoord = tickCoord;\n              } else if (leftCoord != null && tickValue > targetTickId) {\n                coord = (tickCoord + leftCoord) / 2;\n                break;\n              }\n              if (i === 1) {\n                // Here we assume the step of category axes is\n                // the same\n                stepTickValue = tickValue - tickCoords[0].tickValue;\n              }\n            }\n            if (coord == null) {\n              if (!leftCoord) {\n                // targetTickId is smaller than all tick ids in the\n                // visible area, use the leftmost tick coord\n                coord = tickCoords[0].coord;\n              } else if (leftCoord) {\n                // targetTickId is larger than all tick ids in the\n                // visible area, use the rightmost tick coord\n                coord = tickCoords[tickCoords.length - 1].coord;\n              }\n            }\n            pt_1[idx] = axis.toGlobalCoord(coord);\n          }\n        });\n      } else {\n        var data = this.getData();\n        var offset = data.getLayout('offset');\n        var size = data.getLayout('size');\n        var offsetIndex = coordSys.getBaseAxis().isHorizontal() ? 0 : 1;\n        pt_1[offsetIndex] += offset + size / 2;\n      }\n      return pt_1;\n    }\n    return [NaN, NaN];\n  };\n  BaseBarSeriesModel.type = 'series.__base_bar__';\n  BaseBarSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // stack: null\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    barMinHeight: 0,\n    barMinAngle: 0,\n    // cursor: null,\n    large: false,\n    largeThreshold: 400,\n    progressive: 3e3,\n    progressiveChunkMode: 'mod',\n    defaultBarGap: '10%'\n  };\n  return BaseBarSeriesModel;\n}(SeriesModel);\nSeriesModel.registerClass(BaseBarSeriesModel);\nexport default BaseBarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseBarSeriesModel from './BaseBarSeries.js';\nimport createSeriesData from '../helper/createSeriesData.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nimport tokens from '../../visual/tokens.js';\nvar BarSeriesModel = /** @class */function (_super) {\n  __extends(BarSeriesModel, _super);\n  function BarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = BarSeriesModel.type;\n    return _this;\n  }\n  BarSeriesModel.prototype.getInitialData = function () {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true,\n      createInvertedIndices: !!this.get('realtimeSort', true) || null\n    });\n  };\n  /**\n   * @override\n   */\n  BarSeriesModel.prototype.getProgressive = function () {\n    // Do not support progressive in normal mode.\n    return this.get('large') ? this.get('progressive') : false;\n  };\n  /**\n   * @override\n   */\n  BarSeriesModel.prototype.getProgressiveThreshold = function () {\n    // Do not support progressive in normal mode.\n    var progressiveThreshold = this.get('progressiveThreshold');\n    var largeThreshold = this.get('largeThreshold');\n    if (largeThreshold > progressiveThreshold) {\n      progressiveThreshold = largeThreshold;\n    }\n    return progressiveThreshold;\n  };\n  BarSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.rect(data.getItemLayout(dataIndex));\n  };\n  BarSeriesModel.type = 'series.bar';\n  BarSeriesModel.dependencies = ['grid', 'polar'];\n  BarSeriesModel.defaultOption = inheritDefaultOption(BaseBarSeriesModel.defaultOption, {\n    // If clipped\n    // Only available on cartesian2d\n    clip: true,\n    roundCap: false,\n    showBackground: false,\n    backgroundStyle: {\n      color: 'rgba(180, 180, 180, 0.2)',\n      borderColor: null,\n      borderWidth: 0,\n      borderType: 'solid',\n      borderRadius: 0,\n      shadowBlur: 0,\n      shadowColor: null,\n      shadowOffsetX: 0,\n      shadowOffsetY: 0,\n      opacity: 1\n    },\n    select: {\n      itemStyle: {\n        borderColor: tokens.color.primary,\n        borderWidth: 2\n      }\n    },\n    realtimeSort: false\n  });\n  return BarSeriesModel;\n}(BaseBarSeriesModel);\nexport default BarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { Path } from '../graphic.js';\n/**\n * Sausage: similar to sector, but have half circle on both sides\n */\nvar SausageShape = /** @class */function () {\n  function SausageShape() {\n    this.cx = 0;\n    this.cy = 0;\n    this.r0 = 0;\n    this.r = 0;\n    this.startAngle = 0;\n    this.endAngle = Math.PI * 2;\n    this.clockwise = true;\n  }\n  return SausageShape;\n}();\nvar SausagePath = /** @class */function (_super) {\n  __extends(SausagePath, _super);\n  function SausagePath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'sausage';\n    return _this;\n  }\n  SausagePath.prototype.getDefaultShape = function () {\n    return new SausageShape();\n  };\n  SausagePath.prototype.buildPath = function (ctx, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var r0 = Math.max(shape.r0 || 0, 0);\n    var r = Math.max(shape.r, 0);\n    var dr = (r - r0) * 0.5;\n    var rCenter = r0 + dr;\n    var startAngle = shape.startAngle;\n    var endAngle = shape.endAngle;\n    var clockwise = shape.clockwise;\n    var PI2 = Math.PI * 2;\n    var lessThanCircle = clockwise ? endAngle - startAngle < PI2 : startAngle - endAngle < PI2;\n    if (!lessThanCircle) {\n      // Normalize angles\n      startAngle = endAngle - (clockwise ? PI2 : -PI2);\n    }\n    var unitStartX = Math.cos(startAngle);\n    var unitStartY = Math.sin(startAngle);\n    var unitEndX = Math.cos(endAngle);\n    var unitEndY = Math.sin(endAngle);\n    if (lessThanCircle) {\n      ctx.moveTo(unitStartX * r0 + cx, unitStartY * r0 + cy);\n      ctx.arc(unitStartX * rCenter + cx, unitStartY * rCenter + cy, dr, -Math.PI + startAngle, startAngle, !clockwise);\n    } else {\n      ctx.moveTo(unitStartX * r + cx, unitStartY * r + cy);\n    }\n    ctx.arc(cx, cy, r, startAngle, endAngle, !clockwise);\n    ctx.arc(unitEndX * rCenter + cx, unitEndY * rCenter + cy, dr, endAngle - Math.PI * 2, endAngle - Math.PI, !clockwise);\n    if (r0 !== 0) {\n      ctx.arc(cx, cy, r0, endAngle, startAngle, clockwise);\n    }\n    // ctx.closePath();\n  };\n  return SausagePath;\n}(Path);\nexport default SausagePath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { calculateTextPosition } from 'zrender/lib/contain/text.js';\nimport { isArray, isNumber } from 'zrender/lib/core/util.js';\nexport function createSectorCalculateTextPosition(positionMapping, opts) {\n  opts = opts || {};\n  var isRoundCap = opts.isRoundCap;\n  return function (out, opts, boundingRect) {\n    var textPosition = opts.position;\n    if (!textPosition || textPosition instanceof Array) {\n      return calculateTextPosition(out, opts, boundingRect);\n    }\n    var mappedSectorPosition = positionMapping(textPosition);\n    var distance = opts.distance != null ? opts.distance : 5;\n    var sector = this.shape;\n    var cx = sector.cx;\n    var cy = sector.cy;\n    var r = sector.r;\n    var r0 = sector.r0;\n    var middleR = (r + r0) / 2;\n    var startAngle = sector.startAngle;\n    var endAngle = sector.endAngle;\n    var middleAngle = (startAngle + endAngle) / 2;\n    var extraDist = isRoundCap ? Math.abs(r - r0) / 2 : 0;\n    var mathCos = Math.cos;\n    var mathSin = Math.sin;\n    // base position: top-left\n    var x = cx + r * mathCos(startAngle);\n    var y = cy + r * mathSin(startAngle);\n    var textAlign = 'left';\n    var textVerticalAlign = 'top';\n    switch (mappedSectorPosition) {\n      case 'startArc':\n        x = cx + (r0 - distance) * mathCos(middleAngle);\n        y = cy + (r0 - distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'top';\n        break;\n      case 'insideStartArc':\n        x = cx + (r0 + distance) * mathCos(middleAngle);\n        y = cy + (r0 + distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'bottom';\n        break;\n      case 'startAngle':\n        x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, distance + extraDist, false);\n        y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, distance + extraDist, false);\n        textAlign = 'right';\n        textVerticalAlign = 'middle';\n        break;\n      case 'insideStartAngle':\n        x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, -distance + extraDist, false);\n        y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, -distance + extraDist, false);\n        textAlign = 'left';\n        textVerticalAlign = 'middle';\n        break;\n      case 'middle':\n        x = cx + middleR * mathCos(middleAngle);\n        y = cy + middleR * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'middle';\n        break;\n      case 'endArc':\n        x = cx + (r + distance) * mathCos(middleAngle);\n        y = cy + (r + distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'bottom';\n        break;\n      case 'insideEndArc':\n        x = cx + (r - distance) * mathCos(middleAngle);\n        y = cy + (r - distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'top';\n        break;\n      case 'endAngle':\n        x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, distance + extraDist, true);\n        y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, distance + extraDist, true);\n        textAlign = 'left';\n        textVerticalAlign = 'middle';\n        break;\n      case 'insideEndAngle':\n        x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, -distance + extraDist, true);\n        y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, -distance + extraDist, true);\n        textAlign = 'right';\n        textVerticalAlign = 'middle';\n        break;\n      default:\n        return calculateTextPosition(out, opts, boundingRect);\n    }\n    out = out || {};\n    out.x = x;\n    out.y = y;\n    out.align = textAlign;\n    out.verticalAlign = textVerticalAlign;\n    return out;\n  };\n}\nexport function setSectorTextRotation(sector, textPosition, positionMapping, rotateType) {\n  if (isNumber(rotateType)) {\n    // user-set rotation\n    sector.setTextConfig({\n      rotation: rotateType\n    });\n    return;\n  } else if (isArray(textPosition)) {\n    // user-set position, use 0 as auto rotation\n    sector.setTextConfig({\n      rotation: 0\n    });\n    return;\n  }\n  var shape = sector.shape;\n  var startAngle = shape.clockwise ? shape.startAngle : shape.endAngle;\n  var endAngle = shape.clockwise ? shape.endAngle : shape.startAngle;\n  var middleAngle = (startAngle + endAngle) / 2;\n  var anchorAngle;\n  var mappedSectorPosition = positionMapping(textPosition);\n  switch (mappedSectorPosition) {\n    case 'startArc':\n    case 'insideStartArc':\n    case 'middle':\n    case 'insideEndArc':\n    case 'endArc':\n      anchorAngle = middleAngle;\n      break;\n    case 'startAngle':\n    case 'insideStartAngle':\n      anchorAngle = startAngle;\n      break;\n    case 'endAngle':\n    case 'insideEndAngle':\n      anchorAngle = endAngle;\n      break;\n    default:\n      sector.setTextConfig({\n        rotation: 0\n      });\n      return;\n  }\n  var rotate = Math.PI * 1.5 - anchorAngle;\n  /**\n   * TODO: labels with rotate > Math.PI / 2 should be rotate another\n   * half round flipped to increase readability. However, only middle\n   * position supports this for now, because in other positions, the\n   * anchor point is not at the center of the text, so the positions\n   * after rotating is not as expected.\n   */\n  if (mappedSectorPosition === 'middle' && rotate > Math.PI / 2 && rotate < Math.PI * 1.5) {\n    rotate -= Math.PI;\n  }\n  sector.setTextConfig({\n    rotation: rotate\n  });\n}\nfunction adjustAngleDistanceX(angle, distance, isEnd) {\n  return distance * Math.sin(angle) * (isEnd ? -1 : 1);\n}\nfunction adjustAngleDistanceY(angle, distance, isEnd) {\n  return distance * Math.cos(angle) * (isEnd ? 1 : -1);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Path from 'zrender/lib/graphic/Path.js';\nimport Group from 'zrender/lib/graphic/Group.js';\nimport { extend, each, map } from 'zrender/lib/core/util.js';\nimport { Rect, Sector, updateProps, initProps, removeElementWithFadeOut, traverseElements } from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport { setLabelStyle, getLabelStatesModels, setLabelValueAnimation, labelInner } from '../../label/labelStyle.js';\nimport { throttle } from '../../util/throttle.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport Sausage from '../../util/shape/sausage.js';\nimport ChartView from '../../view/Chart.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport { getDefaultLabel, getDefaultInterpolatedLabel } from '../helper/labelHelper.js';\nimport { warn } from '../../util/log.js';\nimport { createSectorCalculateTextPosition, setSectorTextRotation } from '../../label/sectorLabel.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nimport { getSectorCornerRadius } from '../helper/sectorHelper.js';\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nfunction getClipArea(coord, data) {\n  var coordSysClipArea = coord.getArea && coord.getArea();\n  if (isCoordinateSystemType(coord, 'cartesian2d')) {\n    var baseAxis = coord.getBaseAxis();\n    // When boundaryGap is false or using time axis. bar may exceed the grid.\n    // We should not clip this part.\n    // See test/bar2.html\n    if (baseAxis.type !== 'category' || !baseAxis.onBand) {\n      var expandWidth = data.getLayout('bandWidth');\n      if (baseAxis.isHorizontal()) {\n        coordSysClipArea.x -= expandWidth;\n        coordSysClipArea.width += expandWidth * 2;\n      } else {\n        coordSysClipArea.y -= expandWidth;\n        coordSysClipArea.height += expandWidth * 2;\n      }\n    }\n  }\n  return coordSysClipArea;\n}\nvar BarView = /** @class */function (_super) {\n  __extends(BarView, _super);\n  function BarView() {\n    var _this = _super.call(this) || this;\n    _this.type = BarView.type;\n    _this._isFirstFrame = true;\n    return _this;\n  }\n  BarView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    this._model = seriesModel;\n    this._removeOnRenderedListener(api);\n    this._updateDrawMode(seriesModel);\n    var coordinateSystemType = seriesModel.get('coordinateSystem');\n    if (coordinateSystemType === 'cartesian2d' || coordinateSystemType === 'polar') {\n      // Clear previously rendered progressive elements.\n      this._progressiveEls = null;\n      this._isLargeDraw ? this._renderLarge(seriesModel, ecModel, api) : this._renderNormal(seriesModel, ecModel, api, payload);\n    } else if (process.env.NODE_ENV !== 'production') {\n      warn('Only cartesian2d and polar supported for bar.');\n    }\n  };\n  BarView.prototype.incrementalPrepareRender = function (seriesModel) {\n    this._clear();\n    this._updateDrawMode(seriesModel);\n    // incremental also need to clip, otherwise might be overlow.\n    // But must not set clip in each frame, otherwise all of the children will be marked redraw.\n    this._updateLargeClip(seriesModel);\n  };\n  BarView.prototype.incrementalRender = function (params, seriesModel) {\n    // Reset\n    this._progressiveEls = [];\n    // Do not support progressive in normal mode.\n    this._incrementalRenderLarge(params, seriesModel);\n  };\n  BarView.prototype.eachRendered = function (cb) {\n    traverseElements(this._progressiveEls || this.group, cb);\n  };\n  BarView.prototype._updateDrawMode = function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n      this._clear();\n    }\n  };\n  BarView.prototype._renderNormal = function (seriesModel, ecModel, api, payload) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var coord = seriesModel.coordinateSystem;\n    var baseAxis = coord.getBaseAxis();\n    var isHorizontalOrRadial;\n    if (coord.type === 'cartesian2d') {\n      isHorizontalOrRadial = baseAxis.isHorizontal();\n    } else if (coord.type === 'polar') {\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\n    }\n    var animationModel = seriesModel.isAnimationEnabled() ? seriesModel : null;\n    var realtimeSortCfg = shouldRealtimeSort(seriesModel, coord);\n    if (realtimeSortCfg) {\n      this._enableRealtimeSort(realtimeSortCfg, data, api);\n    }\n    var needsClip = seriesModel.get('clip', true) || realtimeSortCfg;\n    var coordSysClipArea = getClipArea(coord, data);\n    // If there is clipPath created in large mode. Remove it.\n    group.removeClipPath();\n    // We don't use clipPath in normal mode because we needs a perfect animation\n    // And don't want the label are clipped.\n    var roundCap = seriesModel.get('roundCap', true);\n    var drawBackground = seriesModel.get('showBackground', true);\n    var backgroundModel = seriesModel.getModel('backgroundStyle');\n    var barBorderRadius = backgroundModel.get('borderRadius') || 0;\n    var bgEls = [];\n    var oldBgEls = this._backgroundEls;\n    var isInitSort = payload && payload.isInitSort;\n    var isChangeOrder = payload && payload.type === 'changeAxisOrder';\n    function createBackground(dataIndex) {\n      var bgLayout = getLayout[coord.type](data, dataIndex);\n      if (!bgLayout) {\n        return null;\n      }\n      var bgEl = createBackgroundEl(coord, isHorizontalOrRadial, bgLayout);\n      bgEl.useStyle(backgroundModel.getItemStyle());\n      // Only cartesian2d support borderRadius.\n      if (coord.type === 'cartesian2d') {\n        bgEl.setShape('r', barBorderRadius);\n      } else {\n        bgEl.setShape('cornerRadius', barBorderRadius);\n      }\n      bgEls[dataIndex] = bgEl;\n      return bgEl;\n    }\n    ;\n    data.diff(oldData).add(function (dataIndex) {\n      var itemModel = data.getItemModel(dataIndex);\n      var layout = getLayout[coord.type](data, dataIndex, itemModel);\n      if (!layout) {\n        return;\n      }\n      if (drawBackground) {\n        createBackground(dataIndex);\n      }\n      // If dataZoom in filteMode: 'empty', the baseValue can be set as NaN in \"axisProxy\".\n      if (!data.hasValue(dataIndex) || !isValidLayout[coord.type](layout)) {\n        return;\n      }\n      var isClipped = false;\n      if (needsClip) {\n        // Clip will modify the layout params.\n        // And return a boolean to determine if the shape are fully clipped.\n        isClipped = clip[coord.type](coordSysClipArea, layout);\n      }\n      var el = elementCreator[coord.type](seriesModel, data, dataIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, false, roundCap);\n      if (realtimeSortCfg) {\n        /**\n         * Force label animation because even if the element is\n         * ignored because it's clipped, it may not be clipped after\n         * changing order. Then, if not using forceLabelAnimation,\n         * the label animation was never started, in which case,\n         * the label will be the final value and doesn't have label\n         * animation.\n         */\n        el.forceLabelAnimation = true;\n      }\n      updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n      if (isInitSort) {\n        el.attr({\n          shape: layout\n        });\n      } else if (realtimeSortCfg) {\n        updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, dataIndex, isHorizontalOrRadial, false, false);\n      } else {\n        initProps(el, {\n          shape: layout\n        }, seriesModel, dataIndex);\n      }\n      data.setItemGraphicEl(dataIndex, el);\n      group.add(el);\n      el.ignore = isClipped;\n    }).update(function (newIndex, oldIndex) {\n      var itemModel = data.getItemModel(newIndex);\n      var layout = getLayout[coord.type](data, newIndex, itemModel);\n      if (!layout) {\n        return;\n      }\n      if (drawBackground) {\n        var bgEl = void 0;\n        if (oldBgEls.length === 0) {\n          bgEl = createBackground(oldIndex);\n        } else {\n          bgEl = oldBgEls[oldIndex];\n          bgEl.useStyle(backgroundModel.getItemStyle());\n          // Only cartesian2d support borderRadius.\n          if (coord.type === 'cartesian2d') {\n            bgEl.setShape('r', barBorderRadius);\n          } else {\n            bgEl.setShape('cornerRadius', barBorderRadius);\n          }\n          bgEls[newIndex] = bgEl;\n        }\n        var bgLayout = getLayout[coord.type](data, newIndex);\n        var shape = createBackgroundShape(isHorizontalOrRadial, bgLayout, coord);\n        updateProps(bgEl, {\n          shape: shape\n        }, animationModel, newIndex);\n      }\n      var el = oldData.getItemGraphicEl(oldIndex);\n      if (!data.hasValue(newIndex) || !isValidLayout[coord.type](layout)) {\n        group.remove(el);\n        return;\n      }\n      var isClipped = false;\n      if (needsClip) {\n        isClipped = clip[coord.type](coordSysClipArea, layout);\n        if (isClipped) {\n          group.remove(el);\n        }\n      }\n      var roundCapChanged = el && (el.type === 'sector' && roundCap || el.type === 'sausage' && !roundCap);\n      if (roundCapChanged) {\n        // roundCap changed, there is no way to use animation from a `sector` to a `sausage` shape,\n        // so remove the old one and create a new shape\n        el && removeElementWithFadeOut(el, seriesModel, oldIndex);\n        el = null;\n      }\n      if (!el) {\n        el = elementCreator[coord.type](seriesModel, data, newIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, true, roundCap);\n      } else {\n        saveOldStyle(el);\n      }\n      if (realtimeSortCfg) {\n        el.forceLabelAnimation = true;\n      }\n      if (isChangeOrder) {\n        var textEl = el.getTextContent();\n        if (textEl) {\n          var labelInnerStore = labelInner(textEl);\n          if (labelInnerStore.prevValue != null) {\n            /**\n             * Set preValue to be value so that no new label\n             * should be started, otherwise, it will take a full\n             * `animationDurationUpdate` time to finish the\n             * animation, which is not expected.\n             */\n            labelInnerStore.prevValue = labelInnerStore.value;\n          }\n        }\n      }\n      // Not change anything if only order changed.\n      // Especially not change label.\n      else {\n        updateStyle(el, data, newIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n      }\n      if (isInitSort) {\n        el.attr({\n          shape: layout\n        });\n      } else if (realtimeSortCfg) {\n        updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, newIndex, isHorizontalOrRadial, true, isChangeOrder);\n      } else {\n        updateProps(el, {\n          shape: layout\n        }, seriesModel, newIndex, null);\n      }\n      data.setItemGraphicEl(newIndex, el);\n      el.ignore = isClipped;\n      group.add(el);\n    }).remove(function (dataIndex) {\n      var el = oldData.getItemGraphicEl(dataIndex);\n      el && removeElementWithFadeOut(el, seriesModel, dataIndex);\n    }).execute();\n    var bgGroup = this._backgroundGroup || (this._backgroundGroup = new Group());\n    bgGroup.removeAll();\n    for (var i = 0; i < bgEls.length; ++i) {\n      bgGroup.add(bgEls[i]);\n    }\n    group.add(bgGroup);\n    this._backgroundEls = bgEls;\n    this._data = data;\n  };\n  BarView.prototype._renderLarge = function (seriesModel, ecModel, api) {\n    this._clear();\n    createLarge(seriesModel, this.group);\n    this._updateLargeClip(seriesModel);\n  };\n  BarView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n    this._removeBackground();\n    createLarge(seriesModel, this.group, this._progressiveEls, true);\n  };\n  BarView.prototype._updateLargeClip = function (seriesModel) {\n    // Use clipPath in large mode.\n    var clipPath = seriesModel.get('clip', true) && createClipPath(seriesModel.coordinateSystem, false, seriesModel);\n    var group = this.group;\n    if (clipPath) {\n      group.setClipPath(clipPath);\n    } else {\n      group.removeClipPath();\n    }\n  };\n  BarView.prototype._enableRealtimeSort = function (realtimeSortCfg, data, api) {\n    var _this = this;\n    // If no data in the first frame, wait for data to initSort\n    if (!data.count()) {\n      return;\n    }\n    var baseAxis = realtimeSortCfg.baseAxis;\n    if (this._isFirstFrame) {\n      this._dispatchInitSort(data, realtimeSortCfg, api);\n      this._isFirstFrame = false;\n    } else {\n      var orderMapping_1 = function (idx) {\n        var el = data.getItemGraphicEl(idx);\n        var shape = el && el.shape;\n        return shape &&\n        // The result should be consistent with the initial sort by data value.\n        // Do not support the case that both positive and negative exist.\n        Math.abs(baseAxis.isHorizontal() ? shape.height : shape.width)\n        // If data is NaN, shape.xxx may be NaN, so use || 0 here in case\n        || 0;\n      };\n      this._onRendered = function () {\n        _this._updateSortWithinSameData(data, orderMapping_1, baseAxis, api);\n      };\n      api.getZr().on('rendered', this._onRendered);\n    }\n  };\n  BarView.prototype._dataSort = function (data, baseAxis, orderMapping) {\n    var info = [];\n    data.each(data.mapDimension(baseAxis.dim), function (ordinalNumber, dataIdx) {\n      var mappedValue = orderMapping(dataIdx);\n      mappedValue = mappedValue == null ? NaN : mappedValue;\n      info.push({\n        dataIndex: dataIdx,\n        mappedValue: mappedValue,\n        ordinalNumber: ordinalNumber\n      });\n    });\n    info.sort(function (a, b) {\n      // If NaN, it will be treated as min val.\n      return b.mappedValue - a.mappedValue;\n    });\n    return {\n      ordinalNumbers: map(info, function (item) {\n        return item.ordinalNumber;\n      })\n    };\n  };\n  BarView.prototype._isOrderChangedWithinSameData = function (data, orderMapping, baseAxis) {\n    var scale = baseAxis.scale;\n    var ordinalDataDim = data.mapDimension(baseAxis.dim);\n    var lastValue = Number.MAX_VALUE;\n    for (var tickNum = 0, len = scale.getOrdinalMeta().categories.length; tickNum < len; ++tickNum) {\n      var rawIdx = data.rawIndexOf(ordinalDataDim, scale.getRawOrdinalNumber(tickNum));\n      var value = rawIdx < 0\n      // If some tick have no bar, the tick will be treated as min.\n      ? Number.MIN_VALUE\n      // PENDING: if dataZoom on baseAxis exits, is it a performance issue?\n      : orderMapping(data.indexOfRawIndex(rawIdx));\n      if (value > lastValue) {\n        return true;\n      }\n      lastValue = value;\n    }\n    return false;\n  };\n  /*\n   * Consider the case when A and B changed order, whose representing\n   * bars are both out of sight, we don't wish to trigger reorder action\n   * as long as the order in the view doesn't change.\n   */\n  BarView.prototype._isOrderDifferentInView = function (orderInfo, baseAxis) {\n    var scale = baseAxis.scale;\n    var extent = scale.getExtent();\n    var tickNum = Math.max(0, extent[0]);\n    var tickMax = Math.min(extent[1], scale.getOrdinalMeta().categories.length - 1);\n    for (; tickNum <= tickMax; ++tickNum) {\n      if (orderInfo.ordinalNumbers[tickNum] !== scale.getRawOrdinalNumber(tickNum)) {\n        return true;\n      }\n    }\n  };\n  BarView.prototype._updateSortWithinSameData = function (data, orderMapping, baseAxis, api) {\n    if (!this._isOrderChangedWithinSameData(data, orderMapping, baseAxis)) {\n      return;\n    }\n    var sortInfo = this._dataSort(data, baseAxis, orderMapping);\n    if (this._isOrderDifferentInView(sortInfo, baseAxis)) {\n      this._removeOnRenderedListener(api);\n      api.dispatchAction({\n        type: 'changeAxisOrder',\n        componentType: baseAxis.dim + 'Axis',\n        axisId: baseAxis.index,\n        sortInfo: sortInfo\n      });\n    }\n  };\n  BarView.prototype._dispatchInitSort = function (data, realtimeSortCfg, api) {\n    var baseAxis = realtimeSortCfg.baseAxis;\n    var sortResult = this._dataSort(data, baseAxis, function (dataIdx) {\n      return data.get(data.mapDimension(realtimeSortCfg.otherAxis.dim), dataIdx);\n    });\n    api.dispatchAction({\n      type: 'changeAxisOrder',\n      componentType: baseAxis.dim + 'Axis',\n      isInitSort: true,\n      axisId: baseAxis.index,\n      sortInfo: sortResult\n    });\n  };\n  BarView.prototype.remove = function (ecModel, api) {\n    this._clear(this._model);\n    this._removeOnRenderedListener(api);\n  };\n  BarView.prototype.dispose = function (ecModel, api) {\n    this._removeOnRenderedListener(api);\n  };\n  BarView.prototype._removeOnRenderedListener = function (api) {\n    if (this._onRendered) {\n      api.getZr().off('rendered', this._onRendered);\n      this._onRendered = null;\n    }\n  };\n  BarView.prototype._clear = function (model) {\n    var group = this.group;\n    var data = this._data;\n    if (model && model.isAnimationEnabled() && data && !this._isLargeDraw) {\n      this._removeBackground();\n      this._backgroundEls = [];\n      data.eachItemGraphicEl(function (el) {\n        removeElementWithFadeOut(el, model, getECData(el).dataIndex);\n      });\n    } else {\n      group.removeAll();\n    }\n    this._data = null;\n    this._isFirstFrame = true;\n  };\n  BarView.prototype._removeBackground = function () {\n    this.group.remove(this._backgroundGroup);\n    this._backgroundGroup = null;\n  };\n  BarView.type = 'bar';\n  return BarView;\n}(ChartView);\nvar clip = {\n  cartesian2d: function (coordSysBoundingRect, layout) {\n    var signWidth = layout.width < 0 ? -1 : 1;\n    var signHeight = layout.height < 0 ? -1 : 1;\n    // Needs positive width and height\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n    var coordSysX2 = coordSysBoundingRect.x + coordSysBoundingRect.width;\n    var coordSysY2 = coordSysBoundingRect.y + coordSysBoundingRect.height;\n    var x = mathMax(layout.x, coordSysBoundingRect.x);\n    var x2 = mathMin(layout.x + layout.width, coordSysX2);\n    var y = mathMax(layout.y, coordSysBoundingRect.y);\n    var y2 = mathMin(layout.y + layout.height, coordSysY2);\n    var xClipped = x2 < x;\n    var yClipped = y2 < y;\n    // When xClipped or yClipped, the element will be marked as `ignore`.\n    // But we should also place the element at the edge of the coord sys bounding rect.\n    // Because if data changed and the bar shows again, its transition animation\n    // will begin at this place.\n    layout.x = xClipped && x > coordSysX2 ? x2 : x;\n    layout.y = yClipped && y > coordSysY2 ? y2 : y;\n    layout.width = xClipped ? 0 : x2 - x;\n    layout.height = yClipped ? 0 : y2 - y;\n    // Reverse back\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n    return xClipped || yClipped;\n  },\n  polar: function (coordSysClipArea, layout) {\n    var signR = layout.r0 <= layout.r ? 1 : -1;\n    // Make sure r is larger than r0\n    if (signR < 0) {\n      var tmp = layout.r;\n      layout.r = layout.r0;\n      layout.r0 = tmp;\n    }\n    var r = mathMin(layout.r, coordSysClipArea.r);\n    var r0 = mathMax(layout.r0, coordSysClipArea.r0);\n    layout.r = r;\n    layout.r0 = r0;\n    var clipped = r - r0 < 0;\n    // Reverse back\n    if (signR < 0) {\n      var tmp = layout.r;\n      layout.r = layout.r0;\n      layout.r0 = tmp;\n    }\n    return clipped;\n  }\n};\nvar elementCreator = {\n  cartesian2d: function (seriesModel, data, newIndex, layout, isHorizontal, animationModel, axisModel, isUpdate, roundCap) {\n    var rect = new Rect({\n      shape: extend({}, layout),\n      z2: 1\n    });\n    rect.__dataIndex = newIndex;\n    rect.name = 'item';\n    if (animationModel) {\n      var rectShape = rect.shape;\n      var animateProperty = isHorizontal ? 'height' : 'width';\n      rectShape[animateProperty] = 0;\n    }\n    return rect;\n  },\n  polar: function (seriesModel, data, newIndex, layout, isRadial, animationModel, axisModel, isUpdate, roundCap) {\n    var ShapeClass = !isRadial && roundCap ? Sausage : Sector;\n    var sector = new ShapeClass({\n      shape: layout,\n      z2: 1\n    });\n    sector.name = 'item';\n    var positionMap = createPolarPositionMapping(isRadial);\n    sector.calculateTextPosition = createSectorCalculateTextPosition(positionMap, {\n      isRoundCap: ShapeClass === Sausage\n    });\n    // Animation\n    if (animationModel) {\n      var sectorShape = sector.shape;\n      var animateProperty = isRadial ? 'r' : 'endAngle';\n      var animateTarget = {};\n      sectorShape[animateProperty] = isRadial ? layout.r0 : layout.startAngle;\n      animateTarget[animateProperty] = layout[animateProperty];\n      (isUpdate ? updateProps : initProps)(sector, {\n        shape: animateTarget\n        // __value: typeof dataValue === 'string' ? parseInt(dataValue, 10) : dataValue\n      }, animationModel);\n    }\n    return sector;\n  }\n};\nfunction shouldRealtimeSort(seriesModel, coordSys) {\n  var realtimeSortOption = seriesModel.get('realtimeSort', true);\n  var baseAxis = coordSys.getBaseAxis();\n  if (process.env.NODE_ENV !== 'production') {\n    if (realtimeSortOption) {\n      if (baseAxis.type !== 'category') {\n        warn('`realtimeSort` will not work because this bar series is not based on a category axis.');\n      }\n      if (coordSys.type !== 'cartesian2d') {\n        warn('`realtimeSort` will not work because this bar series is not on cartesian2d.');\n      }\n    }\n  }\n  if (realtimeSortOption && baseAxis.type === 'category' && coordSys.type === 'cartesian2d') {\n    return {\n      baseAxis: baseAxis,\n      otherAxis: coordSys.getOtherAxis(baseAxis)\n    };\n  }\n}\nfunction updateRealtimeAnimation(realtimeSortCfg, seriesAnimationModel, el, layout, newIndex, isHorizontal, isUpdate, isChangeOrder) {\n  var seriesTarget;\n  var axisTarget;\n  if (isHorizontal) {\n    axisTarget = {\n      x: layout.x,\n      width: layout.width\n    };\n    seriesTarget = {\n      y: layout.y,\n      height: layout.height\n    };\n  } else {\n    axisTarget = {\n      y: layout.y,\n      height: layout.height\n    };\n    seriesTarget = {\n      x: layout.x,\n      width: layout.width\n    };\n  }\n  if (!isChangeOrder) {\n    // Keep the original growth animation if only axis order changed.\n    // Not start a new animation.\n    (isUpdate ? updateProps : initProps)(el, {\n      shape: seriesTarget\n    }, seriesAnimationModel, newIndex, null);\n  }\n  var axisAnimationModel = seriesAnimationModel ? realtimeSortCfg.baseAxis.model : null;\n  (isUpdate ? updateProps : initProps)(el, {\n    shape: axisTarget\n  }, axisAnimationModel, newIndex);\n}\nfunction checkPropertiesNotValid(obj, props) {\n  for (var i = 0; i < props.length; i++) {\n    if (!isFinite(obj[props[i]])) {\n      return true;\n    }\n  }\n  return false;\n}\nvar rectPropties = ['x', 'y', 'width', 'height'];\nvar polarPropties = ['cx', 'cy', 'r', 'startAngle', 'endAngle'];\nvar isValidLayout = {\n  cartesian2d: function (layout) {\n    return !checkPropertiesNotValid(layout, rectPropties);\n  },\n  polar: function (layout) {\n    return !checkPropertiesNotValid(layout, polarPropties);\n  }\n};\nvar getLayout = {\n  // itemModel is only used to get borderWidth, which is not needed\n  // when calculating bar background layout.\n  cartesian2d: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    if (!layout) {\n      return null;\n    }\n    var fixedLineWidth = itemModel ? getLineWidth(itemModel, layout) : 0;\n    // fix layout with lineWidth\n    var signX = layout.width > 0 ? 1 : -1;\n    var signY = layout.height > 0 ? 1 : -1;\n    return {\n      x: layout.x + signX * fixedLineWidth / 2,\n      y: layout.y + signY * fixedLineWidth / 2,\n      width: layout.width - signX * fixedLineWidth,\n      height: layout.height - signY * fixedLineWidth\n    };\n  },\n  polar: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    return {\n      cx: layout.cx,\n      cy: layout.cy,\n      r0: layout.r0,\n      r: layout.r,\n      startAngle: layout.startAngle,\n      endAngle: layout.endAngle,\n      clockwise: layout.clockwise\n    };\n  }\n};\nfunction isZeroOnPolar(layout) {\n  return layout.startAngle != null && layout.endAngle != null && layout.startAngle === layout.endAngle;\n}\nfunction createPolarPositionMapping(isRadial) {\n  return function (isRadial) {\n    var arcOrAngle = isRadial ? 'Arc' : 'Angle';\n    return function (position) {\n      switch (position) {\n        case 'start':\n        case 'insideStart':\n        case 'end':\n        case 'insideEnd':\n          return position + arcOrAngle;\n        default:\n          return position;\n      }\n    };\n  }(isRadial);\n}\nfunction updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, isPolar) {\n  var style = data.getItemVisual(dataIndex, 'style');\n  if (!isPolar) {\n    var borderRadius = itemModel.get(['itemStyle', 'borderRadius']) || 0;\n    el.setShape('r', borderRadius);\n  } else if (!seriesModel.get('roundCap')) {\n    var sectorShape = el.shape;\n    var cornerRadius = getSectorCornerRadius(itemModel.getModel('itemStyle'), sectorShape, true);\n    extend(sectorShape, cornerRadius);\n    el.setShape(sectorShape);\n  }\n  el.useStyle(style);\n  var cursorStyle = itemModel.getShallow('cursor');\n  cursorStyle && el.attr('cursor', cursorStyle);\n  var labelPositionOutside = isPolar ? isHorizontalOrRadial ? layout.r >= layout.r0 ? 'endArc' : 'startArc' : layout.endAngle >= layout.startAngle ? 'endAngle' : 'startAngle' : isHorizontalOrRadial ? layout.height >= 0 ? 'bottom' : 'top' : layout.width >= 0 ? 'right' : 'left';\n  var labelStatesModels = getLabelStatesModels(itemModel);\n  setLabelStyle(el, labelStatesModels, {\n    labelFetcher: seriesModel,\n    labelDataIndex: dataIndex,\n    defaultText: getDefaultLabel(seriesModel.getData(), dataIndex),\n    inheritColor: style.fill,\n    defaultOpacity: style.opacity,\n    defaultOutsidePosition: labelPositionOutside\n  });\n  var label = el.getTextContent();\n  if (isPolar && label) {\n    var position = itemModel.get(['label', 'position']);\n    el.textConfig.inside = position === 'middle' ? true : null;\n    setSectorTextRotation(el, position === 'outside' ? labelPositionOutside : position, createPolarPositionMapping(isHorizontalOrRadial), itemModel.get(['label', 'rotate']));\n  }\n  setLabelValueAnimation(label, labelStatesModels, seriesModel.getRawValue(dataIndex), function (value) {\n    return getDefaultInterpolatedLabel(data, value);\n  });\n  var emphasisModel = itemModel.getModel(['emphasis']);\n  toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  setStatesStylesFromModel(el, itemModel);\n  if (isZeroOnPolar(layout)) {\n    el.style.fill = 'none';\n    el.style.stroke = 'none';\n    each(el.states, function (state) {\n      if (state.style) {\n        state.style.fill = state.style.stroke = 'none';\n      }\n    });\n  }\n}\n// In case width or height are too small.\nfunction getLineWidth(itemModel, rawLayout) {\n  // Has no border.\n  var borderColor = itemModel.get(['itemStyle', 'borderColor']);\n  if (!borderColor || borderColor === 'none') {\n    return 0;\n  }\n  var lineWidth = itemModel.get(['itemStyle', 'borderWidth']) || 0;\n  // width or height may be NaN for empty data\n  var width = isNaN(rawLayout.width) ? Number.MAX_VALUE : Math.abs(rawLayout.width);\n  var height = isNaN(rawLayout.height) ? Number.MAX_VALUE : Math.abs(rawLayout.height);\n  return Math.min(lineWidth, width, height);\n}\nvar LagePathShape = /** @class */function () {\n  function LagePathShape() {}\n  return LagePathShape;\n}();\nvar LargePath = /** @class */function (_super) {\n  __extends(LargePath, _super);\n  function LargePath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'largeBar';\n    return _this;\n  }\n  LargePath.prototype.getDefaultShape = function () {\n    return new LagePathShape();\n  };\n  LargePath.prototype.buildPath = function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n    var baseDimIdx = this.baseDimIdx;\n    var valueDimIdx = 1 - this.baseDimIdx;\n    var startPoint = [];\n    var size = [];\n    var barWidth = this.barWidth;\n    for (var i = 0; i < points.length; i += 3) {\n      size[baseDimIdx] = barWidth;\n      size[valueDimIdx] = points[i + 2];\n      startPoint[baseDimIdx] = points[i + baseDimIdx];\n      startPoint[valueDimIdx] = points[i + valueDimIdx];\n      ctx.rect(startPoint[0], startPoint[1], size[0], size[1]);\n    }\n  };\n  return LargePath;\n}(Path);\nfunction createLarge(seriesModel, group, progressiveEls, incremental) {\n  // TODO support polar\n  var data = seriesModel.getData();\n  var baseDimIdx = data.getLayout('valueAxisHorizontal') ? 1 : 0;\n  var largeDataIndices = data.getLayout('largeDataIndices');\n  var barWidth = data.getLayout('size');\n  var backgroundModel = seriesModel.getModel('backgroundStyle');\n  var bgPoints = data.getLayout('largeBackgroundPoints');\n  if (bgPoints) {\n    var bgEl = new LargePath({\n      shape: {\n        points: bgPoints\n      },\n      incremental: !!incremental,\n      silent: true,\n      z2: 0\n    });\n    bgEl.baseDimIdx = baseDimIdx;\n    bgEl.largeDataIndices = largeDataIndices;\n    bgEl.barWidth = barWidth;\n    bgEl.useStyle(backgroundModel.getItemStyle());\n    group.add(bgEl);\n    progressiveEls && progressiveEls.push(bgEl);\n  }\n  var el = new LargePath({\n    shape: {\n      points: data.getLayout('largePoints')\n    },\n    incremental: !!incremental,\n    ignoreCoarsePointer: true,\n    z2: 1\n  });\n  el.baseDimIdx = baseDimIdx;\n  el.largeDataIndices = largeDataIndices;\n  el.barWidth = barWidth;\n  group.add(el);\n  el.useStyle(data.getVisual('style'));\n  // Stroke is rendered first to avoid overlapping with fill\n  el.style.stroke = null;\n  // Enable tooltip and user mouse/touch event handlers.\n  getECData(el).seriesIndex = seriesModel.seriesIndex;\n  if (!seriesModel.get('silent')) {\n    el.on('mousedown', largePathUpdateDataIndex);\n    el.on('mousemove', largePathUpdateDataIndex);\n  }\n  progressiveEls && progressiveEls.push(el);\n}\n// Use throttle to avoid frequently traverse to find dataIndex.\nvar largePathUpdateDataIndex = throttle(function (event) {\n  var largePath = this;\n  var dataIndex = largePathFindDataIndex(largePath, event.offsetX, event.offsetY);\n  getECData(largePath).dataIndex = dataIndex >= 0 ? dataIndex : null;\n}, 30, false);\nfunction largePathFindDataIndex(largePath, x, y) {\n  var baseDimIdx = largePath.baseDimIdx;\n  var valueDimIdx = 1 - baseDimIdx;\n  var points = largePath.shape.points;\n  var largeDataIndices = largePath.largeDataIndices;\n  var startPoint = [];\n  var size = [];\n  var barWidth = largePath.barWidth;\n  for (var i = 0, len = points.length / 3; i < len; i++) {\n    var ii = i * 3;\n    size[baseDimIdx] = barWidth;\n    size[valueDimIdx] = points[ii + 2];\n    startPoint[baseDimIdx] = points[ii + baseDimIdx];\n    startPoint[valueDimIdx] = points[ii + valueDimIdx];\n    if (size[valueDimIdx] < 0) {\n      startPoint[valueDimIdx] += size[valueDimIdx];\n      size[valueDimIdx] = -size[valueDimIdx];\n    }\n    if (x >= startPoint[0] && x <= startPoint[0] + size[0] && y >= startPoint[1] && y <= startPoint[1] + size[1]) {\n      return largeDataIndices[i];\n    }\n  }\n  return -1;\n}\nfunction createBackgroundShape(isHorizontalOrRadial, layout, coord) {\n  if (isCoordinateSystemType(coord, 'cartesian2d')) {\n    var rectShape = layout;\n    var coordLayout = coord.getArea();\n    return {\n      x: isHorizontalOrRadial ? rectShape.x : coordLayout.x,\n      y: isHorizontalOrRadial ? coordLayout.y : rectShape.y,\n      width: isHorizontalOrRadial ? rectShape.width : coordLayout.width,\n      height: isHorizontalOrRadial ? coordLayout.height : rectShape.height\n    };\n  } else {\n    var coordLayout = coord.getArea();\n    var sectorShape = layout;\n    return {\n      cx: coordLayout.cx,\n      cy: coordLayout.cy,\n      r0: isHorizontalOrRadial ? coordLayout.r0 : sectorShape.r0,\n      r: isHorizontalOrRadial ? coordLayout.r : sectorShape.r,\n      startAngle: isHorizontalOrRadial ? sectorShape.startAngle : 0,\n      endAngle: isHorizontalOrRadial ? sectorShape.endAngle : Math.PI * 2\n    };\n  }\n}\nfunction createBackgroundEl(coord, isHorizontalOrRadial, layout) {\n  var ElementClz = coord.type === 'polar' ? Sector : Rect;\n  return new ElementClz({\n    shape: createBackgroundShape(isHorizontalOrRadial, layout, coord),\n    silent: true,\n    z2: 0\n  });\n}\nexport default BarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { layout, createProgressiveLayout } from '../../layout/barGrid.js';\nimport dataSample from '../../processor/dataSample.js';\nimport BarSeries from './BarSeries.js';\nimport BarView from './BarView.js';\nexport function install(registers) {\n  registers.registerChartView(BarView);\n  registers.registerSeriesModel(BarSeries);\n  registers.registerLayout(registers.PRIORITY.VISUAL.LAYOUT, zrUtil.curry(layout, 'bar'));\n  // Do layout after other overall layout, which can prepare some information.\n  registers.registerLayout(registers.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, createProgressiveLayout('bar'));\n  // Down sample after filter\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('bar'));\n  /**\n   * @payload\n   * @property {string} [componentType=series]\n   * @property {number} [dx]\n   * @property {number} [dy]\n   * @property {number} [zoom]\n   * @property {number} [originX]\n   * @property {number} [originY]\n   */\n  registers.registerAction({\n    type: 'changeAxisOrder',\n    event: 'changeAxisOrder',\n    update: 'update'\n  }, function (payload, ecModel) {\n    var componentType = payload.componentType || 'series';\n    ecModel.eachComponent({\n      mainType: componentType,\n      query: payload\n    }, function (componentModel) {\n      if (payload.sortInfo) {\n        componentModel.axis.setCategorySortInfo(payload.sortInfo);\n      }\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData.js';\nimport SeriesModel from '../../model/Series.js';\nimport tokens from '../../visual/tokens.js';\nvar ScatterSeriesModel = /** @class */function (_super) {\n  __extends(ScatterSeriesModel, _super);\n  function ScatterSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ScatterSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n  ScatterSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n  ScatterSeriesModel.prototype.getProgressive = function () {\n    var progressive = this.option.progressive;\n    if (progressive == null) {\n      // PENDING\n      return this.option.large ? 5e3 : this.get('progressive');\n    }\n    return progressive;\n  };\n  ScatterSeriesModel.prototype.getProgressiveThreshold = function () {\n    var progressiveThreshold = this.option.progressiveThreshold;\n    if (progressiveThreshold == null) {\n      // PENDING\n      return this.option.large ? 1e4 : this.get('progressiveThreshold');\n    }\n    return progressiveThreshold;\n  };\n  ScatterSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.point(data.getItemLayout(dataIndex));\n  };\n  ScatterSeriesModel.prototype.getZLevelKey = function () {\n    // Each progressive series has individual key.\n    return this.getData().count() > this.getProgressiveThreshold() ? this.id : '';\n  };\n  ScatterSeriesModel.type = 'series.scatter';\n  ScatterSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar', 'matrix'];\n  ScatterSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    symbolSize: 10,\n    // symbolRotate: null,  // \n    large: false,\n    // Available when large is true\n    largeThreshold: 2000,\n    // cursor: null,\n    itemStyle: {\n      opacity: 0.8\n      // color: \n    },\n    emphasis: {\n      scale: true\n    },\n    // If clip the overflow graphics\n    // Works on cartesian / polar series\n    clip: true,\n    select: {\n      itemStyle: {\n        borderColor: tokens.color.primary\n      }\n    },\n    universalTransition: {\n      divideShape: 'clone'\n    }\n    // progressive: null\n  };\n  return ScatterSeriesModel;\n}(SeriesModel);\nexport default ScatterSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Float32Array */\n// TODO Batch by color\nimport * as graphic from '../../util/graphic.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport { getECData } from '../../util/innerStore.js';\nvar BOOST_SIZE_THRESHOLD = 4;\nvar LargeSymbolPathShape = /** @class */function () {\n  function LargeSymbolPathShape() {}\n  return LargeSymbolPathShape;\n}();\nvar LargeSymbolPath = /** @class */function (_super) {\n  __extends(LargeSymbolPath, _super);\n  function LargeSymbolPath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this._off = 0;\n    _this.hoverDataIdx = -1;\n    return _this;\n  }\n  LargeSymbolPath.prototype.getDefaultShape = function () {\n    return new LargeSymbolPathShape();\n  };\n  LargeSymbolPath.prototype.reset = function () {\n    this.notClear = false;\n    this._off = 0;\n  };\n  LargeSymbolPath.prototype.buildPath = function (path, shape) {\n    var points = shape.points;\n    var size = shape.size;\n    var symbolProxy = this.symbolProxy;\n    var symbolProxyShape = symbolProxy.shape;\n    var ctx = path.getContext ? path.getContext() : path;\n    var canBoost = ctx && size[0] < BOOST_SIZE_THRESHOLD;\n    var softClipShape = this.softClipShape;\n    var i;\n    // Do draw in afterBrush.\n    if (canBoost) {\n      this._ctx = ctx;\n      return;\n    }\n    this._ctx = null;\n    for (i = this._off; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n      if (softClipShape && !softClipShape.contain(x, y)) {\n        continue;\n      }\n      symbolProxyShape.x = x - size[0] / 2;\n      symbolProxyShape.y = y - size[1] / 2;\n      symbolProxyShape.width = size[0];\n      symbolProxyShape.height = size[1];\n      symbolProxy.buildPath(path, symbolProxyShape, true);\n    }\n    if (this.incremental) {\n      this._off = i;\n      this.notClear = true;\n    }\n  };\n  LargeSymbolPath.prototype.afterBrush = function () {\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var ctx = this._ctx;\n    var softClipShape = this.softClipShape;\n    var i;\n    if (!ctx) {\n      return;\n    }\n    // PENDING If style or other canvas status changed?\n    for (i = this._off; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n      if (softClipShape && !softClipShape.contain(x, y)) {\n        continue;\n      }\n      // fillRect is faster than building a rect path and draw.\n      // And it support light globalCompositeOperation.\n      ctx.fillRect(x - size[0] / 2, y - size[1] / 2, size[0], size[1]);\n    }\n    if (this.incremental) {\n      this._off = i;\n      this.notClear = true;\n    }\n  };\n  LargeSymbolPath.prototype.findDataIndex = function (x, y) {\n    // TODO ???\n    // Consider transform\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var w = Math.max(size[0], 4);\n    var h = Math.max(size[1], 4);\n    // Not consider transform\n    // Treat each element as a rect\n    // top down traverse\n    for (var idx = points.length / 2 - 1; idx >= 0; idx--) {\n      var i = idx * 2;\n      var x0 = points[i] - w / 2;\n      var y0 = points[i + 1] - h / 2;\n      if (x >= x0 && y >= y0 && x <= x0 + w && y <= y0 + h) {\n        return idx;\n      }\n    }\n    return -1;\n  };\n  LargeSymbolPath.prototype.contain = function (x, y) {\n    var localPos = this.transformCoordToLocal(x, y);\n    var rect = this.getBoundingRect();\n    x = localPos[0];\n    y = localPos[1];\n    if (rect.contain(x, y)) {\n      // Cache found data index.\n      var dataIdx = this.hoverDataIdx = this.findDataIndex(x, y);\n      return dataIdx >= 0;\n    }\n    this.hoverDataIdx = -1;\n    return false;\n  };\n  LargeSymbolPath.prototype.getBoundingRect = function () {\n    // Ignore stroke for large symbol draw.\n    var rect = this._rect;\n    if (!rect) {\n      var shape = this.shape;\n      var points = shape.points;\n      var size = shape.size;\n      var w = size[0];\n      var h = size[1];\n      var minX = Infinity;\n      var minY = Infinity;\n      var maxX = -Infinity;\n      var maxY = -Infinity;\n      for (var i = 0; i < points.length;) {\n        var x = points[i++];\n        var y = points[i++];\n        minX = Math.min(x, minX);\n        maxX = Math.max(x, maxX);\n        minY = Math.min(y, minY);\n        maxY = Math.max(y, maxY);\n      }\n      rect = this._rect = new graphic.BoundingRect(minX - w / 2, minY - h / 2, maxX - minX + w, maxY - minY + h);\n    }\n    return rect;\n  };\n  return LargeSymbolPath;\n}(graphic.Path);\nvar LargeSymbolDraw = /** @class */function () {\n  function LargeSymbolDraw() {\n    this.group = new graphic.Group();\n  }\n  /**\n   * Update symbols draw by new data\n   */\n  LargeSymbolDraw.prototype.updateData = function (data, opt) {\n    this._clear();\n    var symbolEl = this._create();\n    symbolEl.setShape({\n      points: data.getLayout('points')\n    });\n    this._setCommon(symbolEl, data, opt);\n  };\n  LargeSymbolDraw.prototype.updateLayout = function (data) {\n    var points = data.getLayout('points');\n    this.group.eachChild(function (child) {\n      if (child.startIndex != null) {\n        var len = (child.endIndex - child.startIndex) * 2;\n        var byteOffset = child.startIndex * 4 * 2;\n        points = new Float32Array(points.buffer, byteOffset, len);\n      }\n      child.setShape('points', points);\n      // Reset draw cursor.\n      child.reset();\n    });\n  };\n  LargeSymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this._clear();\n  };\n  LargeSymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    var lastAdded = this._newAdded[0];\n    var points = data.getLayout('points');\n    var oldPoints = lastAdded && lastAdded.shape.points;\n    // Merging the exists. Each element has 1e4 points.\n    // Consider the performance balance between too much elements and too much points in one shape(may affect hover optimization)\n    if (oldPoints && oldPoints.length < 2e4) {\n      var oldLen = oldPoints.length;\n      var newPoints = new Float32Array(oldLen + points.length);\n      // Concat two array\n      newPoints.set(oldPoints);\n      newPoints.set(points, oldLen);\n      // Update endIndex\n      lastAdded.endIndex = taskParams.end;\n      lastAdded.setShape({\n        points: newPoints\n      });\n    } else {\n      // Clear\n      this._newAdded = [];\n      var symbolEl = this._create();\n      symbolEl.startIndex = taskParams.start;\n      symbolEl.endIndex = taskParams.end;\n      symbolEl.incremental = true;\n      symbolEl.setShape({\n        points: points\n      });\n      this._setCommon(symbolEl, data, opt);\n    }\n  };\n  LargeSymbolDraw.prototype.eachRendered = function (cb) {\n    this._newAdded[0] && cb(this._newAdded[0]);\n  };\n  LargeSymbolDraw.prototype._create = function () {\n    var symbolEl = new LargeSymbolPath({\n      cursor: 'default'\n    });\n    symbolEl.ignoreCoarsePointer = true;\n    this.group.add(symbolEl);\n    this._newAdded.push(symbolEl);\n    return symbolEl;\n  };\n  LargeSymbolDraw.prototype._setCommon = function (symbolEl, data, opt) {\n    var hostModel = data.hostModel;\n    opt = opt || {};\n    var size = data.getVisual('symbolSize');\n    symbolEl.setShape('size', size instanceof Array ? size : [size, size]);\n    symbolEl.softClipShape = opt.clipShape || null;\n    // Create symbolProxy to build path for each data\n    symbolEl.symbolProxy = createSymbol(data.getVisual('symbol'), 0, 0, 0, 0);\n    // Use symbolProxy setColor method\n    symbolEl.setColor = symbolEl.symbolProxy.setColor;\n    var extrudeShadow = symbolEl.shape.size[0] < BOOST_SIZE_THRESHOLD;\n    symbolEl.useStyle(\n    // Draw shadow when doing fillRect is extremely slow.\n    hostModel.getModel('itemStyle').getItemStyle(extrudeShadow ? ['color', 'shadowBlur', 'shadowColor'] : ['color']));\n    var globalStyle = data.getVisual('style');\n    var visualColor = globalStyle && globalStyle.fill;\n    if (visualColor) {\n      symbolEl.setColor(visualColor);\n    }\n    var ecData = getECData(symbolEl);\n    // Enable tooltip\n    // PENDING May have performance issue when path is extremely large\n    ecData.seriesIndex = hostModel.seriesIndex;\n    symbolEl.on('mousemove', function (e) {\n      ecData.dataIndex = null;\n      var dataIndex = symbolEl.hoverDataIdx;\n      if (dataIndex >= 0) {\n        // Provide dataIndex for tooltip\n        ecData.dataIndex = dataIndex + (symbolEl.startIndex || 0);\n      }\n    });\n  };\n  LargeSymbolDraw.prototype.remove = function () {\n    this._clear();\n  };\n  LargeSymbolDraw.prototype._clear = function () {\n    this._newAdded = [];\n    this.group.removeAll();\n  };\n  return LargeSymbolDraw;\n}();\nexport default LargeSymbolDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport LargeSymbolDraw from '../helper/LargeSymbolDraw.js';\nimport pointsLayout from '../../layout/points.js';\nimport ChartView from '../../view/Chart.js';\nvar ScatterView = /** @class */function (_super) {\n  __extends(ScatterView, _super);\n  function ScatterView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ScatterView.type;\n    return _this;\n  }\n  ScatterView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n    symbolDraw.updateData(data, {\n      // TODO\n      // If this parameter should be a shape or a bounding volume\n      // shape will be more general.\n      // But bounding volume like bounding rect will be much faster in the contain calculation\n      clipShape: this._getClipShape(seriesModel)\n    });\n    this._finished = true;\n  };\n  ScatterView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n    symbolDraw.incrementalPrepareUpdate(data);\n    this._finished = false;\n  };\n  ScatterView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n    this._symbolDraw.incrementalUpdate(taskParams, seriesModel.getData(), {\n      clipShape: this._getClipShape(seriesModel)\n    });\n    this._finished = taskParams.end === seriesModel.getData().count();\n  };\n  ScatterView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    // Must mark group dirty and make sure the incremental layer will be cleared\n    // PENDING\n    this.group.dirty();\n    if (!this._finished || data.count() > 1e4) {\n      return {\n        update: true\n      };\n    } else {\n      var res = pointsLayout('').reset(seriesModel, ecModel, api);\n      if (res.progress) {\n        res.progress({\n          start: 0,\n          end: data.count(),\n          count: data.count()\n        }, data);\n      }\n      this._symbolDraw.updateLayout(data);\n    }\n  };\n  ScatterView.prototype.eachRendered = function (cb) {\n    this._symbolDraw && this._symbolDraw.eachRendered(cb);\n  };\n  ScatterView.prototype._getClipShape = function (seriesModel) {\n    if (!seriesModel.get('clip', true)) {\n      return;\n    }\n    var coordSys = seriesModel.coordinateSystem;\n    // PENDING make `0.1` configurable, for example, `clipTolerance`?\n    return coordSys && coordSys.getArea && coordSys.getArea(.1);\n  };\n  ScatterView.prototype._updateSymbolDraw = function (data, seriesModel) {\n    var symbolDraw = this._symbolDraw;\n    var pipelineContext = seriesModel.pipelineContext;\n    var isLargeDraw = pipelineContext.large;\n    if (!symbolDraw || isLargeDraw !== this._isLargeDraw) {\n      symbolDraw && symbolDraw.remove();\n      symbolDraw = this._symbolDraw = isLargeDraw ? new LargeSymbolDraw() : new SymbolDraw();\n      this._isLargeDraw = isLargeDraw;\n      this.group.removeAll();\n    }\n    this.group.add(symbolDraw.group);\n    return symbolDraw;\n  };\n  ScatterView.prototype.remove = function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove(true);\n    this._symbolDraw = null;\n  };\n  ScatterView.prototype.dispose = function () {};\n  ScatterView.type = 'scatter';\n  return ScatterView;\n}(ChartView);\nexport default ScatterView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nimport { getLayoutParams, mergeLayoutParam } from '../../util/layout.js';\nimport tokens from '../../visual/tokens.js';\n// For backward compatibility, do not use a margin. Although the labels might touch the edge of\n// the canvas, the chart canvas probably does not have an border or a different background color within a page.\nexport var OUTER_BOUNDS_DEFAULT = {\n  left: 0,\n  right: 0,\n  top: 0,\n  bottom: 0\n};\nexport var OUTER_BOUNDS_CLAMP_DEFAULT = ['25%', '25%'];\nvar GridModel = /** @class */function (_super) {\n  __extends(GridModel, _super);\n  function GridModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  GridModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n    var outerBoundsCp = getLayoutParams(option.outerBounds);\n    _super.prototype.mergeDefaultAndTheme.apply(this, arguments);\n    if (outerBoundsCp && option.outerBounds) {\n      mergeLayoutParam(option.outerBounds, outerBoundsCp);\n    }\n  };\n  GridModel.prototype.mergeOption = function (newOption, ecModel) {\n    _super.prototype.mergeOption.apply(this, arguments);\n    if (this.option.outerBounds && newOption.outerBounds) {\n      mergeLayoutParam(this.option.outerBounds, newOption.outerBounds);\n    }\n  };\n  GridModel.type = 'grid';\n  GridModel.dependencies = ['xAxis', 'yAxis'];\n  GridModel.layoutMode = 'box';\n  GridModel.defaultOption = {\n    show: false,\n    // zlevel: 0,\n    z: 0,\n    left: '15%',\n    top: 65,\n    right: '10%',\n    bottom: 80,\n    // If grid size contain label\n    containLabel: false,\n    outerBoundsMode: 'auto',\n    outerBounds: OUTER_BOUNDS_DEFAULT,\n    outerBoundsContain: 'all',\n    outerBoundsClampWidth: OUTER_BOUNDS_CLAMP_DEFAULT[0],\n    outerBoundsClampHeight: OUTER_BOUNDS_CLAMP_DEFAULT[1],\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    backgroundColor: tokens.color.transparent,\n    borderWidth: 1,\n    borderColor: tokens.color.neutral30\n  };\n  return GridModel;\n}(ComponentModel);\nexport default GridModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nvar CartesianAxisModel = /** @class */function (_super) {\n  __extends(CartesianAxisModel, _super);\n  function CartesianAxisModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  CartesianAxisModel.prototype.getCoordSysModel = function () {\n    return this.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n  };\n  CartesianAxisModel.type = 'cartesian2dAxis';\n  return CartesianAxisModel;\n}(ComponentModel);\nexport { CartesianAxisModel };\nzrUtil.mixin(CartesianAxisModel, AxisModelCommonMixin);\nexport default CartesianAxisModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport tokens from '../visual/tokens.js';\nvar defaultOption = {\n  show: true,\n  // zlevel: 0,\n  z: 0,\n  // Inverse the axis.\n  inverse: false,\n  // Axis name displayed.\n  name: '',\n  // 'start' | 'middle' | 'end'\n  nameLocation: 'end',\n  // By degree. By default auto rotate by nameLocation.\n  nameRotate: null,\n  nameTruncate: {\n    maxWidth: null,\n    ellipsis: '...',\n    placeholder: '.'\n  },\n  // Use global text style by default.\n  nameTextStyle: {\n    // textMargin: never, // The default value will be specified based on `nameLocation`.\n  },\n  // The gap between axisName and axisLine.\n  nameGap: 15,\n  // Default `false` to support tooltip.\n  silent: false,\n  // Default `false` to avoid legacy user event listener fail.\n  triggerEvent: false,\n  tooltip: {\n    show: false\n  },\n  axisPointer: {},\n  axisLine: {\n    show: true,\n    onZero: true,\n    onZeroAxisIndex: null,\n    lineStyle: {\n      color: tokens.color.axisLine,\n      width: 1,\n      type: 'solid'\n    },\n    // The arrow at both ends the the axis.\n    symbol: ['none', 'none'],\n    symbolSize: [10, 15],\n    breakLine: true\n  },\n  axisTick: {\n    show: true,\n    // Whether axisTick is inside the grid or outside the grid.\n    inside: false,\n    // The length of axisTick.\n    length: 5,\n    lineStyle: {\n      width: 1\n    }\n  },\n  axisLabel: {\n    show: true,\n    // Whether axisLabel is inside the grid or outside the grid.\n    inside: false,\n    rotate: 0,\n    // true | false | null/undefined (auto)\n    showMinLabel: null,\n    // true | false | null/undefined (auto)\n    showMaxLabel: null,\n    margin: 8,\n    // formatter: null,\n    fontSize: 12,\n    color: tokens.color.axisLabel,\n    // In scenarios like axis labels, when labels text's progression direction matches the label\n    // layout direction (e.g., when all letters are in a single line), extra start/end margin is\n    // needed to prevent the text from appearing visually joined. In the other case, when lables\n    // are stacked (e.g., having rotation or horizontal labels on yAxis), the layout needs to be\n    // compact, so NO extra top/bottom margin should be applied.\n    textMargin: [0, 3]\n  },\n  splitLine: {\n    show: true,\n    showMinLine: true,\n    showMaxLine: true,\n    lineStyle: {\n      color: tokens.color.axisSplitLine,\n      width: 1,\n      type: 'solid'\n    }\n  },\n  splitArea: {\n    show: false,\n    areaStyle: {\n      color: [tokens.color.backgroundTint, tokens.color.backgroundTransparent]\n    }\n  },\n  breakArea: {\n    show: true,\n    itemStyle: {\n      color: tokens.color.neutral00,\n      // Break border color should be darker than the splitLine\n      // because it has opacity and should be more prominent\n      borderColor: tokens.color.border,\n      borderWidth: 1,\n      borderType: [3, 3],\n      opacity: 0.6\n    },\n    zigzagAmplitude: 4,\n    zigzagMinSpan: 4,\n    zigzagMaxSpan: 20,\n    zigzagZ: 100,\n    expandOnClick: true\n  },\n  breakLabelLayout: {\n    moveOverlap: 'auto'\n  }\n};\nvar categoryAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For categoryAxis, boolean.\n  boundaryGap: true,\n  // Set false to faster category collection.\n  deduplication: null,\n  jitter: 0,\n  jitterOverlap: true,\n  jitterMargin: 2,\n  // splitArea: {\n  // show: false\n  // },\n  splitLine: {\n    show: false\n  },\n  axisTick: {\n    // If tick is align with label when boundaryGap is true\n    alignWithLabel: false,\n    interval: 'auto',\n    show: 'auto'\n  },\n  axisLabel: {\n    interval: 'auto'\n  }\n}, defaultOption);\nvar valueAxis = zrUtil.merge({\n  boundaryGap: [0, 0],\n  axisLine: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  axisTick: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  // TODO\n  // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]\n  splitNumber: 5,\n  minorTick: {\n    // Minor tick, not available for cateogry axis.\n    show: false,\n    // Split number of minor ticks. The value should be in range of (0, 100)\n    splitNumber: 5,\n    // Length of minor tick\n    length: 3,\n    // Line style\n    lineStyle: {\n      // Default to be same with axisTick\n    }\n  },\n  minorSplitLine: {\n    show: false,\n    lineStyle: {\n      color: tokens.color.axisMinorSplitLine,\n      width: 1\n    }\n  }\n}, defaultOption);\nvar timeAxis = zrUtil.merge({\n  splitNumber: 6,\n  axisLabel: {\n    // To eliminate labels that are not nice\n    showMinLabel: false,\n    showMaxLabel: false,\n    rich: {\n      primary: {\n        fontWeight: 'bold'\n      }\n    }\n  },\n  splitLine: {\n    show: false\n  }\n}, valueAxis);\nvar logAxis = zrUtil.defaults({\n  logBase: 10\n}, valueAxis);\nexport default {\n  category: categoryAxis,\n  value: valueAxis,\n  time: timeAxis,\n  log: logAxis\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport var AXIS_TYPES = {\n  value: 1,\n  category: 1,\n  time: 1,\n  log: 1\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport axisDefault from './axisDefault.js';\nimport { getLayoutParams, mergeLayoutParam, fetchLayoutMode } from '../util/layout.js';\nimport OrdinalMeta from '../data/OrdinalMeta.js';\nimport { AXIS_TYPES } from './axisCommonTypes.js';\nimport { each, merge } from 'zrender/lib/core/util.js';\nimport { getAxisBreakHelper } from '../component/axis/axisBreakHelper.js';\n/**\n * Generate sub axis model class\n * @param axisName 'x' 'y' 'radius' 'angle' 'parallel' ...\n */\nexport default function axisModelCreator(registers, axisName, BaseAxisModelClass, extraDefaultOption) {\n  each(AXIS_TYPES, function (v, axisType) {\n    var defaultOption = merge(merge({}, axisDefault[axisType], true), extraDefaultOption, true);\n    var AxisModel = /** @class */function (_super) {\n      __extends(AxisModel, _super);\n      function AxisModel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = axisName + 'Axis.' + axisType;\n        return _this;\n      }\n      AxisModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n        var layoutMode = fetchLayoutMode(this);\n        var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n        var themeModel = ecModel.getTheme();\n        merge(option, themeModel.get(axisType + 'Axis'));\n        merge(option, this.getDefaultOption());\n        option.type = getAxisType(option);\n        if (layoutMode) {\n          mergeLayoutParam(option, inputPositionParams, layoutMode);\n        }\n      };\n      AxisModel.prototype.optionUpdated = function () {\n        var thisOption = this.option;\n        if (thisOption.type === 'category') {\n          this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\n        }\n      };\n      /**\n       * Should not be called before all of 'getInitailData' finished.\n       * Because categories are collected during initializing data.\n       */\n      AxisModel.prototype.getCategories = function (rawData) {\n        var option = this.option;\n        // FIXME\n        // warning if called before all of 'getInitailData' finished.\n        if (option.type === 'category') {\n          if (rawData) {\n            return option.data;\n          }\n          return this.__ordinalMeta.categories;\n        }\n      };\n      AxisModel.prototype.getOrdinalMeta = function () {\n        return this.__ordinalMeta;\n      };\n      AxisModel.prototype.updateAxisBreaks = function (payload) {\n        var axisBreakHelper = getAxisBreakHelper();\n        return axisBreakHelper ? axisBreakHelper.updateModelAxisBreak(this, payload) : {\n          breaks: []\n        };\n      };\n      AxisModel.type = axisName + 'Axis.' + axisType;\n      AxisModel.defaultOption = defaultOption;\n      return AxisModel;\n    }(BaseAxisModelClass);\n    registers.registerComponentModel(AxisModel);\n  });\n  registers.registerSubTypeDefaulter(axisName + 'Axis', getAxisType);\n}\nfunction getAxisType(option) {\n  // Default axis with data is category axis\n  return option.type || (option.data ? 'category' : 'value');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar Cartesian = /** @class */function () {\n  function Cartesian(name) {\n    this.type = 'cartesian';\n    this._dimList = [];\n    this._axes = {};\n    this.name = name || '';\n  }\n  Cartesian.prototype.getAxis = function (dim) {\n    return this._axes[dim];\n  };\n  Cartesian.prototype.getAxes = function () {\n    return zrUtil.map(this._dimList, function (dim) {\n      return this._axes[dim];\n    }, this);\n  };\n  Cartesian.prototype.getAxesByScale = function (scaleType) {\n    scaleType = scaleType.toLowerCase();\n    return zrUtil.filter(this.getAxes(), function (axis) {\n      return axis.scale.type === scaleType;\n    });\n  };\n  Cartesian.prototype.addAxis = function (axis) {\n    var dim = axis.dim;\n    this._axes[dim] = axis;\n    this._dimList.push(dim);\n  };\n  return Cartesian;\n}();\n;\nexport default Cartesian;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport Cartesian from './Cartesian.js';\nimport { invert } from 'zrender/lib/core/matrix.js';\nimport { applyTransform } from 'zrender/lib/core/vector.js';\nexport var cartesian2DDimensions = ['x', 'y'];\nfunction canCalculateAffineTransform(scale) {\n  return (scale.type === 'interval' || scale.type === 'time') && !scale.hasBreaks();\n}\nvar Cartesian2D = /** @class */function (_super) {\n  __extends(Cartesian2D, _super);\n  function Cartesian2D() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'cartesian2d';\n    _this.dimensions = cartesian2DDimensions;\n    return _this;\n  }\n  /**\n   * Calculate an affine transform matrix if two axes are time or value.\n   * It's mainly for accelartion on the large time series data.\n   */\n  Cartesian2D.prototype.calcAffineTransform = function () {\n    this._transform = this._invTransform = null;\n    var xAxisScale = this.getAxis('x').scale;\n    var yAxisScale = this.getAxis('y').scale;\n    if (!canCalculateAffineTransform(xAxisScale) || !canCalculateAffineTransform(yAxisScale)) {\n      return;\n    }\n    var xScaleExtent = xAxisScale.getExtent();\n    var yScaleExtent = yAxisScale.getExtent();\n    var start = this.dataToPoint([xScaleExtent[0], yScaleExtent[0]]);\n    var end = this.dataToPoint([xScaleExtent[1], yScaleExtent[1]]);\n    var xScaleSpan = xScaleExtent[1] - xScaleExtent[0];\n    var yScaleSpan = yScaleExtent[1] - yScaleExtent[0];\n    if (!xScaleSpan || !yScaleSpan) {\n      return;\n    }\n    // Accelerate data to point calculation on the special large time series data.\n    var scaleX = (end[0] - start[0]) / xScaleSpan;\n    var scaleY = (end[1] - start[1]) / yScaleSpan;\n    var translateX = start[0] - xScaleExtent[0] * scaleX;\n    var translateY = start[1] - yScaleExtent[0] * scaleY;\n    var m = this._transform = [scaleX, 0, 0, scaleY, translateX, translateY];\n    this._invTransform = invert([], m);\n  };\n  /**\n   * Base axis will be used on stacking.\n   */\n  Cartesian2D.prototype.getBaseAxis = function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n  };\n  Cartesian2D.prototype.containPoint = function (point) {\n    var axisX = this.getAxis('x');\n    var axisY = this.getAxis('y');\n    return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n  };\n  Cartesian2D.prototype.containData = function (data) {\n    return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n  };\n  Cartesian2D.prototype.containZone = function (data1, data2) {\n    var zoneDiag1 = this.dataToPoint(data1);\n    var zoneDiag2 = this.dataToPoint(data2);\n    var area = this.getArea();\n    var zone = new BoundingRect(zoneDiag1[0], zoneDiag1[1], zoneDiag2[0] - zoneDiag1[0], zoneDiag2[1] - zoneDiag1[1]);\n    return area.intersect(zone);\n  };\n  Cartesian2D.prototype.dataToPoint = function (data, clamp, out) {\n    out = out || [];\n    var xVal = data[0];\n    var yVal = data[1];\n    // [CAVEAT]: Do not add time consuming operation within and before fast path.\n    // Fast path.\n    if (this._transform\n    // It's supported that if data is like `[Inifity, 123]`, where only Y pixel calculated.\n    && xVal != null && isFinite(xVal) && yVal != null && isFinite(yVal)) {\n      return applyTransform(out, data, this._transform);\n    }\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(xVal, clamp));\n    out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(yVal, clamp));\n    return out;\n  };\n  Cartesian2D.prototype.clampData = function (data, out) {\n    var xScale = this.getAxis('x').scale;\n    var yScale = this.getAxis('y').scale;\n    var xAxisExtent = xScale.getExtent();\n    var yAxisExtent = yScale.getExtent();\n    var x = xScale.parse(data[0]);\n    var y = yScale.parse(data[1]);\n    out = out || [];\n    out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\n    out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\n    return out;\n  };\n  Cartesian2D.prototype.pointToData = function (point, clamp, out) {\n    out = out || [];\n    if (this._invTransform) {\n      return applyTransform(out, point, this._invTransform);\n    }\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]), clamp);\n    out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]), clamp);\n    return out;\n  };\n  Cartesian2D.prototype.getOtherAxis = function (axis) {\n    return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n  };\n  /**\n   * Get rect area of cartesian.\n   * Area will have a contain function to determine if a point is in the coordinate system.\n   */\n  Cartesian2D.prototype.getArea = function (tolerance) {\n    tolerance = tolerance || 0;\n    var xExtent = this.getAxis('x').getGlobalExtent();\n    var yExtent = this.getAxis('y').getGlobalExtent();\n    var x = Math.min(xExtent[0], xExtent[1]) - tolerance;\n    var y = Math.min(yExtent[0], yExtent[1]) - tolerance;\n    var width = Math.max(xExtent[0], xExtent[1]) - x + tolerance;\n    var height = Math.max(yExtent[0], yExtent[1]) - y + tolerance;\n    return new BoundingRect(x, y, width, height);\n  };\n  return Cartesian2D;\n}(Cartesian);\n;\nexport default Cartesian2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis.js';\nvar Axis2D = /** @class */function (_super) {\n  __extends(Axis2D, _super);\n  function Axis2D(dim, scale, coordExtent, axisType, position) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n    /**\n     * Index of axis, can be used as key\n     * Injected outside.\n     */\n    _this.index = 0;\n    _this.type = axisType || 'value';\n    _this.position = position || 'bottom';\n    return _this;\n  }\n  Axis2D.prototype.isHorizontal = function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  };\n  /**\n   * Each item cooresponds to this.getExtent(), which\n   * means globalExtent[0] may greater than globalExtent[1],\n   * unless `asc` is input.\n   *\n   * @param {boolean} [asc]\n   * @return {Array.<number>}\n   */\n  Axis2D.prototype.getGlobalExtent = function (asc) {\n    var ret = this.getExtent();\n    ret[0] = this.toGlobalCoord(ret[0]);\n    ret[1] = this.toGlobalCoord(ret[1]);\n    asc && ret[0] > ret[1] && ret.reverse();\n    return ret;\n  };\n  Axis2D.prototype.pointToData = function (point, clamp) {\n    return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n  };\n  /**\n   * Set ordinalSortInfo\n   * @param info new OrdinalSortInfo\n   */\n  Axis2D.prototype.setCategorySortInfo = function (info) {\n    if (this.type !== 'category') {\n      return false;\n    }\n    this.model.option.categorySortInfo = info;\n    this.scale.setSortInfo(info);\n  };\n  return Axis2D;\n}(Axis);\nexport default Axis2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { getPrecisionSafe, round } from '../util/number.js';\nimport IntervalScale from '../scale/Interval.js';\nimport { getScaleExtent, retrieveAxisBreaksOption } from './axisHelper.js';\nimport { warn } from '../util/log.js';\nimport { logTransform, increaseInterval, isValueNice } from '../scale/helper.js';\nexport function alignScaleTicks(scale, axisModel, alignToScale) {\n  var _a;\n  var intervalScaleProto = IntervalScale.prototype;\n  // NOTE: There is a precondition for log scale  here:\n  // In log scale we store _interval and _extent of exponent value.\n  // So if we use the method of InternalScale to set/get these data.\n  // It process the exponent value, which is linear and what we want here.\n  var alignToTicks = intervalScaleProto.getTicks.call(alignToScale);\n  var alignToNicedTicks = intervalScaleProto.getTicks.call(alignToScale, {\n    expandToNicedExtent: true\n  });\n  var alignToSplitNumber = alignToTicks.length - 1;\n  var alignToInterval = intervalScaleProto.getInterval.call(alignToScale);\n  var scaleExtent = getScaleExtent(scale, axisModel);\n  var rawExtent = scaleExtent.extent;\n  var isMinFixed = scaleExtent.fixMin;\n  var isMaxFixed = scaleExtent.fixMax;\n  if (scale.type === 'log') {\n    rawExtent = logTransform(scale.base, rawExtent, true);\n  }\n  scale.setBreaksFromOption(retrieveAxisBreaksOption(axisModel));\n  scale.setExtent(rawExtent[0], rawExtent[1]);\n  scale.calcNiceExtent({\n    splitNumber: alignToSplitNumber,\n    fixMin: isMinFixed,\n    fixMax: isMaxFixed\n  });\n  var extent = intervalScaleProto.getExtent.call(scale);\n  // Need to update the rawExtent.\n  // Because value in rawExtent may be not parsed. e.g. 'dataMin', 'dataMax'\n  if (isMinFixed) {\n    rawExtent[0] = extent[0];\n  }\n  if (isMaxFixed) {\n    rawExtent[1] = extent[1];\n  }\n  var interval = intervalScaleProto.getInterval.call(scale);\n  var min = rawExtent[0];\n  var max = rawExtent[1];\n  if (isMinFixed && isMaxFixed) {\n    // User set min, max, divide to get new interval\n    interval = (max - min) / alignToSplitNumber;\n  } else if (isMinFixed) {\n    max = rawExtent[0] + interval * alignToSplitNumber;\n    // User set min, expand extent on the other side\n    while (max < rawExtent[1] && isFinite(max) && isFinite(rawExtent[1])) {\n      interval = increaseInterval(interval);\n      max = rawExtent[0] + interval * alignToSplitNumber;\n    }\n  } else if (isMaxFixed) {\n    // User set max, expand extent on the other side\n    min = rawExtent[1] - interval * alignToSplitNumber;\n    while (min > rawExtent[0] && isFinite(min) && isFinite(rawExtent[0])) {\n      interval = increaseInterval(interval);\n      min = rawExtent[1] - interval * alignToSplitNumber;\n    }\n  } else {\n    var nicedSplitNumber = scale.getTicks().length - 1;\n    if (nicedSplitNumber > alignToSplitNumber) {\n      interval = increaseInterval(interval);\n    }\n    var range = interval * alignToSplitNumber;\n    max = Math.ceil(rawExtent[1] / interval) * interval;\n    min = round(max - range);\n    // Not change the result that crossing zero.\n    if (min < 0 && rawExtent[0] >= 0) {\n      min = 0;\n      max = round(range);\n    } else if (max > 0 && rawExtent[1] <= 0) {\n      max = 0;\n      min = -round(range);\n    }\n  }\n  // Adjust min, max based on the extent of alignTo. When min or max is set in alignTo scale\n  var t0 = (alignToTicks[0].value - alignToNicedTicks[0].value) / alignToInterval;\n  var t1 = (alignToTicks[alignToSplitNumber].value - alignToNicedTicks[alignToSplitNumber].value) / alignToInterval;\n  // NOTE: Must in setExtent -> setInterval -> setNiceExtent order.\n  intervalScaleProto.setExtent.call(scale, min + interval * t0, max + interval * t1);\n  intervalScaleProto.setInterval.call(scale, interval);\n  if (t0 || t1) {\n    intervalScaleProto.setNiceExtent.call(scale, min + interval, max - interval);\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    var ticks = intervalScaleProto.getTicks.call(scale);\n    if (ticks[1] && (!isValueNice(interval) || getPrecisionSafe(ticks[1].value) > getPrecisionSafe(interval))) {\n      warn(\"The ticks may be not readable when set min: \" + axisModel.get('min') + \", max: \" + axisModel.get('max') + (\" and alignTicks: true. (\" + ((_a = axisModel.axis) === null || _a === void 0 ? void 0 : _a.dim) + \"AxisIndex: \" + axisModel.componentIndex + \")\"), true);\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/**\n * Grid is a region which contains at most 4 cartesian systems\n *\n * TODO Default cartesian\n */\nimport { isObject, each, indexOf, retrieve3, keys, assert, eqNaN, find, retrieve2 } from 'zrender/lib/core/util.js';\nimport { createBoxLayoutReference, getLayoutRect } from '../../util/layout.js';\nimport { createScaleByModel, ifAxisCrossZero, niceScaleExtent, getDataDimensionsOnAxis, isNameLocationCenter, shouldAxisShow } from '../../coord/axisHelper.js';\nimport Cartesian2D, { cartesian2DDimensions } from './Cartesian2D.js';\nimport Axis2D from './Axis2D.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\n// Depends on GridModel, AxisModel, which performs preprocess.\nimport { OUTER_BOUNDS_CLAMP_DEFAULT, OUTER_BOUNDS_DEFAULT } from './GridModel.js';\nimport { findAxisModels, createCartesianAxisViewCommonPartBuilder, updateCartesianAxisViewCommonPartBuilder, isCartesian2DInjectedAsDataCoordSys } from './cartesianAxisHelper.js';\nimport { isIntervalOrLogScale } from '../../scale/helper.js';\nimport { alignScaleTicks } from '../axisAlignTicks.js';\nimport { expandOrShrinkRect, WH, XY } from '../../util/graphic.js';\nimport { AxisBuilderSharedContext, resolveAxisNameOverlapDefault, moveIfOverlapByLinearLabels, getLabelInner } from '../../component/axis/AxisBuilder.js';\nimport { error, log } from '../../util/log.js';\nimport { AxisTickLabelComputingKind } from '../axisTickLabelBuilder.js';\nimport { injectCoordSysByOption } from '../../core/CoordinateSystem.js';\nimport { mathMax, parsePositionSizeOption } from '../../util/number.js';\n// margin is [top, right, bottom, left]\nvar XY_TO_MARGIN_IDX = [[3, 1], [0, 2] // xyIdx 1 => 'y'\n];\nvar Grid = /** @class */function () {\n  function Grid(gridModel, ecModel, api) {\n    // FIXME:TS where used (different from registered type 'cartesian2d')?\n    this.type = 'grid';\n    this._coordsMap = {};\n    this._coordsList = [];\n    this._axesMap = {};\n    this._axesList = [];\n    this.axisPointerEnabled = true;\n    this.dimensions = cartesian2DDimensions;\n    this._initCartesian(gridModel, ecModel, api);\n    this.model = gridModel;\n  }\n  Grid.prototype.getRect = function () {\n    return this._rect;\n  };\n  Grid.prototype.update = function (ecModel, api) {\n    var axesMap = this._axesMap;\n    this._updateScale(ecModel, this.model);\n    function updateAxisTicks(axes) {\n      var alignTo;\n      // Axis is added in order of axisIndex.\n      var axesIndices = keys(axes);\n      var len = axesIndices.length;\n      if (!len) {\n        return;\n      }\n      var axisNeedsAlign = [];\n      // Process once and calculate the ticks for those don't use alignTicks.\n      for (var i = len - 1; i >= 0; i--) {\n        var idx = +axesIndices[i]; // Convert to number.\n        var axis = axes[idx];\n        var model = axis.model;\n        var scale = axis.scale;\n        if (\n        // Only value and log axis without interval support alignTicks.\n        isIntervalOrLogScale(scale) && model.get('alignTicks') && model.get('interval') == null) {\n          axisNeedsAlign.push(axis);\n        } else {\n          niceScaleExtent(scale, model);\n          if (isIntervalOrLogScale(scale)) {\n            // Can only align to interval or log axis.\n            alignTo = axis;\n          }\n        }\n      }\n      ;\n      // All axes has set alignTicks. Pick the first one.\n      // PENDING. Should we find the axis that both set interval, min, max and align to this one?\n      if (axisNeedsAlign.length) {\n        if (!alignTo) {\n          alignTo = axisNeedsAlign.pop();\n          niceScaleExtent(alignTo.scale, alignTo.model);\n        }\n        each(axisNeedsAlign, function (axis) {\n          alignScaleTicks(axis.scale, axis.model, alignTo.scale);\n        });\n      }\n    }\n    updateAxisTicks(axesMap.x);\n    updateAxisTicks(axesMap.y);\n    // Key: axisDim_axisIndex, value: boolean, whether onZero target.\n    var onZeroRecords = {};\n    each(axesMap.x, function (xAxis) {\n      fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\n    });\n    each(axesMap.y, function (yAxis) {\n      fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\n    });\n    // Resize again if containLabel is enabled\n    // FIXME It may cause getting wrong grid size in data processing stage\n    this.resize(this.model, api);\n  };\n  /**\n   * Resize the grid.\n   *\n   * [NOTE]\n   * If both \"grid.containLabel/grid.contain\" and pixel-required-data-processing (such as, \"dataSampling\")\n   * exist, circular dependency occurs in logic.\n   * The final compromised sequence is:\n   *  1. Calculate \"axis.extent\" (pixel extent) and AffineTransform based on only \"grid layout options\".\n   *      Not accurate if \"grid.containLabel/grid.contain\" is required, but it is a compromise to avoid\n   *      circular dependency.\n   *  2. Perform \"series data processing\" (where \"dataSampling\" requires \"axis.extent\").\n   *  3. Calculate \"scale.extent\" (data extent) based on \"processed series data\".\n   *  4. Modify \"axis.extent\" for \"grid.containLabel/grid.contain\":\n   *      4.1. Calculate \"axis labels\" based on \"scale.extent\".\n   *      4.2. Modify \"axis.extent\" by the bounding rects of \"axis labels and names\".\n   */\n  Grid.prototype.resize = function (gridModel, api, beforeDataProcessing) {\n    var layoutRef = createBoxLayoutReference(gridModel, api);\n    var gridRect = this._rect = getLayoutRect(gridModel.getBoxLayoutParams(), layoutRef.refContainer);\n    // PENDING: whether to support that if the input `coord` is out of the base coord sys,\n    //  do not render anything. At present, the behavior is undefined.\n    var axesMap = this._axesMap;\n    var coordsList = this._coordsList;\n    var optionContainLabel = gridModel.get('containLabel'); // No `.get(, true)` for backward compat.\n    updateAllAxisExtentTransByGridRect(axesMap, gridRect);\n    if (!beforeDataProcessing) {\n      var axisBuilderSharedCtx = createAxisBiulders(gridRect, coordsList, axesMap, optionContainLabel, api);\n      var noPxChange = void 0;\n      if (optionContainLabel) {\n        if (legacyLayOutGridByContainLabel) {\n          // console.time('legacyLayOutGridByContainLabel');\n          legacyLayOutGridByContainLabel(this._axesList, gridRect);\n          updateAllAxisExtentTransByGridRect(axesMap, gridRect);\n          // console.timeEnd('legacyLayOutGridByContainLabel');\n        } else {\n          if (process.env.NODE_ENV !== 'production') {\n            log('Specified `grid.containLabel` but no `use(LegacyGridContainLabel)`;' + 'use `grid.outerBounds` instead.', true);\n          }\n          noPxChange = layOutGridByOuterBounds(gridRect.clone(), 'axisLabel', null, gridRect, axesMap, axisBuilderSharedCtx, layoutRef);\n        }\n      } else {\n        var _a = prepareOuterBounds(gridModel, gridRect, layoutRef),\n          outerBoundsRect = _a.outerBoundsRect,\n          parsedOuterBoundsContain = _a.parsedOuterBoundsContain,\n          outerBoundsClamp = _a.outerBoundsClamp;\n        if (outerBoundsRect) {\n          // console.time('layOutGridByOuterBounds');\n          noPxChange = layOutGridByOuterBounds(outerBoundsRect, parsedOuterBoundsContain, outerBoundsClamp, gridRect, axesMap, axisBuilderSharedCtx, layoutRef);\n          // console.timeEnd('layOutGridByOuterBounds');\n        }\n      }\n      // console.time('buildAxesView_determine');\n      createOrUpdateAxesView(gridRect, axesMap, AxisTickLabelComputingKind.determine, null, noPxChange, layoutRef);\n      // console.timeEnd('buildAxesView_determine');\n    } // End of beforeDataProcessing\n    each(this._coordsList, function (coord) {\n      // Calculate affine matrix to accelerate the data to point transform.\n      // If all the axes scales are time or value.\n      coord.calcAffineTransform();\n    });\n  };\n  Grid.prototype.getAxis = function (dim, axisIndex) {\n    var axesMapOnDim = this._axesMap[dim];\n    if (axesMapOnDim != null) {\n      return axesMapOnDim[axisIndex || 0];\n    }\n  };\n  Grid.prototype.getAxes = function () {\n    return this._axesList.slice();\n  };\n  Grid.prototype.getCartesian = function (xAxisIndex, yAxisIndex) {\n    if (xAxisIndex != null && yAxisIndex != null) {\n      var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n      return this._coordsMap[key];\n    }\n    if (isObject(xAxisIndex)) {\n      yAxisIndex = xAxisIndex.yAxisIndex;\n      xAxisIndex = xAxisIndex.xAxisIndex;\n    }\n    for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n      if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n        return coordList[i];\n      }\n    }\n  };\n  Grid.prototype.getCartesians = function () {\n    return this._coordsList.slice();\n  };\n  /**\n   * @implements\n   */\n  Grid.prototype.convertToPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n    return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n  };\n  /**\n   * @implements\n   */\n  Grid.prototype.convertFromPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n    return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n  };\n  Grid.prototype._findConvertTarget = function (finder) {\n    var seriesModel = finder.seriesModel;\n    var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n    var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n    var gridModel = finder.gridModel;\n    var coordsList = this._coordsList;\n    var cartesian;\n    var axis;\n    if (seriesModel) {\n      cartesian = seriesModel.coordinateSystem;\n      indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n    } else if (xAxisModel && yAxisModel) {\n      cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    } else if (xAxisModel) {\n      axis = this.getAxis('x', xAxisModel.componentIndex);\n    } else if (yAxisModel) {\n      axis = this.getAxis('y', yAxisModel.componentIndex);\n    }\n    // Lowest priority.\n    else if (gridModel) {\n      var grid = gridModel.coordinateSystem;\n      if (grid === this) {\n        cartesian = this._coordsList[0];\n      }\n    }\n    return {\n      cartesian: cartesian,\n      axis: axis\n    };\n  };\n  /**\n   * @implements\n   */\n  Grid.prototype.containPoint = function (point) {\n    var coord = this._coordsList[0];\n    if (coord) {\n      return coord.containPoint(point);\n    }\n  };\n  /**\n   * Initialize cartesian coordinate systems\n   */\n  Grid.prototype._initCartesian = function (gridModel, ecModel, api) {\n    var _this = this;\n    var grid = this;\n    var axisPositionUsed = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    var axesMap = {\n      x: {},\n      y: {}\n    };\n    var axesCount = {\n      x: 0,\n      y: 0\n    };\n    // Create axis\n    ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n    ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n    if (!axesCount.x || !axesCount.y) {\n      // Roll back when there no either x or y axis\n      this._axesMap = {};\n      this._axesList = [];\n      return;\n    }\n    this._axesMap = axesMap;\n    // Create cartesian2d\n    each(axesMap.x, function (xAxis, xAxisIndex) {\n      each(axesMap.y, function (yAxis, yAxisIndex) {\n        var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n        var cartesian = new Cartesian2D(key);\n        cartesian.master = _this;\n        cartesian.model = gridModel;\n        _this._coordsMap[key] = cartesian;\n        _this._coordsList.push(cartesian);\n        cartesian.addAxis(xAxis);\n        cartesian.addAxis(yAxis);\n      });\n    });\n    function createAxisCreator(dimName) {\n      return function (axisModel, idx) {\n        if (!isAxisUsedInTheGrid(axisModel, gridModel)) {\n          return;\n        }\n        var axisPosition = axisModel.get('position');\n        if (dimName === 'x') {\n          // Fix position\n          if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n            // Default bottom of X\n            axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\n          }\n        } else {\n          // Fix position\n          if (axisPosition !== 'left' && axisPosition !== 'right') {\n            // Default left of Y\n            axisPosition = axisPositionUsed.left ? 'right' : 'left';\n          }\n        }\n        axisPositionUsed[axisPosition] = true;\n        var axis = new Axis2D(dimName, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n        var isCategory = axis.type === 'category';\n        axis.onBand = isCategory && axisModel.get('boundaryGap');\n        axis.inverse = axisModel.get('inverse');\n        // Inject axis into axisModel\n        axisModel.axis = axis;\n        // Inject axisModel into axis\n        axis.model = axisModel;\n        // Inject grid info axis\n        axis.grid = grid;\n        // Index of axis, can be used as key\n        axis.index = idx;\n        grid._axesList.push(axis);\n        axesMap[dimName][idx] = axis;\n        axesCount[dimName]++;\n      };\n    }\n  };\n  /**\n   * Update cartesian properties from series.\n   */\n  Grid.prototype._updateScale = function (ecModel, gridModel) {\n    // Reset scale\n    each(this._axesList, function (axis) {\n      axis.scale.setExtent(Infinity, -Infinity);\n      if (axis.type === 'category') {\n        var categorySortInfo = axis.model.get('categorySortInfo');\n        axis.scale.setSortInfo(categorySortInfo);\n      }\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      // If pie (or other similar series) use cartesian2d, the unionExtent logic below is\n      // wrong, therefore skip it temporarily. See also in `defaultAxisExtentFromData.ts`.\n      // TODO: support union extent in this case.\n      if (isCartesian2DInjectedAsDataCoordSys(seriesModel)) {\n        var axesModelMap = findAxisModels(seriesModel);\n        var xAxisModel = axesModelMap.xAxisModel;\n        var yAxisModel = axesModelMap.yAxisModel;\n        if (!isAxisUsedInTheGrid(xAxisModel, gridModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel)) {\n          return;\n        }\n        var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n        var data = seriesModel.getData();\n        var xAxis = cartesian.getAxis('x');\n        var yAxis = cartesian.getAxis('y');\n        unionExtent(data, xAxis);\n        unionExtent(data, yAxis);\n      }\n    }, this);\n    function unionExtent(data, axis) {\n      each(getDataDimensionsOnAxis(data, axis.dim), function (dim) {\n        axis.scale.unionExtentFromData(data, dim);\n      });\n    }\n  };\n  /**\n   * @param dim 'x' or 'y' or 'auto' or null/undefined\n   */\n  Grid.prototype.getTooltipAxes = function (dim) {\n    var baseAxes = [];\n    var otherAxes = [];\n    each(this.getCartesians(), function (cartesian) {\n      var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n      var otherAxis = cartesian.getOtherAxis(baseAxis);\n      indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n      indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n    });\n    return {\n      baseAxes: baseAxes,\n      otherAxes: otherAxes\n    };\n  };\n  Grid.create = function (ecModel, api) {\n    var grids = [];\n    ecModel.eachComponent('grid', function (gridModel, idx) {\n      var grid = new Grid(gridModel, ecModel, api);\n      grid.name = 'grid_' + idx;\n      // dataSampling requires axis extent, so resize\n      // should be performed in create stage.\n      grid.resize(gridModel, api, true);\n      gridModel.coordinateSystem = grid;\n      grids.push(grid);\n    });\n    // Inject the coordinateSystems into seriesModel\n    ecModel.eachSeries(function (seriesModel) {\n      injectCoordSysByOption({\n        targetModel: seriesModel,\n        coordSysType: 'cartesian2d',\n        coordSysProvider: coordSysProvider\n      });\n      function coordSysProvider() {\n        var axesModelMap = findAxisModels(seriesModel);\n        var xAxisModel = axesModelMap.xAxisModel;\n        var yAxisModel = axesModelMap.yAxisModel;\n        var gridModel = xAxisModel.getCoordSysModel();\n        if (process.env.NODE_ENV !== 'production') {\n          if (!gridModel) {\n            throw new Error('Grid \"' + retrieve3(xAxisModel.get('gridIndex'), xAxisModel.get('gridId'), 0) + '\" not found');\n          }\n          if (xAxisModel.getCoordSysModel() !== yAxisModel.getCoordSysModel()) {\n            throw new Error('xAxis and yAxis must use the same grid');\n          }\n        }\n        var grid = gridModel.coordinateSystem;\n        return grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n      }\n    });\n    return grids;\n  };\n  // For deciding which dimensions to use when creating list data\n  Grid.dimensions = cartesian2DDimensions;\n  return Grid;\n}();\n/**\n * Check if the axis is used in the specified grid.\n */\nfunction isAxisUsedInTheGrid(axisModel, gridModel) {\n  return axisModel.getCoordSysModel() === gridModel;\n}\nfunction fixAxisOnZero(axesMap, otherAxisDim, axis,\n// Key: see `getOnZeroRecordKey`\nonZeroRecords) {\n  axis.getAxesOnZeroOf = function () {\n    // TODO: onZero of multiple axes.\n    return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\n  };\n  // onZero can not be enabled in these two situations:\n  // 1. When any other axis is a category axis.\n  // 2. When no axis is cross 0 point.\n  var otherAxes = axesMap[otherAxisDim];\n  var otherAxisOnZeroOf;\n  var axisModel = axis.model;\n  var onZero = axisModel.get(['axisLine', 'onZero']);\n  var onZeroAxisIndex = axisModel.get(['axisLine', 'onZeroAxisIndex']);\n  if (!onZero) {\n    return;\n  }\n  // If target axis is specified.\n  if (onZeroAxisIndex != null) {\n    if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\n      otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\n    }\n  } else {\n    // Find the first available other axis.\n    for (var idx in otherAxes) {\n      if (otherAxes.hasOwnProperty(idx) && canOnZeroToAxis(otherAxes[idx])\n      // Consider that two Y axes on one value axis,\n      // if both onZero, the two Y axes overlap.\n      && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\n        otherAxisOnZeroOf = otherAxes[idx];\n        break;\n      }\n    }\n  }\n  if (otherAxisOnZeroOf) {\n    onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\n  }\n  function getOnZeroRecordKey(axis) {\n    return axis.dim + '_' + axis.index;\n  }\n}\nfunction canOnZeroToAxis(axis) {\n  return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\n}\nfunction updateAxisTransform(axis, coordBase) {\n  var axisExtent = axis.getExtent();\n  var axisExtentSum = axisExtent[0] + axisExtent[1];\n  // Fast transform\n  axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n    return coord + coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n  axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n    return coord - coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n}\nfunction updateAllAxisExtentTransByGridRect(axesMap, gridRect) {\n  each(axesMap.x, function (axis) {\n    return updateAxisExtentTransByGridRect(axis, gridRect.x, gridRect.width);\n  });\n  each(axesMap.y, function (axis) {\n    return updateAxisExtentTransByGridRect(axis, gridRect.y, gridRect.height);\n  });\n}\nfunction updateAxisExtentTransByGridRect(axis, gridXY, gridWH) {\n  var extent = [0, gridWH];\n  var idx = axis.inverse ? 1 : 0;\n  axis.setExtent(extent[idx], extent[1 - idx]);\n  updateAxisTransform(axis, gridXY);\n}\nvar legacyLayOutGridByContainLabel;\nexport function registerLegacyGridContainLabelImpl(impl) {\n  legacyLayOutGridByContainLabel = impl;\n}\n// Return noPxChange.\nfunction layOutGridByOuterBounds(outerBoundsRect, outerBoundsContain, outerBoundsClamp, gridRect, axesMap, axisBuilderSharedCtx, layoutRef) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(outerBoundsContain === 'all' || outerBoundsContain === 'axisLabel');\n  }\n  // Assume `updateAllAxisExtentTransByGridRect` has been performed once before this call.\n  // [NOTE]:\n  // - The bounding rect of the axis elements might be sensitve to variations in `axis.extent` due to strategies\n  //  like hideOverlap/moveOverlap. @see the comment in `LabelLayoutBase['suggestIgnore']`.\n  // - The final `gridRect` might be slightly smaller than the ideally expected result if labels are giant and\n  //  get hidden due to overlapping. More iterations could improve precision, but not performant. We consider\n  //  the current result acceptable, since no alignment among charts can be guaranteed when using this feature.\n  createOrUpdateAxesView(gridRect, axesMap, AxisTickLabelComputingKind.estimate, outerBoundsContain, false, layoutRef);\n  var margin = [0, 0, 0, 0];\n  fillLabelNameOverflowOnOneDimension(0);\n  fillLabelNameOverflowOnOneDimension(1);\n  // If axis is blank, no label can be used to detect overflow.\n  // gridRect itself should not overflow.\n  fillMarginOnOneDimension(gridRect, 0, NaN);\n  fillMarginOnOneDimension(gridRect, 1, NaN);\n  var noPxChange = find(margin, function (item) {\n    return item > 0;\n  }) == null;\n  expandOrShrinkRect(gridRect, margin, true, true, outerBoundsClamp);\n  updateAllAxisExtentTransByGridRect(axesMap, gridRect);\n  return noPxChange;\n  function fillLabelNameOverflowOnOneDimension(xyIdx) {\n    each(axesMap[XY[xyIdx]], function (axis) {\n      if (!shouldAxisShow(axis.model)) {\n        return;\n      }\n      // FIXME: zr Group.union may wrongly union (0, 0, 0, 0) and not performant.\n      // unionRect.union(axis.axisBuilder.group.getBoundingRect());\n      // If ussing Group.getBoundingRect to calculate shrink space, it is not strictly accurate when\n      // the outermost label is ignored and the secondary label is very long and contribute to the\n      // union extension:\n      //      -|---|---|---|\n      //         1,000,000,000\n      // Therefore we calculate them one by one.\n      // Also considered axis may be blank or no labels.\n      var sharedRecord = axisBuilderSharedCtx.ensureRecord(axis.model);\n      var labelInfoList = sharedRecord.labelInfoList;\n      if (labelInfoList) {\n        for (var idx = 0; idx < labelInfoList.length; idx++) {\n          var labelInfo = labelInfoList[idx];\n          var proportion = axis.scale.normalize(getLabelInner(labelInfo.label).tickValue);\n          proportion = xyIdx === 1 ? 1 - proportion : proportion;\n          // xAxis use proportion on x, yAxis use proprotion on y, otherwise not.\n          fillMarginOnOneDimension(labelInfo.rect, xyIdx, proportion);\n          fillMarginOnOneDimension(labelInfo.rect, 1 - xyIdx, NaN);\n        }\n      }\n      var nameLayout = sharedRecord.nameLayout;\n      if (nameLayout) {\n        var proportion = isNameLocationCenter(sharedRecord.nameLocation) ? 0.5 : NaN;\n        fillMarginOnOneDimension(nameLayout.rect, xyIdx, proportion);\n        fillMarginOnOneDimension(nameLayout.rect, 1 - xyIdx, NaN);\n      }\n    });\n  }\n  function fillMarginOnOneDimension(itemRect, xyIdx, proportion // NaN mean no use proportion\n  ) {\n    var overflow1 = outerBoundsRect[XY[xyIdx]] - itemRect[XY[xyIdx]];\n    var overflow2 = itemRect[WH[xyIdx]] + itemRect[XY[xyIdx]] - (outerBoundsRect[WH[xyIdx]] + outerBoundsRect[XY[xyIdx]]);\n    overflow1 = applyProportion(overflow1, 1 - proportion);\n    overflow2 = applyProportion(overflow2, proportion);\n    var minIdx = XY_TO_MARGIN_IDX[xyIdx][0];\n    var maxIdx = XY_TO_MARGIN_IDX[xyIdx][1];\n    margin[minIdx] = mathMax(margin[minIdx], overflow1);\n    margin[maxIdx] = mathMax(margin[maxIdx], overflow2);\n  }\n  function applyProportion(overflow, proportion) {\n    // proportion is not likely to near zero. If so, give up shrink\n    if (overflow > 0 && !eqNaN(proportion) && proportion > 1e-4) {\n      overflow /= proportion;\n    }\n    return overflow;\n  }\n}\nfunction createAxisBiulders(gridRect, cartesians, axesMap, optionContainLabel, api) {\n  var axisBuilderSharedCtx = new AxisBuilderSharedContext(resolveAxisNameOverlapForGrid);\n  each(axesMap, function (axisList) {\n    return each(axisList, function (axis) {\n      if (shouldAxisShow(axis.model)) {\n        // See `AxisBaseOptionCommon['nameMoveOverlap']`.\n        var defaultNameMoveOverlap = !optionContainLabel;\n        axis.axisBuilder = createCartesianAxisViewCommonPartBuilder(gridRect, cartesians, axis.model, api, axisBuilderSharedCtx, defaultNameMoveOverlap);\n      }\n    });\n  });\n  return axisBuilderSharedCtx;\n}\n/**\n * Promote the axis-elements-building from \"view render\" stage to \"coordinate system resize\" stage.\n * This is aimed to resovle overlap across multiple axes, since currently it's hard to reconcile\n * multiple axes in \"view render\" stage.\n *\n * [CAUTION] But this promotion assumes that the subsequent \"visual mapping\" stage does not affect\n * this axis-elements-building; otherwise we have to refactor it again.\n */\nfunction createOrUpdateAxesView(gridRect, axesMap, kind, outerBoundsContain, noPxChange, layoutRef) {\n  var isDetermine = kind === AxisTickLabelComputingKind.determine;\n  each(axesMap, function (axisList) {\n    return each(axisList, function (axis) {\n      if (shouldAxisShow(axis.model)) {\n        updateCartesianAxisViewCommonPartBuilder(axis.axisBuilder, gridRect, axis.model);\n        axis.axisBuilder.build(isDetermine ? {\n          axisTickLabelDetermine: true\n        } : {\n          axisTickLabelEstimate: true\n        }, {\n          noPxChange: noPxChange\n        });\n      }\n    });\n  });\n  var nameMarginLevelMap = {\n    x: 0,\n    y: 0\n  };\n  calcNameMarginLevel(0);\n  calcNameMarginLevel(1);\n  function calcNameMarginLevel(xyIdx) {\n    nameMarginLevelMap[XY[1 - xyIdx]] = gridRect[WH[xyIdx]] <= layoutRef.refContainer[WH[xyIdx]] * 0.5 ? 0 : 1 - xyIdx === 1 ? 2 : 1;\n  }\n  each(axesMap, function (axisList, xy) {\n    return each(axisList, function (axis) {\n      if (shouldAxisShow(axis.model)) {\n        if (outerBoundsContain === 'all' || isDetermine) {\n          // To resolve overlap, `axisName` layout depends on `axisTickLabel` layout result\n          // (all of the axes of the same `grid`; consider multiple x or y axes).\n          axis.axisBuilder.build({\n            axisName: true\n          }, {\n            nameMarginLevel: nameMarginLevelMap[xy]\n          });\n        }\n        if (isDetermine) {\n          axis.axisBuilder.build({\n            axisLine: true\n          });\n        }\n      }\n    });\n  });\n}\nfunction prepareOuterBounds(gridModel, rawRridRect, layoutRef) {\n  var outerBoundsRect;\n  var optionOuterBoundsMode = gridModel.get('outerBoundsMode', true);\n  if (optionOuterBoundsMode === 'same') {\n    outerBoundsRect = rawRridRect.clone();\n  } else if (optionOuterBoundsMode == null || optionOuterBoundsMode === 'auto') {\n    outerBoundsRect = getLayoutRect(gridModel.get('outerBounds', true) || OUTER_BOUNDS_DEFAULT, layoutRef.refContainer);\n  } else if (optionOuterBoundsMode !== 'none') {\n    if (process.env.NODE_ENV !== 'production') {\n      error(\"Invalid grid[\" + gridModel.componentIndex + \"].outerBoundsMode.\");\n    }\n  }\n  var optionOuterBoundsContain = gridModel.get('outerBoundsContain', true);\n  var parsedOuterBoundsContain;\n  if (optionOuterBoundsContain == null || optionOuterBoundsContain === 'auto') {\n    parsedOuterBoundsContain = 'all';\n  } else if (indexOf(['all', 'axisLabel'], optionOuterBoundsContain) < 0) {\n    if (process.env.NODE_ENV !== 'production') {\n      error(\"Invalid grid[\" + gridModel.componentIndex + \"].outerBoundsContain.\");\n    }\n    parsedOuterBoundsContain = 'all';\n  } else {\n    parsedOuterBoundsContain = optionOuterBoundsContain;\n  }\n  var outerBoundsClamp = [parsePositionSizeOption(retrieve2(gridModel.get('outerBoundsClampWidth', true), OUTER_BOUNDS_CLAMP_DEFAULT[0]), rawRridRect.width), parsePositionSizeOption(retrieve2(gridModel.get('outerBoundsClampHeight', true), OUTER_BOUNDS_CLAMP_DEFAULT[1]), rawRridRect.height)];\n  return {\n    outerBoundsRect: outerBoundsRect,\n    parsedOuterBoundsContain: parsedOuterBoundsContain,\n    outerBoundsClamp: outerBoundsClamp\n  };\n}\nvar resolveAxisNameOverlapForGrid = function (cfg, ctx, axisModel, nameLayoutInfo, nameMoveDirVec, thisRecord) {\n  var perpendicularDim = axisModel.axis.dim === 'x' ? 'y' : 'x';\n  resolveAxisNameOverlapDefault(cfg, ctx, axisModel, nameLayoutInfo, nameMoveDirVec, thisRecord);\n  // If nameLocation 'center', and there are multiple axes parallel to this axis, do not adjust by\n  //  other axes, because the axis name should be close to its axis line as much as possible even\n  //  if overlapping; otherwise it might cause misleading.\n  // If nameLocation 'center', do not adjust by perpendicular axes, since they are not likely to overlap.\n  // If nameLocation 'start'/'end', move name within the same direction to escape overlap with the\n  //  perpendicular axes.\n  if (!isNameLocationCenter(cfg.nameLocation)) {\n    each(ctx.recordMap[perpendicularDim], function (perpenRecord) {\n      // perpendicular axis may be no name.\n      if (perpenRecord && perpenRecord.labelInfoList && perpenRecord.dirVec) {\n        moveIfOverlapByLinearLabels(perpenRecord.labelInfoList, perpenRecord.dirVec, nameLayoutInfo, nameMoveDirVec);\n      }\n    });\n  }\n};\nexport default Grid;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nexport function rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel) {\n  var axis = axisModel.axis;\n  if (axis.scale.isBlank()) {\n    return;\n  }\n  // TODO: TYPE\n  var splitAreaModel = axisModel.getModel('splitArea');\n  var areaStyleModel = splitAreaModel.getModel('areaStyle');\n  var areaColors = areaStyleModel.get('color');\n  var gridRect = gridModel.coordinateSystem.getRect();\n  var ticksCoords = axis.getTicksCoords({\n    tickModel: splitAreaModel,\n    clamp: true,\n    breakTicks: 'none',\n    pruneByBreak: 'preserve_extent_bound'\n  });\n  if (!ticksCoords.length) {\n    return;\n  }\n  // For Making appropriate splitArea animation, the color and anid\n  // should be corresponding to previous one if possible.\n  var areaColorsLen = areaColors.length;\n  var lastSplitAreaColors = inner(axisView).splitAreaColors;\n  var newSplitAreaColors = zrUtil.createHashMap();\n  var colorIndex = 0;\n  if (lastSplitAreaColors) {\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n      if (cIndex != null) {\n        colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n        break;\n      }\n    }\n  }\n  var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n  var areaStyle = areaStyleModel.getAreaStyle();\n  areaColors = zrUtil.isArray(areaColors) ? areaColors : [areaColors];\n  for (var i = 1; i < ticksCoords.length; i++) {\n    var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n    var x = void 0;\n    var y = void 0;\n    var width = void 0;\n    var height = void 0;\n    if (axis.isHorizontal()) {\n      x = prev;\n      y = gridRect.y;\n      width = tickCoord - x;\n      height = gridRect.height;\n      prev = x + width;\n    } else {\n      x = gridRect.x;\n      y = prev;\n      width = gridRect.width;\n      height = tickCoord - y;\n      prev = y + height;\n    }\n    var tickValue = ticksCoords[i - 1].tickValue;\n    tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n    axisGroup.add(new graphic.Rect({\n      anid: tickValue != null ? 'area_' + tickValue : null,\n      shape: {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      },\n      style: zrUtil.defaults({\n        fill: areaColors[colorIndex]\n      }, areaStyle),\n      autoBatch: true,\n      silent: true\n    }));\n    colorIndex = (colorIndex + 1) % areaColorsLen;\n  }\n  inner(axisView).splitAreaColors = newSplitAreaColors;\n}\nexport function rectCoordAxisHandleRemove(axisView) {\n  inner(axisView).splitAreaColors = null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport AxisView from './AxisView.js';\nimport { rectCoordAxisBuildSplitArea, rectCoordAxisHandleRemove } from './axisSplitHelper.js';\nimport { getAxisBreakHelper } from './axisBreakHelper.js';\nimport { shouldAxisShow } from '../../coord/axisHelper.js';\nvar selfBuilderAttrs = ['splitArea', 'splitLine', 'minorSplitLine', 'breakArea'];\nvar CartesianAxisView = /** @class */function (_super) {\n  __extends(CartesianAxisView, _super);\n  function CartesianAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CartesianAxisView.type;\n    _this.axisPointerClass = 'CartesianAxisPointer';\n    return _this;\n  }\n  /**\n   * @override\n   */\n  CartesianAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n    if (!shouldAxisShow(axisModel)) {\n      return;\n    }\n    this._axisGroup.add(axisModel.axis.axisBuilder.group);\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get([name, 'show'])) {\n        axisElementBuilders[name](this, this._axisGroup, axisModel, axisModel.getCoordSysModel(), api);\n      }\n    }, this);\n    // THIS is a special case for bar racing chart.\n    // Update the axis label from the natural initial layout to\n    // sorted layout should has no animation.\n    var isInitialSortFromBarRacing = payload && payload.type === 'changeAxisOrder' && payload.isInitSort;\n    if (!isInitialSortFromBarRacing) {\n      graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n    }\n    _super.prototype.render.call(this, axisModel, ecModel, api, payload);\n  };\n  CartesianAxisView.prototype.remove = function () {\n    rectCoordAxisHandleRemove(this);\n  };\n  CartesianAxisView.type = 'cartesianAxis';\n  return CartesianAxisView;\n}(AxisView);\nvar axisElementBuilders = {\n  splitLine: function (axisView, axisGroup, axisModel, gridModel, api) {\n    var axis = axisModel.axis;\n    if (axis.scale.isBlank()) {\n      return;\n    }\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    var showMinLine = splitLineModel.get('showMinLine') !== false;\n    var showMaxLine = splitLineModel.get('showMaxLine') !== false;\n    lineColors = zrUtil.isArray(lineColors) ? lineColors : [lineColors];\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel,\n      breakTicks: 'none',\n      pruneByBreak: 'preserve_extent_bound'\n    });\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n      if (i === 0 && !showMinLine || i === ticksCoords.length - 1 && !showMaxLine) {\n        continue;\n      }\n      var tickValue = ticksCoords[i].tickValue;\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n      var colorIndex = lineCount++ % lineColors.length;\n      var line = new graphic.Line({\n        anid: tickValue != null ? 'line_' + tickValue : null,\n        autoBatch: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: zrUtil.defaults({\n          stroke: lineColors[colorIndex]\n        }, lineStyle),\n        silent: true\n      });\n      graphic.subPixelOptimizeLine(line.shape, lineStyle.lineWidth);\n      axisGroup.add(line);\n    }\n  },\n  minorSplitLine: function (axisView, axisGroup, axisModel, gridModel, api) {\n    var axis = axisModel.axis;\n    var minorSplitLineModel = axisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var minorTicksCoords = axis.getMinorTicksCoords();\n    if (!minorTicksCoords.length) {\n      return;\n    }\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\n        if (isHorizontal) {\n          p1[0] = tickCoord;\n          p1[1] = gridRect.y;\n          p2[0] = tickCoord;\n          p2[1] = gridRect.y + gridRect.height;\n        } else {\n          p1[0] = gridRect.x;\n          p1[1] = tickCoord;\n          p2[0] = gridRect.x + gridRect.width;\n          p2[1] = tickCoord;\n        }\n        var line = new graphic.Line({\n          anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\n          autoBatch: true,\n          shape: {\n            x1: p1[0],\n            y1: p1[1],\n            x2: p2[0],\n            y2: p2[1]\n          },\n          style: lineStyle,\n          silent: true\n        });\n        graphic.subPixelOptimizeLine(line.shape, lineStyle.lineWidth);\n        axisGroup.add(line);\n      }\n    }\n  },\n  splitArea: function (axisView, axisGroup, axisModel, gridModel, api) {\n    rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel);\n  },\n  breakArea: function (axisView, axisGroup, axisModel, gridModel, api) {\n    var axisBreakHelper = getAxisBreakHelper();\n    var scale = axisModel.axis.scale;\n    if (axisBreakHelper && scale.type !== 'ordinal') {\n      axisBreakHelper.rectCoordBuildBreakAxis(axisGroup, axisView, axisModel, gridModel.coordinateSystem.getRect(), api);\n    }\n  }\n};\nvar CartesianXAxisView = /** @class */function (_super) {\n  __extends(CartesianXAxisView, _super);\n  function CartesianXAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n  CartesianXAxisView.type = 'xAxis';\n  return CartesianXAxisView;\n}(CartesianAxisView);\nexport { CartesianXAxisView };\nvar CartesianYAxisView = /** @class */function (_super) {\n  __extends(CartesianYAxisView, _super);\n  function CartesianYAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n  CartesianYAxisView.type = 'yAxis';\n  return CartesianYAxisView;\n}(CartesianAxisView);\nexport { CartesianYAxisView };\nexport default CartesianAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nimport GridModel from '../../coord/cartesian/GridModel.js';\nimport { Rect } from '../../util/graphic.js';\nimport { defaults } from 'zrender/lib/core/util.js';\nimport { CartesianAxisModel } from '../../coord/cartesian/AxisModel.js';\nimport axisModelCreator from '../../coord/axisModelCreator.js';\nimport Grid from '../../coord/cartesian/Grid.js';\nimport { CartesianXAxisView, CartesianYAxisView } from '../axis/CartesianAxisView.js';\n// Grid view\nvar GridView = /** @class */function (_super) {\n  __extends(GridView, _super);\n  function GridView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'grid';\n    return _this;\n  }\n  GridView.prototype.render = function (gridModel, ecModel) {\n    this.group.removeAll();\n    if (gridModel.get('show')) {\n      this.group.add(new Rect({\n        shape: gridModel.coordinateSystem.getRect(),\n        style: defaults({\n          fill: gridModel.get('backgroundColor')\n        }, gridModel.getItemStyle()),\n        silent: true,\n        z2: -1\n      }));\n    }\n  };\n  GridView.type = 'grid';\n  return GridView;\n}(ComponentView);\nvar extraOption = {\n  // gridIndex: 0,\n  // gridId: '',\n  offset: 0\n};\nexport function install(registers) {\n  registers.registerComponentView(GridView);\n  registers.registerComponentModel(GridModel);\n  registers.registerCoordinateSystem('cartesian2d', Grid);\n  axisModelCreator(registers, 'x', CartesianAxisModel, extraOption);\n  axisModelCreator(registers, 'y', CartesianAxisModel, extraOption);\n  registers.registerComponentView(CartesianXAxisView);\n  registers.registerComponentView(CartesianYAxisView);\n  registers.registerPreprocessor(function (option) {\n    // Only create grid when need\n    if (option.xAxis && option.yAxis && !option.grid) {\n      option.grid = {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport Axis2D from '../coord/cartesian/Axis2D.js';\nimport { makeInner } from './model.js';\nexport function needFixJitter(seriesModel, axis) {\n  var coordinateSystem = seriesModel.coordinateSystem;\n  var coordType = coordinateSystem && coordinateSystem.type;\n  var baseAxis = coordinateSystem && coordinateSystem.getBaseAxis && coordinateSystem.getBaseAxis();\n  var scaleType = baseAxis && baseAxis.scale && baseAxis.scale.type;\n  var seriesValid = coordType === 'cartesian2d' && scaleType === 'ordinal' || coordType === 'single';\n  var axisValid = axis.model.get('jitter') > 0;\n  return seriesValid && axisValid;\n}\nvar inner = makeInner();\n/**\n * Fix jitter for overlapping data points.\n *\n * @param fixedAxis The axis whose coord doesn't change with jitter.\n * @param fixedCoord The coord of fixedAxis.\n * @param floatCoord The coord of the other axis, which should be changed with jittering.\n * @param radius The radius of the data point, considering the symbol is a circle.\n * @returns updated floatCoord.\n */\nexport function fixJitter(fixedAxis, fixedCoord, floatCoord, radius) {\n  if (fixedAxis instanceof Axis2D) {\n    var scaleType = fixedAxis.scale.type;\n    if (scaleType !== 'category' && scaleType !== 'ordinal') {\n      return floatCoord;\n    }\n  }\n  var axisModel = fixedAxis.model;\n  var jitter = axisModel.get('jitter');\n  var jitterOverlap = axisModel.get('jitterOverlap');\n  var jitterMargin = axisModel.get('jitterMargin') || 0;\n  // Get band width to limit jitter range\n  var bandWidth = fixedAxis.scale.type === 'ordinal' ? fixedAxis.getBandWidth() : null;\n  if (jitter > 0) {\n    if (jitterOverlap) {\n      return fixJitterIgnoreOverlaps(floatCoord, jitter, bandWidth, radius);\n    } else {\n      return fixJitterAvoidOverlaps(fixedAxis, fixedCoord, floatCoord, radius, jitter, jitterMargin);\n    }\n  }\n  return floatCoord;\n}\nfunction fixJitterIgnoreOverlaps(floatCoord, jitter, bandWidth, radius) {\n  // Don't clamp single axis\n  if (bandWidth === null) {\n    return floatCoord + (Math.random() - 0.5) * jitter;\n  }\n  var maxJitter = bandWidth - radius * 2;\n  var actualJitter = Math.min(Math.max(0, jitter), maxJitter);\n  return floatCoord + (Math.random() - 0.5) * actualJitter;\n}\nfunction fixJitterAvoidOverlaps(fixedAxis, fixedCoord, floatCoord, radius, jitter, margin) {\n  var store = inner(fixedAxis);\n  if (!store.items) {\n    store.items = [];\n  }\n  var items = store.items;\n  // Try both positive and negative directions, choose the one with smaller movement\n  var overlapA = placeJitterOnDirection(items, fixedCoord, floatCoord, radius, jitter, margin, 1);\n  var overlapB = placeJitterOnDirection(items, fixedCoord, floatCoord, radius, jitter, margin, -1);\n  var minFloat = Math.abs(overlapA - floatCoord) < Math.abs(overlapB - floatCoord) ? overlapA : overlapB;\n  // Clamp only category axis\n  var bandWidth = fixedAxis.scale.type === 'ordinal' ? fixedAxis.getBandWidth() : null;\n  var distance = Math.abs(minFloat - floatCoord);\n  if (distance > jitter / 2 || bandWidth && distance > bandWidth / 2 - radius) {\n    // If the new item is moved too far, then give up.\n    // Fall back to random jitter.\n    return fixJitterIgnoreOverlaps(floatCoord, jitter, bandWidth, radius);\n  }\n  // Add new point to array\n  items.push({\n    fixedCoord: fixedCoord,\n    floatCoord: minFloat,\n    r: radius\n  });\n  return minFloat;\n}\nfunction placeJitterOnDirection(items, fixedCoord, floatCoord, radius, jitter, margin, direction) {\n  var y = floatCoord;\n  // Check all existing items for overlap and find the maximum adjustment needed\n  for (var i = 0; i < items.length; i++) {\n    var item = items[i];\n    var dx = fixedCoord - item.fixedCoord;\n    var dy = y - item.floatCoord;\n    var d2 = dx * dx + dy * dy;\n    var r = radius + item.r + margin;\n    if (d2 < r * r) {\n      // Has overlap, calculate required adjustment\n      var requiredY = item.floatCoord + Math.sqrt(r * r - dx * dx) * direction;\n      // Check if this adjustment would move too far\n      if (Math.abs(requiredY - floatCoord) > jitter / 2) {\n        return Number.MAX_VALUE; // Give up\n      }\n      // Update y only when it's larger to the center\n      if (direction === 1 && requiredY > y || direction === -1 && requiredY < y) {\n        y = requiredY;\n        // Loop from the start again\n        i = -1; // Reset index to recheck all items\n        continue; // Recalculate with the new y position\n      }\n    }\n  }\n  return y;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { needFixJitter, fixJitter } from '../../util/jitter.js';\nexport default function jitterLayout(ecModel) {\n  ecModel.eachSeriesByType('scatter', function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'single')) {\n      var baseAxis_1 = coordSys.getBaseAxis ? coordSys.getBaseAxis() : null;\n      var hasJitter = baseAxis_1 && needFixJitter(seriesModel, baseAxis_1);\n      if (hasJitter) {\n        var data_1 = seriesModel.getData();\n        data_1.each(function (idx) {\n          var dim = baseAxis_1.dim;\n          var orient = baseAxis_1.orient;\n          var isSingleY = orient === 'horizontal' && baseAxis_1.type !== 'category' || orient === 'vertical' && baseAxis_1.type === 'category';\n          var layout = data_1.getItemLayout(idx);\n          var rawSize = data_1.getItemVisual(idx, 'symbolSize');\n          var size = rawSize instanceof Array ? (rawSize[1] + rawSize[0]) / 2 : rawSize;\n          if (dim === 'y' || dim === 'single' && isSingleY) {\n            // x is fixed, and y is floating\n            var jittered = fixJitter(baseAxis_1, layout[0], layout[1], size / 2);\n            data_1.setItemLayout(idx, [layout[0], jittered]);\n          } else if (dim === 'x' || dim === 'single' && !isSingleY) {\n            // y is fixed, and x is floating\n            var jittered = fixJitter(baseAxis_1, layout[1], layout[0], size / 2);\n            data_1.setItemLayout(idx, [jittered, layout[1]]);\n          }\n        });\n      }\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport ScatterSeriesModel from './ScatterSeries.js';\nimport ScatterView from './ScatterView.js';\nimport { install as installGridSimple } from '../../component/grid/installSimple.js';\nimport layoutPoints from '../../layout/points.js';\nimport jitterLayout from './jitterLayout.js';\nexport function install(registers) {\n  // In case developer forget to include grid component\n  use(installGridSimple);\n  registers.registerSeriesModel(ScatterSeriesModel);\n  registers.registerChartView(ScatterView);\n  registers.registerLayout(layoutPoints('scatter'));\n}\nexport function installScatterJitter(registers) {\n  registers.registerLayout(registers.PRIORITY.VISUAL.POST_CHART_LAYOUT, jitterLayout);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as echarts from '../../core/echarts.js';\nimport { noop } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nexport function take(zr, resourceKey, userKey) {\n  inner(zr)[resourceKey] = userKey;\n}\nexport function release(zr, resourceKey, userKey) {\n  var store = inner(zr);\n  var uKey = store[resourceKey];\n  if (uKey === userKey) {\n    store[resourceKey] = null;\n  }\n}\nexport function isTaken(zr, resourceKey) {\n  return !!inner(zr)[resourceKey];\n}\n/**\n * payload: {\n *     type: 'takeGlobalCursor',\n *     key: 'dataZoomSelect', or 'brush', or ...,\n *         If no userKey, release global cursor.\n * }\n */\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'takeGlobalCursor',\n  event: 'globalCursorTaken',\n  update: 'update'\n}, noop);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { retrieveZInfo } from '../../util/graphic.js';\nvar IRRELEVANT_EXCLUDES = {\n  'axisPointer': 1,\n  'tooltip': 1,\n  'brush': 1\n};\n/**\n * Used on roam/brush triggering determination.\n * This is to avoid that: mouse clicking on an elements that is over geo or graph,\n * but roam is triggered unexpectedly.\n */\nexport function onIrrelevantElement(e, api, targetComponent) {\n  var eventElComponent = api.getComponentByElement(e.topTarget);\n  if (!eventElComponent || eventElComponent === targetComponent || IRRELEVANT_EXCLUDES.hasOwnProperty(eventElComponent.mainType)) {\n    return false;\n  }\n  // At present the `true` return is conservative. That is, the caller, such as a RoamController,\n  // is more likely to get a `false` return and start a roam behavior, becuase even if the\n  // `model.coordinateSystem` does not exist, the `e.topTarget` may be also a relevant element,\n  // such as axis split line/area or series elements, where roam should be available. Otherwise,\n  // if a dataZoom-served cartesian is full of series elements, the dataZoom-roaming can hardly\n  // be triggered.\n  var eventElCoordSys = eventElComponent.coordinateSystem;\n  // If eventElComponent is axisModel, it works only if it is injected with coordinateSystem.\n  if (!eventElCoordSys || eventElCoordSys.model === targetComponent) {\n    return false;\n  }\n  // e.g., if a cartesian is covered by a graph, the graph has a higher presedence in roam.\n  // A potential bad case is that RoamController does not prevent the cartesian from handling zr\n  // event, such as click and hovering, but it's fine so far.\n  // Aslo be conservative, if equals, return false.\n  var eventElCmptZInfo = retrieveZInfo(eventElComponent);\n  var targetCmptZInfo = retrieveZInfo(targetComponent);\n  if ((eventElCmptZInfo.zlevel - targetCmptZInfo.zlevel || eventElCmptZInfo.z - targetCmptZInfo.z) <= 0) {\n    return false;\n  }\n  return true;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport * as interactionMutex from './interactionMutex.js';\nimport { isString, bind, defaults, extend, retrieve2 } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nimport { retrieveZInfo } from '../../util/graphic.js';\nimport { onIrrelevantElement } from './cursorHelper.js';\n;\n/**\n * An manager of zoom and pan(darg) hehavior.\n * But it is not responsible for updating the view, since view updates vary and can\n * not be handled in a uniform way.\n *\n * Note: regarding view updates:\n *  - Transformabe views typically use `coord/View` (e.g., geo and series.graph roaming).\n *    Some commonly used view update logic has been organized into `roamHelper.ts`.\n *  - Non-transformable views handle updates themselves, possibly involving re-layout,\n *    (e.g., treemap).\n *  - Some scenarios do not require transformation (e.g., dataZoom roaming for cartesian,\n *    brush component).\n */\nvar RoamController = /** @class */function (_super) {\n  __extends(RoamController, _super);\n  function RoamController(zr) {\n    var _this = _super.call(this) || this;\n    _this._zr = zr;\n    // Avoid two roamController bind the same handler\n    var mousedownHandler = bind(_this._mousedownHandler, _this);\n    var mousemoveHandler = bind(_this._mousemoveHandler, _this);\n    var mouseupHandler = bind(_this._mouseupHandler, _this);\n    var mousewheelHandler = bind(_this._mousewheelHandler, _this);\n    var pinchHandler = bind(_this._pinchHandler, _this);\n    /**\n     * Notice:\n     *  - only enable needed types. For example, if 'zoom'\n     *    is not needed, 'zoom' should not be enabled, otherwise\n     *    default mousewheel behaviour (scroll page) will be disabled.\n     *  - This method is idempotent.\n     */\n    _this.enable = function (controlType, rawOpt) {\n      var zInfo = rawOpt.zInfo;\n      var _a = retrieveZInfo(zInfo.component),\n        z = _a.z,\n        zlevel = _a.zlevel;\n      var zInfoParsed = {\n        component: zInfo.component,\n        z: z,\n        zlevel: zlevel,\n        // By default roam controller is the lowest z2 comparing to other elememts in a component.\n        z2: retrieve2(zInfo.z2, -Infinity)\n      };\n      var triggerInfo = extend({}, rawOpt.triggerInfo);\n      this._opt = defaults(extend({}, rawOpt), {\n        zoomOnMouseWheel: true,\n        moveOnMouseMove: true,\n        // By default, wheel do not trigger move.\n        moveOnMouseWheel: false,\n        preventDefaultMouseMove: true,\n        zInfoParsed: zInfoParsed,\n        triggerInfo: triggerInfo\n      });\n      if (controlType == null) {\n        controlType = true;\n      }\n      // A handy optimization for repeatedly calling `enable` during roaming.\n      // Assert `disable` is only affected by `controlType`.\n      if (!this._enabled || this._controlType !== controlType) {\n        this._enabled = true;\n        // Disable previous first\n        this.disable();\n        if (controlType === true || controlType === 'move' || controlType === 'pan') {\n          addRoamZrListener(zr, 'mousedown', mousedownHandler, zInfoParsed);\n          addRoamZrListener(zr, 'mousemove', mousemoveHandler, zInfoParsed);\n          addRoamZrListener(zr, 'mouseup', mouseupHandler, zInfoParsed);\n        }\n        if (controlType === true || controlType === 'scale' || controlType === 'zoom') {\n          addRoamZrListener(zr, 'mousewheel', mousewheelHandler, zInfoParsed);\n          addRoamZrListener(zr, 'pinch', pinchHandler, zInfoParsed);\n        }\n      }\n    };\n    _this.disable = function () {\n      this._enabled = false;\n      removeRoamZrListener(zr, 'mousedown', mousedownHandler);\n      removeRoamZrListener(zr, 'mousemove', mousemoveHandler);\n      removeRoamZrListener(zr, 'mouseup', mouseupHandler);\n      removeRoamZrListener(zr, 'mousewheel', mousewheelHandler);\n      removeRoamZrListener(zr, 'pinch', pinchHandler);\n    };\n    return _this;\n  }\n  RoamController.prototype.isDragging = function () {\n    return this._dragging;\n  };\n  RoamController.prototype.isPinching = function () {\n    return this._pinching;\n  };\n  RoamController.prototype._checkPointer = function (e, x, y) {\n    var opt = this._opt;\n    var zInfoParsed = opt.zInfoParsed;\n    if (onIrrelevantElement(e, opt.api, zInfoParsed.component)) {\n      return false;\n    }\n    ;\n    var triggerInfo = opt.triggerInfo;\n    var roamTrigger = triggerInfo.roamTrigger;\n    var inArea = false;\n    if (roamTrigger === 'global') {\n      inArea = true;\n    }\n    if (!inArea) {\n      inArea = triggerInfo.isInSelf(e, x, y);\n    }\n    if (inArea && triggerInfo.isInClip && !triggerInfo.isInClip(e, x, y)) {\n      inArea = false;\n    }\n    return inArea;\n  };\n  RoamController.prototype._decideCursorStyle = function (e, x, y, forReverse) {\n    // If this cursor style decision is not strictly consistent with zrender,\n    // it's fine - zr will set the cursor on the next mousemove.\n    // This `grab` cursor style should take the lowest precedence. If the hovring element already\n    // have a cursor, zrender will set it to be non-'default' before entering this handler.\n    // (note, e.target is never silent, e.topTarget can be silent be irrelevant.)\n    var target = e.target;\n    if (!target && this._checkPointer(e, x, y)) {\n      // To indicate users that this area is draggable, otherwise users probably cannot kwown\n      // that when hovering out of the shape but still inside the bounding rect.\n      return 'grab';\n    }\n    if (forReverse) {\n      return target && target.cursor || 'default';\n    }\n  };\n  RoamController.prototype.dispose = function () {\n    this.disable();\n  };\n  RoamController.prototype._mousedownHandler = function (e) {\n    if (eventTool.isMiddleOrRightButtonOnMouseUpDown(e) || eventConsumed(e)) {\n      return;\n    }\n    var el = e.target;\n    while (el) {\n      if (el.draggable) {\n        return;\n      }\n      // check if host is draggable\n      el = el.__hostTarget || el.parent;\n    }\n    var x = e.offsetX;\n    var y = e.offsetY;\n    // To determine dragging start, only by checking on mosedown, but not mousemove.\n    // Mouse can be out of target when mouse moving.\n    if (this._checkPointer(e, x, y)) {\n      this._x = x;\n      this._y = y;\n      this._dragging = true;\n    }\n  };\n  RoamController.prototype._mousemoveHandler = function (e) {\n    var zr = this._zr;\n    if (e.gestureEvent === 'pinch' || interactionMutex.isTaken(zr, 'globalPan') || eventConsumed(e)) {\n      return;\n    }\n    var x = e.offsetX;\n    var y = e.offsetY;\n    if (!this._dragging || !isAvailableBehavior('moveOnMouseMove', e, this._opt)) {\n      var cursorStyle = this._decideCursorStyle(e, x, y, false);\n      if (cursorStyle) {\n        zr.setCursorStyle(cursorStyle);\n      }\n      return;\n    }\n    zr.setCursorStyle('grabbing');\n    var oldX = this._x;\n    var oldY = this._y;\n    var dx = x - oldX;\n    var dy = y - oldY;\n    this._x = x;\n    this._y = y;\n    if (this._opt.preventDefaultMouseMove) {\n      eventTool.stop(e.event);\n    }\n    e.__ecRoamConsumed = true;\n    trigger(this, 'pan', 'moveOnMouseMove', e, {\n      dx: dx,\n      dy: dy,\n      oldX: oldX,\n      oldY: oldY,\n      newX: x,\n      newY: y,\n      isAvailableBehavior: null\n    });\n  };\n  RoamController.prototype._mouseupHandler = function (e) {\n    if (eventConsumed(e)) {\n      return;\n    }\n    var zr = this._zr;\n    if (!eventTool.isMiddleOrRightButtonOnMouseUpDown(e)) {\n      this._dragging = false;\n      var cursorStyle = this._decideCursorStyle(e, e.offsetX, e.offsetY, true);\n      if (cursorStyle) {\n        zr.setCursorStyle(cursorStyle);\n      }\n    }\n  };\n  RoamController.prototype._mousewheelHandler = function (e) {\n    if (eventConsumed(e)) {\n      return;\n    }\n    var shouldZoom = isAvailableBehavior('zoomOnMouseWheel', e, this._opt);\n    var shouldMove = isAvailableBehavior('moveOnMouseWheel', e, this._opt);\n    var wheelDelta = e.wheelDelta;\n    var absWheelDeltaDelta = Math.abs(wheelDelta);\n    var originX = e.offsetX;\n    var originY = e.offsetY;\n    // wheelDelta maybe -0 in chrome mac.\n    if (wheelDelta === 0 || !shouldZoom && !shouldMove) {\n      return;\n    }\n    // If both `shouldZoom` and `shouldMove` is true, trigger\n    // their event both, and the final behavior is determined\n    // by event listener themselves.\n    if (shouldZoom) {\n      // Convenience:\n      // Mac and VM Windows on Mac: scroll up: zoom out.\n      // Windows: scroll up: zoom in.\n      // FIXME: Should do more test in different environment.\n      // wheelDelta is too complicated in difference nvironment\n      // (https://developer.mozilla.org/en-US/docs/Web/Events/mousewheel),\n      // although it has been normallized by zrender.\n      // wheelDelta of mouse wheel is bigger than touch pad.\n      var factor = absWheelDeltaDelta > 3 ? 1.4 : absWheelDeltaDelta > 1 ? 1.2 : 1.1;\n      var scale = wheelDelta > 0 ? factor : 1 / factor;\n      this._checkTriggerMoveZoom(this, 'zoom', 'zoomOnMouseWheel', e, {\n        scale: scale,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n    if (shouldMove) {\n      // FIXME: Should do more test in different environment.\n      var absDelta = Math.abs(wheelDelta);\n      // wheelDelta of mouse wheel is bigger than touch pad.\n      var scrollDelta = (wheelDelta > 0 ? 1 : -1) * (absDelta > 3 ? 0.4 : absDelta > 1 ? 0.15 : 0.05);\n      this._checkTriggerMoveZoom(this, 'scrollMove', 'moveOnMouseWheel', e, {\n        scrollDelta: scrollDelta,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n  };\n  RoamController.prototype._pinchHandler = function (e) {\n    if (interactionMutex.isTaken(this._zr, 'globalPan') || eventConsumed(e)) {\n      return;\n    }\n    var scale = e.pinchScale > 1 ? 1.1 : 1 / 1.1;\n    this._checkTriggerMoveZoom(this, 'zoom', null, e, {\n      scale: scale,\n      originX: e.pinchX,\n      originY: e.pinchY,\n      isAvailableBehavior: null\n    });\n  };\n  RoamController.prototype._checkTriggerMoveZoom = function (controller, eventName, behaviorToCheck, e, contollerEvent) {\n    if (controller._checkPointer(e, contollerEvent.originX, contollerEvent.originY)) {\n      // When mouse is out of roamController rect,\n      // default befavoius should not be be disabled, otherwise\n      // page sliding is disabled, contrary to expectation.\n      eventTool.stop(e.event);\n      e.__ecRoamConsumed = true;\n      trigger(controller, eventName, behaviorToCheck, e, contollerEvent);\n    }\n  };\n  return RoamController;\n}(Eventful);\nfunction eventConsumed(e) {\n  return e.__ecRoamConsumed;\n}\nvar innerZrStore = makeInner();\nfunction ensureZrStore(zr) {\n  var store = innerZrStore(zr);\n  store.roam = store.roam || {};\n  store.uniform = store.uniform || {};\n  return store;\n}\n/**\n * Listeners are sorted by z2/z/zlevel in descending order.\n * This decides the precedence between different roam controllers if they are overlapped.\n *\n * [MEMO]: It's not easy to perfectly reconcile the conflicts caused by overlap.\n *  - Consider cases:\n *    - Multiple roam controllers overlapped.\n *      - Usually only the topmost can trigger roam.\n *    - Roam controllers overlap with other zr elements:\n *      - zr elements are relevant or irrelevent to the host of the roam controller. e.g., axis split line\n *        or series elements is relevant to a cartesian and should trigger roam.\n *      - zr elements is above or below the roam controller host, which affects the precedence of interaction.\n *      - zr elements may not silent only for triggering tooltip by hovering, which is available to roam;\n *        or may not silent for click, where roam is not preferable.\n *  - Approach - `addRoamZrListener+pointerChecker+onIrrelevantElement` (currently used):\n *    - Resolve the precedence between different roam controllers\n *    - But cannot prevent the handling on other zr elements that under the roam controller in z-order.\n *  - Approach - \"use an invisible zr elements to receive the zr events to trigger roam\":\n *    - More complicated in impl.\n *    - May cause bad cases where zr event cannot be receive due to other non-silient zr elements covering it.\n */\nfunction addRoamZrListener(zr, eventType, listener, zInfoParsed) {\n  var store = ensureZrStore(zr);\n  var roam = store.roam;\n  var listenerList = roam[eventType] = roam[eventType] || [];\n  var idx = 0;\n  for (; idx < listenerList.length; idx++) {\n    var currZInfo = listenerList[idx].zInfoParsed;\n    if ((currZInfo.zlevel - zInfoParsed.zlevel || currZInfo.z - zInfoParsed.z || currZInfo.z2 - zInfoParsed.z2\n    // If all equals, the latter added one has a higher precedence.\n    ) <= 0) {\n      break;\n    }\n  }\n  listenerList.splice(idx, 0, {\n    listener: listener,\n    zInfoParsed: zInfoParsed\n  });\n  ensureUniformListener(zr, eventType);\n}\nfunction removeRoamZrListener(zr, eventType, listener) {\n  var store = ensureZrStore(zr);\n  var listenerList = store.roam[eventType] || [];\n  for (var idx = 0; idx < listenerList.length; idx++) {\n    if (listenerList[idx].listener === listener) {\n      listenerList.splice(idx, 1);\n      if (!listenerList.length) {\n        removeUniformListener(zr, eventType);\n      }\n      return;\n    }\n  }\n}\nfunction ensureUniformListener(zr, eventType) {\n  var store = ensureZrStore(zr);\n  if (!store.uniform[eventType]) {\n    zr.on(eventType, store.uniform[eventType] = function (event) {\n      var listenerList = store.roam[eventType];\n      if (listenerList) {\n        for (var i = 0; i < listenerList.length; i++) {\n          listenerList[i].listener(event);\n        }\n      }\n    });\n  }\n}\nfunction removeUniformListener(zr, eventType) {\n  var store = ensureZrStore(zr);\n  var uniform = store.uniform;\n  if (uniform[eventType]) {\n    zr.off(eventType, uniform[eventType]);\n    uniform[eventType] = null;\n  }\n}\nfunction trigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  // Also provide behavior checker for event listener, for some case that\n  // multiple components share one listener.\n  contollerEvent.isAvailableBehavior = bind(isAvailableBehavior, null, behaviorToCheck, e);\n  // TODO should not have type issue.\n  controller.trigger(eventName, contollerEvent);\n}\n// settings: {\n//     zoomOnMouseWheel\n//     moveOnMouseMove\n//     moveOnMouseWheel\n// }\n// The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\nfunction isAvailableBehavior(behaviorToCheck, e, settings) {\n  var setting = settings[behaviorToCheck];\n  return !behaviorToCheck || setting && (!isString(setting) || e.event[setting + 'Key']);\n}\nexport default RoamController;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as zrColor from 'zrender/lib/tool/color.js';\nimport { linearMap } from '../util/number.js';\nimport { warn } from '../util/log.js';\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\nvar CATEGORY_DEFAULT_VISUAL_INDEX = -1;\nvar VisualMapping = /** @class */function () {\n  function VisualMapping(option) {\n    var mappingMethod = option.mappingMethod;\n    var visualType = option.type;\n    var thisOption = this.option = zrUtil.clone(option);\n    this.type = visualType;\n    this.mappingMethod = mappingMethod;\n    this._normalizeData = normalizers[mappingMethod];\n    var visualHandler = VisualMapping.visualHandlers[visualType];\n    this.applyVisual = visualHandler.applyVisual;\n    this.getColorMapper = visualHandler.getColorMapper;\n    this._normalizedToVisual = visualHandler._normalizedToVisual[mappingMethod];\n    if (mappingMethod === 'piecewise') {\n      normalizeVisualRange(thisOption);\n      preprocessForPiecewise(thisOption);\n    } else if (mappingMethod === 'category') {\n      thisOption.categories ? preprocessForSpecifiedCategory(thisOption)\n      // categories is ordinal when thisOption.categories not specified,\n      // which need no more preprocess except normalize visual.\n      : normalizeVisualRange(thisOption, true);\n    } else {\n      // mappingMethod === 'linear' or 'fixed'\n      zrUtil.assert(mappingMethod !== 'linear' || thisOption.dataExtent);\n      normalizeVisualRange(thisOption);\n    }\n  }\n  VisualMapping.prototype.mapValueToVisual = function (value) {\n    var normalized = this._normalizeData(value);\n    return this._normalizedToVisual(normalized, value);\n  };\n  VisualMapping.prototype.getNormalizer = function () {\n    return zrUtil.bind(this._normalizeData, this);\n  };\n  /**\n   * List available visual types.\n   *\n   * @public\n   * @return {Array.<string>}\n   */\n  VisualMapping.listVisualTypes = function () {\n    return zrUtil.keys(VisualMapping.visualHandlers);\n  };\n  // /**\n  //  * @public\n  //  */\n  // static addVisualHandler(name, handler) {\n  //     visualHandlers[name] = handler;\n  // }\n  /**\n   * @public\n   */\n  VisualMapping.isValidType = function (visualType) {\n    return VisualMapping.visualHandlers.hasOwnProperty(visualType);\n  };\n  /**\n   * Convenient method.\n   * Visual can be Object or Array or primary type.\n   */\n  VisualMapping.eachVisual = function (visual, callback, context) {\n    if (zrUtil.isObject(visual)) {\n      zrUtil.each(visual, callback, context);\n    } else {\n      callback.call(context, visual);\n    }\n  };\n  VisualMapping.mapVisual = function (visual, callback, context) {\n    var isPrimary;\n    var newVisual = zrUtil.isArray(visual) ? [] : zrUtil.isObject(visual) ? {} : (isPrimary = true, null);\n    VisualMapping.eachVisual(visual, function (v, key) {\n      var newVal = callback.call(context, v, key);\n      isPrimary ? newVisual = newVal : newVisual[key] = newVal;\n    });\n    return newVisual;\n  };\n  /**\n   * Retrieve visual properties from given object.\n   */\n  VisualMapping.retrieveVisuals = function (obj) {\n    var ret = {};\n    var hasVisual;\n    obj && each(VisualMapping.visualHandlers, function (h, visualType) {\n      if (obj.hasOwnProperty(visualType)) {\n        ret[visualType] = obj[visualType];\n        hasVisual = true;\n      }\n    });\n    return hasVisual ? ret : null;\n  };\n  /**\n   * Give order to visual types, considering colorSaturation, colorAlpha depends on color.\n   *\n   * @public\n   * @param {(Object|Array)} visualTypes If Object, like: {color: ..., colorSaturation: ...}\n   *                                     IF Array, like: ['color', 'symbol', 'colorSaturation']\n   * @return {Array.<string>} Sorted visual types.\n   */\n  VisualMapping.prepareVisualTypes = function (visualTypes) {\n    if (zrUtil.isArray(visualTypes)) {\n      visualTypes = visualTypes.slice();\n    } else if (isObject(visualTypes)) {\n      var types_1 = [];\n      each(visualTypes, function (item, type) {\n        types_1.push(type);\n      });\n      visualTypes = types_1;\n    } else {\n      return [];\n    }\n    visualTypes.sort(function (type1, type2) {\n      // color should be front of colorSaturation, colorAlpha, ...\n      // symbol and symbolSize do not matter.\n      return type2 === 'color' && type1 !== 'color' && type1.indexOf('color') === 0 ? 1 : -1;\n    });\n    return visualTypes;\n  };\n  /**\n   * 'color', 'colorSaturation', 'colorAlpha', ... are depends on 'color'.\n   * Other visuals are only depends on themself.\n   */\n  VisualMapping.dependsOn = function (visualType1, visualType2) {\n    return visualType2 === 'color' ? !!(visualType1 && visualType1.indexOf(visualType2) === 0) : visualType1 === visualType2;\n  };\n  /**\n   * @param value\n   * @param pieceList [{value: ..., interval: [min, max]}, ...]\n   *                         Always from small to big.\n   * @param findClosestWhenOutside Default to be false\n   * @return index\n   */\n  VisualMapping.findPieceIndex = function (value, pieceList, findClosestWhenOutside) {\n    var possibleI;\n    var abs = Infinity;\n    // value has the higher priority.\n    for (var i = 0, len = pieceList.length; i < len; i++) {\n      var pieceValue = pieceList[i].value;\n      if (pieceValue != null) {\n        if (pieceValue === value\n        // FIXME\n        // It is supposed to compare value according to value type of dimension,\n        // but currently value type can exactly be string or number.\n        // Compromise for numeric-like string (like '12'), especially\n        // in the case that visualMap.categories is ['22', '33'].\n        || zrUtil.isString(pieceValue) && pieceValue === value + '') {\n          return i;\n        }\n        findClosestWhenOutside && updatePossible(pieceValue, i);\n      }\n    }\n    for (var i = 0, len = pieceList.length; i < len; i++) {\n      var piece = pieceList[i];\n      var interval = piece.interval;\n      var close_1 = piece.close;\n      if (interval) {\n        if (interval[0] === -Infinity) {\n          if (littleThan(close_1[1], value, interval[1])) {\n            return i;\n          }\n        } else if (interval[1] === Infinity) {\n          if (littleThan(close_1[0], interval[0], value)) {\n            return i;\n          }\n        } else if (littleThan(close_1[0], interval[0], value) && littleThan(close_1[1], value, interval[1])) {\n          return i;\n        }\n        findClosestWhenOutside && updatePossible(interval[0], i);\n        findClosestWhenOutside && updatePossible(interval[1], i);\n      }\n    }\n    if (findClosestWhenOutside) {\n      return value === Infinity ? pieceList.length - 1 : value === -Infinity ? 0 : possibleI;\n    }\n    function updatePossible(val, index) {\n      var newAbs = Math.abs(val - value);\n      if (newAbs < abs) {\n        abs = newAbs;\n        possibleI = index;\n      }\n    }\n  };\n  VisualMapping.visualHandlers = {\n    color: {\n      applyVisual: makeApplyVisual('color'),\n      getColorMapper: function () {\n        var thisOption = this.option;\n        return zrUtil.bind(thisOption.mappingMethod === 'category' ? function (value, isNormalized) {\n          !isNormalized && (value = this._normalizeData(value));\n          return doMapCategory.call(this, value);\n        } : function (value, isNormalized, out) {\n          // If output rgb array\n          // which will be much faster and useful in pixel manipulation\n          var returnRGBArray = !!out;\n          !isNormalized && (value = this._normalizeData(value));\n          out = zrColor.fastLerp(value, thisOption.parsedVisual, out);\n          return returnRGBArray ? out : zrColor.stringify(out, 'rgba');\n        }, this);\n      },\n      _normalizedToVisual: {\n        linear: function (normalized) {\n          return zrColor.stringify(zrColor.fastLerp(normalized, this.option.parsedVisual), 'rgba');\n        },\n        category: doMapCategory,\n        piecewise: function (normalized, value) {\n          var result = getSpecifiedVisual.call(this, value);\n          if (result == null) {\n            result = zrColor.stringify(zrColor.fastLerp(normalized, this.option.parsedVisual), 'rgba');\n          }\n          return result;\n        },\n        fixed: doMapFixed\n      }\n    },\n    colorHue: makePartialColorVisualHandler(function (color, value) {\n      return zrColor.modifyHSL(color, value);\n    }),\n    colorSaturation: makePartialColorVisualHandler(function (color, value) {\n      return zrColor.modifyHSL(color, null, value);\n    }),\n    colorLightness: makePartialColorVisualHandler(function (color, value) {\n      return zrColor.modifyHSL(color, null, null, value);\n    }),\n    colorAlpha: makePartialColorVisualHandler(function (color, value) {\n      return zrColor.modifyAlpha(color, value);\n    }),\n    decal: {\n      applyVisual: makeApplyVisual('decal'),\n      _normalizedToVisual: {\n        linear: null,\n        category: doMapCategory,\n        piecewise: null,\n        fixed: null\n      }\n    },\n    opacity: {\n      applyVisual: makeApplyVisual('opacity'),\n      _normalizedToVisual: createNormalizedToNumericVisual([0, 1])\n    },\n    liftZ: {\n      applyVisual: makeApplyVisual('liftZ'),\n      _normalizedToVisual: {\n        linear: doMapFixed,\n        category: doMapFixed,\n        piecewise: doMapFixed,\n        fixed: doMapFixed\n      }\n    },\n    symbol: {\n      applyVisual: function (value, getter, setter) {\n        var symbolCfg = this.mapValueToVisual(value);\n        setter('symbol', symbolCfg);\n      },\n      _normalizedToVisual: {\n        linear: doMapToArray,\n        category: doMapCategory,\n        piecewise: function (normalized, value) {\n          var result = getSpecifiedVisual.call(this, value);\n          if (result == null) {\n            result = doMapToArray.call(this, normalized);\n          }\n          return result;\n        },\n        fixed: doMapFixed\n      }\n    },\n    symbolSize: {\n      applyVisual: makeApplyVisual('symbolSize'),\n      _normalizedToVisual: createNormalizedToNumericVisual([0, 1])\n    }\n  };\n  return VisualMapping;\n}();\nfunction preprocessForPiecewise(thisOption) {\n  var pieceList = thisOption.pieceList;\n  thisOption.hasSpecialVisual = false;\n  zrUtil.each(pieceList, function (piece, index) {\n    piece.originIndex = index;\n    // piece.visual is \"result visual value\" but not\n    // a visual range, so it does not need to be normalized.\n    if (piece.visual != null) {\n      thisOption.hasSpecialVisual = true;\n    }\n  });\n}\nfunction preprocessForSpecifiedCategory(thisOption) {\n  // Hash categories.\n  var categories = thisOption.categories;\n  var categoryMap = thisOption.categoryMap = {};\n  var visual = thisOption.visual;\n  each(categories, function (cate, index) {\n    categoryMap[cate] = index;\n  });\n  // Process visual map input.\n  if (!zrUtil.isArray(visual)) {\n    var visualArr_1 = [];\n    if (zrUtil.isObject(visual)) {\n      each(visual, function (v, cate) {\n        var index = categoryMap[cate];\n        visualArr_1[index != null ? index : CATEGORY_DEFAULT_VISUAL_INDEX] = v;\n      });\n    } else {\n      // Is primary type, represents default visual.\n      visualArr_1[CATEGORY_DEFAULT_VISUAL_INDEX] = visual;\n    }\n    visual = setVisualToOption(thisOption, visualArr_1);\n  }\n  // Remove categories that has no visual,\n  // then we can mapping them to CATEGORY_DEFAULT_VISUAL_INDEX.\n  for (var i = categories.length - 1; i >= 0; i--) {\n    if (visual[i] == null) {\n      delete categoryMap[categories[i]];\n      categories.pop();\n    }\n  }\n}\nfunction normalizeVisualRange(thisOption, isCategory) {\n  var visual = thisOption.visual;\n  var visualArr = [];\n  if (zrUtil.isObject(visual)) {\n    each(visual, function (v) {\n      visualArr.push(v);\n    });\n  } else if (visual != null) {\n    visualArr.push(visual);\n  }\n  var doNotNeedPair = {\n    color: 1,\n    symbol: 1\n  };\n  if (!isCategory && visualArr.length === 1 && !doNotNeedPair.hasOwnProperty(thisOption.type)) {\n    // Do not care visualArr.length === 0, which is illegal.\n    visualArr[1] = visualArr[0];\n  }\n  setVisualToOption(thisOption, visualArr);\n}\nfunction makePartialColorVisualHandler(applyValue) {\n  return {\n    applyVisual: function (value, getter, setter) {\n      // Only used in HSL\n      var colorChannel = this.mapValueToVisual(value);\n      // Must not be array value\n      setter('color', applyValue(getter('color'), colorChannel));\n    },\n    _normalizedToVisual: createNormalizedToNumericVisual([0, 1])\n  };\n}\nfunction doMapToArray(normalized) {\n  var visual = this.option.visual;\n  return visual[Math.round(linearMap(normalized, [0, 1], [0, visual.length - 1], true))] || {}; // TODO {}?\n}\nfunction makeApplyVisual(visualType) {\n  return function (value, getter, setter) {\n    setter(visualType, this.mapValueToVisual(value));\n  };\n}\nfunction doMapCategory(normalized) {\n  var visual = this.option.visual;\n  return visual[this.option.loop && normalized !== CATEGORY_DEFAULT_VISUAL_INDEX ? normalized % visual.length : normalized];\n}\nfunction doMapFixed() {\n  // visual will be convert to array.\n  return this.option.visual[0];\n}\n/**\n * Create mapped to numeric visual\n */\nfunction createNormalizedToNumericVisual(sourceExtent) {\n  return {\n    linear: function (normalized) {\n      return linearMap(normalized, sourceExtent, this.option.visual, true);\n    },\n    category: doMapCategory,\n    piecewise: function (normalized, value) {\n      var result = getSpecifiedVisual.call(this, value);\n      if (result == null) {\n        result = linearMap(normalized, sourceExtent, this.option.visual, true);\n      }\n      return result;\n    },\n    fixed: doMapFixed\n  };\n}\nfunction getSpecifiedVisual(value) {\n  var thisOption = this.option;\n  var pieceList = thisOption.pieceList;\n  if (thisOption.hasSpecialVisual) {\n    var pieceIndex = VisualMapping.findPieceIndex(value, pieceList);\n    var piece = pieceList[pieceIndex];\n    if (piece && piece.visual) {\n      return piece.visual[this.type];\n    }\n  }\n}\nfunction setVisualToOption(thisOption, visualArr) {\n  thisOption.visual = visualArr;\n  if (thisOption.type === 'color') {\n    thisOption.parsedVisual = zrUtil.map(visualArr, function (item) {\n      var color = zrColor.parse(item);\n      if (!color && process.env.NODE_ENV !== 'production') {\n        warn(\"'\" + item + \"' is an illegal color, fallback to '#000000'\", true);\n      }\n      return color || [0, 0, 0, 1];\n    });\n  }\n  return visualArr;\n}\n/**\n * Normalizers by mapping methods.\n */\nvar normalizers = {\n  linear: function (value) {\n    return linearMap(value, this.option.dataExtent, [0, 1], true);\n  },\n  piecewise: function (value) {\n    var pieceList = this.option.pieceList;\n    var pieceIndex = VisualMapping.findPieceIndex(value, pieceList, true);\n    if (pieceIndex != null) {\n      return linearMap(pieceIndex, [0, pieceList.length - 1], [0, 1], true);\n    }\n  },\n  category: function (value) {\n    var index = this.option.categories ? this.option.categoryMap[value] : value; // ordinal value\n    return index == null ? CATEGORY_DEFAULT_VISUAL_INDEX : index;\n  },\n  fixed: zrUtil.noop\n};\nfunction littleThan(close, a, b) {\n  return close ? a <= b : a < b;\n}\nexport default VisualMapping;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Line path for bezier and straight line draw\n */\nimport * as graphic from '../../util/graphic.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport tokens from '../../visual/tokens.js';\nvar straightLineProto = graphic.Line.prototype;\nvar bezierCurveProto = graphic.BezierCurve.prototype;\nvar StraightLineShape = /** @class */function () {\n  function StraightLineShape() {\n    // Start point\n    this.x1 = 0;\n    this.y1 = 0;\n    // End point\n    this.x2 = 0;\n    this.y2 = 0;\n    this.percent = 1;\n  }\n  return StraightLineShape;\n}();\nvar CurveShape = /** @class */function (_super) {\n  __extends(CurveShape, _super);\n  function CurveShape() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return CurveShape;\n}(StraightLineShape);\nfunction isStraightLine(shape) {\n  return isNaN(+shape.cpx1) || isNaN(+shape.cpy1);\n}\nvar ECLinePath = /** @class */function (_super) {\n  __extends(ECLinePath, _super);\n  function ECLinePath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'ec-line';\n    return _this;\n  }\n  ECLinePath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: tokens.color.neutral99,\n      fill: null\n    };\n  };\n  ECLinePath.prototype.getDefaultShape = function () {\n    return new StraightLineShape();\n  };\n  ECLinePath.prototype.buildPath = function (ctx, shape) {\n    if (isStraightLine(shape)) {\n      straightLineProto.buildPath.call(this, ctx, shape);\n    } else {\n      bezierCurveProto.buildPath.call(this, ctx, shape);\n    }\n  };\n  ECLinePath.prototype.pointAt = function (t) {\n    if (isStraightLine(this.shape)) {\n      return straightLineProto.pointAt.call(this, t);\n    } else {\n      return bezierCurveProto.pointAt.call(this, t);\n    }\n  };\n  ECLinePath.prototype.tangentAt = function (t) {\n    var shape = this.shape;\n    var p = isStraightLine(shape) ? [shape.x2 - shape.x1, shape.y2 - shape.y1] : bezierCurveProto.tangentAt.call(this, t);\n    return vec2.normalize(p, p);\n  };\n  return ECLinePath;\n}(graphic.Path);\nexport default ECLinePath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { isArray, each, retrieve2 } from 'zrender/lib/core/util.js';\nimport * as vector from 'zrender/lib/core/vector.js';\nimport * as symbolUtil from '../../util/symbol.js';\nimport ECLinePath from './LinePath.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis, enterEmphasis, leaveEmphasis, SPECIAL_STATES } from '../../util/states.js';\nimport { getLabelStatesModels, setLabelStyle } from '../../label/labelStyle.js';\nimport { round } from '../../util/number.js';\nimport tokens from '../../visual/tokens.js';\nvar SYMBOL_CATEGORIES = ['fromSymbol', 'toSymbol'];\nfunction makeSymbolTypeKey(symbolCategory) {\n  return '_' + symbolCategory + 'Type';\n}\nfunction makeSymbolTypeValue(name, lineData, idx) {\n  var symbolType = lineData.getItemVisual(idx, name);\n  if (!symbolType || symbolType === 'none') {\n    return symbolType;\n  }\n  var symbolSize = lineData.getItemVisual(idx, name + 'Size');\n  var symbolRotate = lineData.getItemVisual(idx, name + 'Rotate');\n  var symbolOffset = lineData.getItemVisual(idx, name + 'Offset');\n  var symbolKeepAspect = lineData.getItemVisual(idx, name + 'KeepAspect');\n  var symbolSizeArr = symbolUtil.normalizeSymbolSize(symbolSize);\n  var symbolOffsetArr = symbolUtil.normalizeSymbolOffset(symbolOffset || 0, symbolSizeArr);\n  return symbolType + symbolSizeArr + symbolOffsetArr + (symbolRotate || '') + (symbolKeepAspect || '');\n}\n/**\n * @inner\n */\nfunction createSymbol(name, lineData, idx) {\n  var symbolType = lineData.getItemVisual(idx, name);\n  if (!symbolType || symbolType === 'none') {\n    return;\n  }\n  var symbolSize = lineData.getItemVisual(idx, name + 'Size');\n  var symbolRotate = lineData.getItemVisual(idx, name + 'Rotate');\n  var symbolOffset = lineData.getItemVisual(idx, name + 'Offset');\n  var symbolKeepAspect = lineData.getItemVisual(idx, name + 'KeepAspect');\n  var symbolSizeArr = symbolUtil.normalizeSymbolSize(symbolSize);\n  var symbolOffsetArr = symbolUtil.normalizeSymbolOffset(symbolOffset || 0, symbolSizeArr);\n  var symbolPath = symbolUtil.createSymbol(symbolType, -symbolSizeArr[0] / 2 + symbolOffsetArr[0], -symbolSizeArr[1] / 2 + symbolOffsetArr[1], symbolSizeArr[0], symbolSizeArr[1], null, symbolKeepAspect);\n  symbolPath.__specifiedRotation = symbolRotate == null || isNaN(symbolRotate) ? void 0 : +symbolRotate * Math.PI / 180 || 0;\n  symbolPath.name = name;\n  return symbolPath;\n}\nfunction createLine(points) {\n  var line = new ECLinePath({\n    name: 'line',\n    subPixelOptimize: true\n  });\n  setLinePoints(line.shape, points);\n  return line;\n}\nfunction setLinePoints(targetShape, points) {\n  targetShape.x1 = points[0][0];\n  targetShape.y1 = points[0][1];\n  targetShape.x2 = points[1][0];\n  targetShape.y2 = points[1][1];\n  targetShape.percent = 1;\n  var cp1 = points[2];\n  if (cp1) {\n    targetShape.cpx1 = cp1[0];\n    targetShape.cpy1 = cp1[1];\n  } else {\n    targetShape.cpx1 = NaN;\n    targetShape.cpy1 = NaN;\n  }\n}\nvar Line = /** @class */function (_super) {\n  __extends(Line, _super);\n  function Line(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n    _this._createLine(lineData, idx, seriesScope);\n    return _this;\n  }\n  Line.prototype._createLine = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var linePoints = lineData.getItemLayout(idx);\n    var z2 = lineData.getItemVisual(idx, 'z2');\n    var line = createLine(linePoints);\n    line.shape.percent = 0;\n    graphic.initProps(line, {\n      z2: retrieve2(z2, 0),\n      shape: {\n        percent: 1\n      }\n    }, seriesModel, idx);\n    this.add(line);\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = createSymbol(symbolCategory, lineData, idx);\n      // symbols must added after line to make sure\n      // it will be updated after line#update.\n      // Or symbol position and rotation update in line#beforeUpdate will be one frame slow\n      this.add(symbol);\n      this[makeSymbolTypeKey(symbolCategory)] = makeSymbolTypeValue(symbolCategory, lineData, idx);\n    }, this);\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n  // TODO More strict on the List type in parameters?\n  Line.prototype.updateData = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var linePoints = lineData.getItemLayout(idx);\n    var target = {\n      shape: {}\n    };\n    setLinePoints(target.shape, linePoints);\n    graphic.updateProps(line, target, seriesModel, idx);\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbolType = makeSymbolTypeValue(symbolCategory, lineData, idx);\n      var key = makeSymbolTypeKey(symbolCategory);\n      // Symbol changed\n      if (this[key] !== symbolType) {\n        this.remove(this.childOfName(symbolCategory));\n        var symbol = createSymbol(symbolCategory, lineData, idx);\n        this.add(symbol);\n      }\n      this[key] = symbolType;\n    }, this);\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n  ;\n  Line.prototype.getLinePath = function () {\n    return this.childAt(0);\n  };\n  Line.prototype._updateCommonStl = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var emphasisLineStyle = seriesScope && seriesScope.emphasisLineStyle;\n    var blurLineStyle = seriesScope && seriesScope.blurLineStyle;\n    var selectLineStyle = seriesScope && seriesScope.selectLineStyle;\n    var labelStatesModels = seriesScope && seriesScope.labelStatesModels;\n    var emphasisDisabled = seriesScope && seriesScope.emphasisDisabled;\n    var focus = seriesScope && seriesScope.focus;\n    var blurScope = seriesScope && seriesScope.blurScope;\n    // Optimization for large dataset\n    if (!seriesScope || lineData.hasItemOption) {\n      var itemModel = lineData.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisLineStyle = emphasisModel.getModel('lineStyle').getLineStyle();\n      blurLineStyle = itemModel.getModel(['blur', 'lineStyle']).getLineStyle();\n      selectLineStyle = itemModel.getModel(['select', 'lineStyle']).getLineStyle();\n      emphasisDisabled = emphasisModel.get('disabled');\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n      labelStatesModels = getLabelStatesModels(itemModel);\n    }\n    var lineStyle = lineData.getItemVisual(idx, 'style');\n    var visualColor = lineStyle.stroke;\n    line.useStyle(lineStyle);\n    line.style.fill = null;\n    line.style.strokeNoScale = true;\n    line.ensureState('emphasis').style = emphasisLineStyle;\n    line.ensureState('blur').style = blurLineStyle;\n    line.ensureState('select').style = selectLineStyle;\n    // Update symbol\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = this.childOfName(symbolCategory);\n      if (symbol) {\n        // Share opacity and color with line.\n        symbol.setColor(visualColor);\n        symbol.style.opacity = lineStyle.opacity;\n        for (var i = 0; i < SPECIAL_STATES.length; i++) {\n          var stateName = SPECIAL_STATES[i];\n          var lineState = line.getState(stateName);\n          if (lineState) {\n            var lineStateStyle = lineState.style || {};\n            var state = symbol.ensureState(stateName);\n            var stateStyle = state.style || (state.style = {});\n            if (lineStateStyle.stroke != null) {\n              stateStyle[symbol.__isEmptyBrush ? 'stroke' : 'fill'] = lineStateStyle.stroke;\n            }\n            if (lineStateStyle.opacity != null) {\n              stateStyle.opacity = lineStateStyle.opacity;\n            }\n          }\n        }\n        symbol.markRedraw();\n      }\n    }, this);\n    var rawVal = seriesModel.getRawValue(idx);\n    setLabelStyle(this, labelStatesModels, {\n      labelDataIndex: idx,\n      labelFetcher: {\n        getFormattedLabel: function (dataIndex, stateName) {\n          return seriesModel.getFormattedLabel(dataIndex, stateName, lineData.dataType);\n        }\n      },\n      inheritColor: visualColor || tokens.color.neutral99,\n      defaultOpacity: lineStyle.opacity,\n      defaultText: (rawVal == null ? lineData.getName(idx) : isFinite(rawVal) ? round(rawVal) : rawVal) + ''\n    });\n    var label = this.getTextContent();\n    // Always set `textStyle` even if `normalStyle.text` is null, because default\n    // values have to be set on `normalStyle`.\n    if (label) {\n      var labelNormalModel = labelStatesModels.normal;\n      label.__align = label.style.align;\n      label.__verticalAlign = label.style.verticalAlign;\n      // 'start', 'middle', 'end'\n      label.__position = labelNormalModel.get('position') || 'middle';\n      var distance = labelNormalModel.get('distance');\n      if (!isArray(distance)) {\n        distance = [distance, distance];\n      }\n      label.__labelDistance = distance;\n    }\n    this.setTextConfig({\n      position: null,\n      local: true,\n      inside: false // Can't be inside for stroke element.\n    });\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n  };\n  Line.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n  Line.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n  Line.prototype.updateLayout = function (lineData, idx) {\n    this.setLinePoints(lineData.getItemLayout(idx));\n  };\n  Line.prototype.setLinePoints = function (points) {\n    var linePath = this.childOfName('line');\n    setLinePoints(linePath.shape, points);\n    linePath.dirty();\n  };\n  Line.prototype.beforeUpdate = function () {\n    var lineGroup = this;\n    var symbolFrom = lineGroup.childOfName('fromSymbol');\n    var symbolTo = lineGroup.childOfName('toSymbol');\n    var label = lineGroup.getTextContent();\n    // Quick reject\n    if (!symbolFrom && !symbolTo && (!label || label.ignore)) {\n      return;\n    }\n    var invScale = 1;\n    var parentNode = this.parent;\n    while (parentNode) {\n      if (parentNode.scaleX) {\n        invScale /= parentNode.scaleX;\n      }\n      parentNode = parentNode.parent;\n    }\n    var line = lineGroup.childOfName('line');\n    // If line not changed\n    // FIXME Parent scale changed\n    if (!this.__dirty && !line.__dirty) {\n      return;\n    }\n    var percent = line.shape.percent;\n    var fromPos = line.pointAt(0);\n    var toPos = line.pointAt(percent);\n    var d = vector.sub([], toPos, fromPos);\n    vector.normalize(d, d);\n    function setSymbolRotation(symbol, percent) {\n      // Fix #12388\n      // when symbol is set to be 'arrow' in markLine,\n      // symbolRotate value will be ignored, and compulsively use tangent angle.\n      // rotate by default if symbol rotation is not specified\n      var specifiedRotation = symbol.__specifiedRotation;\n      if (specifiedRotation == null) {\n        var tangent = line.tangentAt(percent);\n        symbol.attr('rotation', (percent === 1 ? -1 : 1) * Math.PI / 2 - Math.atan2(tangent[1], tangent[0]));\n      } else {\n        symbol.attr('rotation', specifiedRotation);\n      }\n    }\n    if (symbolFrom) {\n      symbolFrom.setPosition(fromPos);\n      setSymbolRotation(symbolFrom, 0);\n      symbolFrom.scaleX = symbolFrom.scaleY = invScale * percent;\n      symbolFrom.markRedraw();\n    }\n    if (symbolTo) {\n      symbolTo.setPosition(toPos);\n      setSymbolRotation(symbolTo, 1);\n      symbolTo.scaleX = symbolTo.scaleY = invScale * percent;\n      symbolTo.markRedraw();\n    }\n    if (label && !label.ignore) {\n      label.x = label.y = 0;\n      label.originX = label.originY = 0;\n      var textAlign = void 0;\n      var textVerticalAlign = void 0;\n      var distance = label.__labelDistance;\n      var distanceX = distance[0] * invScale;\n      var distanceY = distance[1] * invScale;\n      var halfPercent = percent / 2;\n      var tangent = line.tangentAt(halfPercent);\n      var n = [tangent[1], -tangent[0]];\n      var cp = line.pointAt(halfPercent);\n      if (n[1] > 0) {\n        n[0] = -n[0];\n        n[1] = -n[1];\n      }\n      var dir = tangent[0] < 0 ? -1 : 1;\n      if (label.__position !== 'start' && label.__position !== 'end') {\n        var rotation = -Math.atan2(tangent[1], tangent[0]);\n        if (toPos[0] < fromPos[0]) {\n          rotation = Math.PI + rotation;\n        }\n        label.rotation = rotation;\n      }\n      var dy = void 0;\n      switch (label.__position) {\n        case 'insideStartTop':\n        case 'insideMiddleTop':\n        case 'insideEndTop':\n        case 'middle':\n          dy = -distanceY;\n          textVerticalAlign = 'bottom';\n          break;\n        case 'insideStartBottom':\n        case 'insideMiddleBottom':\n        case 'insideEndBottom':\n          dy = distanceY;\n          textVerticalAlign = 'top';\n          break;\n        default:\n          dy = 0;\n          textVerticalAlign = 'middle';\n      }\n      switch (label.__position) {\n        case 'end':\n          label.x = d[0] * distanceX + toPos[0];\n          label.y = d[1] * distanceY + toPos[1];\n          textAlign = d[0] > 0.8 ? 'left' : d[0] < -0.8 ? 'right' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'top' : d[1] < -0.8 ? 'bottom' : 'middle';\n          break;\n        case 'start':\n          label.x = -d[0] * distanceX + fromPos[0];\n          label.y = -d[1] * distanceY + fromPos[1];\n          textAlign = d[0] > 0.8 ? 'right' : d[0] < -0.8 ? 'left' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'bottom' : d[1] < -0.8 ? 'top' : 'middle';\n          break;\n        case 'insideStartTop':\n        case 'insideStart':\n        case 'insideStartBottom':\n          label.x = distanceX * dir + fromPos[0];\n          label.y = fromPos[1] + dy;\n          textAlign = tangent[0] < 0 ? 'right' : 'left';\n          label.originX = -distanceX * dir;\n          label.originY = -dy;\n          break;\n        case 'insideMiddleTop':\n        case 'insideMiddle':\n        case 'insideMiddleBottom':\n        case 'middle':\n          label.x = cp[0];\n          label.y = cp[1] + dy;\n          textAlign = 'center';\n          label.originY = -dy;\n          break;\n        case 'insideEndTop':\n        case 'insideEnd':\n        case 'insideEndBottom':\n          label.x = -distanceX * dir + toPos[0];\n          label.y = toPos[1] + dy;\n          textAlign = tangent[0] >= 0 ? 'right' : 'left';\n          label.originX = distanceX * dir;\n          label.originY = -dy;\n          break;\n      }\n      label.scaleX = label.scaleY = invScale;\n      label.setStyle({\n        // Use the user specified text align and baseline first\n        verticalAlign: label.__verticalAlign || textVerticalAlign,\n        align: label.__align || textAlign\n      });\n    }\n  };\n  return Line;\n}(graphic.Group);\nexport default Line;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic.js';\nimport LineGroup from './Line.js';\nimport { getLabelStatesModels } from '../../label/labelStyle.js';\nvar LineDraw = /** @class */function () {\n  function LineDraw(LineCtor) {\n    this.group = new graphic.Group();\n    this._LineCtor = LineCtor || LineGroup;\n  }\n  LineDraw.prototype.updateData = function (lineData) {\n    var _this = this;\n    // Remove progressive els.\n    this._progressiveEls = null;\n    var lineDraw = this;\n    var group = lineDraw.group;\n    var oldLineData = lineDraw._lineData;\n    lineDraw._lineData = lineData;\n    // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n    if (!oldLineData) {\n      group.removeAll();\n    }\n    var seriesScope = makeSeriesScope(lineData);\n    lineData.diff(oldLineData).add(function (idx) {\n      _this._doAdd(lineData, idx, seriesScope);\n    }).update(function (newIdx, oldIdx) {\n      _this._doUpdate(oldLineData, lineData, oldIdx, newIdx, seriesScope);\n    }).remove(function (idx) {\n      group.remove(oldLineData.getItemGraphicEl(idx));\n    }).execute();\n  };\n  ;\n  LineDraw.prototype.updateLayout = function () {\n    var lineData = this._lineData;\n    // Do not support update layout in incremental mode.\n    if (!lineData) {\n      return;\n    }\n    lineData.eachItemGraphicEl(function (el, idx) {\n      el.updateLayout(lineData, idx);\n    }, this);\n  };\n  ;\n  LineDraw.prototype.incrementalPrepareUpdate = function (lineData) {\n    this._seriesScope = makeSeriesScope(lineData);\n    this._lineData = null;\n    this.group.removeAll();\n  };\n  ;\n  LineDraw.prototype.incrementalUpdate = function (taskParams, lineData) {\n    this._progressiveEls = [];\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup && !isEffectObject(el)) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var itemLayout = lineData.getItemLayout(idx);\n      if (lineNeedsDraw(itemLayout)) {\n        var el = new this._LineCtor(lineData, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        this.group.add(el);\n        lineData.setItemGraphicEl(idx, el);\n        this._progressiveEls.push(el);\n      }\n    }\n  };\n  ;\n  LineDraw.prototype.remove = function () {\n    this.group.removeAll();\n  };\n  ;\n  LineDraw.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n  LineDraw.prototype._doAdd = function (lineData, idx, seriesScope) {\n    var itemLayout = lineData.getItemLayout(idx);\n    if (!lineNeedsDraw(itemLayout)) {\n      return;\n    }\n    var el = new this._LineCtor(lineData, idx, seriesScope);\n    lineData.setItemGraphicEl(idx, el);\n    this.group.add(el);\n  };\n  LineDraw.prototype._doUpdate = function (oldLineData, newLineData, oldIdx, newIdx, seriesScope) {\n    var itemEl = oldLineData.getItemGraphicEl(oldIdx);\n    if (!lineNeedsDraw(newLineData.getItemLayout(newIdx))) {\n      this.group.remove(itemEl);\n      return;\n    }\n    if (!itemEl) {\n      itemEl = new this._LineCtor(newLineData, newIdx, seriesScope);\n    } else {\n      itemEl.updateData(newLineData, newIdx, seriesScope);\n    }\n    newLineData.setItemGraphicEl(newIdx, itemEl);\n    this.group.add(itemEl);\n  };\n  return LineDraw;\n}();\nfunction isEffectObject(el) {\n  return el.animators && el.animators.length > 0;\n}\nfunction makeSeriesScope(lineData) {\n  var hostModel = lineData.hostModel;\n  var emphasisModel = hostModel.getModel('emphasis');\n  return {\n    lineStyle: hostModel.getModel('lineStyle').getLineStyle(),\n    emphasisLineStyle: emphasisModel.getModel(['lineStyle']).getLineStyle(),\n    blurLineStyle: hostModel.getModel(['blur', 'lineStyle']).getLineStyle(),\n    selectLineStyle: hostModel.getModel(['select', 'lineStyle']).getLineStyle(),\n    emphasisDisabled: emphasisModel.get('disabled'),\n    blurScope: emphasisModel.get('blurScope'),\n    focus: emphasisModel.get('focus'),\n    labelStatesModels: getLabelStatesModels(hostModel)\n  };\n}\nfunction isPointNaN(pt) {\n  return isNaN(pt[0]) || isNaN(pt[1]);\n}\nfunction lineNeedsDraw(pts) {\n  return pts && !isPointNaN(pts[0]) && !isPointNaN(pts[1]);\n}\nexport default LineDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/**\n * Calculate slider move result.\n * Usage:\n * (1) If both handle0 and handle1 are needed to be moved, set minSpan the same as\n * maxSpan and the same as `Math.abs(handleEnd[1] - handleEnds[0])`.\n * (2) If handle0 is forbidden to cross handle1, set minSpan as `0`.\n *\n * @param delta Move length.\n * @param handleEnds handleEnds[0] can be bigger then handleEnds[1].\n *              handleEnds will be modified in this method.\n * @param extent handleEnds is restricted by extent.\n *              extent[0] should less or equals than extent[1].\n * @param handleIndex Can be 'all', means that both move the two handleEnds.\n * @param minSpan The range of dataZoom can not be smaller than that.\n *              If not set, handle0 and cross handle1. If set as a non-negative\n *              number (including `0`), handles will push each other when reaching\n *              the minSpan.\n * @param maxSpan The range of dataZoom can not be larger than that.\n * @return The input handleEnds.\n */\nexport default function sliderMove(delta, handleEnds, extent, handleIndex, minSpan, maxSpan) {\n  delta = delta || 0;\n  var extentSpan = extent[1] - extent[0];\n  // Notice maxSpan and minSpan can be null/undefined.\n  if (minSpan != null) {\n    minSpan = restrict(minSpan, [0, extentSpan]);\n  }\n  if (maxSpan != null) {\n    maxSpan = Math.max(maxSpan, minSpan != null ? minSpan : 0);\n  }\n  if (handleIndex === 'all') {\n    var handleSpan = Math.abs(handleEnds[1] - handleEnds[0]);\n    handleSpan = restrict(handleSpan, [0, extentSpan]);\n    minSpan = maxSpan = restrict(handleSpan, [minSpan, maxSpan]);\n    handleIndex = 0;\n  }\n  handleEnds[0] = restrict(handleEnds[0], extent);\n  handleEnds[1] = restrict(handleEnds[1], extent);\n  var originalDistSign = getSpanSign(handleEnds, handleIndex);\n  handleEnds[handleIndex] += delta;\n  // Restrict in extent.\n  var extentMinSpan = minSpan || 0;\n  var realExtent = extent.slice();\n  originalDistSign.sign < 0 ? realExtent[0] += extentMinSpan : realExtent[1] -= extentMinSpan;\n  handleEnds[handleIndex] = restrict(handleEnds[handleIndex], realExtent);\n  // Expand span.\n  var currDistSign;\n  currDistSign = getSpanSign(handleEnds, handleIndex);\n  if (minSpan != null && (currDistSign.sign !== originalDistSign.sign || currDistSign.span < minSpan)) {\n    // If minSpan exists, 'cross' is forbidden.\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + originalDistSign.sign * minSpan;\n  }\n  // Shrink span.\n  currDistSign = getSpanSign(handleEnds, handleIndex);\n  if (maxSpan != null && currDistSign.span > maxSpan) {\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + currDistSign.sign * maxSpan;\n  }\n  return handleEnds;\n}\nfunction getSpanSign(handleEnds, handleIndex) {\n  var dist = handleEnds[handleIndex] - handleEnds[1 - handleIndex];\n  // If `handleEnds[0] === handleEnds[1]`, always believe that handleEnd[0]\n  // is at left of handleEnds[1] for non-cross case.\n  return {\n    span: Math.abs(dist),\n    sign: dist > 0 ? -1 : dist < 0 ? 1 : handleIndex ? -1 : 1\n  };\n}\nfunction restrict(value, extend) {\n  return Math.min(extend[1] != null ? extend[1] : Infinity, Math.max(extend[0] != null ? extend[0] : -Infinity, value));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { curry, each, map, bind, merge, clone, defaults, assert } from 'zrender/lib/core/util.js';\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as interactionMutex from './interactionMutex.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport tokens from '../../visual/tokens.js';\nvar BRUSH_PANEL_GLOBAL = true;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathPow = Math.pow;\nvar COVER_Z = 10000;\nvar UNSELECT_THRESHOLD = 6;\nvar MIN_RESIZE_LINE_WIDTH = 6;\nvar MUTEX_RESOURCE_KEY = 'globalPan';\nvar DIRECTION_MAP = {\n  w: [0, 0],\n  e: [0, 1],\n  n: [1, 0],\n  s: [1, 1]\n};\nvar CURSOR_MAP = {\n  w: 'ew',\n  e: 'ew',\n  n: 'ns',\n  s: 'ns',\n  ne: 'nesw',\n  sw: 'nesw',\n  nw: 'nwse',\n  se: 'nwse'\n};\nvar DEFAULT_BRUSH_OPT = {\n  brushStyle: {\n    lineWidth: 2,\n    stroke: tokens.color.backgroundTint,\n    fill: tokens.color.borderTint\n  },\n  transformable: true,\n  brushMode: 'single',\n  removeOnClick: false\n};\nvar baseUID = 0;\n/**\n * params:\n *     areas: Array.<Array>, coord relates to container group,\n *                             If no container specified, to global.\n *     opt {\n *         isEnd: boolean,\n *         removeOnClick: boolean\n *     }\n */\nvar BrushController = /** @class */function (_super) {\n  __extends(BrushController, _super);\n  function BrushController(zr) {\n    var _this = _super.call(this) || this;\n    /**\n     * @internal\n     */\n    _this._track = [];\n    /**\n     * @internal\n     */\n    _this._covers = [];\n    _this._handlers = {};\n    if (process.env.NODE_ENV !== 'production') {\n      assert(zr);\n    }\n    _this._zr = zr;\n    _this.group = new graphic.Group();\n    _this._uid = 'brushController_' + baseUID++;\n    each(pointerHandlers, function (handler, eventName) {\n      this._handlers[eventName] = bind(handler, this);\n    }, _this);\n    return _this;\n  }\n  /**\n   * If set to `false`, select disabled.\n   */\n  BrushController.prototype.enableBrush = function (brushOption) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n    this._brushType && this._doDisableBrush();\n    brushOption.brushType && this._doEnableBrush(brushOption);\n    return this;\n  };\n  BrushController.prototype._doEnableBrush = function (brushOption) {\n    var zr = this._zr;\n    // Consider roam, which takes globalPan too.\n    if (!this._enableGlobalPan) {\n      interactionMutex.take(zr, MUTEX_RESOURCE_KEY, this._uid);\n    }\n    each(this._handlers, function (handler, eventName) {\n      zr.on(eventName, handler);\n    });\n    this._brushType = brushOption.brushType;\n    this._brushOption = merge(clone(DEFAULT_BRUSH_OPT), brushOption, true);\n  };\n  BrushController.prototype._doDisableBrush = function () {\n    var zr = this._zr;\n    interactionMutex.release(zr, MUTEX_RESOURCE_KEY, this._uid);\n    each(this._handlers, function (handler, eventName) {\n      zr.off(eventName, handler);\n    });\n    this._brushType = this._brushOption = null;\n  };\n  /**\n   * @param panelOpts If not pass, it is global brush.\n   */\n  BrushController.prototype.setPanels = function (panelOpts) {\n    if (panelOpts && panelOpts.length) {\n      var panels_1 = this._panels = {};\n      each(panelOpts, function (panelOpts) {\n        panels_1[panelOpts.panelId] = clone(panelOpts);\n      });\n    } else {\n      this._panels = null;\n    }\n    return this;\n  };\n  BrushController.prototype.mount = function (opt) {\n    opt = opt || {};\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = true; // should be at first.\n    }\n    this._enableGlobalPan = opt.enableGlobalPan;\n    var thisGroup = this.group;\n    this._zr.add(thisGroup);\n    thisGroup.attr({\n      x: opt.x || 0,\n      y: opt.y || 0,\n      rotation: opt.rotation || 0,\n      scaleX: opt.scaleX || 1,\n      scaleY: opt.scaleY || 1\n    });\n    this._transform = thisGroup.getLocalTransform();\n    return this;\n  };\n  // eachCover(cb, context): void {\n  //     each(this._covers, cb, context);\n  // }\n  /**\n   * Update covers.\n   * @param coverConfigList\n   *        If coverConfigList is null/undefined, all covers removed.\n   */\n  BrushController.prototype.updateCovers = function (coverConfigList) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n    coverConfigList = map(coverConfigList, function (coverConfig) {\n      return merge(clone(DEFAULT_BRUSH_OPT), coverConfig, true);\n    });\n    var tmpIdPrefix = '\\0-brush-index-';\n    var oldCovers = this._covers;\n    var newCovers = this._covers = [];\n    var controller = this;\n    var creatingCover = this._creatingCover;\n    new DataDiffer(oldCovers, coverConfigList, oldGetKey, getKey).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();\n    return this;\n    function getKey(brushOption, index) {\n      return (brushOption.id != null ? brushOption.id : tmpIdPrefix + index) + '-' + brushOption.brushType;\n    }\n    function oldGetKey(cover, index) {\n      return getKey(cover.__brushOption, index);\n    }\n    function addOrUpdate(newIndex, oldIndex) {\n      var newBrushInternal = coverConfigList[newIndex];\n      // Consider setOption in event listener of brushSelect,\n      // where updating cover when creating should be forbidden.\n      if (oldIndex != null && oldCovers[oldIndex] === creatingCover) {\n        newCovers[newIndex] = oldCovers[oldIndex];\n      } else {\n        var cover = newCovers[newIndex] = oldIndex != null ? (oldCovers[oldIndex].__brushOption = newBrushInternal, oldCovers[oldIndex]) : endCreating(controller, createCover(controller, newBrushInternal));\n        updateCoverAfterCreation(controller, cover);\n      }\n    }\n    function remove(oldIndex) {\n      if (oldCovers[oldIndex] !== creatingCover) {\n        controller.group.remove(oldCovers[oldIndex]);\n      }\n    }\n  };\n  BrushController.prototype.unmount = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!this._mounted) {\n        return;\n      }\n    }\n    this.enableBrush(false);\n    // container may 'removeAll' outside.\n    clearCovers(this);\n    this._zr.remove(this.group);\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = false; // should be at last.\n    }\n    return this;\n  };\n  BrushController.prototype.dispose = function () {\n    this.unmount();\n    this.off();\n  };\n  return BrushController;\n}(Eventful);\nfunction createCover(controller, brushOption) {\n  var cover = coverRenderers[brushOption.brushType].createCover(controller, brushOption);\n  cover.__brushOption = brushOption;\n  updateZ(cover, brushOption);\n  controller.group.add(cover);\n  return cover;\n}\nfunction endCreating(controller, creatingCover) {\n  var coverRenderer = getCoverRenderer(creatingCover);\n  if (coverRenderer.endCreating) {\n    coverRenderer.endCreating(controller, creatingCover);\n    updateZ(creatingCover, creatingCover.__brushOption);\n  }\n  return creatingCover;\n}\nfunction updateCoverShape(controller, cover) {\n  var brushOption = cover.__brushOption;\n  getCoverRenderer(cover).updateCoverShape(controller, cover, brushOption.range, brushOption);\n}\nfunction updateZ(cover, brushOption) {\n  var z = brushOption.z;\n  z == null && (z = COVER_Z);\n  cover.traverse(function (el) {\n    el.z = z;\n    el.z2 = z; // Consider in given container.\n  });\n}\nfunction updateCoverAfterCreation(controller, cover) {\n  getCoverRenderer(cover).updateCommon(controller, cover);\n  updateCoverShape(controller, cover);\n}\nfunction getCoverRenderer(cover) {\n  return coverRenderers[cover.__brushOption.brushType];\n}\n// return target panel or `true` (means global panel)\nfunction getPanelByPoint(controller, e, localCursorPoint) {\n  var panels = controller._panels;\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n  var panel;\n  var transform = controller._transform;\n  each(panels, function (pn) {\n    pn.isTargetByCursor(e, localCursorPoint, transform) && (panel = pn);\n  });\n  return panel;\n}\n// Return a panel or true\nfunction getPanelByCover(controller, cover) {\n  var panels = controller._panels;\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n  var panelId = cover.__brushOption.panelId;\n  // User may give cover without coord sys info,\n  // which is then treated as global panel.\n  return panelId != null ? panels[panelId] : BRUSH_PANEL_GLOBAL;\n}\nfunction clearCovers(controller) {\n  var covers = controller._covers;\n  var originalLength = covers.length;\n  each(covers, function (cover) {\n    controller.group.remove(cover);\n  }, controller);\n  covers.length = 0;\n  return !!originalLength;\n}\nfunction trigger(controller, opt) {\n  var areas = map(controller._covers, function (cover) {\n    var brushOption = cover.__brushOption;\n    var range = clone(brushOption.range);\n    return {\n      brushType: brushOption.brushType,\n      panelId: brushOption.panelId,\n      range: range\n    };\n  });\n  controller.trigger('brush', {\n    areas: areas,\n    isEnd: !!opt.isEnd,\n    removeOnClick: !!opt.removeOnClick\n  });\n}\nfunction shouldShowCover(controller) {\n  var track = controller._track;\n  if (!track.length) {\n    return false;\n  }\n  var p2 = track[track.length - 1];\n  var p1 = track[0];\n  var dx = p2[0] - p1[0];\n  var dy = p2[1] - p1[1];\n  var dist = mathPow(dx * dx + dy * dy, 0.5);\n  return dist > UNSELECT_THRESHOLD;\n}\nfunction getTrackEnds(track) {\n  var tail = track.length - 1;\n  tail < 0 && (tail = 0);\n  return [track[0], track[tail]];\n}\n;\nfunction createBaseRectCover(rectRangeConverter, controller, brushOption, edgeNameSequences) {\n  var cover = new graphic.Group();\n  cover.add(new graphic.Rect({\n    name: 'main',\n    style: makeStyle(brushOption),\n    silent: true,\n    draggable: true,\n    cursor: 'move',\n    drift: curry(driftRect, rectRangeConverter, controller, cover, ['n', 's', 'w', 'e']),\n    ondragend: curry(trigger, controller, {\n      isEnd: true\n    })\n  }));\n  each(edgeNameSequences, function (nameSequence) {\n    cover.add(new graphic.Rect({\n      name: nameSequence.join(''),\n      style: {\n        opacity: 0\n      },\n      draggable: true,\n      silent: true,\n      invisible: true,\n      drift: curry(driftRect, rectRangeConverter, controller, cover, nameSequence),\n      ondragend: curry(trigger, controller, {\n        isEnd: true\n      })\n    }));\n  });\n  return cover;\n}\nfunction updateBaseRect(controller, cover, localRange, brushOption) {\n  var lineWidth = brushOption.brushStyle.lineWidth || 0;\n  var handleSize = mathMax(lineWidth, MIN_RESIZE_LINE_WIDTH);\n  var x = localRange[0][0];\n  var y = localRange[1][0];\n  var xa = x - lineWidth / 2;\n  var ya = y - lineWidth / 2;\n  var x2 = localRange[0][1];\n  var y2 = localRange[1][1];\n  var x2a = x2 - handleSize + lineWidth / 2;\n  var y2a = y2 - handleSize + lineWidth / 2;\n  var width = x2 - x;\n  var height = y2 - y;\n  var widtha = width + lineWidth;\n  var heighta = height + lineWidth;\n  updateRectShape(controller, cover, 'main', x, y, width, height);\n  if (brushOption.transformable) {\n    updateRectShape(controller, cover, 'w', xa, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'e', x2a, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'n', xa, ya, widtha, handleSize);\n    updateRectShape(controller, cover, 's', xa, y2a, widtha, handleSize);\n    updateRectShape(controller, cover, 'nw', xa, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'ne', x2a, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'sw', xa, y2a, handleSize, handleSize);\n    updateRectShape(controller, cover, 'se', x2a, y2a, handleSize, handleSize);\n  }\n}\nfunction updateCommon(controller, cover) {\n  var brushOption = cover.__brushOption;\n  var transformable = brushOption.transformable;\n  var mainEl = cover.childAt(0);\n  mainEl.useStyle(makeStyle(brushOption));\n  mainEl.attr({\n    silent: !transformable,\n    cursor: transformable ? 'move' : 'default'\n  });\n  each([['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']], function (nameSequence) {\n    var el = cover.childOfName(nameSequence.join(''));\n    var globalDir = nameSequence.length === 1 ? getGlobalDirection1(controller, nameSequence[0]) : getGlobalDirection2(controller, nameSequence);\n    el && el.attr({\n      silent: !transformable,\n      invisible: !transformable,\n      cursor: transformable ? CURSOR_MAP[globalDir] + '-resize' : null\n    });\n  });\n}\nfunction updateRectShape(controller, cover, name, x, y, w, h) {\n  var el = cover.childOfName(name);\n  el && el.setShape(pointsToRect(clipByPanel(controller, cover, [[x, y], [x + w, y + h]])));\n}\nfunction makeStyle(brushOption) {\n  return defaults({\n    strokeNoScale: true\n  }, brushOption.brushStyle);\n}\nfunction formatRectRange(x, y, x2, y2) {\n  var min = [mathMin(x, x2), mathMin(y, y2)];\n  var max = [mathMax(x, x2), mathMax(y, y2)];\n  return [[min[0], max[0]], [min[1], max[1]] // y range\n  ];\n}\nfunction getTransform(controller) {\n  return graphic.getTransform(controller.group);\n}\nfunction getGlobalDirection1(controller, localDirName) {\n  var map = {\n    w: 'left',\n    e: 'right',\n    n: 'top',\n    s: 'bottom'\n  };\n  var inverseMap = {\n    left: 'w',\n    right: 'e',\n    top: 'n',\n    bottom: 's'\n  };\n  var dir = graphic.transformDirection(map[localDirName], getTransform(controller));\n  return inverseMap[dir];\n}\nfunction getGlobalDirection2(controller, localDirNameSeq) {\n  var globalDir = [getGlobalDirection1(controller, localDirNameSeq[0]), getGlobalDirection1(controller, localDirNameSeq[1])];\n  (globalDir[0] === 'e' || globalDir[0] === 'w') && globalDir.reverse();\n  return globalDir.join('');\n}\nfunction driftRect(rectRangeConverter, controller, cover, dirNameSequence, dx, dy) {\n  var brushOption = cover.__brushOption;\n  var rectRange = rectRangeConverter.toRectRange(brushOption.range);\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(dirNameSequence, function (dirName) {\n    var ind = DIRECTION_MAP[dirName];\n    rectRange[ind[0]][ind[1]] += localDelta[ind[0]];\n  });\n  brushOption.range = rectRangeConverter.fromRectRange(formatRectRange(rectRange[0][0], rectRange[1][0], rectRange[0][1], rectRange[1][1]));\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\nfunction driftPolygon(controller, cover, dx, dy) {\n  var range = cover.__brushOption.range;\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(range, function (point) {\n    point[0] += localDelta[0];\n    point[1] += localDelta[1];\n  });\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\nfunction toLocalDelta(controller, dx, dy) {\n  var thisGroup = controller.group;\n  var localD = thisGroup.transformCoordToLocal(dx, dy);\n  var localZero = thisGroup.transformCoordToLocal(0, 0);\n  return [localD[0] - localZero[0], localD[1] - localZero[1]];\n}\nfunction clipByPanel(controller, cover, data) {\n  var panel = getPanelByCover(controller, cover);\n  return panel && panel !== BRUSH_PANEL_GLOBAL ? panel.clipPath(data, controller._transform) : clone(data);\n}\nfunction pointsToRect(points) {\n  var xmin = mathMin(points[0][0], points[1][0]);\n  var ymin = mathMin(points[0][1], points[1][1]);\n  var xmax = mathMax(points[0][0], points[1][0]);\n  var ymax = mathMax(points[0][1], points[1][1]);\n  return {\n    x: xmin,\n    y: ymin,\n    width: xmax - xmin,\n    height: ymax - ymin\n  };\n}\nfunction resetCursor(controller, e, localCursorPoint) {\n  if (\n  // Check active\n  !controller._brushType\n  // resetCursor should be always called when mouse is in zr area,\n  // but not called when mouse is out of zr area to avoid bad influence\n  // if `mousemove`, `mouseup` are triggered from `document` event.\n  || isOutsideZrArea(controller, e.offsetX, e.offsetY)) {\n    return;\n  }\n  var zr = controller._zr;\n  var covers = controller._covers;\n  var currPanel = getPanelByPoint(controller, e, localCursorPoint);\n  // Check whether in covers.\n  if (!controller._dragging) {\n    for (var i = 0; i < covers.length; i++) {\n      var brushOption = covers[i].__brushOption;\n      if (currPanel && (currPanel === BRUSH_PANEL_GLOBAL || brushOption.panelId === currPanel.panelId) && coverRenderers[brushOption.brushType].contain(covers[i], localCursorPoint[0], localCursorPoint[1])) {\n        // Use cursor style set on cover.\n        return;\n      }\n    }\n  }\n  currPanel && zr.setCursorStyle('crosshair');\n}\nfunction preventDefault(e) {\n  var rawE = e.event;\n  rawE.preventDefault && rawE.preventDefault();\n}\nfunction mainShapeContain(cover, x, y) {\n  return cover.childOfName('main').contain(x, y);\n}\nfunction updateCoverByMouse(controller, e, localCursorPoint, isEnd) {\n  var creatingCover = controller._creatingCover;\n  var panel = controller._creatingPanel;\n  var thisBrushOption = controller._brushOption;\n  var eventParams;\n  controller._track.push(localCursorPoint.slice());\n  if (shouldShowCover(controller) || creatingCover) {\n    if (panel && !creatingCover) {\n      thisBrushOption.brushMode === 'single' && clearCovers(controller);\n      var brushOption = clone(thisBrushOption);\n      brushOption.brushType = determineBrushType(brushOption.brushType, panel);\n      brushOption.panelId = panel === BRUSH_PANEL_GLOBAL ? null : panel.panelId;\n      creatingCover = controller._creatingCover = createCover(controller, brushOption);\n      controller._covers.push(creatingCover);\n    }\n    if (creatingCover) {\n      var coverRenderer = coverRenderers[determineBrushType(controller._brushType, panel)];\n      var coverBrushOption = creatingCover.__brushOption;\n      coverBrushOption.range = coverRenderer.getCreatingRange(clipByPanel(controller, creatingCover, controller._track));\n      if (isEnd) {\n        endCreating(controller, creatingCover);\n        coverRenderer.updateCommon(controller, creatingCover);\n      }\n      updateCoverShape(controller, creatingCover);\n      eventParams = {\n        isEnd: isEnd\n      };\n    }\n  } else if (isEnd && thisBrushOption.brushMode === 'single' && thisBrushOption.removeOnClick) {\n    // Help user to remove covers easily, only by a tiny drag, in 'single' mode.\n    // But a single click do not clear covers, because user may have casual\n    // clicks (for example, click on other component and do not expect covers\n    // disappear).\n    // Only some cover removed, trigger action, but not every click trigger action.\n    if (getPanelByPoint(controller, e, localCursorPoint) && clearCovers(controller)) {\n      eventParams = {\n        isEnd: isEnd,\n        removeOnClick: true\n      };\n    }\n  }\n  return eventParams;\n}\nfunction determineBrushType(brushType, panel) {\n  if (brushType === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(panel && panel.defaultBrushType, 'MUST have defaultBrushType when brushType is \"atuo\"');\n    }\n    return panel.defaultBrushType;\n  }\n  return brushType;\n}\nvar pointerHandlers = {\n  mousedown: function (e) {\n    if (this._dragging) {\n      // In case some browser do not support globalOut,\n      // and release mouse out side the browser.\n      handleDragEnd(this, e);\n    } else if (!e.target || !e.target.draggable) {\n      preventDefault(e);\n      var localCursorPoint = this.group.transformCoordToLocal(e.offsetX, e.offsetY);\n      this._creatingCover = null;\n      var panel = this._creatingPanel = getPanelByPoint(this, e, localCursorPoint);\n      if (panel) {\n        this._dragging = true;\n        this._track = [localCursorPoint.slice()];\n      }\n    }\n  },\n  mousemove: function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = this.group.transformCoordToLocal(x, y);\n    resetCursor(this, e, localCursorPoint);\n    if (this._dragging) {\n      preventDefault(e);\n      var eventParams = updateCoverByMouse(this, e, localCursorPoint, false);\n      eventParams && trigger(this, eventParams);\n    }\n  },\n  mouseup: function (e) {\n    handleDragEnd(this, e);\n  }\n};\nfunction handleDragEnd(controller, e) {\n  if (controller._dragging) {\n    preventDefault(e);\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = controller.group.transformCoordToLocal(x, y);\n    var eventParams = updateCoverByMouse(controller, e, localCursorPoint, true);\n    controller._dragging = false;\n    controller._track = [];\n    controller._creatingCover = null;\n    // trigger event should be at final, after procedure will be nested.\n    eventParams && trigger(controller, eventParams);\n  }\n}\nfunction isOutsideZrArea(controller, x, y) {\n  var zr = controller._zr;\n  return x < 0 || x > zr.getWidth() || y < 0 || y > zr.getHeight();\n}\n/**\n * key: brushType\n */\nvar coverRenderers = {\n  lineX: getLineRenderer(0),\n  lineY: getLineRenderer(1),\n  rect: {\n    createCover: function (controller, brushOption) {\n      function returnInput(range) {\n        return range;\n      }\n      return createBaseRectCover({\n        toRectRange: returnInput,\n        fromRectRange: returnInput\n      }, controller, brushOption, [['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      return formatRectRange(ends[1][0], ends[1][1], ends[0][0], ends[0][1]);\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      updateBaseRect(controller, cover, localRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  },\n  polygon: {\n    createCover: function (controller, brushOption) {\n      var cover = new graphic.Group();\n      // Do not use graphic.Polygon because graphic.Polyline do not close the\n      // border of the shape when drawing, which is a better experience for user.\n      cover.add(new graphic.Polyline({\n        name: 'main',\n        style: makeStyle(brushOption),\n        silent: true\n      }));\n      return cover;\n    },\n    getCreatingRange: function (localTrack) {\n      return localTrack;\n    },\n    endCreating: function (controller, cover) {\n      cover.remove(cover.childAt(0));\n      // Use graphic.Polygon close the shape.\n      cover.add(new graphic.Polygon({\n        name: 'main',\n        draggable: true,\n        drift: curry(driftPolygon, controller, cover),\n        ondragend: curry(trigger, controller, {\n          isEnd: true\n        })\n      }));\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      cover.childAt(0).setShape({\n        points: clipByPanel(controller, cover, localRange)\n      });\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  }\n};\nfunction getLineRenderer(xyIndex) {\n  return {\n    createCover: function (controller, brushOption) {\n      return createBaseRectCover({\n        toRectRange: function (range) {\n          var rectRange = [range, [0, 100]];\n          xyIndex && rectRange.reverse();\n          return rectRange;\n        },\n        fromRectRange: function (rectRange) {\n          return rectRange[xyIndex];\n        }\n      }, controller, brushOption, [[['w'], ['e']], [['n'], ['s']]][xyIndex]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      var min = mathMin(ends[0][xyIndex], ends[1][xyIndex]);\n      var max = mathMax(ends[0][xyIndex], ends[1][xyIndex]);\n      return [min, max];\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      var otherExtent;\n      // If brushWidth not specified, fit the panel.\n      var panel = getPanelByCover(controller, cover);\n      if (panel !== BRUSH_PANEL_GLOBAL && panel.getLinearBrushOtherExtent) {\n        otherExtent = panel.getLinearBrushOtherExtent(xyIndex);\n      } else {\n        var zr = controller._zr;\n        otherExtent = [0, [zr.getWidth(), zr.getHeight()][1 - xyIndex]];\n      }\n      var rectRange = [localRange, otherExtent];\n      xyIndex && rectRange.reverse();\n      updateBaseRect(controller, cover, rectRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  };\n}\nexport default BrushController;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { onIrrelevantElement } from './cursorHelper.js';\nimport * as graphicUtil from '../../util/graphic.js';\nexport function makeRectPanelClipPath(rect) {\n  rect = normalizeRect(rect);\n  return function (localPoints) {\n    return graphicUtil.clipPointsByRect(localPoints, rect);\n  };\n}\nexport function makeLinearBrushOtherExtent(rect, specifiedXYIndex) {\n  rect = normalizeRect(rect);\n  return function (xyIndex) {\n    var idx = specifiedXYIndex != null ? specifiedXYIndex : xyIndex;\n    var brushWidth = idx ? rect.width : rect.height;\n    var base = idx ? rect.x : rect.y;\n    return [base, base + (brushWidth || 0)];\n  };\n}\nexport function makeRectIsTargetByCursor(rect, api, targetModel) {\n  var boundingRect = normalizeRect(rect);\n  return function (e, localCursorPoint) {\n    return boundingRect.contain(localCursorPoint[0], localCursorPoint[1]) && !onIrrelevantElement(e, api, targetModel);\n  };\n}\n// Consider width/height is negative.\nfunction normalizeRect(rect) {\n  return BoundingRect.create(rect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport createSeriesDataSimply from './createSeriesDataSimply.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper.js';\nimport { makeSeriesEncodeForAxisCoordSys } from '../../data/helper/sourceHelper.js';\nvar WhiskerBoxCommonMixin = /** @class */function () {\n  function WhiskerBoxCommonMixin() {}\n  /**\n   * @private\n   */\n  WhiskerBoxCommonMixin.prototype._hasEncodeRule = function (key) {\n    var encodeRules = this.getEncode();\n    return encodeRules && encodeRules.get(key) != null;\n  };\n  /**\n   * @override\n   */\n  WhiskerBoxCommonMixin.prototype.getInitialData = function (option, ecModel) {\n    // When both types of xAxis and yAxis are 'value', layout is\n    // needed to be specified by user. Otherwise, layout can be\n    // judged by which axis is category.\n    var ordinalMeta;\n    var xAxisModel = ecModel.getComponent('xAxis', this.get('xAxisIndex'));\n    var yAxisModel = ecModel.getComponent('yAxis', this.get('yAxisIndex'));\n    var xAxisType = xAxisModel.get('type');\n    var yAxisType = yAxisModel.get('type');\n    var addOrdinal;\n    // FIXME\n    // Consider time axis.\n    if (xAxisType === 'category') {\n      option.layout = 'horizontal';\n      ordinalMeta = xAxisModel.getOrdinalMeta();\n      addOrdinal = !this._hasEncodeRule('x');\n    } else if (yAxisType === 'category') {\n      option.layout = 'vertical';\n      ordinalMeta = yAxisModel.getOrdinalMeta();\n      addOrdinal = !this._hasEncodeRule('y');\n    } else {\n      option.layout = option.layout || 'horizontal';\n    }\n    var coordDims = ['x', 'y'];\n    var baseAxisDimIndex = option.layout === 'horizontal' ? 0 : 1;\n    var baseAxisDim = this._baseAxisDim = coordDims[baseAxisDimIndex];\n    var otherAxisDim = coordDims[1 - baseAxisDimIndex];\n    var axisModels = [xAxisModel, yAxisModel];\n    var baseAxisType = axisModels[baseAxisDimIndex].get('type');\n    var otherAxisType = axisModels[1 - baseAxisDimIndex].get('type');\n    var data = option.data;\n    // Clone a new data for next setOption({}) usage.\n    // Avoid modifying current data will affect further update.\n    if (data && addOrdinal) {\n      var newOptionData_1 = [];\n      zrUtil.each(data, function (item, index) {\n        var newItem;\n        if (zrUtil.isArray(item)) {\n          newItem = item.slice();\n          // Modify current using data.\n          item.unshift(index);\n        } else if (zrUtil.isArray(item.value)) {\n          newItem = zrUtil.extend({}, item);\n          newItem.value = newItem.value.slice();\n          // Modify current using data.\n          item.value.unshift(index);\n        } else {\n          newItem = item;\n        }\n        newOptionData_1.push(newItem);\n      });\n      option.data = newOptionData_1;\n    }\n    var defaultValueDimensions = this.defaultValueDimensions;\n    var coordDimensions = [{\n      name: baseAxisDim,\n      type: getDimensionTypeByAxis(baseAxisType),\n      ordinalMeta: ordinalMeta,\n      otherDims: {\n        tooltip: false,\n        itemName: 0\n      },\n      dimsDef: ['base']\n    }, {\n      name: otherAxisDim,\n      type: getDimensionTypeByAxis(otherAxisType),\n      dimsDef: defaultValueDimensions.slice()\n    }];\n    return createSeriesDataSimply(this, {\n      coordDimensions: coordDimensions,\n      dimensionsCount: defaultValueDimensions.length + 1,\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordDimensions, this)\n    });\n  };\n  /**\n   * If horizontal, base axis is x, otherwise y.\n   * @override\n   */\n  WhiskerBoxCommonMixin.prototype.getBaseAxis = function () {\n    var dim = this._baseAxisDim;\n    return this.ecModel.getComponent(dim + 'Axis', this.get(dim + 'AxisIndex')).axis;\n  };\n  return WhiskerBoxCommonMixin;\n}();\n;\nexport { WhiskerBoxCommonMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport createRenderPlanner from '../helper/createRenderPlanner.js';\nimport { extend } from 'zrender/lib/core/util.js';\nvar positiveBorderColorQuery = ['itemStyle', 'borderColor'];\nvar negativeBorderColorQuery = ['itemStyle', 'borderColor0'];\nvar dojiBorderColorQuery = ['itemStyle', 'borderColorDoji'];\nvar positiveColorQuery = ['itemStyle', 'color'];\nvar negativeColorQuery = ['itemStyle', 'color0'];\nexport function getColor(sign, model) {\n  return model.get(sign > 0 ? positiveColorQuery : negativeColorQuery);\n}\nexport function getBorderColor(sign, model) {\n  return model.get(sign === 0 ? dojiBorderColorQuery : sign > 0 ? positiveBorderColorQuery : negativeBorderColorQuery);\n}\nvar candlestickVisual = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  // For legend.\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    // Only visible series has each data be visual encoded\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n    var isLargeRender = seriesModel.pipelineContext.large;\n    return !isLargeRender && {\n      progress: function (params, data) {\n        var dataIndex;\n        while ((dataIndex = params.next()) != null) {\n          var itemModel = data.getItemModel(dataIndex);\n          var sign = data.getItemLayout(dataIndex).sign;\n          var style = itemModel.getItemStyle();\n          style.fill = getColor(sign, itemModel);\n          style.stroke = getBorderColor(sign, itemModel) || style.fill;\n          var existsStyle = data.ensureUniqueItemVisual(dataIndex, 'style');\n          extend(existsStyle, style);\n        }\n      }\n    };\n  }\n};\nexport default candlestickVisual;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ChartView from '../../view/Chart.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nimport { getBorderColor, getColor } from './candlestickVisual.js';\nvar SKIP_PROPS = ['color', 'borderColor'];\nvar CandlestickView = /** @class */function (_super) {\n  __extends(CandlestickView, _super);\n  function CandlestickView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CandlestickView.type;\n    return _this;\n  }\n  CandlestickView.prototype.render = function (seriesModel, ecModel, api) {\n    // If there is clipPath created in large mode. Remove it.\n    this.group.removeClipPath();\n    // Clear previously rendered progressive elements.\n    this._progressiveEls = null;\n    this._updateDrawMode(seriesModel);\n    this._isLargeDraw ? this._renderLarge(seriesModel) : this._renderNormal(seriesModel);\n  };\n  CandlestickView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this._clear();\n    this._updateDrawMode(seriesModel);\n  };\n  CandlestickView.prototype.incrementalRender = function (params, seriesModel, ecModel, api) {\n    this._progressiveEls = [];\n    this._isLargeDraw ? this._incrementalRenderLarge(params, seriesModel) : this._incrementalRenderNormal(params, seriesModel);\n  };\n  CandlestickView.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n  CandlestickView.prototype._updateDrawMode = function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n      this._clear();\n    }\n  };\n  CandlestickView.prototype._renderNormal = function (seriesModel) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var needsClip = seriesModel.get('clip', true);\n    var coord = seriesModel.coordinateSystem;\n    var clipArea = coord.getArea && coord.getArea();\n    // There is no old data only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n    if (!this._data) {\n      group.removeAll();\n    }\n    data.diff(oldData).add(function (newIdx) {\n      if (data.hasValue(newIdx)) {\n        var itemLayout = data.getItemLayout(newIdx);\n        if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n          return;\n        }\n        var el = createNormalBox(itemLayout, newIdx, true);\n        graphic.initProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n        setBoxCommon(el, data, newIdx, isSimpleBox);\n        group.add(el);\n        data.setItemGraphicEl(newIdx, el);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      // Empty data\n      if (!data.hasValue(newIdx)) {\n        group.remove(el);\n        return;\n      }\n      var itemLayout = data.getItemLayout(newIdx);\n      if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n        group.remove(el);\n        return;\n      }\n      if (!el) {\n        el = createNormalBox(itemLayout, newIdx);\n      } else {\n        graphic.updateProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n        saveOldStyle(el);\n      }\n      setBoxCommon(el, data, newIdx, isSimpleBox);\n      group.add(el);\n      data.setItemGraphicEl(newIdx, el);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute();\n    this._data = data;\n  };\n  CandlestickView.prototype._renderLarge = function (seriesModel) {\n    this._clear();\n    createLarge(seriesModel, this.group);\n    var clipPath = seriesModel.get('clip', true) ? createClipPath(seriesModel.coordinateSystem, false, seriesModel) : null;\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n  };\n  CandlestickView.prototype._incrementalRenderNormal = function (params, seriesModel) {\n    var data = seriesModel.getData();\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var dataIndex;\n    while ((dataIndex = params.next()) != null) {\n      var itemLayout = data.getItemLayout(dataIndex);\n      var el = createNormalBox(itemLayout, dataIndex);\n      setBoxCommon(el, data, dataIndex, isSimpleBox);\n      el.incremental = true;\n      this.group.add(el);\n      this._progressiveEls.push(el);\n    }\n  };\n  CandlestickView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n    createLarge(seriesModel, this.group, this._progressiveEls, true);\n  };\n  CandlestickView.prototype.remove = function (ecModel) {\n    this._clear();\n  };\n  CandlestickView.prototype._clear = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n  CandlestickView.type = 'candlestick';\n  return CandlestickView;\n}(ChartView);\nvar NormalBoxPathShape = /** @class */function () {\n  function NormalBoxPathShape() {}\n  return NormalBoxPathShape;\n}();\nvar NormalBoxPath = /** @class */function (_super) {\n  __extends(NormalBoxPath, _super);\n  function NormalBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'normalCandlestickBox';\n    return _this;\n  }\n  NormalBoxPath.prototype.getDefaultShape = function () {\n    return new NormalBoxPathShape();\n  };\n  NormalBoxPath.prototype.buildPath = function (ctx, shape) {\n    var ends = shape.points;\n    if (this.__simpleBox) {\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[6][0], ends[6][1]);\n    } else {\n      ctx.moveTo(ends[0][0], ends[0][1]);\n      ctx.lineTo(ends[1][0], ends[1][1]);\n      ctx.lineTo(ends[2][0], ends[2][1]);\n      ctx.lineTo(ends[3][0], ends[3][1]);\n      ctx.closePath();\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[5][0], ends[5][1]);\n      ctx.moveTo(ends[6][0], ends[6][1]);\n      ctx.lineTo(ends[7][0], ends[7][1]);\n    }\n  };\n  return NormalBoxPath;\n}(Path);\nfunction createNormalBox(itemLayout, dataIndex, isInit) {\n  var ends = itemLayout.ends;\n  return new NormalBoxPath({\n    shape: {\n      points: isInit ? transInit(ends, itemLayout) : ends\n    },\n    z2: 100\n  });\n}\nfunction isNormalBoxClipped(clipArea, itemLayout) {\n  var clipped = true;\n  for (var i = 0; i < itemLayout.ends.length; i++) {\n    // If any point are in the region.\n    if (clipArea.contain(itemLayout.ends[i][0], itemLayout.ends[i][1])) {\n      clipped = false;\n      break;\n    }\n  }\n  return clipped;\n}\nfunction setBoxCommon(el, data, dataIndex, isSimpleBox) {\n  var itemModel = data.getItemModel(dataIndex);\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.strokeNoScale = true;\n  el.__simpleBox = isSimpleBox;\n  setStatesStylesFromModel(el, itemModel);\n  var sign = data.getItemLayout(dataIndex).sign;\n  zrUtil.each(el.states, function (state, stateName) {\n    var stateModel = itemModel.getModel(stateName);\n    var color = getColor(sign, stateModel);\n    var borderColor = getBorderColor(sign, stateModel) || color;\n    var stateStyle = state.style || (state.style = {});\n    color && (stateStyle.fill = color);\n    borderColor && (stateStyle.stroke = borderColor);\n  });\n  var emphasisModel = itemModel.getModel('emphasis');\n  toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n}\nfunction transInit(points, itemLayout) {\n  return zrUtil.map(points, function (point) {\n    point = point.slice();\n    point[1] = itemLayout.initBaseline;\n    return point;\n  });\n}\nvar LargeBoxPathShape = /** @class */function () {\n  function LargeBoxPathShape() {}\n  return LargeBoxPathShape;\n}();\nvar LargeBoxPath = /** @class */function (_super) {\n  __extends(LargeBoxPath, _super);\n  function LargeBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'largeCandlestickBox';\n    return _this;\n  }\n  LargeBoxPath.prototype.getDefaultShape = function () {\n    return new LargeBoxPathShape();\n  };\n  LargeBoxPath.prototype.buildPath = function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n    for (var i = 0; i < points.length;) {\n      if (this.__sign === points[i++]) {\n        var x = points[i++];\n        ctx.moveTo(x, points[i++]);\n        ctx.lineTo(x, points[i++]);\n      } else {\n        i += 3;\n      }\n    }\n  };\n  return LargeBoxPath;\n}(Path);\nfunction createLarge(seriesModel, group, progressiveEls, incremental) {\n  var data = seriesModel.getData();\n  var largePoints = data.getLayout('largePoints');\n  var elP = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: 1,\n    ignoreCoarsePointer: true\n  });\n  group.add(elP);\n  var elN = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: -1,\n    ignoreCoarsePointer: true\n  });\n  group.add(elN);\n  var elDoji = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: 0,\n    ignoreCoarsePointer: true\n  });\n  group.add(elDoji);\n  setLargeStyle(1, elP, seriesModel, data);\n  setLargeStyle(-1, elN, seriesModel, data);\n  setLargeStyle(0, elDoji, seriesModel, data);\n  if (incremental) {\n    elP.incremental = true;\n    elN.incremental = true;\n  }\n  if (progressiveEls) {\n    progressiveEls.push(elP, elN);\n  }\n}\nfunction setLargeStyle(sign, el, seriesModel, data) {\n  // TODO put in visual?\n  var borderColor = getBorderColor(sign, seriesModel)\n  // Use color for border color by default.\n  || getColor(sign, seriesModel);\n  // Color must be excluded.\n  // Because symbol provide setColor individually to set fill and stroke\n  var itemStyle = seriesModel.getModel('itemStyle').getItemStyle(SKIP_PROPS);\n  el.useStyle(itemStyle);\n  el.style.fill = null;\n  el.style.stroke = borderColor;\n}\nexport default CandlestickView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport { WhiskerBoxCommonMixin } from '../helper/whiskerBoxCommon.js';\nimport { mixin } from 'zrender/lib/core/util.js';\nvar CandlestickSeriesModel = /** @class */function (_super) {\n  __extends(CandlestickSeriesModel, _super);\n  function CandlestickSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CandlestickSeriesModel.type;\n    _this.defaultValueDimensions = [{\n      name: 'open',\n      defaultTooltip: true\n    }, {\n      name: 'close',\n      defaultTooltip: true\n    }, {\n      name: 'lowest',\n      defaultTooltip: true\n    }, {\n      name: 'highest',\n      defaultTooltip: true\n    }];\n    return _this;\n  }\n  /**\n   * Get dimension for shadow in dataZoom\n   * @return dimension name\n   */\n  CandlestickSeriesModel.prototype.getShadowDim = function () {\n    return 'open';\n  };\n  CandlestickSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    var itemLayout = data.getItemLayout(dataIndex);\n    return itemLayout && selectors.rect(itemLayout.brushRect);\n  };\n  CandlestickSeriesModel.type = 'series.candlestick';\n  CandlestickSeriesModel.dependencies = ['xAxis', 'yAxis', 'grid'];\n  CandlestickSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    layout: null,\n    clip: true,\n    itemStyle: {\n      color: '#eb5454',\n      color0: '#47b262',\n      borderColor: '#eb5454',\n      borderColor0: '#47b262',\n      borderColorDoji: null,\n      // borderColor: '#d24040',\n      // borderColor0: '#398f4f',\n      borderWidth: 1\n    },\n    emphasis: {\n      itemStyle: {\n        borderWidth: 2\n      }\n    },\n    barMaxWidth: null,\n    barMinWidth: null,\n    barWidth: null,\n    large: true,\n    largeThreshold: 600,\n    progressive: 3e3,\n    progressiveThreshold: 1e4,\n    progressiveChunkMode: 'mod',\n    animationEasing: 'linear',\n    animationDuration: 300\n  };\n  return CandlestickSeriesModel;\n}(SeriesModel);\nmixin(CandlestickSeriesModel, WhiskerBoxCommonMixin, true);\nexport default CandlestickSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function candlestickPreprocessor(option) {\n  if (!option || !zrUtil.isArray(option.series)) {\n    return;\n  }\n  // Translate 'k' to 'candlestick'.\n  zrUtil.each(option.series, function (seriesItem) {\n    if (zrUtil.isObject(seriesItem) && seriesItem.type === 'k') {\n      seriesItem.type = 'candlestick';\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { subPixelOptimize } from '../../util/graphic.js';\nimport createRenderPlanner from '../helper/createRenderPlanner.js';\nimport { parsePercent } from '../../util/number.js';\nimport { map, retrieve2 } from 'zrender/lib/core/util.js';\nimport { createFloat32Array } from '../../util/vendor.js';\nvar candlestickLayout = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  reset: function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var data = seriesModel.getData();\n    var candleWidth = calculateCandleWidth(seriesModel, data);\n    var cDimIdx = 0;\n    var vDimIdx = 1;\n    var coordDims = ['x', 'y'];\n    var cDimI = data.getDimensionIndex(data.mapDimension(coordDims[cDimIdx]));\n    var vDimsI = map(data.mapDimensionsAll(coordDims[vDimIdx]), data.getDimensionIndex, data);\n    var openDimI = vDimsI[0];\n    var closeDimI = vDimsI[1];\n    var lowestDimI = vDimsI[2];\n    var highestDimI = vDimsI[3];\n    data.setLayout({\n      candleWidth: candleWidth,\n      // The value is experimented visually.\n      isSimpleBox: candleWidth <= 1.3\n    });\n    if (cDimI < 0 || vDimsI.length < 4) {\n      return;\n    }\n    return {\n      progress: seriesModel.pipelineContext.large ? largeProgress : normalProgress\n    };\n    function normalProgress(params, data) {\n      var dataIndex;\n      var store = data.getStore();\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = store.get(cDimI, dataIndex);\n        var openVal = store.get(openDimI, dataIndex);\n        var closeVal = store.get(closeDimI, dataIndex);\n        var lowestVal = store.get(lowestDimI, dataIndex);\n        var highestVal = store.get(highestDimI, dataIndex);\n        var ocLow = Math.min(openVal, closeVal);\n        var ocHigh = Math.max(openVal, closeVal);\n        var ocLowPoint = getPoint(ocLow, axisDimVal);\n        var ocHighPoint = getPoint(ocHigh, axisDimVal);\n        var lowestPoint = getPoint(lowestVal, axisDimVal);\n        var highestPoint = getPoint(highestVal, axisDimVal);\n        var ends = [];\n        addBodyEnd(ends, ocHighPoint, 0);\n        addBodyEnd(ends, ocLowPoint, 1);\n        ends.push(subPixelOptimizePoint(highestPoint), subPixelOptimizePoint(ocHighPoint), subPixelOptimizePoint(lowestPoint), subPixelOptimizePoint(ocLowPoint));\n        var itemModel = data.getItemModel(dataIndex);\n        var hasDojiColor = !!itemModel.get(['itemStyle', 'borderColorDoji']);\n        data.setItemLayout(dataIndex, {\n          sign: getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor),\n          initBaseline: openVal > closeVal ? ocHighPoint[vDimIdx] : ocLowPoint[vDimIdx],\n          ends: ends,\n          brushRect: makeBrushRect(lowestVal, highestVal, axisDimVal)\n        });\n      }\n      function getPoint(val, axisDimVal) {\n        var p = [];\n        p[cDimIdx] = axisDimVal;\n        p[vDimIdx] = val;\n        return isNaN(axisDimVal) || isNaN(val) ? [NaN, NaN] : coordSys.dataToPoint(p);\n      }\n      function addBodyEnd(ends, point, start) {\n        var point1 = point.slice();\n        var point2 = point.slice();\n        point1[cDimIdx] = subPixelOptimize(point1[cDimIdx] + candleWidth / 2, 1, false);\n        point2[cDimIdx] = subPixelOptimize(point2[cDimIdx] - candleWidth / 2, 1, true);\n        start ? ends.push(point1, point2) : ends.push(point2, point1);\n      }\n      function makeBrushRect(lowestVal, highestVal, axisDimVal) {\n        var pmin = getPoint(lowestVal, axisDimVal);\n        var pmax = getPoint(highestVal, axisDimVal);\n        pmin[cDimIdx] -= candleWidth / 2;\n        pmax[cDimIdx] -= candleWidth / 2;\n        return {\n          x: pmin[0],\n          y: pmin[1],\n          width: vDimIdx ? candleWidth : pmax[0] - pmin[0],\n          height: vDimIdx ? pmax[1] - pmin[1] : candleWidth\n        };\n      }\n      function subPixelOptimizePoint(point) {\n        point[cDimIdx] = subPixelOptimize(point[cDimIdx], 1);\n        return point;\n      }\n    }\n    function largeProgress(params, data) {\n      // Structure: [sign, x, yhigh, ylow, sign, x, yhigh, ylow, ...]\n      var points = createFloat32Array(params.count * 4);\n      var offset = 0;\n      var point;\n      var tmpIn = [];\n      var tmpOut = [];\n      var dataIndex;\n      var store = data.getStore();\n      var hasDojiColor = !!seriesModel.get(['itemStyle', 'borderColorDoji']);\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = store.get(cDimI, dataIndex);\n        var openVal = store.get(openDimI, dataIndex);\n        var closeVal = store.get(closeDimI, dataIndex);\n        var lowestVal = store.get(lowestDimI, dataIndex);\n        var highestVal = store.get(highestDimI, dataIndex);\n        if (isNaN(axisDimVal) || isNaN(lowestVal) || isNaN(highestVal)) {\n          points[offset++] = NaN;\n          offset += 3;\n          continue;\n        }\n        points[offset++] = getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor);\n        tmpIn[cDimIdx] = axisDimVal;\n        tmpIn[vDimIdx] = lowestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[0] : NaN;\n        points[offset++] = point ? point[1] : NaN;\n        tmpIn[vDimIdx] = highestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[1] : NaN;\n      }\n      data.setLayout('largePoints', points);\n    }\n  }\n};\n/**\n * Get the sign of a single data.\n *\n * @returns 0 for doji with hasDojiColor: true,\n *          1 for positive,\n *          -1 for negative.\n */\nfunction getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor) {\n  var sign;\n  if (openVal > closeVal) {\n    sign = -1;\n  } else if (openVal < closeVal) {\n    sign = 1;\n  } else {\n    sign = hasDojiColor\n    // When doji color is set, use it instead of color/color0.\n    ? 0 : dataIndex > 0\n    // If close === open, compare with close of last record\n    ? store.get(closeDimI, dataIndex - 1) <= closeVal ? 1 : -1\n    // No record of previous, set to be positive\n    : 1;\n  }\n  return sign;\n}\nfunction calculateCandleWidth(seriesModel, data) {\n  var baseAxis = seriesModel.getBaseAxis();\n  var extent;\n  var bandWidth = baseAxis.type === 'category' ? baseAxis.getBandWidth() : (extent = baseAxis.getExtent(), Math.abs(extent[1] - extent[0]) / data.count());\n  var barMaxWidth = parsePercent(retrieve2(seriesModel.get('barMaxWidth'), bandWidth), bandWidth);\n  var barMinWidth = parsePercent(retrieve2(seriesModel.get('barMinWidth'), 1), bandWidth);\n  var barWidth = seriesModel.get('barWidth');\n  return barWidth != null ? parsePercent(barWidth, bandWidth)\n  // Put max outer to ensure bar visible in spite of overlap.\n  : Math.max(Math.min(bandWidth / 2, barMaxWidth), barMinWidth);\n}\nexport default candlestickLayout;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CandlestickView from './CandlestickView.js';\nimport CandlestickSeriesModel from './CandlestickSeries.js';\nimport preprocessor from './preprocessor.js';\nimport candlestickVisual from './candlestickVisual.js';\nimport candlestickLayout from './candlestickLayout.js';\nexport function install(registers) {\n  registers.registerChartView(CandlestickView);\n  registers.registerSeriesModel(CandlestickSeriesModel);\n  registers.registerPreprocessor(preprocessor);\n  registers.registerVisual(candlestickVisual);\n  registers.registerLayout(candlestickLayout);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, hasOwn } from 'zrender/lib/core/util.js';\nimport tokens from '../visual/tokens.js';\nvar deprecatedLogs = {};\n/**\n * Whether need to call `convertEC4CompatibleStyle`.\n */\nexport function isEC4CompatibleStyle(style, elType, hasOwnTextContentOption, hasOwnTextConfig) {\n  // Since echarts5, `RectText` is separated from its host element and style.text\n  // does not exist any more. The compat work brings some extra burden on performance.\n  // So we provide:\n  // `legacy: true` force make compat.\n  // `legacy: false`, force do not compat.\n  // `legacy` not set: auto detect whether legacy.\n  //     But in this case we do not compat (difficult to detect and rare case):\n  //     Because custom series and graphic component support \"merge\", users may firstly\n  //     only set `textStrokeWidth` style or secondly only set `text`.\n  return style && (style.legacy || style.legacy !== false && !hasOwnTextContentOption && !hasOwnTextConfig && elType !== 'tspan'\n  // Difficult to detect whether legacy for a \"text\" el.\n  && (elType === 'text' || hasOwn(style, 'text')));\n}\n/**\n * `EC4CompatibleStyle` is style that might be in echarts4 format or echarts5 format.\n * @param hostStyle The properties might be modified.\n * @return If be text el, `textContentStyle` and `textConfig` will not be returned.\n *         Otherwise a `textContentStyle` and `textConfig` will be created, whose props area\n *         retried from the `hostStyle`.\n */\nexport function convertFromEC4CompatibleStyle(hostStyle, elType, isNormal) {\n  var srcStyle = hostStyle;\n  var textConfig;\n  var textContent;\n  var textContentStyle;\n  if (elType === 'text') {\n    textContentStyle = srcStyle;\n  } else {\n    textContentStyle = {};\n    hasOwn(srcStyle, 'text') && (textContentStyle.text = srcStyle.text);\n    hasOwn(srcStyle, 'rich') && (textContentStyle.rich = srcStyle.rich);\n    hasOwn(srcStyle, 'textFill') && (textContentStyle.fill = srcStyle.textFill);\n    hasOwn(srcStyle, 'textStroke') && (textContentStyle.stroke = srcStyle.textStroke);\n    hasOwn(srcStyle, 'fontFamily') && (textContentStyle.fontFamily = srcStyle.fontFamily);\n    hasOwn(srcStyle, 'fontSize') && (textContentStyle.fontSize = srcStyle.fontSize);\n    hasOwn(srcStyle, 'fontStyle') && (textContentStyle.fontStyle = srcStyle.fontStyle);\n    hasOwn(srcStyle, 'fontWeight') && (textContentStyle.fontWeight = srcStyle.fontWeight);\n    textContent = {\n      type: 'text',\n      style: textContentStyle,\n      // ec4 does not support rectText trigger.\n      // And when text position is different in normal and emphasis\n      // => hover text trigger emphasis;\n      // => text position changed, leave mouse pointer immediately;\n      // That might cause incorrect state.\n      silent: true\n    };\n    textConfig = {};\n    var hasOwnPos = hasOwn(srcStyle, 'textPosition');\n    if (isNormal) {\n      textConfig.position = hasOwnPos ? srcStyle.textPosition : 'inside';\n    } else {\n      hasOwnPos && (textConfig.position = srcStyle.textPosition);\n    }\n    hasOwn(srcStyle, 'textPosition') && (textConfig.position = srcStyle.textPosition);\n    hasOwn(srcStyle, 'textOffset') && (textConfig.offset = srcStyle.textOffset);\n    hasOwn(srcStyle, 'textRotation') && (textConfig.rotation = srcStyle.textRotation);\n    hasOwn(srcStyle, 'textDistance') && (textConfig.distance = srcStyle.textDistance);\n  }\n  convertEC4CompatibleRichItem(textContentStyle, hostStyle);\n  each(textContentStyle.rich, function (richItem) {\n    convertEC4CompatibleRichItem(richItem, richItem);\n  });\n  return {\n    textConfig: textConfig,\n    textContent: textContent\n  };\n}\n/**\n * The result will be set to `out`.\n */\nfunction convertEC4CompatibleRichItem(out, richItem) {\n  if (!richItem) {\n    return;\n  }\n  // (1) For simplicity, make textXXX properties (deprecated since ec5) has\n  // higher priority. For example, consider in ec4 `borderColor: 5, textBorderColor: 10`\n  // on a rect means `borderColor: 4` on the rect and `borderColor: 10` on an attached\n  // richText in ec5.\n  // (2) `out === richItem` if and only if `out` is text el or rich item.\n  // So we can overwrite existing props in `out` since textXXX has higher priority.\n  richItem.font = richItem.textFont || richItem.font;\n  hasOwn(richItem, 'textStrokeWidth') && (out.lineWidth = richItem.textStrokeWidth);\n  hasOwn(richItem, 'textAlign') && (out.align = richItem.textAlign);\n  hasOwn(richItem, 'textVerticalAlign') && (out.verticalAlign = richItem.textVerticalAlign);\n  hasOwn(richItem, 'textLineHeight') && (out.lineHeight = richItem.textLineHeight);\n  hasOwn(richItem, 'textWidth') && (out.width = richItem.textWidth);\n  hasOwn(richItem, 'textHeight') && (out.height = richItem.textHeight);\n  hasOwn(richItem, 'textBackgroundColor') && (out.backgroundColor = richItem.textBackgroundColor);\n  hasOwn(richItem, 'textPadding') && (out.padding = richItem.textPadding);\n  hasOwn(richItem, 'textBorderColor') && (out.borderColor = richItem.textBorderColor);\n  hasOwn(richItem, 'textBorderWidth') && (out.borderWidth = richItem.textBorderWidth);\n  hasOwn(richItem, 'textBorderRadius') && (out.borderRadius = richItem.textBorderRadius);\n  hasOwn(richItem, 'textBoxShadowColor') && (out.shadowColor = richItem.textBoxShadowColor);\n  hasOwn(richItem, 'textBoxShadowBlur') && (out.shadowBlur = richItem.textBoxShadowBlur);\n  hasOwn(richItem, 'textBoxShadowOffsetX') && (out.shadowOffsetX = richItem.textBoxShadowOffsetX);\n  hasOwn(richItem, 'textBoxShadowOffsetY') && (out.shadowOffsetY = richItem.textBoxShadowOffsetY);\n}\n/**\n * Convert to pure echarts4 format style.\n * `itemStyle` will be modified, added with ec4 style properties from\n * `textStyle` and `textConfig`.\n *\n * [Caveat]: For simplicity, `insideRollback` in ec4 does not compat, where\n * `styleEmphasis: {textFill: 'red'}` will remove the normal auto added stroke.\n */\nexport function convertToEC4StyleForCustomSerise(itemStl, txStl, txCfg) {\n  var out = itemStl;\n  // See `custom.ts`, a trick to set extra `textPosition` firstly.\n  out.textPosition = out.textPosition || txCfg.position || 'inside';\n  txCfg.offset != null && (out.textOffset = txCfg.offset);\n  txCfg.rotation != null && (out.textRotation = txCfg.rotation);\n  txCfg.distance != null && (out.textDistance = txCfg.distance);\n  var isInside = out.textPosition.indexOf('inside') >= 0;\n  var hostFill = itemStl.fill || tokens.color.neutral99;\n  convertToEC4RichItem(out, txStl);\n  var textFillNotSet = out.textFill == null;\n  if (isInside) {\n    if (textFillNotSet) {\n      out.textFill = txCfg.insideFill || tokens.color.neutral00;\n      !out.textStroke && txCfg.insideStroke && (out.textStroke = txCfg.insideStroke);\n      !out.textStroke && (out.textStroke = hostFill);\n      out.textStrokeWidth == null && (out.textStrokeWidth = 2);\n    }\n  } else {\n    if (textFillNotSet) {\n      out.textFill = itemStl.fill || txCfg.outsideFill || tokens.color.neutral00;\n    }\n    !out.textStroke && txCfg.outsideStroke && (out.textStroke = txCfg.outsideStroke);\n  }\n  out.text = txStl.text;\n  out.rich = txStl.rich;\n  each(txStl.rich, function (richItem) {\n    convertToEC4RichItem(richItem, richItem);\n  });\n  return out;\n}\nfunction convertToEC4RichItem(out, richItem) {\n  if (!richItem) {\n    return;\n  }\n  hasOwn(richItem, 'fill') && (out.textFill = richItem.fill);\n  hasOwn(richItem, 'stroke') && (out.textStroke = richItem.fill);\n  hasOwn(richItem, 'lineWidth') && (out.textStrokeWidth = richItem.lineWidth);\n  hasOwn(richItem, 'font') && (out.font = richItem.font);\n  hasOwn(richItem, 'fontStyle') && (out.fontStyle = richItem.fontStyle);\n  hasOwn(richItem, 'fontWeight') && (out.fontWeight = richItem.fontWeight);\n  hasOwn(richItem, 'fontSize') && (out.fontSize = richItem.fontSize);\n  hasOwn(richItem, 'fontFamily') && (out.fontFamily = richItem.fontFamily);\n  hasOwn(richItem, 'align') && (out.textAlign = richItem.align);\n  hasOwn(richItem, 'verticalAlign') && (out.textVerticalAlign = richItem.verticalAlign);\n  hasOwn(richItem, 'lineHeight') && (out.textLineHeight = richItem.lineHeight);\n  hasOwn(richItem, 'width') && (out.textWidth = richItem.width);\n  hasOwn(richItem, 'height') && (out.textHeight = richItem.height);\n  hasOwn(richItem, 'backgroundColor') && (out.textBackgroundColor = richItem.backgroundColor);\n  hasOwn(richItem, 'padding') && (out.textPadding = richItem.padding);\n  hasOwn(richItem, 'borderColor') && (out.textBorderColor = richItem.borderColor);\n  hasOwn(richItem, 'borderWidth') && (out.textBorderWidth = richItem.borderWidth);\n  hasOwn(richItem, 'borderRadius') && (out.textBorderRadius = richItem.borderRadius);\n  hasOwn(richItem, 'shadowColor') && (out.textBoxShadowColor = richItem.shadowColor);\n  hasOwn(richItem, 'shadowBlur') && (out.textBoxShadowBlur = richItem.shadowBlur);\n  hasOwn(richItem, 'shadowOffsetX') && (out.textBoxShadowOffsetX = richItem.shadowOffsetX);\n  hasOwn(richItem, 'shadowOffsetY') && (out.textBoxShadowOffsetY = richItem.shadowOffsetY);\n  hasOwn(richItem, 'textShadowColor') && (out.textShadowColor = richItem.textShadowColor);\n  hasOwn(richItem, 'textShadowBlur') && (out.textShadowBlur = richItem.textShadowBlur);\n  hasOwn(richItem, 'textShadowOffsetX') && (out.textShadowOffsetX = richItem.textShadowOffsetX);\n  hasOwn(richItem, 'textShadowOffsetY') && (out.textShadowOffsetY = richItem.textShadowOffsetY);\n}\nexport function warnDeprecated(deprecated, insteadApproach) {\n  if (process.env.NODE_ENV !== 'production') {\n    var key = deprecated + '^_^' + insteadApproach;\n    if (!deprecatedLogs[key]) {\n      console.warn(\"[ECharts] DEPRECATED: \\\"\" + deprecated + \"\\\" has been deprecated. \" + insteadApproach);\n      deprecatedLogs[key] = true;\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner, normalizeToArray } from '../util/model.js';\nimport { assert, bind, each, eqNaN, extend, hasOwn, indexOf, isArrayLike, keys, reduce } from 'zrender/lib/core/util.js';\nimport { cloneValue } from 'zrender/lib/animation/Animator.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nimport { getAnimationConfig } from './basicTransition.js';\nimport { Path } from '../util/graphic.js';\nimport { warn } from '../util/log.js';\nimport { TRANSFORMABLE_PROPS } from 'zrender/lib/core/Transformable.js';\nvar LEGACY_TRANSFORM_PROPS_MAP = {\n  position: ['x', 'y'],\n  scale: ['scaleX', 'scaleY'],\n  origin: ['originX', 'originY']\n};\nvar LEGACY_TRANSFORM_PROPS = keys(LEGACY_TRANSFORM_PROPS_MAP);\nvar TRANSFORM_PROPS_MAP = reduce(TRANSFORMABLE_PROPS, function (obj, key) {\n  obj[key] = 1;\n  return obj;\n}, {});\nvar transformPropNamesStr = TRANSFORMABLE_PROPS.join(', ');\n// '' means root\nexport var ELEMENT_ANIMATABLE_PROPS = ['', 'style', 'shape', 'extra'];\n;\nvar transitionInnerStore = makeInner();\n;\nfunction getElementAnimationConfig(animationType, el, elOption, parentModel, dataIndex) {\n  var animationProp = animationType + \"Animation\";\n  var config = getAnimationConfig(animationType, parentModel, dataIndex) || {};\n  var userDuring = transitionInnerStore(el).userDuring;\n  // Only set when duration is > 0 and it's need to be animated.\n  if (config.duration > 0) {\n    // For simplicity, if during not specified, the previous during will not work any more.\n    config.during = userDuring ? bind(duringCall, {\n      el: el,\n      userDuring: userDuring\n    }) : null;\n    config.setToFinal = true;\n    config.scope = animationType;\n  }\n  extend(config, elOption[animationProp]);\n  return config;\n}\nexport function applyUpdateTransition(el, elOption, animatableModel, opts) {\n  opts = opts || {};\n  var dataIndex = opts.dataIndex,\n    isInit = opts.isInit,\n    clearStyle = opts.clearStyle;\n  var hasAnimation = animatableModel.isAnimationEnabled();\n  // Save the meta info for further morphing. Like apply on the sub morphing elements.\n  var store = transitionInnerStore(el);\n  var styleOpt = elOption.style;\n  store.userDuring = elOption.during;\n  var transFromProps = {};\n  var propsToSet = {};\n  prepareTransformAllPropsFinal(el, elOption, propsToSet);\n  if (el.type === 'compound') {\n    /**\n     * We cannot directly clone shape for compoundPath,\n     * because it makes the path to be an object instead of a Path instance,\n     * and thus missing `buildPath` method.\n     */\n    var paths = el.shape.paths;\n    var optionPaths = elOption.shape.paths;\n    for (var i = 0; i < optionPaths.length; i++) {\n      var path = optionPaths[i];\n      prepareShapeOrExtraAllPropsFinal('shape', path, paths[i]);\n    }\n  } else {\n    prepareShapeOrExtraAllPropsFinal('shape', elOption, propsToSet);\n    prepareShapeOrExtraAllPropsFinal('extra', elOption, propsToSet);\n  }\n  if (!isInit && hasAnimation) {\n    prepareTransformTransitionFrom(el, elOption, transFromProps);\n    prepareShapeOrExtraTransitionFrom('shape', el, elOption, transFromProps);\n    prepareShapeOrExtraTransitionFrom('extra', el, elOption, transFromProps);\n    prepareStyleTransitionFrom(el, elOption, styleOpt, transFromProps);\n  }\n  propsToSet.style = styleOpt;\n  applyPropsDirectly(el, propsToSet, clearStyle);\n  applyMiscProps(el, elOption);\n  if (hasAnimation) {\n    if (isInit) {\n      var enterFromProps_1 = {};\n      each(ELEMENT_ANIMATABLE_PROPS, function (propName) {\n        var prop = propName ? elOption[propName] : elOption;\n        if (prop && prop.enterFrom) {\n          if (propName) {\n            enterFromProps_1[propName] = enterFromProps_1[propName] || {};\n          }\n          extend(propName ? enterFromProps_1[propName] : enterFromProps_1, prop.enterFrom);\n        }\n      });\n      var config = getElementAnimationConfig('enter', el, elOption, animatableModel, dataIndex);\n      if (config.duration > 0) {\n        el.animateFrom(enterFromProps_1, config);\n      }\n    } else {\n      applyPropsTransition(el, elOption, dataIndex || 0, animatableModel, transFromProps);\n    }\n  }\n  // Store leave to be used in leave transition.\n  updateLeaveTo(el, elOption);\n  styleOpt ? el.dirty() : el.markRedraw();\n}\nexport function updateLeaveTo(el, elOption) {\n  // Try merge to previous set leaveTo\n  var leaveToProps = transitionInnerStore(el).leaveToProps;\n  for (var i = 0; i < ELEMENT_ANIMATABLE_PROPS.length; i++) {\n    var propName = ELEMENT_ANIMATABLE_PROPS[i];\n    var prop = propName ? elOption[propName] : elOption;\n    if (prop && prop.leaveTo) {\n      if (!leaveToProps) {\n        leaveToProps = transitionInnerStore(el).leaveToProps = {};\n      }\n      if (propName) {\n        leaveToProps[propName] = leaveToProps[propName] || {};\n      }\n      extend(propName ? leaveToProps[propName] : leaveToProps, prop.leaveTo);\n    }\n  }\n}\nexport function applyLeaveTransition(el, elOption, animatableModel, onRemove) {\n  if (el) {\n    var parent_1 = el.parent;\n    var leaveToProps = transitionInnerStore(el).leaveToProps;\n    if (leaveToProps) {\n      // TODO TODO use leave after leaveAnimation in series is introduced\n      // TODO Data index?\n      var config = getElementAnimationConfig('update', el, elOption, animatableModel, 0);\n      config.done = function () {\n        parent_1 && parent_1.remove(el);\n        onRemove && onRemove();\n      };\n      el.animateTo(leaveToProps, config);\n    } else {\n      parent_1 && parent_1.remove(el);\n      onRemove && onRemove();\n    }\n  }\n}\nexport function isTransitionAll(transition) {\n  return transition === 'all';\n}\nfunction applyPropsDirectly(el,\n// Can be null/undefined\nallPropsFinal, clearStyle) {\n  var styleOpt = allPropsFinal.style;\n  if (!el.isGroup && styleOpt) {\n    if (clearStyle) {\n      el.useStyle({});\n      // When style object changed, how to trade the existing animation?\n      // It is probably complicated and not needed to cover all the cases.\n      // But still need consider the case:\n      // (1) When using init animation on `style.opacity`, and before the animation\n      //     ended users triggers an update by mousewhel. At that time the init\n      //     animation should better be continued rather than terminated.\n      //     So after `useStyle` called, we should change the animation target manually\n      //     to continue the effect of the init animation.\n      // (2) PENDING: If the previous animation targeted at a `val1`, and currently we need\n      //     to update the value to `val2` and no animation declared, should be terminate\n      //     the previous animation or just modify the target of the animation?\n      //     Therotically That will happen not only on `style` but also on `shape` and\n      //     `transfrom` props. But we haven't handle this case at present yet.\n      // (3) PENDING: Is it proper to visit `animators` and `targetName`?\n      var animators = el.animators;\n      for (var i = 0; i < animators.length; i++) {\n        var animator = animators[i];\n        // targetName is the \"topKey\".\n        if (animator.targetName === 'style') {\n          animator.changeTarget(el.style);\n        }\n      }\n    }\n    el.setStyle(styleOpt);\n  }\n  if (allPropsFinal) {\n    // Not set style here.\n    allPropsFinal.style = null;\n    // Set el to the final state firstly.\n    allPropsFinal && el.attr(allPropsFinal);\n    allPropsFinal.style = styleOpt;\n  }\n}\nfunction applyPropsTransition(el, elOption, dataIndex, model,\n// Can be null/undefined\ntransFromProps) {\n  if (transFromProps) {\n    var config = getElementAnimationConfig('update', el, elOption, model, dataIndex);\n    if (config.duration > 0) {\n      el.animateFrom(transFromProps, config);\n    }\n  }\n}\nfunction applyMiscProps(el, elOption) {\n  // Merge by default.\n  hasOwn(elOption, 'silent') && (el.silent = elOption.silent);\n  hasOwn(elOption, 'ignore') && (el.ignore = elOption.ignore);\n  if (el instanceof Displayable) {\n    hasOwn(elOption, 'invisible') && (el.invisible = elOption.invisible);\n  }\n  if (el instanceof Path) {\n    hasOwn(elOption, 'autoBatch') && (el.autoBatch = elOption.autoBatch);\n  }\n}\n// Use it to avoid it be exposed to user.\nvar tmpDuringScope = {};\nvar transitionDuringAPI = {\n  // Usually other props do not need to be changed in animation during.\n  setTransform: function (key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(hasOwn(TRANSFORM_PROPS_MAP, key), 'Only ' + transformPropNamesStr + ' available in `setTransform`.');\n    }\n    tmpDuringScope.el[key] = val;\n    return this;\n  },\n  getTransform: function (key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(hasOwn(TRANSFORM_PROPS_MAP, key), 'Only ' + transformPropNamesStr + ' available in `getTransform`.');\n    }\n    return tmpDuringScope.el[key];\n  },\n  setShape: function (key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n    var el = tmpDuringScope.el;\n    var shape = el.shape || (el.shape = {});\n    shape[key] = val;\n    el.dirtyShape && el.dirtyShape();\n    return this;\n  },\n  getShape: function (key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n    var shape = tmpDuringScope.el.shape;\n    if (shape) {\n      return shape[key];\n    }\n  },\n  setStyle: function (key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n    var el = tmpDuringScope.el;\n    var style = el.style;\n    if (style) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (eqNaN(val)) {\n          warn('style.' + key + ' must not be assigned with NaN.');\n        }\n      }\n      style[key] = val;\n      el.dirtyStyle && el.dirtyStyle();\n    }\n    return this;\n  },\n  getStyle: function (key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n    var style = tmpDuringScope.el.style;\n    if (style) {\n      return style[key];\n    }\n  },\n  setExtra: function (key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n    var extra = tmpDuringScope.el.extra || (tmpDuringScope.el.extra = {});\n    extra[key] = val;\n    return this;\n  },\n  getExtra: function (key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n    var extra = tmpDuringScope.el.extra;\n    if (extra) {\n      return extra[key];\n    }\n  }\n};\nfunction assertNotReserved(key) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (key === 'transition' || key === 'enterFrom' || key === 'leaveTo') {\n      throw new Error('key must not be \"' + key + '\"');\n    }\n  }\n}\nfunction duringCall() {\n  // Do not provide \"percent\" until some requirements come.\n  // Because consider thies case:\n  // enterFrom: {x: 100, y: 30}, transition: 'x'.\n  // And enter duration is different from update duration.\n  // Thus it might be confused about the meaning of \"percent\" in during callback.\n  var scope = this;\n  var el = scope.el;\n  if (!el) {\n    return;\n  }\n  // If el is remove from zr by reason like legend, during still need to called,\n  // because el will be added back to zr and the prop value should not be incorrect.\n  var latestUserDuring = transitionInnerStore(el).userDuring;\n  var scopeUserDuring = scope.userDuring;\n  // Ensured a during is only called once in each animation frame.\n  // If a during is called multiple times in one frame, maybe some users' calculation logic\n  // might be wrong (not sure whether this usage exists).\n  // The case of a during might be called twice can be: by default there is a animator for\n  // 'x', 'y' when init. Before the init animation finished, call `setOption` to start\n  // another animators for 'style'/'shape'/'extra'.\n  if (latestUserDuring !== scopeUserDuring) {\n    // release\n    scope.el = scope.userDuring = null;\n    return;\n  }\n  tmpDuringScope.el = el;\n  // Give no `this` to user in \"during\" calling.\n  scopeUserDuring(transitionDuringAPI);\n  // FIXME: if in future meet the case that some prop will be both modified in `during` and `state`,\n  // consider the issue that the prop might be incorrect when return to \"normal\" state.\n}\nfunction prepareShapeOrExtraTransitionFrom(mainAttr, fromEl, elOption, transFromProps) {\n  var attrOpt = elOption[mainAttr];\n  if (!attrOpt) {\n    return;\n  }\n  var elPropsInAttr = fromEl[mainAttr];\n  var transFromPropsInAttr;\n  if (elPropsInAttr) {\n    var transition = elOption.transition;\n    var attrTransition = attrOpt.transition;\n    if (attrTransition) {\n      !transFromPropsInAttr && (transFromPropsInAttr = transFromProps[mainAttr] = {});\n      if (isTransitionAll(attrTransition)) {\n        extend(transFromPropsInAttr, elPropsInAttr);\n      } else {\n        var transitionKeys = normalizeToArray(attrTransition);\n        for (var i = 0; i < transitionKeys.length; i++) {\n          var key = transitionKeys[i];\n          var elVal = elPropsInAttr[key];\n          transFromPropsInAttr[key] = elVal;\n        }\n      }\n    } else if (isTransitionAll(transition) || indexOf(transition, mainAttr) >= 0) {\n      !transFromPropsInAttr && (transFromPropsInAttr = transFromProps[mainAttr] = {});\n      var elPropsInAttrKeys = keys(elPropsInAttr);\n      for (var i = 0; i < elPropsInAttrKeys.length; i++) {\n        var key = elPropsInAttrKeys[i];\n        var elVal = elPropsInAttr[key];\n        if (isNonStyleTransitionEnabled(attrOpt[key], elVal)) {\n          transFromPropsInAttr[key] = elVal;\n        }\n      }\n    }\n  }\n}\nfunction prepareShapeOrExtraAllPropsFinal(mainAttr, elOption, allProps) {\n  var attrOpt = elOption[mainAttr];\n  if (!attrOpt) {\n    return;\n  }\n  var allPropsInAttr = allProps[mainAttr] = {};\n  var keysInAttr = keys(attrOpt);\n  for (var i = 0; i < keysInAttr.length; i++) {\n    var key = keysInAttr[i];\n    // To avoid share one object with different element, and\n    // to avoid user modify the object inexpectedly, have to clone.\n    allPropsInAttr[key] = cloneValue(attrOpt[key]);\n  }\n}\nfunction prepareTransformTransitionFrom(el, elOption, transFromProps) {\n  var transition = elOption.transition;\n  var transitionKeys = isTransitionAll(transition) ? TRANSFORMABLE_PROPS : normalizeToArray(transition || []);\n  for (var i = 0; i < transitionKeys.length; i++) {\n    var key = transitionKeys[i];\n    if (key === 'style' || key === 'shape' || key === 'extra') {\n      continue;\n    }\n    var elVal = el[key];\n    if (process.env.NODE_ENV !== 'production') {\n      checkTransformPropRefer(key, 'el.transition');\n    }\n    // Do not clone, animator will perform that clone.\n    transFromProps[key] = elVal;\n  }\n}\nfunction prepareTransformAllPropsFinal(el, elOption, allProps) {\n  for (var i = 0; i < LEGACY_TRANSFORM_PROPS.length; i++) {\n    var legacyName = LEGACY_TRANSFORM_PROPS[i];\n    var xyName = LEGACY_TRANSFORM_PROPS_MAP[legacyName];\n    var legacyArr = elOption[legacyName];\n    if (legacyArr) {\n      allProps[xyName[0]] = legacyArr[0];\n      allProps[xyName[1]] = legacyArr[1];\n    }\n  }\n  for (var i = 0; i < TRANSFORMABLE_PROPS.length; i++) {\n    var key = TRANSFORMABLE_PROPS[i];\n    if (elOption[key] != null) {\n      allProps[key] = elOption[key];\n    }\n  }\n}\nfunction prepareStyleTransitionFrom(fromEl, elOption, styleOpt, transFromProps) {\n  if (!styleOpt) {\n    return;\n  }\n  var fromElStyle = fromEl.style;\n  var transFromStyleProps;\n  if (fromElStyle) {\n    var styleTransition = styleOpt.transition;\n    var elTransition = elOption.transition;\n    if (styleTransition && !isTransitionAll(styleTransition)) {\n      var transitionKeys = normalizeToArray(styleTransition);\n      !transFromStyleProps && (transFromStyleProps = transFromProps.style = {});\n      for (var i = 0; i < transitionKeys.length; i++) {\n        var key = transitionKeys[i];\n        var elVal = fromElStyle[key];\n        // Do not clone, see `checkNonStyleTansitionRefer`.\n        transFromStyleProps[key] = elVal;\n      }\n    } else if (fromEl.getAnimationStyleProps && (isTransitionAll(elTransition) || isTransitionAll(styleTransition) || indexOf(elTransition, 'style') >= 0)) {\n      var animationProps = fromEl.getAnimationStyleProps();\n      var animationStyleProps = animationProps ? animationProps.style : null;\n      if (animationStyleProps) {\n        !transFromStyleProps && (transFromStyleProps = transFromProps.style = {});\n        var styleKeys = keys(styleOpt);\n        for (var i = 0; i < styleKeys.length; i++) {\n          var key = styleKeys[i];\n          if (animationStyleProps[key]) {\n            var elVal = fromElStyle[key];\n            transFromStyleProps[key] = elVal;\n          }\n        }\n      }\n    }\n  }\n}\nfunction isNonStyleTransitionEnabled(optVal, elVal) {\n  // The same as `checkNonStyleTansitionRefer`.\n  return !isArrayLike(optVal) ? optVal != null && isFinite(optVal) : optVal !== elVal;\n}\nvar checkTransformPropRefer;\nif (process.env.NODE_ENV !== 'production') {\n  checkTransformPropRefer = function (key, usedIn) {\n    if (!hasOwn(TRANSFORM_PROPS_MAP, key)) {\n      warn('Prop `' + key + '` is not a permitted in `' + usedIn + '`. ' + 'Only `' + keys(TRANSFORM_PROPS_MAP).join('`, `') + '` are permitted.');\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { keys, filter, each, isArray, indexOf } from 'zrender/lib/core/util.js';\nimport { ELEMENT_ANIMATABLE_PROPS } from './customGraphicTransition.js';\nimport { getAnimationConfig } from './basicTransition.js';\nimport { warn } from '../util/log.js';\nimport { makeInner } from '../util/model.js';\nvar getStateToRestore = makeInner();\nvar KEYFRAME_EXCLUDE_KEYS = ['percent', 'easing', 'shape', 'style', 'extra'];\n/**\n * Stop previous keyframe animation and restore the attributes.\n * Avoid new keyframe animation starts with wrong internal state when the percent: 0 is not set.\n */\nexport function stopPreviousKeyframeAnimationAndRestore(el) {\n  // Stop previous keyframe animation.\n  el.stopAnimation('keyframe');\n  // Restore\n  el.attr(getStateToRestore(el));\n}\nexport function applyKeyframeAnimation(el, animationOpts, animatableModel) {\n  if (!animatableModel.isAnimationEnabled() || !animationOpts) {\n    return;\n  }\n  if (isArray(animationOpts)) {\n    each(animationOpts, function (singleAnimationOpts) {\n      applyKeyframeAnimation(el, singleAnimationOpts, animatableModel);\n    });\n    return;\n  }\n  var keyframes = animationOpts.keyframes;\n  var duration = animationOpts.duration;\n  if (animatableModel && duration == null) {\n    // Default to use duration of config.\n    // NOTE: animation config from payload will be ignored because they are mainly for transitions.\n    var config = getAnimationConfig('enter', animatableModel, 0);\n    duration = config && config.duration;\n  }\n  if (!keyframes || !duration) {\n    return;\n  }\n  var stateToRestore = getStateToRestore(el);\n  each(ELEMENT_ANIMATABLE_PROPS, function (targetPropName) {\n    if (targetPropName && !el[targetPropName]) {\n      return;\n    }\n    var animator;\n    var endFrameIsSet = false;\n    // Sort keyframes by percent.\n    keyframes.sort(function (a, b) {\n      return a.percent - b.percent;\n    });\n    each(keyframes, function (kf) {\n      // Stop current animation.\n      var animators = el.animators;\n      var kfValues = targetPropName ? kf[targetPropName] : kf;\n      if (process.env.NODE_ENV !== 'production') {\n        if (kf.percent >= 1) {\n          endFrameIsSet = true;\n        }\n      }\n      if (!kfValues) {\n        return;\n      }\n      var propKeys = keys(kfValues);\n      if (!targetPropName) {\n        // PENDING performance?\n        propKeys = filter(propKeys, function (key) {\n          return indexOf(KEYFRAME_EXCLUDE_KEYS, key) < 0;\n        });\n      }\n      if (!propKeys.length) {\n        return;\n      }\n      if (!animator) {\n        animator = el.animate(targetPropName, animationOpts.loop, true);\n        animator.scope = 'keyframe';\n      }\n      for (var i = 0; i < animators.length; i++) {\n        // Stop all other animation that is not keyframe.\n        if (animators[i] !== animator && animators[i].targetName === animator.targetName) {\n          animators[i].stopTracks(propKeys);\n        }\n      }\n      targetPropName && (stateToRestore[targetPropName] = stateToRestore[targetPropName] || {});\n      var savedTarget = targetPropName ? stateToRestore[targetPropName] : stateToRestore;\n      each(propKeys, function (key) {\n        // Save original value.\n        savedTarget[key] = ((targetPropName ? el[targetPropName] : el) || {})[key];\n      });\n      animator.whenWithKeys(duration * kf.percent, kfValues, propKeys, kf.easing);\n    });\n    if (!animator) {\n      return;\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      if (!endFrameIsSet) {\n        warn('End frame with percent: 1 is missing in the keyframeAnimation.', true);\n      }\n    }\n    animator.delay(animationOpts.delay || 0).duration(duration).start(animationOpts.easing);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { install as installSimple } from './installSimple.js';\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport { use } from '../../extension.js';\nexport function install(registers) {\n  use(installSimple);\n  use(installAxisPointer);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nimport { getLayoutParams, sizeCalculable, mergeLayoutParam } from '../../util/layout.js';\nimport tokens from '../../visual/tokens.js';\nvar CalendarModel = /** @class */function (_super) {\n  __extends(CalendarModel, _super);\n  function CalendarModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CalendarModel.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n  CalendarModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputPositionParams = getLayoutParams(option);\n    _super.prototype.init.apply(this, arguments);\n    mergeAndNormalizeLayoutParams(option, inputPositionParams);\n  };\n  /**\n   * @override\n   */\n  CalendarModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n    mergeAndNormalizeLayoutParams(this.option, option);\n  };\n  CalendarModel.prototype.getCellSize = function () {\n    // Has been normalized\n    return this.option.cellSize;\n  };\n  CalendarModel.type = 'calendar';\n  CalendarModel.layoutMode = 'box';\n  CalendarModel.defaultOption = {\n    // zlevel: 0,\n    // TODO: theoretically, the z of the calendar should be lower\n    // than series, but we don't want the series to be displayed\n    // on top of the borders like month split line. To align with\n    // the effect of previous versions, we set the z to 2 for now\n    // until better solution is found.\n    z: 2,\n    left: 80,\n    top: 60,\n    cellSize: 20,\n    // horizontal vertical\n    orient: 'horizontal',\n    // month separate line style\n    splitLine: {\n      show: true,\n      lineStyle: {\n        color: tokens.color.axisLine,\n        width: 1,\n        type: 'solid'\n      }\n    },\n    // rect style  temporarily unused emphasis\n    itemStyle: {\n      color: tokens.color.neutral00,\n      borderWidth: 1,\n      borderColor: tokens.color.neutral10\n    },\n    // week text style\n    dayLabel: {\n      show: true,\n      firstDay: 0,\n      // start end\n      position: 'start',\n      margin: tokens.size.s,\n      color: tokens.color.secondary\n    },\n    // month text style\n    monthLabel: {\n      show: true,\n      // start end\n      position: 'start',\n      margin: tokens.size.s,\n      // center or left\n      align: 'center',\n      formatter: null,\n      color: tokens.color.secondary\n    },\n    // year text style\n    yearLabel: {\n      show: true,\n      // top bottom left right\n      position: null,\n      margin: tokens.size.xl,\n      formatter: null,\n      color: tokens.color.quaternary,\n      fontFamily: 'sans-serif',\n      fontWeight: 'bolder',\n      fontSize: 20\n    }\n  };\n  return CalendarModel;\n}(ComponentModel);\nfunction mergeAndNormalizeLayoutParams(target, raw) {\n  // Normalize cellSize\n  var cellSize = target.cellSize;\n  var cellSizeArr;\n  if (!zrUtil.isArray(cellSize)) {\n    cellSizeArr = target.cellSize = [cellSize, cellSize];\n  } else {\n    cellSizeArr = cellSize;\n  }\n  if (cellSizeArr.length === 1) {\n    cellSizeArr[1] = cellSizeArr[0];\n  }\n  var ignoreSize = zrUtil.map([0, 1], function (hvIdx) {\n    // If user have set `width` or both `left` and `right`, cellSizeArr\n    // will be automatically set to 'auto', otherwise the default\n    // setting of cellSizeArr will make `width` setting not work.\n    if (sizeCalculable(raw, hvIdx)) {\n      cellSizeArr[hvIdx] = 'auto';\n    }\n    return cellSizeArr[hvIdx] != null && cellSizeArr[hvIdx] !== 'auto';\n  });\n  mergeLayoutParam(target, raw, {\n    type: 'box',\n    ignoreSize: ignoreSize\n  });\n}\nexport default CalendarModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { isString, extend, map, isFunction } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { formatTplSimple } from '../../util/format.js';\nimport { parsePercent } from '../../util/number.js';\nimport ComponentView from '../../view/Component.js';\nimport { getLocaleModel } from '../../core/locale.js';\nvar CalendarView = /** @class */function (_super) {\n  __extends(CalendarView, _super);\n  function CalendarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CalendarView.type;\n    return _this;\n  }\n  CalendarView.prototype.render = function (calendarModel, ecModel, api) {\n    var group = this.group;\n    group.removeAll();\n    var coordSys = calendarModel.coordinateSystem;\n    // range info\n    var rangeData = coordSys.getRangeInfo();\n    var orient = coordSys.getOrient();\n    // locale\n    var localeModel = ecModel.getLocaleModel();\n    this._renderDayRect(calendarModel, rangeData, group);\n    // _renderLines must be called prior to following function\n    this._renderLines(calendarModel, rangeData, orient, group);\n    this._renderYearText(calendarModel, rangeData, orient, group);\n    this._renderMonthText(calendarModel, localeModel, orient, group);\n    this._renderWeekText(calendarModel, localeModel, rangeData, orient, group);\n  };\n  // render day rect\n  CalendarView.prototype._renderDayRect = function (calendarModel, rangeData, group) {\n    var coordSys = calendarModel.coordinateSystem;\n    var itemRectStyleModel = calendarModel.getModel('itemStyle').getItemStyle();\n    var sw = coordSys.getCellWidth();\n    var sh = coordSys.getCellHeight();\n    for (var i = rangeData.start.time; i <= rangeData.end.time; i = coordSys.getNextNDay(i, 1).time) {\n      var point = coordSys.dataToCalendarLayout([i], false).tl;\n      // every rect\n      var rect = new graphic.Rect({\n        shape: {\n          x: point[0],\n          y: point[1],\n          width: sw,\n          height: sh\n        },\n        cursor: 'default',\n        style: itemRectStyleModel\n      });\n      group.add(rect);\n    }\n  };\n  // render separate line\n  CalendarView.prototype._renderLines = function (calendarModel, rangeData, orient, group) {\n    var self = this;\n    var coordSys = calendarModel.coordinateSystem;\n    var lineStyleModel = calendarModel.getModel(['splitLine', 'lineStyle']).getLineStyle();\n    var show = calendarModel.get(['splitLine', 'show']);\n    var lineWidth = lineStyleModel.lineWidth;\n    this._tlpoints = [];\n    this._blpoints = [];\n    this._firstDayOfMonth = [];\n    this._firstDayPoints = [];\n    var firstDay = rangeData.start;\n    for (var i = 0; firstDay.time <= rangeData.end.time; i++) {\n      addPoints(firstDay.formatedDate);\n      if (i === 0) {\n        firstDay = coordSys.getDateInfo(rangeData.start.y + '-' + rangeData.start.m);\n      }\n      var date = firstDay.date;\n      date.setMonth(date.getMonth() + 1);\n      firstDay = coordSys.getDateInfo(date);\n    }\n    addPoints(coordSys.getNextNDay(rangeData.end.time, 1).formatedDate);\n    function addPoints(date) {\n      self._firstDayOfMonth.push(coordSys.getDateInfo(date));\n      self._firstDayPoints.push(coordSys.dataToCalendarLayout([date], false).tl);\n      var points = self._getLinePointsOfOneWeek(calendarModel, date, orient);\n      self._tlpoints.push(points[0]);\n      self._blpoints.push(points[points.length - 1]);\n      show && self._drawSplitline(points, lineStyleModel, group);\n    }\n    // render top/left line\n    show && this._drawSplitline(self._getEdgesPoints(self._tlpoints, lineWidth, orient), lineStyleModel, group);\n    // render bottom/right line\n    show && this._drawSplitline(self._getEdgesPoints(self._blpoints, lineWidth, orient), lineStyleModel, group);\n  };\n  // get points at both ends\n  CalendarView.prototype._getEdgesPoints = function (points, lineWidth, orient) {\n    var rs = [points[0].slice(), points[points.length - 1].slice()];\n    var idx = orient === 'horizontal' ? 0 : 1;\n    // both ends of the line are extend half lineWidth\n    rs[0][idx] = rs[0][idx] - lineWidth / 2;\n    rs[1][idx] = rs[1][idx] + lineWidth / 2;\n    return rs;\n  };\n  // render split line\n  CalendarView.prototype._drawSplitline = function (points, lineStyle, group) {\n    var poyline = new graphic.Polyline({\n      z2: 20,\n      shape: {\n        points: points\n      },\n      style: lineStyle\n    });\n    group.add(poyline);\n  };\n  // render month line of one week points\n  CalendarView.prototype._getLinePointsOfOneWeek = function (calendarModel, date, orient) {\n    var coordSys = calendarModel.coordinateSystem;\n    var parsedDate = coordSys.getDateInfo(date);\n    var points = [];\n    for (var i = 0; i < 7; i++) {\n      var tmpD = coordSys.getNextNDay(parsedDate.time, i);\n      var point = coordSys.dataToCalendarLayout([tmpD.time], false);\n      points[2 * tmpD.day] = point.tl;\n      points[2 * tmpD.day + 1] = point[orient === 'horizontal' ? 'bl' : 'tr'];\n    }\n    return points;\n  };\n  CalendarView.prototype._formatterLabel = function (formatter, params) {\n    if (isString(formatter) && formatter) {\n      return formatTplSimple(formatter, params);\n    }\n    if (isFunction(formatter)) {\n      return formatter(params);\n    }\n    return params.nameMap;\n  };\n  CalendarView.prototype._yearTextPositionControl = function (textEl, point, orient, position, margin) {\n    var x = point[0];\n    var y = point[1];\n    var aligns = ['center', 'bottom'];\n    if (position === 'bottom') {\n      y += margin;\n      aligns = ['center', 'top'];\n    } else if (position === 'left') {\n      x -= margin;\n    } else if (position === 'right') {\n      x += margin;\n      aligns = ['center', 'top'];\n    } else {\n      // top\n      y -= margin;\n    }\n    var rotate = 0;\n    if (position === 'left' || position === 'right') {\n      rotate = Math.PI / 2;\n    }\n    return {\n      rotation: rotate,\n      x: x,\n      y: y,\n      style: {\n        align: aligns[0],\n        verticalAlign: aligns[1]\n      }\n    };\n  };\n  // render year\n  CalendarView.prototype._renderYearText = function (calendarModel, rangeData, orient, group) {\n    var yearLabel = calendarModel.getModel('yearLabel');\n    if (!yearLabel.get('show')) {\n      return;\n    }\n    var margin = yearLabel.get('margin');\n    var pos = yearLabel.get('position');\n    if (!pos) {\n      pos = orient !== 'horizontal' ? 'top' : 'left';\n    }\n    var points = [this._tlpoints[this._tlpoints.length - 1], this._blpoints[0]];\n    var xc = (points[0][0] + points[1][0]) / 2;\n    var yc = (points[0][1] + points[1][1]) / 2;\n    var idx = orient === 'horizontal' ? 0 : 1;\n    var posPoints = {\n      top: [xc, points[idx][1]],\n      bottom: [xc, points[1 - idx][1]],\n      left: [points[1 - idx][0], yc],\n      right: [points[idx][0], yc]\n    };\n    var name = rangeData.start.y;\n    if (+rangeData.end.y > +rangeData.start.y) {\n      name = name + '-' + rangeData.end.y;\n    }\n    var formatter = yearLabel.get('formatter');\n    var params = {\n      start: rangeData.start.y,\n      end: rangeData.end.y,\n      nameMap: name\n    };\n    var content = this._formatterLabel(formatter, params);\n    var yearText = new graphic.Text({\n      z2: 30,\n      style: createTextStyle(yearLabel, {\n        text: content\n      }),\n      silent: yearLabel.get('silent')\n    });\n    yearText.attr(this._yearTextPositionControl(yearText, posPoints[pos], orient, pos, margin));\n    group.add(yearText);\n  };\n  CalendarView.prototype._monthTextPositionControl = function (point, isCenter, orient, position, margin) {\n    var align = 'left';\n    var vAlign = 'top';\n    var x = point[0];\n    var y = point[1];\n    if (orient === 'horizontal') {\n      y = y + margin;\n      if (isCenter) {\n        align = 'center';\n      }\n      if (position === 'start') {\n        vAlign = 'bottom';\n      }\n    } else {\n      x = x + margin;\n      if (isCenter) {\n        vAlign = 'middle';\n      }\n      if (position === 'start') {\n        align = 'right';\n      }\n    }\n    return {\n      x: x,\n      y: y,\n      align: align,\n      verticalAlign: vAlign\n    };\n  };\n  // render month and year text\n  CalendarView.prototype._renderMonthText = function (calendarModel, localeModel, orient, group) {\n    var monthLabel = calendarModel.getModel('monthLabel');\n    if (!monthLabel.get('show')) {\n      return;\n    }\n    var nameMap = monthLabel.get('nameMap');\n    var margin = monthLabel.get('margin');\n    var pos = monthLabel.get('position');\n    var align = monthLabel.get('align');\n    var termPoints = [this._tlpoints, this._blpoints];\n    if (!nameMap || isString(nameMap)) {\n      if (nameMap) {\n        // case-sensitive\n        localeModel = getLocaleModel(nameMap) || localeModel;\n      }\n      // PENDING\n      // for ZH locale, original form is `` but current form is `1`\n      nameMap = localeModel.get(['time', 'monthAbbr']) || [];\n    }\n    var idx = pos === 'start' ? 0 : 1;\n    var axis = orient === 'horizontal' ? 0 : 1;\n    margin = pos === 'start' ? -margin : margin;\n    var isCenter = align === 'center';\n    var labelSilent = monthLabel.get('silent');\n    for (var i = 0; i < termPoints[idx].length - 1; i++) {\n      var tmp = termPoints[idx][i].slice();\n      var firstDay = this._firstDayOfMonth[i];\n      if (isCenter) {\n        var firstDayPoints = this._firstDayPoints[i];\n        tmp[axis] = (firstDayPoints[axis] + termPoints[0][i + 1][axis]) / 2;\n      }\n      var formatter = monthLabel.get('formatter');\n      var name_1 = nameMap[+firstDay.m - 1];\n      var params = {\n        yyyy: firstDay.y,\n        yy: (firstDay.y + '').slice(2),\n        MM: firstDay.m,\n        M: +firstDay.m,\n        nameMap: name_1\n      };\n      var content = this._formatterLabel(formatter, params);\n      var monthText = new graphic.Text({\n        z2: 30,\n        style: extend(createTextStyle(monthLabel, {\n          text: content\n        }), this._monthTextPositionControl(tmp, isCenter, orient, pos, margin)),\n        silent: labelSilent\n      });\n      group.add(monthText);\n    }\n  };\n  CalendarView.prototype._weekTextPositionControl = function (point, orient, position, margin, cellSize) {\n    var align = 'center';\n    var vAlign = 'middle';\n    var x = point[0];\n    var y = point[1];\n    var isStart = position === 'start';\n    if (orient === 'horizontal') {\n      x = x + margin + (isStart ? 1 : -1) * cellSize[0] / 2;\n      align = isStart ? 'right' : 'left';\n    } else {\n      y = y + margin + (isStart ? 1 : -1) * cellSize[1] / 2;\n      vAlign = isStart ? 'bottom' : 'top';\n    }\n    return {\n      x: x,\n      y: y,\n      align: align,\n      verticalAlign: vAlign\n    };\n  };\n  // render weeks\n  CalendarView.prototype._renderWeekText = function (calendarModel, localeModel, rangeData, orient, group) {\n    var dayLabel = calendarModel.getModel('dayLabel');\n    if (!dayLabel.get('show')) {\n      return;\n    }\n    var coordSys = calendarModel.coordinateSystem;\n    var pos = dayLabel.get('position');\n    var nameMap = dayLabel.get('nameMap');\n    var margin = dayLabel.get('margin');\n    var firstDayOfWeek = coordSys.getFirstDayOfWeek();\n    if (!nameMap || isString(nameMap)) {\n      if (nameMap) {\n        // case-sensitive\n        localeModel = getLocaleModel(nameMap) || localeModel;\n      }\n      // Use the first letter of `dayOfWeekAbbr` if `dayOfWeekShort` doesn't exist in the locale file\n      var dayOfWeekShort = localeModel.get(['time', 'dayOfWeekShort']);\n      nameMap = dayOfWeekShort || map(localeModel.get(['time', 'dayOfWeekAbbr']), function (val) {\n        return val[0];\n      });\n    }\n    var start = coordSys.getNextNDay(rangeData.end.time, 7 - rangeData.lweek).time;\n    var cellSize = [coordSys.getCellWidth(), coordSys.getCellHeight()];\n    margin = parsePercent(margin, Math.min(cellSize[1], cellSize[0]));\n    if (pos === 'start') {\n      start = coordSys.getNextNDay(rangeData.start.time, -(7 + rangeData.fweek)).time;\n      margin = -margin;\n    }\n    var labelSilent = dayLabel.get('silent');\n    for (var i = 0; i < 7; i++) {\n      var tmpD = coordSys.getNextNDay(start, i);\n      var point = coordSys.dataToCalendarLayout([tmpD.time], false).center;\n      var day = i;\n      day = Math.abs((i + firstDayOfWeek) % 7);\n      var weekText = new graphic.Text({\n        z2: 30,\n        style: extend(createTextStyle(dayLabel, {\n          text: nameMap[day]\n        }), this._weekTextPositionControl(point, orient, pos, margin, cellSize)),\n        silent: labelSilent\n      });\n      group.add(weekText);\n    }\n  };\n  CalendarView.type = 'calendar';\n  return CalendarView;\n}(ComponentView);\nexport default CalendarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as layout from '../../util/layout.js';\nimport * as numberUtil from '../../util/number.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { expandOrShrinkRect } from '../../util/graphic.js';\nimport { injectCoordSysByOption, simpleCoordSysInjectionProvider } from '../../core/CoordinateSystem.js';\n// (24*60*60*1000)\nvar PROXIMATE_ONE_DAY = 86400000;\nvar Calendar = /** @class */function () {\n  function Calendar(calendarModel, ecModel, api) {\n    this.type = 'calendar';\n    this.dimensions = Calendar.dimensions;\n    // Required in createListFromData\n    this.getDimensionsInfo = Calendar.getDimensionsInfo;\n    this._model = calendarModel;\n    this._update(ecModel, api);\n  }\n  Calendar.getDimensionsInfo = function () {\n    return [{\n      name: 'time',\n      type: 'time'\n    }, 'value'];\n  };\n  Calendar.prototype.getRangeInfo = function () {\n    return this._rangeInfo;\n  };\n  Calendar.prototype.getModel = function () {\n    return this._model;\n  };\n  Calendar.prototype.getRect = function () {\n    return this._rect;\n  };\n  Calendar.prototype.getCellWidth = function () {\n    return this._sw;\n  };\n  Calendar.prototype.getCellHeight = function () {\n    return this._sh;\n  };\n  Calendar.prototype.getOrient = function () {\n    return this._orient;\n  };\n  /**\n   * getFirstDayOfWeek\n   *\n   * @example\n   *     0 : start at Sunday\n   *     1 : start at Monday\n   *\n   * @return {number}\n   */\n  Calendar.prototype.getFirstDayOfWeek = function () {\n    return this._firstDayOfWeek;\n  };\n  /**\n   * get date info\n   * }\n   */\n  Calendar.prototype.getDateInfo = function (date) {\n    date = numberUtil.parseDate(date);\n    var y = date.getFullYear();\n    var m = date.getMonth() + 1;\n    var mStr = m < 10 ? '0' + m : '' + m;\n    var d = date.getDate();\n    var dStr = d < 10 ? '0' + d : '' + d;\n    var day = date.getDay();\n    day = Math.abs((day + 7 - this.getFirstDayOfWeek()) % 7);\n    return {\n      y: y + '',\n      m: mStr,\n      d: dStr,\n      day: day,\n      time: date.getTime(),\n      formatedDate: y + '-' + mStr + '-' + dStr,\n      date: date\n    };\n  };\n  Calendar.prototype.getNextNDay = function (date, n) {\n    n = n || 0;\n    if (n === 0) {\n      return this.getDateInfo(date);\n    }\n    date = new Date(this.getDateInfo(date).time);\n    date.setDate(date.getDate() + n);\n    return this.getDateInfo(date);\n  };\n  Calendar.prototype._update = function (ecModel, api) {\n    this._firstDayOfWeek = +this._model.getModel('dayLabel').get('firstDay');\n    this._orient = this._model.get('orient');\n    this._lineWidth = this._model.getModel('itemStyle').getItemStyle().lineWidth || 0;\n    this._rangeInfo = this._getRangeInfo(this._initRangeOption());\n    var weeks = this._rangeInfo.weeks || 1;\n    var whNames = ['width', 'height'];\n    var cellSize = this._model.getCellSize().slice();\n    var layoutParams = this._model.getBoxLayoutParams();\n    var cellNumbers = this._orient === 'horizontal' ? [weeks, 7] : [7, weeks];\n    zrUtil.each([0, 1], function (idx) {\n      if (cellSizeSpecified(cellSize, idx)) {\n        layoutParams[whNames[idx]] = cellSize[idx] * cellNumbers[idx];\n      }\n    });\n    var whGlobal = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var calendarRect = this._rect = layout.getLayoutRect(layoutParams, whGlobal);\n    zrUtil.each([0, 1], function (idx) {\n      if (!cellSizeSpecified(cellSize, idx)) {\n        cellSize[idx] = calendarRect[whNames[idx]] / cellNumbers[idx];\n      }\n    });\n    function cellSizeSpecified(cellSize, idx) {\n      return cellSize[idx] != null && cellSize[idx] !== 'auto';\n    }\n    // Has been calculated out number.\n    this._sw = cellSize[0];\n    this._sh = cellSize[1];\n  };\n  /**\n   * Convert a time data(time, value) item to (x, y) point.\n   */\n  // TODO Clamp of calendar is not same with cartesian coordinate systems.\n  // It will return NaN if data exceeds.\n  Calendar.prototype.dataToPoint = function (data, clamp, out) {\n    out = out || [];\n    zrUtil.isArray(data) && (data = data[0]);\n    clamp == null && (clamp = true);\n    var dayInfo = this.getDateInfo(data);\n    var range = this._rangeInfo;\n    var date = dayInfo.formatedDate;\n    // if not in range return [NaN, NaN]\n    if (clamp && !(dayInfo.time >= range.start.time && dayInfo.time < range.end.time + PROXIMATE_ONE_DAY)) {\n      out[0] = out[1] = NaN;\n      return out;\n    }\n    var week = dayInfo.day;\n    var nthWeek = this._getRangeInfo([range.start.time, date]).nthWeek;\n    if (this._orient === 'vertical') {\n      out[0] = this._rect.x + week * this._sw + this._sw / 2;\n      out[1] = this._rect.y + nthWeek * this._sh + this._sh / 2;\n    } else {\n      out[0] = this._rect.x + nthWeek * this._sw + this._sw / 2;\n      out[1] = this._rect.y + week * this._sh + this._sh / 2;\n    }\n    return out;\n  };\n  /**\n   * Convert a (x, y) point to time data\n   */\n  Calendar.prototype.pointToData = function (point) {\n    var date = this.pointToDate(point);\n    return date && date.time;\n  };\n  Calendar.prototype.dataToLayout = function (data, clamp, out) {\n    out = out || {};\n    var rect = out.rect = out.rect || {};\n    var contentRect = out.contentRect = out.contentRect || {};\n    var point = this.dataToPoint(data, clamp);\n    rect.x = point[0] - this._sw / 2;\n    rect.y = point[1] - this._sh / 2;\n    rect.width = this._sw;\n    rect.height = this._sh;\n    BoundingRect.copy(contentRect, rect);\n    expandOrShrinkRect(contentRect, this._lineWidth / 2, true, true);\n    return out;\n  };\n  /**\n   * Convert a time date item to (x, y) four point.\n   */\n  Calendar.prototype.dataToCalendarLayout = function (data, clamp) {\n    var point = this.dataToPoint(data, clamp);\n    return {\n      center: point,\n      tl: [point[0] - this._sw / 2, point[1] - this._sh / 2],\n      tr: [point[0] + this._sw / 2, point[1] - this._sh / 2],\n      br: [point[0] + this._sw / 2, point[1] + this._sh / 2],\n      bl: [point[0] - this._sw / 2, point[1] + this._sh / 2]\n    };\n  };\n  /**\n   * Convert a (x, y) point to time date\n   *\n   * @param  {Array} point point\n   * @return {Object}       date\n   */\n  Calendar.prototype.pointToDate = function (point) {\n    var nthX = Math.floor((point[0] - this._rect.x) / this._sw) + 1;\n    var nthY = Math.floor((point[1] - this._rect.y) / this._sh) + 1;\n    var range = this._rangeInfo.range;\n    if (this._orient === 'vertical') {\n      return this._getDateByWeeksAndDay(nthY, nthX - 1, range);\n    }\n    return this._getDateByWeeksAndDay(nthX, nthY - 1, range);\n  };\n  Calendar.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.dataToPoint(value) : null;\n  };\n  Calendar.prototype.convertToLayout = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.dataToLayout(value) : null;\n  };\n  Calendar.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.pointToData(pixel) : null;\n  };\n  Calendar.prototype.containPoint = function (point) {\n    console.warn('Not implemented.');\n    return false;\n  };\n  /**\n   * initRange\n   * Normalize to an [start, end] array\n   */\n  Calendar.prototype._initRangeOption = function () {\n    var range = this._model.get('range');\n    var normalizedRange;\n    // Convert [1990] to 1990\n    if (zrUtil.isArray(range) && range.length === 1) {\n      range = range[0];\n    }\n    if (!zrUtil.isArray(range)) {\n      var rangeStr = range.toString();\n      // One year.\n      if (/^\\d{4}$/.test(rangeStr)) {\n        normalizedRange = [rangeStr + '-01-01', rangeStr + '-12-31'];\n      }\n      // One month\n      if (/^\\d{4}[\\/|-]\\d{1,2}$/.test(rangeStr)) {\n        var start = this.getDateInfo(rangeStr);\n        var firstDay = start.date;\n        firstDay.setMonth(firstDay.getMonth() + 1);\n        var end = this.getNextNDay(firstDay, -1);\n        normalizedRange = [start.formatedDate, end.formatedDate];\n      }\n      // One day\n      if (/^\\d{4}[\\/|-]\\d{1,2}[\\/|-]\\d{1,2}$/.test(rangeStr)) {\n        normalizedRange = [rangeStr, rangeStr];\n      }\n    } else {\n      normalizedRange = range;\n    }\n    if (!normalizedRange) {\n      if (process.env.NODE_ENV !== 'production') {\n        zrUtil.logError('Invalid date range.');\n      }\n      // Not handling it.\n      return range;\n    }\n    var tmp = this._getRangeInfo(normalizedRange);\n    if (tmp.start.time > tmp.end.time) {\n      normalizedRange.reverse();\n    }\n    return normalizedRange;\n  };\n  /**\n   * range info\n   *\n   * @private\n   * @param  {Array} range range ['2017-01-01', '2017-07-08']\n   *  If range[0] > range[1], they will not be reversed.\n   * @return {Object}       obj\n   */\n  Calendar.prototype._getRangeInfo = function (range) {\n    var parsedRange = [this.getDateInfo(range[0]), this.getDateInfo(range[1])];\n    var reversed;\n    if (parsedRange[0].time > parsedRange[1].time) {\n      reversed = true;\n      parsedRange.reverse();\n    }\n    var allDay = Math.floor(parsedRange[1].time / PROXIMATE_ONE_DAY) - Math.floor(parsedRange[0].time / PROXIMATE_ONE_DAY) + 1;\n    // Consider case1 (#11677 #10430):\n    // Set the system timezone as \"UK\", set the range to `['2016-07-01', '2016-12-31']`\n    // Consider case2:\n    // Firstly set system timezone as \"Time Zone: America/Toronto\",\n    // ```\n    // let first = new Date(1478412000000 - 3600 * 1000 * 2.5);\n    // let second = new Date(1478412000000);\n    // let allDays = Math.floor(second / ONE_DAY) - Math.floor(first / ONE_DAY) + 1;\n    // ```\n    // will get wrong result because of DST. So we should fix it.\n    var date = new Date(parsedRange[0].time);\n    var startDateNum = date.getDate();\n    var endDateNum = parsedRange[1].date.getDate();\n    date.setDate(startDateNum + allDay - 1);\n    // The bias can not over a month, so just compare date.\n    var dateNum = date.getDate();\n    if (dateNum !== endDateNum) {\n      var sign = date.getTime() - parsedRange[1].time > 0 ? 1 : -1;\n      while ((dateNum = date.getDate()) !== endDateNum && (date.getTime() - parsedRange[1].time) * sign > 0) {\n        allDay -= sign;\n        date.setDate(dateNum - sign);\n      }\n    }\n    var weeks = Math.floor((allDay + parsedRange[0].day + 6) / 7);\n    var nthWeek = reversed ? -weeks + 1 : weeks - 1;\n    reversed && parsedRange.reverse();\n    return {\n      range: [parsedRange[0].formatedDate, parsedRange[1].formatedDate],\n      start: parsedRange[0],\n      end: parsedRange[1],\n      allDay: allDay,\n      weeks: weeks,\n      // From 0.\n      nthWeek: nthWeek,\n      fweek: parsedRange[0].day,\n      lweek: parsedRange[1].day\n    };\n  };\n  /**\n   * get date by nthWeeks and week day in range\n   *\n   * @private\n   * @param  {number} nthWeek the week\n   * @param  {number} day   the week day\n   * @param  {Array} range [d1, d2]\n   * @return {Object}\n   */\n  Calendar.prototype._getDateByWeeksAndDay = function (nthWeek, day, range) {\n    var rangeInfo = this._getRangeInfo(range);\n    if (nthWeek > rangeInfo.weeks || nthWeek === 0 && day < rangeInfo.fweek || nthWeek === rangeInfo.weeks && day > rangeInfo.lweek) {\n      return null;\n    }\n    var nthDay = (nthWeek - 1) * 7 - rangeInfo.fweek + day;\n    var date = new Date(rangeInfo.start.time);\n    date.setDate(+rangeInfo.start.d + nthDay);\n    return this.getDateInfo(date);\n  };\n  Calendar.create = function (ecModel, api) {\n    var calendarList = [];\n    ecModel.eachComponent('calendar', function (calendarModel) {\n      var calendar = new Calendar(calendarModel, ecModel, api);\n      calendarList.push(calendar);\n      calendarModel.coordinateSystem = calendar;\n    });\n    // Inject coordinate system\n    ecModel.eachComponent(function (mainType, componentModel) {\n      injectCoordSysByOption({\n        targetModel: componentModel,\n        coordSysType: 'calendar',\n        coordSysProvider: simpleCoordSysInjectionProvider\n      });\n    });\n    return calendarList;\n  };\n  Calendar.dimensions = ['time', 'value'];\n  return Calendar;\n}();\nfunction getCoordSys(finder) {\n  var calendarModel = finder.calendarModel;\n  var seriesModel = finder.seriesModel;\n  var coordSys = calendarModel ? calendarModel.coordinateSystem : seriesModel ? seriesModel.coordinateSystem : null;\n  return coordSys;\n}\nexport default Calendar;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CalendarModel from '../../coord/calendar/CalendarModel.js';\nimport CalendarView from './CalendarView.js';\nimport Calendar from '../../coord/calendar/Calendar.js';\nexport function install(registers) {\n  registers.registerComponentModel(CalendarModel);\n  registers.registerComponentView(CalendarView);\n  registers.registerCoordinateSystem('calendar', Calendar);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\nimport ComponentModel from '../../model/Component.js';\nimport { copyLayoutParams, mergeLayoutParam } from '../../util/layout.js';\n;\n;\n;\nexport function setKeyInfoToNewElOption(resultItem, newElOption) {\n  var existElOption = resultItem.existing;\n  // Set id and type after id assigned.\n  newElOption.id = resultItem.keyInfo.id;\n  !newElOption.type && existElOption && (newElOption.type = existElOption.type);\n  // Set parent id if not specified\n  if (newElOption.parentId == null) {\n    var newElParentOption = newElOption.parentOption;\n    if (newElParentOption) {\n      newElOption.parentId = newElParentOption.id;\n    } else if (existElOption) {\n      newElOption.parentId = existElOption.parentId;\n    }\n  }\n  // Clear\n  newElOption.parentOption = null;\n}\nfunction isSetLoc(obj, props) {\n  var isSet;\n  zrUtil.each(props, function (prop) {\n    obj[prop] != null && obj[prop] !== 'auto' && (isSet = true);\n  });\n  return isSet;\n}\nfunction mergeNewElOptionToExist(existList, index, newElOption) {\n  // Update existing options, for `getOption` feature.\n  var newElOptCopy = zrUtil.extend({}, newElOption);\n  var existElOption = existList[index];\n  var $action = newElOption.$action || 'merge';\n  if ($action === 'merge') {\n    if (existElOption) {\n      if (process.env.NODE_ENV !== 'production') {\n        var newType = newElOption.type;\n        zrUtil.assert(!newType || existElOption.type === newType, 'Please set $action: \"replace\" to change `type`');\n      }\n      // We can ensure that newElOptCopy and existElOption are not\n      // the same object, so `merge` will not change newElOptCopy.\n      zrUtil.merge(existElOption, newElOptCopy, true);\n      // Rigid body, use ignoreSize.\n      mergeLayoutParam(existElOption, newElOptCopy, {\n        ignoreSize: true\n      });\n      // Will be used in render.\n      copyLayoutParams(newElOption, existElOption);\n      // Copy transition info to new option so it can be used in the transition.\n      // DO IT AFTER merge\n      copyTransitionInfo(newElOption, existElOption);\n      copyTransitionInfo(newElOption, existElOption, 'shape');\n      copyTransitionInfo(newElOption, existElOption, 'style');\n      copyTransitionInfo(newElOption, existElOption, 'extra');\n      // Copy clipPath\n      newElOption.clipPath = existElOption.clipPath;\n    } else {\n      existList[index] = newElOptCopy;\n    }\n  } else if ($action === 'replace') {\n    existList[index] = newElOptCopy;\n  } else if ($action === 'remove') {\n    // null will be cleaned later.\n    existElOption && (existList[index] = null);\n  }\n}\nvar TRANSITION_PROPS_TO_COPY = ['transition', 'enterFrom', 'leaveTo'];\nvar ROOT_TRANSITION_PROPS_TO_COPY = TRANSITION_PROPS_TO_COPY.concat(['enterAnimation', 'updateAnimation', 'leaveAnimation']);\nfunction copyTransitionInfo(target, source, targetProp) {\n  if (targetProp) {\n    if (!target[targetProp] && source[targetProp]) {\n      // TODO avoid creating this empty object when there is no transition configuration.\n      target[targetProp] = {};\n    }\n    target = target[targetProp];\n    source = source[targetProp];\n  }\n  if (!target || !source) {\n    return;\n  }\n  var props = targetProp ? TRANSITION_PROPS_TO_COPY : ROOT_TRANSITION_PROPS_TO_COPY;\n  for (var i = 0; i < props.length; i++) {\n    var prop = props[i];\n    if (target[prop] == null && source[prop] != null) {\n      target[prop] = source[prop];\n    }\n  }\n}\nfunction setLayoutInfoToExist(existItem, newElOption) {\n  if (!existItem) {\n    return;\n  }\n  existItem.hv = newElOption.hv = [\n  // Rigid body, don't care about `width`.\n  isSetLoc(newElOption, ['left', 'right']),\n  // Rigid body, don't care about `height`.\n  isSetLoc(newElOption, ['top', 'bottom'])];\n  // Give default group size. Otherwise layout error may occur.\n  if (existItem.type === 'group') {\n    var existingGroupOpt = existItem;\n    var newGroupOpt = newElOption;\n    existingGroupOpt.width == null && (existingGroupOpt.width = newGroupOpt.width = 0);\n    existingGroupOpt.height == null && (existingGroupOpt.height = newGroupOpt.height = 0);\n  }\n}\nvar GraphicComponentModel = /** @class */function (_super) {\n  __extends(GraphicComponentModel, _super);\n  function GraphicComponentModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GraphicComponentModel.type;\n    _this.preventAutoZ = true;\n    return _this;\n  }\n  GraphicComponentModel.prototype.mergeOption = function (option, ecModel) {\n    // Prevent default merge to elements\n    var elements = this.option.elements;\n    this.option.elements = null;\n    _super.prototype.mergeOption.call(this, option, ecModel);\n    this.option.elements = elements;\n  };\n  GraphicComponentModel.prototype.optionUpdated = function (newOption, isInit) {\n    var thisOption = this.option;\n    var newList = (isInit ? thisOption : newOption).elements;\n    var existList = thisOption.elements = isInit ? [] : thisOption.elements;\n    var flattenedList = [];\n    this._flatten(newList, flattenedList, null);\n    var mappingResult = modelUtil.mappingToExists(existList, flattenedList, 'normalMerge');\n    // Clear elOptionsToUpdate\n    var elOptionsToUpdate = this._elOptionsToUpdate = [];\n    zrUtil.each(mappingResult, function (resultItem, index) {\n      var newElOption = resultItem.newOption;\n      if (process.env.NODE_ENV !== 'production') {\n        zrUtil.assert(zrUtil.isObject(newElOption) || resultItem.existing, 'Empty graphic option definition');\n      }\n      if (!newElOption) {\n        return;\n      }\n      elOptionsToUpdate.push(newElOption);\n      setKeyInfoToNewElOption(resultItem, newElOption);\n      mergeNewElOptionToExist(existList, index, newElOption);\n      setLayoutInfoToExist(existList[index], newElOption);\n    }, this);\n    // Clean\n    thisOption.elements = zrUtil.filter(existList, function (item) {\n      // $action should be volatile, otherwise option gotten from\n      // `getOption` will contain unexpected $action.\n      item && delete item.$action;\n      return item != null;\n    });\n  };\n  /**\n   * Convert\n   * [{\n   *  type: 'group',\n   *  id: 'xx',\n   *  children: [{type: 'circle'}, {type: 'polygon'}]\n   * }]\n   * to\n   * [\n   *  {type: 'group', id: 'xx'},\n   *  {type: 'circle', parentId: 'xx'},\n   *  {type: 'polygon', parentId: 'xx'}\n   * ]\n   */\n  GraphicComponentModel.prototype._flatten = function (optionList, result, parentOption) {\n    zrUtil.each(optionList, function (option) {\n      if (!option) {\n        return;\n      }\n      if (parentOption) {\n        option.parentOption = parentOption;\n      }\n      result.push(option);\n      var children = option.children;\n      // here we don't judge if option.type is `group`\n      // when new option doesn't provide `type`, it will cause that the children can't be updated.\n      if (children && children.length) {\n        this._flatten(children, result, option);\n      }\n      // Deleting for JSON output, and for not affecting group creation.\n      delete option.children;\n    }, this);\n  };\n  // FIXME\n  // Pass to view using payload? setOption has a payload?\n  GraphicComponentModel.prototype.useElOptionsToUpdate = function () {\n    var els = this._elOptionsToUpdate;\n    // Clear to avoid render duplicately when zooming.\n    this._elOptionsToUpdate = null;\n    return els;\n  };\n  GraphicComponentModel.type = 'graphic';\n  GraphicComponentModel.defaultOption = {\n    elements: []\n    // parentId: null\n  };\n  return GraphicComponentModel;\n}(ComponentModel);\nexport { GraphicComponentModel };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nimport * as modelUtil from '../../util/model.js';\nimport * as graphicUtil from '../../util/graphic.js';\nimport * as layoutUtil from '../../util/layout.js';\nimport { parsePercent } from '../../util/number.js';\nimport ComponentView from '../../view/Component.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { isEC4CompatibleStyle, convertFromEC4CompatibleStyle } from '../../util/styleCompat.js';\nimport { applyLeaveTransition, applyUpdateTransition, isTransitionAll, updateLeaveTo } from '../../animation/customGraphicTransition.js';\nimport { updateProps } from '../../animation/basicTransition.js';\nimport { applyKeyframeAnimation, stopPreviousKeyframeAnimationAndRestore } from '../../animation/customGraphicKeyframeAnimation.js';\nvar nonShapeGraphicElements = {\n  // Reserved but not supported in graphic component.\n  path: null,\n  compoundPath: null,\n  // Supported in graphic component.\n  group: graphicUtil.Group,\n  image: graphicUtil.Image,\n  text: graphicUtil.Text\n};\nexport var inner = modelUtil.makeInner();\n// ------------------------\n// View\n// ------------------------\nvar GraphicComponentView = /** @class */function (_super) {\n  __extends(GraphicComponentView, _super);\n  function GraphicComponentView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GraphicComponentView.type;\n    return _this;\n  }\n  GraphicComponentView.prototype.init = function () {\n    this._elMap = zrUtil.createHashMap();\n  };\n  GraphicComponentView.prototype.render = function (graphicModel, ecModel, api) {\n    // Having leveraged between use cases and algorithm complexity, a very\n    // simple layout mechanism is used:\n    // The size(width/height) can be determined by itself or its parent (not\n    // implemented yet), but can not by its children. (Top-down travel)\n    // The location(x/y) can be determined by the bounding rect of itself\n    // (can including its descendants or not) and the size of its parent.\n    // (Bottom-up travel)\n    // When `chart.clear()` or `chart.setOption({...}, true)` with the same id,\n    // view will be reused.\n    if (graphicModel !== this._lastGraphicModel) {\n      this._clear();\n    }\n    this._lastGraphicModel = graphicModel;\n    this._updateElements(graphicModel);\n    this._relocate(graphicModel, api);\n  };\n  /**\n   * Update graphic elements.\n   */\n  GraphicComponentView.prototype._updateElements = function (graphicModel) {\n    var elOptionsToUpdate = graphicModel.useElOptionsToUpdate();\n    if (!elOptionsToUpdate) {\n      return;\n    }\n    var elMap = this._elMap;\n    var rootGroup = this.group;\n    var globalZ = graphicModel.get('z');\n    var globalZLevel = graphicModel.get('zlevel');\n    // Top-down tranverse to assign graphic settings to each elements.\n    zrUtil.each(elOptionsToUpdate, function (elOption) {\n      var id = modelUtil.convertOptionIdName(elOption.id, null);\n      var elExisting = id != null ? elMap.get(id) : null;\n      var parentId = modelUtil.convertOptionIdName(elOption.parentId, null);\n      var targetElParent = parentId != null ? elMap.get(parentId) : rootGroup;\n      var elType = elOption.type;\n      var elOptionStyle = elOption.style;\n      if (elType === 'text' && elOptionStyle) {\n        // In top/bottom mode, textVerticalAlign should not be used, which cause\n        // inaccurately locating.\n        if (elOption.hv && elOption.hv[1]) {\n          elOptionStyle.textVerticalAlign = elOptionStyle.textBaseline = elOptionStyle.verticalAlign = elOptionStyle.align = null;\n        }\n      }\n      var textContentOption = elOption.textContent;\n      var textConfig = elOption.textConfig;\n      if (elOptionStyle && isEC4CompatibleStyle(elOptionStyle, elType, !!textConfig, !!textContentOption)) {\n        var convertResult = convertFromEC4CompatibleStyle(elOptionStyle, elType, true);\n        if (!textConfig && convertResult.textConfig) {\n          textConfig = elOption.textConfig = convertResult.textConfig;\n        }\n        if (!textContentOption && convertResult.textContent) {\n          textContentOption = convertResult.textContent;\n        }\n      }\n      // Remove unnecessary props to avoid potential problems.\n      var elOptionCleaned = getCleanedElOption(elOption);\n      // For simple, do not support parent change, otherwise reorder is needed.\n      if (process.env.NODE_ENV !== 'production') {\n        elExisting && zrUtil.assert(targetElParent === elExisting.parent, 'Changing parent is not supported.');\n      }\n      var $action = elOption.$action || 'merge';\n      var isMerge = $action === 'merge';\n      var isReplace = $action === 'replace';\n      if (isMerge) {\n        var isInit = !elExisting;\n        var el_1 = elExisting;\n        if (isInit) {\n          el_1 = createEl(id, targetElParent, elOption.type, elMap);\n        } else {\n          el_1 && (inner(el_1).isNew = false);\n          // Stop and restore before update any other attributes.\n          stopPreviousKeyframeAnimationAndRestore(el_1);\n        }\n        if (el_1) {\n          applyUpdateTransition(el_1, elOptionCleaned, graphicModel, {\n            isInit: isInit\n          });\n          updateCommonAttrs(el_1, elOption, globalZ, globalZLevel);\n        }\n      } else if (isReplace) {\n        removeEl(elExisting, elOption, elMap, graphicModel);\n        var el_2 = createEl(id, targetElParent, elOption.type, elMap);\n        if (el_2) {\n          applyUpdateTransition(el_2, elOptionCleaned, graphicModel, {\n            isInit: true\n          });\n          updateCommonAttrs(el_2, elOption, globalZ, globalZLevel);\n        }\n      } else if ($action === 'remove') {\n        updateLeaveTo(elExisting, elOption);\n        removeEl(elExisting, elOption, elMap, graphicModel);\n      }\n      var el = elMap.get(id);\n      if (el && textContentOption) {\n        if (isMerge) {\n          var textContentExisting = el.getTextContent();\n          textContentExisting ? textContentExisting.attr(textContentOption) : el.setTextContent(new graphicUtil.Text(textContentOption));\n        } else if (isReplace) {\n          el.setTextContent(new graphicUtil.Text(textContentOption));\n        }\n      }\n      if (el) {\n        var clipPathOption = elOption.clipPath;\n        if (clipPathOption) {\n          var clipPathType = clipPathOption.type;\n          var clipPath = void 0;\n          var isInit = false;\n          if (isMerge) {\n            var oldClipPath = el.getClipPath();\n            isInit = !oldClipPath || inner(oldClipPath).type !== clipPathType;\n            clipPath = isInit ? newEl(clipPathType) : oldClipPath;\n          } else if (isReplace) {\n            isInit = true;\n            clipPath = newEl(clipPathType);\n          }\n          el.setClipPath(clipPath);\n          applyUpdateTransition(clipPath, clipPathOption, graphicModel, {\n            isInit: isInit\n          });\n          applyKeyframeAnimation(clipPath, clipPathOption.keyframeAnimation, graphicModel);\n        }\n        var elInner = inner(el);\n        el.setTextConfig(textConfig);\n        elInner.option = elOption;\n        setEventData(el, graphicModel, elOption);\n        graphicUtil.setTooltipConfig({\n          el: el,\n          componentModel: graphicModel,\n          itemName: el.name,\n          itemTooltipOption: elOption.tooltip\n        });\n        applyKeyframeAnimation(el, elOption.keyframeAnimation, graphicModel);\n      }\n    });\n  };\n  /**\n   * Locate graphic elements.\n   */\n  GraphicComponentView.prototype._relocate = function (graphicModel, api) {\n    var elOptions = graphicModel.option.elements;\n    var rootGroup = this.group;\n    var elMap = this._elMap;\n    var apiWidth = api.getWidth();\n    var apiHeight = api.getHeight();\n    var xy = ['x', 'y'];\n    // Top-down to calculate percentage width/height of group\n    for (var i = 0; i < elOptions.length; i++) {\n      var elOption = elOptions[i];\n      var id = modelUtil.convertOptionIdName(elOption.id, null);\n      var el = id != null ? elMap.get(id) : null;\n      if (!el || !el.isGroup) {\n        continue;\n      }\n      var parentEl = el.parent;\n      var isParentRoot = parentEl === rootGroup;\n      // Like 'position:absolut' in css, default 0.\n      var elInner = inner(el);\n      var parentElInner = inner(parentEl);\n      elInner.width = parsePercent(elInner.option.width, isParentRoot ? apiWidth : parentElInner.width) || 0;\n      elInner.height = parsePercent(elInner.option.height, isParentRoot ? apiHeight : parentElInner.height) || 0;\n    }\n    // Bottom-up tranvese all elements (consider ec resize) to locate elements.\n    for (var i = elOptions.length - 1; i >= 0; i--) {\n      var elOption = elOptions[i];\n      var id = modelUtil.convertOptionIdName(elOption.id, null);\n      var el = id != null ? elMap.get(id) : null;\n      if (!el) {\n        continue;\n      }\n      var parentEl = el.parent;\n      var parentElInner = inner(parentEl);\n      var containerInfo = parentEl === rootGroup ? {\n        width: apiWidth,\n        height: apiHeight\n      } : {\n        width: parentElInner.width,\n        height: parentElInner.height\n      };\n      // PENDING\n      // Currently, when `bounding: 'all'`, the union bounding rect of the group\n      // does not include the rect of [0, 0, group.width, group.height], which\n      // is probably weird for users. Should we make a break change for it?\n      var layoutPos = {};\n      var layouted = layoutUtil.positionElement(el, elOption, containerInfo, null, {\n        hv: elOption.hv,\n        boundingMode: elOption.bounding\n      }, layoutPos);\n      if (!inner(el).isNew && layouted) {\n        var transition = elOption.transition;\n        var animatePos = {};\n        for (var k = 0; k < xy.length; k++) {\n          var key = xy[k];\n          var val = layoutPos[key];\n          if (transition && (isTransitionAll(transition) || zrUtil.indexOf(transition, key) >= 0)) {\n            animatePos[key] = val;\n          } else {\n            el[key] = val;\n          }\n        }\n        updateProps(el, animatePos, graphicModel, 0);\n      } else {\n        el.attr(layoutPos);\n      }\n    }\n  };\n  /**\n   * Clear all elements.\n   */\n  GraphicComponentView.prototype._clear = function () {\n    var _this = this;\n    var elMap = this._elMap;\n    elMap.each(function (el) {\n      removeEl(el, inner(el).option, elMap, _this._lastGraphicModel);\n    });\n    this._elMap = zrUtil.createHashMap();\n  };\n  GraphicComponentView.prototype.dispose = function () {\n    this._clear();\n  };\n  GraphicComponentView.type = 'graphic';\n  return GraphicComponentView;\n}(ComponentView);\nexport { GraphicComponentView };\nfunction newEl(graphicType) {\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(graphicType, 'graphic type MUST be set');\n  }\n  var Clz = zrUtil.hasOwn(nonShapeGraphicElements, graphicType)\n  // Those graphic elements are not shapes. They should not be\n  // overwritten by users, so do them first.\n  ? nonShapeGraphicElements[graphicType] : graphicUtil.getShapeClass(graphicType);\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(Clz, \"graphic type \" + graphicType + \" can not be found\");\n  }\n  var el = new Clz({});\n  inner(el).type = graphicType;\n  return el;\n}\nfunction createEl(id, targetElParent, graphicType, elMap) {\n  var el = newEl(graphicType);\n  targetElParent.add(el);\n  elMap.set(id, el);\n  inner(el).id = id;\n  inner(el).isNew = true;\n  return el;\n}\nfunction removeEl(elExisting, elOption, elMap, graphicModel) {\n  var existElParent = elExisting && elExisting.parent;\n  if (existElParent) {\n    elExisting.type === 'group' && elExisting.traverse(function (el) {\n      removeEl(el, elOption, elMap, graphicModel);\n    });\n    applyLeaveTransition(elExisting, elOption, graphicModel);\n    elMap.removeKey(inner(elExisting).id);\n  }\n}\nfunction updateCommonAttrs(el, elOption, defaultZ, defaultZlevel) {\n  if (!el.isGroup) {\n    zrUtil.each([['cursor', Displayable.prototype.cursor],\n    // We should not support configure z and zlevel in the element level.\n    // But seems we didn't limit it previously. So here still use it to avoid breaking.\n    ['zlevel', defaultZlevel || 0], ['z', defaultZ || 0],\n    // z2 must not be null/undefined, otherwise sort error may occur.\n    ['z2', 0]], function (item) {\n      var prop = item[0];\n      if (zrUtil.hasOwn(elOption, prop)) {\n        el[prop] = zrUtil.retrieve2(elOption[prop], item[1]);\n      } else if (el[prop] == null) {\n        el[prop] = item[1];\n      }\n    });\n  }\n  zrUtil.each(zrUtil.keys(elOption), function (key) {\n    // Assign event handlers.\n    // PENDING: should enumerate all event names or use pattern matching?\n    if (key.indexOf('on') === 0) {\n      var val = elOption[key];\n      el[key] = zrUtil.isFunction(val) ? val : null;\n    }\n  });\n  if (zrUtil.hasOwn(elOption, 'draggable')) {\n    el.draggable = elOption.draggable;\n  }\n  // Other attributes\n  elOption.name != null && (el.name = elOption.name);\n  elOption.id != null && (el.id = elOption.id);\n}\n// Remove unnecessary props to avoid potential problems.\nfunction getCleanedElOption(elOption) {\n  elOption = zrUtil.extend({}, elOption);\n  zrUtil.each(['id', 'parentId', '$action', 'hv', 'bounding', 'textContent', 'clipPath'].concat(layoutUtil.LOCATION_PARAMS), function (name) {\n    delete elOption[name];\n  });\n  return elOption;\n}\nfunction setEventData(el, graphicModel, elOption) {\n  var eventData = getECData(el).eventData;\n  // Simple optimize for large amount of elements that no need event.\n  if (!el.silent && !el.ignore && !eventData) {\n    eventData = getECData(el).eventData = {\n      componentType: 'graphic',\n      componentIndex: graphicModel.componentIndex,\n      name: el.name\n    };\n  }\n  // `elOption.info` enables user to mount some info on\n  // elements and use them in event handlers.\n  if (eventData) {\n    eventData.info = elOption.info;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isArray } from 'zrender/lib/core/util.js';\nimport { GraphicComponentModel } from './GraphicModel.js';\nimport { GraphicComponentView } from './GraphicView.js';\nexport function install(registers) {\n  registers.registerComponentModel(GraphicComponentModel);\n  registers.registerComponentView(GraphicComponentView);\n  registers.registerPreprocessor(function (option) {\n    var graphicOption = option.graphic;\n    // Convert\n    // {graphic: [{left: 10, type: 'circle'}, ...]}\n    // or\n    // {graphic: {left: 10, type: 'circle'}}\n    // to\n    // {graphic: [{elements: [{left: 10, type: 'circle'}, ...]}]}\n    if (isArray(graphicOption)) {\n      if (!graphicOption[0] || !graphicOption[0].elements) {\n        option.graphic = [{\n          elements: graphicOption\n        }];\n      } else {\n        // Only one graphic instance can be instantiated. (We don't\n        // want that too many views are created in echarts._viewMap.)\n        option.graphic = [option.graphic[0]];\n      }\n    } else if (graphicOption && !graphicOption.elements) {\n      option.graphic = [{\n        elements: [graphicOption]\n      }];\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { indexOf, createHashMap, assert } from 'zrender/lib/core/util.js';\nexport var DATA_ZOOM_AXIS_DIMENSIONS = ['x', 'y', 'radius', 'angle', 'single'];\n// Supported coords.\n// FIXME: polar has been broken (but rarely used).\nvar SERIES_COORDS = ['cartesian2d', 'polar', 'singleAxis'];\nexport function isCoordSupported(seriesModel) {\n  var coordType = seriesModel.get('coordinateSystem');\n  return indexOf(SERIES_COORDS, coordType) >= 0;\n}\nexport function getAxisMainType(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n  return axisDim + 'Axis';\n}\nexport function getAxisIndexPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n  return axisDim + 'AxisIndex';\n}\nexport function getAxisIdPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n  return axisDim + 'AxisId';\n}\n/**\n * If two dataZoomModels has the same axis controlled, we say that they are 'linked'.\n * This function finds all linked dataZoomModels start from the given payload.\n */\nexport function findEffectedDataZooms(ecModel, payload) {\n  // Key: `DataZoomAxisDimension`\n  var axisRecords = createHashMap();\n  var effectedModels = [];\n  // Key: uid of dataZoomModel\n  var effectedModelMap = createHashMap();\n  // Find the dataZooms specified by payload.\n  ecModel.eachComponent({\n    mainType: 'dataZoom',\n    query: payload\n  }, function (dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid)) {\n      addToEffected(dataZoomModel);\n    }\n  });\n  // Start from the given dataZoomModels, travel the graph to find\n  // all of the linked dataZoom models.\n  var foundNewLink;\n  do {\n    foundNewLink = false;\n    ecModel.eachComponent('dataZoom', processSingle);\n  } while (foundNewLink);\n  function processSingle(dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid) && isLinked(dataZoomModel)) {\n      addToEffected(dataZoomModel);\n      foundNewLink = true;\n    }\n  }\n  function addToEffected(dataZoom) {\n    effectedModelMap.set(dataZoom.uid, true);\n    effectedModels.push(dataZoom);\n    markAxisControlled(dataZoom);\n  }\n  function isLinked(dataZoomModel) {\n    var isLink = false;\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      var axisIdxArr = axisRecords.get(axisDim);\n      if (axisIdxArr && axisIdxArr[axisIndex]) {\n        isLink = true;\n      }\n    });\n    return isLink;\n  }\n  function markAxisControlled(dataZoomModel) {\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      (axisRecords.get(axisDim) || axisRecords.set(axisDim, []))[axisIndex] = true;\n    });\n  }\n  return effectedModels;\n}\n/**\n * Find the first target coordinate system.\n * Available after model built.\n *\n * @return Like {\n *                  grid: [\n *                      {model: coord0, axisModels: [axis1, axis3], coordIndex: 1},\n *                      {model: coord1, axisModels: [axis0, axis2], coordIndex: 0},\n *                      ...\n *                  ],  // cartesians must not be null/undefined.\n *                  polar: [\n *                      {model: coord0, axisModels: [axis4], coordIndex: 0},\n *                      ...\n *                  ],  // polars must not be null/undefined.\n *                  singleAxis: [\n *                      {model: coord0, axisModels: [], coordIndex: 0}\n *                  ]\n *              }\n */\nexport function collectReferCoordSysModelInfo(dataZoomModel) {\n  var ecModel = dataZoomModel.ecModel;\n  var coordSysInfoWrap = {\n    infoList: [],\n    infoMap: createHashMap()\n  };\n  dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n    var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n    if (!axisModel) {\n      return;\n    }\n    var coordSysModel = axisModel.getCoordSysModel();\n    if (!coordSysModel) {\n      return;\n    }\n    var coordSysUid = coordSysModel.uid;\n    var coordSysInfo = coordSysInfoWrap.infoMap.get(coordSysUid);\n    if (!coordSysInfo) {\n      coordSysInfo = {\n        model: coordSysModel,\n        axisModels: []\n      };\n      coordSysInfoWrap.infoList.push(coordSysInfo);\n      coordSysInfoWrap.infoMap.set(coordSysUid, coordSysInfo);\n    }\n    coordSysInfo.axisModels.push(axisModel);\n  });\n  return coordSysInfoWrap;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { each, createHashMap, merge, assert } from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nimport { getAxisMainType, DATA_ZOOM_AXIS_DIMENSIONS } from './helper.js';\nimport { MULTIPLE_REFERRING, SINGLE_REFERRING } from '../../util/model.js';\nvar DataZoomAxisInfo = /** @class */function () {\n  function DataZoomAxisInfo() {\n    this.indexList = [];\n    this.indexMap = [];\n  }\n  DataZoomAxisInfo.prototype.add = function (axisCmptIdx) {\n    // Remove duplication.\n    if (!this.indexMap[axisCmptIdx]) {\n      this.indexList.push(axisCmptIdx);\n      this.indexMap[axisCmptIdx] = true;\n    }\n  };\n  return DataZoomAxisInfo;\n}();\nvar DataZoomModel = /** @class */function (_super) {\n  __extends(DataZoomModel, _super);\n  function DataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = DataZoomModel.type;\n    _this._autoThrottle = true;\n    _this._noTarget = true;\n    /**\n     * It is `[rangeModeForMin, rangeModeForMax]`.\n     * The optional values for `rangeMode`:\n     * + `'value'` mode: the axis extent will always be determined by\n     *     `dataZoom.startValue` and `dataZoom.endValue`, despite\n     *     how data like and how `axis.min` and `axis.max` are.\n     * + `'percent'` mode: `100` represents 100% of the `[dMin, dMax]`,\n     *     where `dMin` is `axis.min` if `axis.min` specified, otherwise `data.extent[0]`,\n     *     and `dMax` is `axis.max` if `axis.max` specified, otherwise `data.extent[1]`.\n     *     Axis extent will be determined by the result of the percent of `[dMin, dMax]`.\n     *\n     * For example, when users are using dynamic data (update data periodically via `setOption`),\n     * if in `'value`' mode, the window will be kept in a fixed value range despite how\n     * data are appended, while if in `'percent'` mode, whe window range will be changed alone with\n     * the appended data (suppose `axis.min` and `axis.max` are not specified).\n     */\n    _this._rangePropMode = ['percent', 'percent'];\n    return _this;\n  }\n  DataZoomModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputRawOption = retrieveRawOption(option);\n    /**\n     * Suppose a \"main process\" start at the point that model prepared (that is,\n     * model initialized or merged or method called in `action`).\n     * We should keep the `main process` idempotent, that is, given a set of values\n     * on `option`, we get the same result.\n     *\n     * But sometimes, values on `option` will be updated for providing users\n     * a \"final calculated value\" (`dataZoomProcessor` will do that). Those value\n     * should not be the base/input of the `main process`.\n     *\n     * So in that case we should save and keep the input of the `main process`\n     * separately, called `settledOption`.\n     *\n     * For example, consider the case:\n     * (Step_1) brush zoom the grid by `toolbox.dataZoom`,\n     *     where the original input `option.startValue`, `option.endValue` are earsed by\n     *     calculated value.\n     * (Step)2) click the legend to hide and show a series,\n     *     where the new range is calculated by the earsed `startValue` and `endValue`,\n     *     which brings incorrect result.\n     */\n    this.settledOption = inputRawOption;\n    this.mergeDefaultAndTheme(option, ecModel);\n    this._doInit(inputRawOption);\n  };\n  DataZoomModel.prototype.mergeOption = function (newOption) {\n    var inputRawOption = retrieveRawOption(newOption);\n    // FIX #2591\n    merge(this.option, newOption, true);\n    merge(this.settledOption, inputRawOption, true);\n    this._doInit(inputRawOption);\n  };\n  DataZoomModel.prototype._doInit = function (inputRawOption) {\n    var thisOption = this.option;\n    this._setDefaultThrottle(inputRawOption);\n    this._updateRangeUse(inputRawOption);\n    var settledOption = this.settledOption;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n      // start/end has higher priority over startValue/endValue if they\n      // both set, but we should make chart.setOption({endValue: 1000})\n      // effective, rather than chart.setOption({endValue: 1000, end: null}).\n      if (this._rangePropMode[index] === 'value') {\n        thisOption[names[0]] = settledOption[names[0]] = null;\n      }\n      // Otherwise do nothing and use the merge result.\n    }, this);\n    this._resetTarget();\n  };\n  DataZoomModel.prototype._resetTarget = function () {\n    var optionOrient = this.get('orient', true);\n    var targetAxisIndexMap = this._targetAxisInfoMap = createHashMap();\n    var hasAxisSpecified = this._fillSpecifiedTargetAxis(targetAxisIndexMap);\n    if (hasAxisSpecified) {\n      this._orient = optionOrient || this._makeAutoOrientByTargetAxis();\n    } else {\n      this._orient = optionOrient || 'horizontal';\n      this._fillAutoTargetAxisByOrient(targetAxisIndexMap, this._orient);\n    }\n    this._noTarget = true;\n    targetAxisIndexMap.each(function (axisInfo) {\n      if (axisInfo.indexList.length) {\n        this._noTarget = false;\n      }\n    }, this);\n  };\n  DataZoomModel.prototype._fillSpecifiedTargetAxis = function (targetAxisIndexMap) {\n    var hasAxisSpecified = false;\n    each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n      var refering = this.getReferringComponents(getAxisMainType(axisDim), MULTIPLE_REFERRING);\n      // When user set axisIndex as a empty array, we think that user specify axisIndex\n      // but do not want use auto mode. Because empty array may be encountered when\n      // some error occurred.\n      if (!refering.specified) {\n        return;\n      }\n      hasAxisSpecified = true;\n      var axisInfo = new DataZoomAxisInfo();\n      each(refering.models, function (axisModel) {\n        axisInfo.add(axisModel.componentIndex);\n      });\n      targetAxisIndexMap.set(axisDim, axisInfo);\n    }, this);\n    return hasAxisSpecified;\n  };\n  DataZoomModel.prototype._fillAutoTargetAxisByOrient = function (targetAxisIndexMap, orient) {\n    var ecModel = this.ecModel;\n    var needAuto = true;\n    // Find axis that parallel to dataZoom as default.\n    if (needAuto) {\n      var axisDim = orient === 'vertical' ? 'y' : 'x';\n      var axisModels = ecModel.findComponents({\n        mainType: axisDim + 'Axis'\n      });\n      setParallelAxis(axisModels, axisDim);\n    }\n    // Find axis that parallel to dataZoom as default.\n    if (needAuto) {\n      var axisModels = ecModel.findComponents({\n        mainType: 'singleAxis',\n        filter: function (axisModel) {\n          return axisModel.get('orient', true) === orient;\n        }\n      });\n      setParallelAxis(axisModels, 'single');\n    }\n    function setParallelAxis(axisModels, axisDim) {\n      // At least use the first parallel axis as the target axis.\n      var axisModel = axisModels[0];\n      if (!axisModel) {\n        return;\n      }\n      var axisInfo = new DataZoomAxisInfo();\n      axisInfo.add(axisModel.componentIndex);\n      targetAxisIndexMap.set(axisDim, axisInfo);\n      needAuto = false;\n      // Find parallel axes in the same grid.\n      if (axisDim === 'x' || axisDim === 'y') {\n        var gridModel_1 = axisModel.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n        gridModel_1 && each(axisModels, function (axModel) {\n          if (axisModel.componentIndex !== axModel.componentIndex && gridModel_1 === axModel.getReferringComponents('grid', SINGLE_REFERRING).models[0]) {\n            axisInfo.add(axModel.componentIndex);\n          }\n        });\n      }\n    }\n    if (needAuto) {\n      // If no parallel axis, find the first category axis as default. (Also consider polar).\n      each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n        if (!needAuto) {\n          return;\n        }\n        var axisModels = ecModel.findComponents({\n          mainType: getAxisMainType(axisDim),\n          filter: function (axisModel) {\n            return axisModel.get('type', true) === 'category';\n          }\n        });\n        if (axisModels[0]) {\n          var axisInfo = new DataZoomAxisInfo();\n          axisInfo.add(axisModels[0].componentIndex);\n          targetAxisIndexMap.set(axisDim, axisInfo);\n          needAuto = false;\n        }\n      }, this);\n    }\n  };\n  DataZoomModel.prototype._makeAutoOrientByTargetAxis = function () {\n    var dim;\n    // Find the first axis\n    this.eachTargetAxis(function (axisDim) {\n      !dim && (dim = axisDim);\n    }, this);\n    return dim === 'y' ? 'vertical' : 'horizontal';\n  };\n  DataZoomModel.prototype._setDefaultThrottle = function (inputRawOption) {\n    // When first time user set throttle, auto throttle ends.\n    if (inputRawOption.hasOwnProperty('throttle')) {\n      this._autoThrottle = false;\n    }\n    if (this._autoThrottle) {\n      var globalOption = this.ecModel.option;\n      this.option.throttle = globalOption.animation && globalOption.animationDurationUpdate > 0 ? 100 : 20;\n    }\n  };\n  DataZoomModel.prototype._updateRangeUse = function (inputRawOption) {\n    var rangePropMode = this._rangePropMode;\n    var rangeModeInOption = this.get('rangeMode');\n    each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n      var percentSpecified = inputRawOption[names[0]] != null;\n      var valueSpecified = inputRawOption[names[1]] != null;\n      if (percentSpecified && !valueSpecified) {\n        rangePropMode[index] = 'percent';\n      } else if (!percentSpecified && valueSpecified) {\n        rangePropMode[index] = 'value';\n      } else if (rangeModeInOption) {\n        rangePropMode[index] = rangeModeInOption[index];\n      } else if (percentSpecified) {\n        // percentSpecified && valueSpecified\n        rangePropMode[index] = 'percent';\n      }\n      // else remain its original setting.\n    });\n  };\n  DataZoomModel.prototype.noTarget = function () {\n    return this._noTarget;\n  };\n  DataZoomModel.prototype.getFirstTargetAxisModel = function () {\n    var firstAxisModel;\n    this.eachTargetAxis(function (axisDim, axisIndex) {\n      if (firstAxisModel == null) {\n        firstAxisModel = this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n      }\n    }, this);\n    return firstAxisModel;\n  };\n  /**\n   * @param {Function} callback param: axisModel, dimNames, axisIndex, dataZoomModel, ecModel\n   */\n  DataZoomModel.prototype.eachTargetAxis = function (callback, context) {\n    this._targetAxisInfoMap.each(function (axisInfo, axisDim) {\n      each(axisInfo.indexList, function (axisIndex) {\n        callback.call(context, axisDim, axisIndex);\n      });\n    });\n  };\n  /**\n   * @return If not found, return null/undefined.\n   */\n  DataZoomModel.prototype.getAxisProxy = function (axisDim, axisIndex) {\n    var axisModel = this.getAxisModel(axisDim, axisIndex);\n    if (axisModel) {\n      return axisModel.__dzAxisProxy;\n    }\n  };\n  /**\n   * @return If not found, return null/undefined.\n   */\n  DataZoomModel.prototype.getAxisModel = function (axisDim, axisIndex) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(axisDim && axisIndex != null);\n    }\n    var axisInfo = this._targetAxisInfoMap.get(axisDim);\n    if (axisInfo && axisInfo.indexMap[axisIndex]) {\n      return this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n    }\n  };\n  /**\n   * If not specified, set to undefined.\n   */\n  DataZoomModel.prototype.setRawRange = function (opt) {\n    var thisOption = this.option;\n    var settledOption = this.settledOption;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names) {\n      // Consider the pair <start, startValue>:\n      // If one has value and the other one is `null/undefined`, we both set them\n      // to `settledOption`. This strategy enables the feature to clear the original\n      // value in `settledOption` to `null/undefined`.\n      // But if both of them are `null/undefined`, we do not set them to `settledOption`\n      // and keep `settledOption` with the original value. This strategy enables users to\n      // only set <end or endValue> but not set <start or startValue> when calling\n      // `dispatchAction`.\n      // The pair <end, endValue> is treated in the same way.\n      if (opt[names[0]] != null || opt[names[1]] != null) {\n        thisOption[names[0]] = settledOption[names[0]] = opt[names[0]];\n        thisOption[names[1]] = settledOption[names[1]] = opt[names[1]];\n      }\n    }, this);\n    this._updateRangeUse(opt);\n  };\n  DataZoomModel.prototype.setCalculatedRange = function (opt) {\n    var option = this.option;\n    each(['start', 'startValue', 'end', 'endValue'], function (name) {\n      option[name] = opt[name];\n    });\n  };\n  DataZoomModel.prototype.getPercentRange = function () {\n    var axisProxy = this.findRepresentativeAxisProxy();\n    if (axisProxy) {\n      return axisProxy.getDataPercentWindow();\n    }\n  };\n  /**\n   * For example, chart.getModel().getComponent('dataZoom').getValueRange('y', 0);\n   *\n   * @return [startValue, endValue] value can only be '-' or finite number.\n   */\n  DataZoomModel.prototype.getValueRange = function (axisDim, axisIndex) {\n    if (axisDim == null && axisIndex == null) {\n      var axisProxy = this.findRepresentativeAxisProxy();\n      if (axisProxy) {\n        return axisProxy.getDataValueWindow();\n      }\n    } else {\n      return this.getAxisProxy(axisDim, axisIndex).getDataValueWindow();\n    }\n  };\n  /**\n   * @param axisModel If axisModel given, find axisProxy\n   *      corresponding to the axisModel\n   */\n  DataZoomModel.prototype.findRepresentativeAxisProxy = function (axisModel) {\n    if (axisModel) {\n      return axisModel.__dzAxisProxy;\n    }\n    // Find the first hosted axisProxy\n    var firstProxy;\n    var axisDimList = this._targetAxisInfoMap.keys();\n    for (var i = 0; i < axisDimList.length; i++) {\n      var axisDim = axisDimList[i];\n      var axisInfo = this._targetAxisInfoMap.get(axisDim);\n      for (var j = 0; j < axisInfo.indexList.length; j++) {\n        var proxy = this.getAxisProxy(axisDim, axisInfo.indexList[j]);\n        if (proxy.hostedBy(this)) {\n          return proxy;\n        }\n        if (!firstProxy) {\n          firstProxy = proxy;\n        }\n      }\n    }\n    // If no hosted proxy found, still need to return a proxy.\n    // This case always happens in toolbox dataZoom, where axes are all hosted by\n    // other dataZooms.\n    return firstProxy;\n  };\n  DataZoomModel.prototype.getRangePropMode = function () {\n    return this._rangePropMode.slice();\n  };\n  DataZoomModel.prototype.getOrient = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      // Should not be called before initialized.\n      assert(this._orient);\n    }\n    return this._orient;\n  };\n  DataZoomModel.type = 'dataZoom';\n  DataZoomModel.dependencies = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'series', 'toolbox'];\n  DataZoomModel.defaultOption = {\n    // zlevel: 0,\n    z: 4,\n    filterMode: 'filter',\n    start: 0,\n    end: 100\n  };\n  return DataZoomModel;\n}(ComponentModel);\n/**\n * Retrieve those raw params from option, which will be cached separately,\n * because they will be overwritten by normalized/calculated values in the main\n * process.\n */\nfunction retrieveRawOption(option) {\n  var ret = {};\n  each(['start', 'end', 'startValue', 'endValue', 'throttle'], function (name) {\n    option.hasOwnProperty(name) && (ret[name] = option[name]);\n  });\n  return ret;\n}\nexport default DataZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel.js';\nvar SelectDataZoomModel = /** @class */function (_super) {\n  __extends(SelectDataZoomModel, _super);\n  function SelectDataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SelectDataZoomModel.type;\n    return _this;\n  }\n  SelectDataZoomModel.type = 'dataZoom.select';\n  return SelectDataZoomModel;\n}(DataZoomModel);\nexport default SelectDataZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nvar DataZoomView = /** @class */function (_super) {\n  __extends(DataZoomView, _super);\n  function DataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = DataZoomView.type;\n    return _this;\n  }\n  DataZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\n    this.dataZoomModel = dataZoomModel;\n    this.ecModel = ecModel;\n    this.api = api;\n  };\n  DataZoomView.type = 'dataZoom';\n  return DataZoomView;\n}(ComponentView);\nexport default DataZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomView from './DataZoomView.js';\nvar SelectDataZoomView = /** @class */function (_super) {\n  __extends(SelectDataZoomView, _super);\n  function SelectDataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SelectDataZoomView.type;\n    return _this;\n  }\n  SelectDataZoomView.type = 'dataZoom.select';\n  return SelectDataZoomView;\n}(DataZoomView);\nexport default SelectDataZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as numberUtil from '../../util/number.js';\nimport sliderMove from '../helper/sliderMove.js';\nimport { unionAxisExtentFromData } from '../../coord/axisHelper.js';\nimport { ensureScaleRawExtentInfo } from '../../coord/scaleRawExtentInfo.js';\nimport { getAxisMainType, isCoordSupported } from './helper.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\n/**\n * Operate single axis.\n * One axis can only operated by one axis operator.\n * Different dataZoomModels may be defined to operate the same axis.\n * (i.e. 'inside' data zoom and 'slider' data zoom components)\n * So dataZoomModels share one axisProxy in that case.\n */\nvar AxisProxy = /** @class */function () {\n  function AxisProxy(dimName, axisIndex, dataZoomModel, ecModel) {\n    this._dimName = dimName;\n    this._axisIndex = axisIndex;\n    this.ecModel = ecModel;\n    this._dataZoomModel = dataZoomModel;\n    // /**\n    //  * @readOnly\n    //  * @private\n    //  */\n    // this.hasSeriesStacked;\n  }\n  /**\n   * Whether the axisProxy is hosted by dataZoomModel.\n   */\n  AxisProxy.prototype.hostedBy = function (dataZoomModel) {\n    return this._dataZoomModel === dataZoomModel;\n  };\n  /**\n   * @return Value can only be NaN or finite value.\n   */\n  AxisProxy.prototype.getDataValueWindow = function () {\n    return this._valueWindow.slice();\n  };\n  /**\n   * @return {Array.<number>}\n   */\n  AxisProxy.prototype.getDataPercentWindow = function () {\n    return this._percentWindow.slice();\n  };\n  AxisProxy.prototype.getTargetSeriesModels = function () {\n    var seriesModels = [];\n    this.ecModel.eachSeries(function (seriesModel) {\n      if (isCoordSupported(seriesModel)) {\n        var axisMainType = getAxisMainType(this._dimName);\n        var axisModel = seriesModel.getReferringComponents(axisMainType, SINGLE_REFERRING).models[0];\n        if (axisModel && this._axisIndex === axisModel.componentIndex) {\n          seriesModels.push(seriesModel);\n        }\n      }\n    }, this);\n    return seriesModels;\n  };\n  AxisProxy.prototype.getAxisModel = function () {\n    return this.ecModel.getComponent(this._dimName + 'Axis', this._axisIndex);\n  };\n  AxisProxy.prototype.getMinMaxSpan = function () {\n    return zrUtil.clone(this._minMaxSpan);\n  };\n  /**\n   * Only calculate by given range and this._dataExtent, do not change anything.\n   */\n  AxisProxy.prototype.calculateDataWindow = function (opt) {\n    var dataExtent = this._dataExtent;\n    var axisModel = this.getAxisModel();\n    var scale = axisModel.axis.scale;\n    var rangePropMode = this._dataZoomModel.getRangePropMode();\n    var percentExtent = [0, 100];\n    var percentWindow = [];\n    var valueWindow = [];\n    var hasPropModeValue;\n    each(['start', 'end'], function (prop, idx) {\n      var boundPercent = opt[prop];\n      var boundValue = opt[prop + 'Value'];\n      // Notice: dataZoom is based either on `percentProp` ('start', 'end') or\n      // on `valueProp` ('startValue', 'endValue'). (They are based on the data extent\n      // but not min/max of axis, which will be calculated by data window then).\n      // The former one is suitable for cases that a dataZoom component controls multiple\n      // axes with different unit or extent, and the latter one is suitable for accurate\n      // zoom by pixel (e.g., in dataZoomSelect).\n      // we use `getRangePropMode()` to mark which prop is used. `rangePropMode` is updated\n      // only when setOption or dispatchAction, otherwise it remains its original value.\n      // (Why not only record `percentProp` and always map to `valueProp`? Because\n      // the map `valueProp` -> `percentProp` -> `valueProp` probably not the original\n      // `valueProp`. consider two axes constrolled by one dataZoom. They have different\n      // data extent. All of values that are overflow the `dataExtent` will be calculated\n      // to percent '100%').\n      if (rangePropMode[idx] === 'percent') {\n        boundPercent == null && (boundPercent = percentExtent[idx]);\n        // Use scale.parse to math round for category or time axis.\n        boundValue = scale.parse(numberUtil.linearMap(boundPercent, percentExtent, dataExtent));\n      } else {\n        hasPropModeValue = true;\n        boundValue = boundValue == null ? dataExtent[idx] : scale.parse(boundValue);\n        // Calculating `percent` from `value` may be not accurate, because\n        // This calculation can not be inversed, because all of values that\n        // are overflow the `dataExtent` will be calculated to percent '100%'\n        boundPercent = numberUtil.linearMap(boundValue, dataExtent, percentExtent);\n      }\n      // valueWindow[idx] = round(boundValue);\n      // percentWindow[idx] = round(boundPercent);\n      // fallback to extent start/end when parsed value or percent is invalid\n      valueWindow[idx] = boundValue == null || isNaN(boundValue) ? dataExtent[idx] : boundValue;\n      percentWindow[idx] = boundPercent == null || isNaN(boundPercent) ? percentExtent[idx] : boundPercent;\n    });\n    asc(valueWindow);\n    asc(percentWindow);\n    // The windows from user calling of `dispatchAction` might be out of the extent,\n    // or do not obey the `min/maxSpan`, `min/maxValueSpan`. But we don't restrict window\n    // by `zoomLock` here, because we see `zoomLock` just as a interaction constraint,\n    // where API is able to initialize/modify the window size even though `zoomLock`\n    // specified.\n    var spans = this._minMaxSpan;\n    hasPropModeValue ? restrictSet(valueWindow, percentWindow, dataExtent, percentExtent, false) : restrictSet(percentWindow, valueWindow, percentExtent, dataExtent, true);\n    function restrictSet(fromWindow, toWindow, fromExtent, toExtent, toValue) {\n      var suffix = toValue ? 'Span' : 'ValueSpan';\n      sliderMove(0, fromWindow, fromExtent, 'all', spans['min' + suffix], spans['max' + suffix]);\n      for (var i = 0; i < 2; i++) {\n        toWindow[i] = numberUtil.linearMap(fromWindow[i], fromExtent, toExtent, true);\n        toValue && (toWindow[i] = scale.parse(toWindow[i]));\n      }\n    }\n    return {\n      valueWindow: valueWindow,\n      percentWindow: percentWindow\n    };\n  };\n  /**\n   * Notice: reset should not be called before series.restoreData() is called,\n   * so it is recommended to be called in \"process stage\" but not \"model init\n   * stage\".\n   */\n  AxisProxy.prototype.reset = function (dataZoomModel) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n    var targetSeries = this.getTargetSeriesModels();\n    // Culculate data window and data extent, and record them.\n    this._dataExtent = calculateDataExtent(this, this._dimName, targetSeries);\n    // `calculateDataWindow` uses min/maxSpan.\n    this._updateMinMaxSpan();\n    var dataWindow = this.calculateDataWindow(dataZoomModel.settledOption);\n    this._valueWindow = dataWindow.valueWindow;\n    this._percentWindow = dataWindow.percentWindow;\n    // Update axis setting then.\n    this._setAxisModel();\n  };\n  AxisProxy.prototype.filterData = function (dataZoomModel, api) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n    var axisDim = this._dimName;\n    var seriesModels = this.getTargetSeriesModels();\n    var filterMode = dataZoomModel.get('filterMode');\n    var valueWindow = this._valueWindow;\n    if (filterMode === 'none') {\n      return;\n    }\n    // FIXME\n    // Toolbox may has dataZoom injected. And if there are stacked bar chart\n    // with NaN data, NaN will be filtered and stack will be wrong.\n    // So we need to force the mode to be set empty.\n    // In fect, it is not a big deal that do not support filterMode-'filter'\n    // when using toolbox#dataZoom, utill tooltip#dataZoom support \"single axis\n    // selection\" some day, which might need \"adapt to data extent on the\n    // otherAxis\", which is disabled by filterMode-'empty'.\n    // But currently, stack has been fixed to based on value but not index,\n    // so this is not an issue any more.\n    // let otherAxisModel = this.getOtherAxisModel();\n    // if (dataZoomModel.get('$fromToolbox')\n    //     && otherAxisModel\n    //     && otherAxisModel.hasSeriesStacked\n    // ) {\n    //     filterMode = 'empty';\n    // }\n    // TODO\n    // filterMode 'weakFilter' and 'empty' is not optimized for huge data yet.\n    each(seriesModels, function (seriesModel) {\n      var seriesData = seriesModel.getData();\n      var dataDims = seriesData.mapDimensionsAll(axisDim);\n      if (!dataDims.length) {\n        return;\n      }\n      if (filterMode === 'weakFilter') {\n        var store_1 = seriesData.getStore();\n        var dataDimIndices_1 = zrUtil.map(dataDims, function (dim) {\n          return seriesData.getDimensionIndex(dim);\n        }, seriesData);\n        seriesData.filterSelf(function (dataIndex) {\n          var leftOut;\n          var rightOut;\n          var hasValue;\n          for (var i = 0; i < dataDims.length; i++) {\n            var value = store_1.get(dataDimIndices_1[i], dataIndex);\n            var thisHasValue = !isNaN(value);\n            var thisLeftOut = value < valueWindow[0];\n            var thisRightOut = value > valueWindow[1];\n            if (thisHasValue && !thisLeftOut && !thisRightOut) {\n              return true;\n            }\n            thisHasValue && (hasValue = true);\n            thisLeftOut && (leftOut = true);\n            thisRightOut && (rightOut = true);\n          }\n          // If both left out and right out, do not filter.\n          return hasValue && leftOut && rightOut;\n        });\n      } else {\n        each(dataDims, function (dim) {\n          if (filterMode === 'empty') {\n            seriesModel.setData(seriesData = seriesData.map(dim, function (value) {\n              return !isInWindow(value) ? NaN : value;\n            }));\n          } else {\n            var range = {};\n            range[dim] = valueWindow;\n            // console.time('select');\n            seriesData.selectRange(range);\n            // console.timeEnd('select');\n          }\n        });\n      }\n      each(dataDims, function (dim) {\n        seriesData.setApproximateExtent(valueWindow, dim);\n      });\n    });\n    function isInWindow(value) {\n      return value >= valueWindow[0] && value <= valueWindow[1];\n    }\n  };\n  AxisProxy.prototype._updateMinMaxSpan = function () {\n    var minMaxSpan = this._minMaxSpan = {};\n    var dataZoomModel = this._dataZoomModel;\n    var dataExtent = this._dataExtent;\n    each(['min', 'max'], function (minMax) {\n      var percentSpan = dataZoomModel.get(minMax + 'Span');\n      var valueSpan = dataZoomModel.get(minMax + 'ValueSpan');\n      valueSpan != null && (valueSpan = this.getAxisModel().axis.scale.parse(valueSpan));\n      // minValueSpan and maxValueSpan has higher priority than minSpan and maxSpan\n      if (valueSpan != null) {\n        percentSpan = numberUtil.linearMap(dataExtent[0] + valueSpan, dataExtent, [0, 100], true);\n      } else if (percentSpan != null) {\n        valueSpan = numberUtil.linearMap(percentSpan, [0, 100], dataExtent, true) - dataExtent[0];\n      }\n      minMaxSpan[minMax + 'Span'] = percentSpan;\n      minMaxSpan[minMax + 'ValueSpan'] = valueSpan;\n    }, this);\n  };\n  AxisProxy.prototype._setAxisModel = function () {\n    var axisModel = this.getAxisModel();\n    var percentWindow = this._percentWindow;\n    var valueWindow = this._valueWindow;\n    if (!percentWindow) {\n      return;\n    }\n    // [0, 500]: arbitrary value, guess axis extent.\n    var precision = numberUtil.getPixelPrecision(valueWindow, [0, 500]);\n    precision = Math.min(precision, 20);\n    // For value axis, if min/max/scale are not set, we just use the extent obtained\n    // by series data, which may be a little different from the extent calculated by\n    // `axisHelper.getScaleExtent`. But the different just affects the experience a\n    // little when zooming. So it will not be fixed until some users require it strongly.\n    var rawExtentInfo = axisModel.axis.scale.rawExtentInfo;\n    if (percentWindow[0] !== 0) {\n      rawExtentInfo.setDeterminedMinMax('min', +valueWindow[0].toFixed(precision));\n    }\n    if (percentWindow[1] !== 100) {\n      rawExtentInfo.setDeterminedMinMax('max', +valueWindow[1].toFixed(precision));\n    }\n    rawExtentInfo.freeze();\n  };\n  return AxisProxy;\n}();\nfunction calculateDataExtent(axisProxy, axisDim, seriesModels) {\n  var dataExtent = [Infinity, -Infinity];\n  each(seriesModels, function (seriesModel) {\n    unionAxisExtentFromData(dataExtent, seriesModel.getData(), axisDim);\n  });\n  // It is important to get \"consistent\" extent when more then one axes is\n  // controlled by a `dataZoom`, otherwise those axes will not be synchronized\n  // when zooming. But it is difficult to know what is \"consistent\", considering\n  // axes have different type or even different meanings (For example, two\n  // time axes are used to compare data of the same date in different years).\n  // So basically dataZoom just obtains extent by series.data (in category axis\n  // extent can be obtained from axis.data).\n  // Nevertheless, user can set min/max/scale on axes to make extent of axes\n  // consistent.\n  var axisModel = axisProxy.getAxisModel();\n  var rawExtentResult = ensureScaleRawExtentInfo(axisModel.axis.scale, axisModel, dataExtent).calculate();\n  return [rawExtentResult.min, rawExtentResult.max];\n}\nexport default AxisProxy;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap, each } from 'zrender/lib/core/util.js';\nimport { getAxisMainType } from './helper.js';\nimport AxisProxy from './AxisProxy.js';\nvar dataZoomProcessor = {\n  // `dataZoomProcessor` will only be performed in needed series. Consider if\n  // there is a line series and a pie series, it is better not to update the\n  // line series if only pie series is needed to be updated.\n  getTargetSeries: function (ecModel) {\n    function eachAxisModel(cb) {\n      ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n        dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n          var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n          cb(axisDim, axisIndex, axisModel, dataZoomModel);\n        });\n      });\n    }\n    // FIXME: it brings side-effect to `getTargetSeries`.\n    // Prepare axis proxies.\n    eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n      // dispose all last axis proxy, in case that some axis are deleted.\n      axisModel.__dzAxisProxy = null;\n    });\n    var proxyList = [];\n    eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n      // Different dataZooms may constrol the same axis. In that case,\n      // an axisProxy serves both of them.\n      if (!axisModel.__dzAxisProxy) {\n        // Use the first dataZoomModel as the main model of axisProxy.\n        axisModel.__dzAxisProxy = new AxisProxy(axisDim, axisIndex, dataZoomModel, ecModel);\n        proxyList.push(axisModel.__dzAxisProxy);\n      }\n    });\n    var seriesModelMap = createHashMap();\n    each(proxyList, function (axisProxy) {\n      each(axisProxy.getTargetSeriesModels(), function (seriesModel) {\n        seriesModelMap.set(seriesModel.uid, seriesModel);\n      });\n    });\n    return seriesModelMap;\n  },\n  // Consider appendData, where filter should be performed. Because data process is\n  // in block mode currently, it is not need to worry about that the overallProgress\n  // execute every frame.\n  overallReset: function (ecModel, api) {\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      // We calculate window and reset axis here but not in model\n      // init stage and not after action dispatch handler, because\n      // reset should be called after seriesData.restoreData.\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        dataZoomModel.getAxisProxy(axisDim, axisIndex).reset(dataZoomModel);\n      });\n      // Caution: data zoom filtering is order sensitive when using\n      // percent range and no min/max/scale set on axis.\n      // For example, we have dataZoom definition:\n      // [\n      //      {xAxisIndex: 0, start: 30, end: 70},\n      //      {yAxisIndex: 0, start: 20, end: 80}\n      // ]\n      // In this case, [20, 80] of y-dataZoom should be based on data\n      // that have filtered by x-dataZoom using range of [30, 70],\n      // but should not be based on full raw data. Thus sliding\n      // x-dataZoom will change both ranges of xAxis and yAxis,\n      // while sliding y-dataZoom will only change the range of yAxis.\n      // So we should filter x-axis after reset x-axis immediately,\n      // and then reset y-axis and filter y-axis.\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        dataZoomModel.getAxisProxy(axisDim, axisIndex).filterData(dataZoomModel, api);\n      });\n    });\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      // Fullfill all of the range props so that user\n      // is able to get them from chart.getOption().\n      var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n      if (axisProxy) {\n        var percentRange = axisProxy.getDataPercentWindow();\n        var valueRange = axisProxy.getDataValueWindow();\n        dataZoomModel.setCalculatedRange({\n          start: percentRange[0],\n          end: percentRange[1],\n          startValue: valueRange[0],\n          endValue: valueRange[1]\n        });\n      }\n    });\n  }\n};\nexport default dataZoomProcessor;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { findEffectedDataZooms } from './helper.js';\nimport { each } from 'zrender/lib/core/util.js';\nexport default function installDataZoomAction(registers) {\n  registers.registerAction('dataZoom', function (payload, ecModel) {\n    var effectedModels = findEffectedDataZooms(ecModel, payload);\n    each(effectedModels, function (dataZoomModel) {\n      dataZoomModel.setRawRange({\n        start: payload.start,\n        end: payload.end,\n        startValue: payload.startValue,\n        endValue: payload.endValue\n      });\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport dataZoomProcessor from './dataZoomProcessor.js';\nimport installDataZoomAction from './dataZoomAction.js';\nvar installed = false;\nexport default function installCommon(registers) {\n  if (installed) {\n    return;\n  }\n  installed = true;\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER, dataZoomProcessor);\n  installDataZoomAction(registers);\n  registers.registerSubTypeDefaulter('dataZoom', function () {\n    // Default 'slider' when no type specified.\n    return 'slider';\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SelectZoomModel from './SelectZoomModel.js';\nimport SelectZoomView from './SelectZoomView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(SelectZoomModel);\n  registers.registerComponentView(SelectZoomView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nvar ToolboxFeature = /** @class */function () {\n  function ToolboxFeature() {}\n  return ToolboxFeature;\n}();\nexport { ToolboxFeature };\nvar features = {};\nexport function registerFeature(name, ctor) {\n  features[name] = ctor;\n}\nexport function getFeature(name) {\n  return features[name];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as featureManager from './featureManager.js';\nimport ComponentModel from '../../model/Component.js';\nimport tokens from '../../visual/tokens.js';\nvar ToolboxModel = /** @class */function (_super) {\n  __extends(ToolboxModel, _super);\n  function ToolboxModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ToolboxModel.type;\n    return _this;\n  }\n  ToolboxModel.prototype.optionUpdated = function () {\n    _super.prototype.optionUpdated.apply(this, arguments);\n    var ecModel = this.ecModel;\n    zrUtil.each(this.option.feature, function (featureOpt, featureName) {\n      var Feature = featureManager.getFeature(featureName);\n      if (Feature) {\n        if (Feature.getDefaultOption) {\n          Feature.defaultOption = Feature.getDefaultOption(ecModel);\n        }\n        zrUtil.merge(featureOpt, Feature.defaultOption);\n      }\n    });\n  };\n  ToolboxModel.type = 'toolbox';\n  ToolboxModel.layoutMode = {\n    type: 'box',\n    ignoreSize: true\n  };\n  ToolboxModel.defaultOption = {\n    show: true,\n    z: 6,\n    // zlevel: 0,\n    orient: 'horizontal',\n    left: 'right',\n    top: 'top',\n    // right\n    // bottom\n    backgroundColor: 'transparent',\n    borderColor: tokens.color.border,\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: tokens.size.m,\n    itemSize: 15,\n    itemGap: tokens.size.s,\n    showTitle: true,\n    iconStyle: {\n      borderColor: tokens.color.accent50,\n      color: 'none'\n    },\n    emphasis: {\n      iconStyle: {\n        borderColor: tokens.color.accent50\n      }\n    },\n    // textStyle: {},\n    // feature\n    tooltip: {\n      show: false,\n      position: 'bottom'\n    }\n  };\n  return ToolboxModel;\n}(ComponentModel);\nexport default ToolboxModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport * as graphic from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis } from '../../util/states.js';\nimport Model from '../../model/Model.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport * as listComponentHelper from '../helper/listComponent.js';\nimport ComponentView from '../../view/Component.js';\nimport { ToolboxFeature, getFeature } from './featureManager.js';\nimport { getUID } from '../../util/component.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { getFont } from '../../label/labelStyle.js';\nimport { box, createBoxLayoutReference, getLayoutRect, positionElement } from '../../util/layout.js';\nimport tokens from '../../visual/tokens.js';\nvar ToolboxView = /** @class */function (_super) {\n  __extends(ToolboxView, _super);\n  function ToolboxView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n    if (!toolboxModel.get('show')) {\n      return;\n    }\n    var itemSize = +toolboxModel.get('itemSize');\n    var isVertical = toolboxModel.get('orient') === 'vertical';\n    var featureOpts = toolboxModel.get('feature') || {};\n    var features = this._features || (this._features = {});\n    var featureNames = [];\n    zrUtil.each(featureOpts, function (opt, name) {\n      featureNames.push(name);\n    });\n    new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(zrUtil.curry(processFeature, null)).execute();\n    // Keep for diff.\n    this._featureNames = featureNames;\n    function processFeature(newIndex, oldIndex) {\n      var featureName = featureNames[newIndex];\n      var oldName = featureNames[oldIndex];\n      var featureOpt = featureOpts[featureName];\n      var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n      var feature;\n      // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n      if (payload && payload.newTitle != null && payload.featureName === featureName) {\n        featureOpt.title = payload.newTitle;\n      }\n      if (featureName && !oldName) {\n        // Create\n        if (isUserFeatureName(featureName)) {\n          feature = {\n            onclick: featureModel.option.onclick,\n            featureName: featureName\n          };\n        } else {\n          var Feature = getFeature(featureName);\n          if (!Feature) {\n            return;\n          }\n          feature = new Feature();\n        }\n        features[featureName] = feature;\n      } else {\n        feature = features[oldName];\n        // If feature does not exist.\n        if (!feature) {\n          return;\n        }\n      }\n      feature.uid = getUID('toolbox-feature');\n      feature.model = featureModel;\n      feature.ecModel = ecModel;\n      feature.api = api;\n      var isToolboxFeature = feature instanceof ToolboxFeature;\n      if (!featureName && oldName) {\n        isToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n        return;\n      }\n      if (!featureModel.get('show') || isToolboxFeature && feature.unusable) {\n        isToolboxFeature && feature.remove && feature.remove(ecModel, api);\n        return;\n      }\n      createIconPaths(featureModel, feature, featureName);\n      featureModel.setIconStatus = function (iconName, status) {\n        var option = this.option;\n        var iconPaths = this.iconPaths;\n        option.iconStatus = option.iconStatus || {};\n        option.iconStatus[iconName] = status;\n        if (iconPaths[iconName]) {\n          (status === 'emphasis' ? enterEmphasis : leaveEmphasis)(iconPaths[iconName]);\n        }\n      };\n      if (feature instanceof ToolboxFeature) {\n        if (feature.render) {\n          feature.render(featureModel, ecModel, api, payload);\n        }\n      }\n    }\n    function createIconPaths(featureModel, feature, featureName) {\n      var iconStyleModel = featureModel.getModel('iconStyle');\n      var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']);\n      // If one feature has multiple icons, they are organized as\n      // {\n      //     icon: {\n      //         foo: '',\n      //         bar: ''\n      //     },\n      //     title: {\n      //         foo: '',\n      //         bar: ''\n      //     }\n      // }\n      var icons = feature instanceof ToolboxFeature && feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n      var titles = featureModel.get('title') || {};\n      var iconsMap;\n      var titlesMap;\n      if (zrUtil.isString(icons)) {\n        iconsMap = {};\n        iconsMap[featureName] = icons;\n      } else {\n        iconsMap = icons;\n      }\n      if (zrUtil.isString(titles)) {\n        titlesMap = {};\n        titlesMap[featureName] = titles;\n      } else {\n        titlesMap = titles;\n      }\n      var iconPaths = featureModel.iconPaths = {};\n      zrUtil.each(iconsMap, function (iconStr, iconName) {\n        var path = graphic.createIcon(iconStr, {}, {\n          x: -itemSize / 2,\n          y: -itemSize / 2,\n          width: itemSize,\n          height: itemSize\n        }); // TODO handling image\n        path.setStyle(iconStyleModel.getItemStyle());\n        var pathEmphasisState = path.ensureState('emphasis');\n        pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle();\n        // Text position calculation\n        // TODO: extract `textStyle` from `iconStyle` and use `createTextStyle`\n        var textContent = new ZRText({\n          style: {\n            text: titlesMap[iconName],\n            align: iconStyleEmphasisModel.get('textAlign'),\n            borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n            padding: iconStyleEmphasisModel.get('textPadding'),\n            fill: null,\n            font: getFont({\n              fontStyle: iconStyleEmphasisModel.get('textFontStyle'),\n              fontFamily: iconStyleEmphasisModel.get('textFontFamily'),\n              fontSize: iconStyleEmphasisModel.get('textFontSize'),\n              fontWeight: iconStyleEmphasisModel.get('textFontWeight')\n            }, ecModel)\n          },\n          ignore: true\n        });\n        path.setTextContent(textContent);\n        graphic.setTooltipConfig({\n          el: path,\n          componentModel: toolboxModel,\n          itemName: iconName,\n          formatterParamsExtra: {\n            title: titlesMap[iconName]\n          }\n        });\n        path.__title = titlesMap[iconName];\n        path.on('mouseover', function () {\n          // Should not reuse above hoverStyle, which might be modified.\n          var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n          var defaultTextPosition = isVertical ? toolboxModel.get('right') == null && toolboxModel.get('left') !== 'right' ? 'right' : 'left' : toolboxModel.get('bottom') == null && toolboxModel.get('top') !== 'bottom' ? 'bottom' : 'top';\n          textContent.setStyle({\n            fill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || tokens.color.neutral99,\n            backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\n          });\n          path.setTextConfig({\n            position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n          });\n          textContent.ignore = !toolboxModel.get('showTitle');\n          // Use enterEmphasis and leaveEmphasis provide by ec.\n          // There are flags managed by the echarts.\n          api.enterEmphasis(this);\n        }).on('mouseout', function () {\n          if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\n            api.leaveEmphasis(this);\n          }\n          textContent.hide();\n        });\n        (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? enterEmphasis : leaveEmphasis)(path);\n        group.add(path);\n        path.on('click', zrUtil.bind(feature.onclick, feature, ecModel, api, iconName));\n        iconPaths[iconName] = path;\n      });\n    }\n    var refContainer = createBoxLayoutReference(toolboxModel, api).refContainer;\n    var boxLayoutParams = toolboxModel.getBoxLayoutParams();\n    var padding = toolboxModel.get('padding');\n    var viewRect = getLayoutRect(boxLayoutParams, refContainer, padding);\n    box(toolboxModel.get('orient'), group, toolboxModel.get('itemGap'), viewRect.width, viewRect.height);\n    positionElement(group, boxLayoutParams, refContainer, padding);\n    // Render background after group is layout\n    // FIXME\n    group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel));\n    // Adjust icon title positions to avoid them out of screen\n    isVertical || group.eachChild(function (icon) {\n      var titleText = icon.__title;\n      // const hoverStyle = icon.hoverStyle;\n      // TODO simplify code?\n      var emphasisState = icon.ensureState('emphasis');\n      var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\n      var textContent = icon.getTextContent();\n      var emphasisTextState = textContent && textContent.ensureState('emphasis');\n      // May be background element\n      if (emphasisTextState && !zrUtil.isFunction(emphasisTextState) && titleText) {\n        var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\n        var rect = textContain.getBoundingRect(titleText, ZRText.makeFont(emphasisTextStyle));\n        var offsetX = icon.x + group.x;\n        var offsetY = icon.y + group.y + itemSize;\n        var needPutOnTop = false;\n        if (offsetY + rect.height > api.getHeight()) {\n          emphasisTextConfig.position = 'top';\n          needPutOnTop = true;\n        }\n        var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 10;\n        if (offsetX + rect.width / 2 > api.getWidth()) {\n          emphasisTextConfig.position = ['100%', topOffset];\n          emphasisTextStyle.align = 'right';\n        } else if (offsetX - rect.width / 2 < 0) {\n          emphasisTextConfig.position = [0, topOffset];\n          emphasisTextStyle.align = 'left';\n        }\n      }\n    });\n  };\n  ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n    });\n  };\n  // updateLayout(toolboxModel, ecModel, api, payload) {\n  //     zrUtil.each(this._features, function (feature) {\n  //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n  //     });\n  // },\n  ToolboxView.prototype.remove = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.remove && feature.remove(ecModel, api);\n    });\n    this.group.removeAll();\n  };\n  ToolboxView.prototype.dispose = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n    });\n  };\n  ToolboxView.type = 'toolbox';\n  return ToolboxView;\n}(ComponentView);\nfunction isUserFeatureName(featureName) {\n  return featureName.indexOf('my') === 0;\n}\nexport default ToolboxView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global window, Uint8Array, document */\nimport env from 'zrender/lib/core/env.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport tokens from '../../../visual/tokens.js';\nvar SaveAsImage = /** @class */function (_super) {\n  __extends(SaveAsImage, _super);\n  function SaveAsImage() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  SaveAsImage.prototype.onclick = function (ecModel, api) {\n    var model = this.model;\n    var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\n    var isSvg = api.getZr().painter.getType() === 'svg';\n    var type = isSvg ? 'svg' : model.get('type', true) || 'png';\n    var url = api.getConnectedDataURL({\n      type: type,\n      backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || tokens.color.neutral00,\n      connectedBackgroundColor: model.get('connectedBackgroundColor'),\n      excludeComponents: model.get('excludeComponents'),\n      pixelRatio: model.get('pixelRatio')\n    });\n    var browser = env.browser;\n    // Chrome, Firefox, New Edge\n    if (typeof MouseEvent === 'function' && (browser.newEdge || !browser.ie && !browser.edge)) {\n      var $a = document.createElement('a');\n      $a.download = title + '.' + type;\n      $a.target = '_blank';\n      $a.href = url;\n      var evt = new MouseEvent('click', {\n        // some micro front-end framework window maybe is a Proxy\n        view: document.defaultView,\n        bubbles: true,\n        cancelable: false\n      });\n      $a.dispatchEvent(evt);\n    }\n    // IE or old Edge\n    else {\n      // @ts-ignore\n      if (window.navigator.msSaveOrOpenBlob || isSvg) {\n        var parts = url.split(',');\n        // data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n        var base64Encoded = parts[0].indexOf('base64') > -1;\n        var bstr = isSvg\n        // should decode the svg data uri first\n        ? decodeURIComponent(parts[1]) : parts[1];\n        // only `atob` when the data uri is encoded with base64\n        // otherwise, like `svg` data uri exported by zrender,\n        // there will be an error, for it's not encoded with base64.\n        // (just a url-encoded string through `encodeURIComponent`)\n        base64Encoded && (bstr = window.atob(bstr));\n        var filename = title + '.' + type;\n        // @ts-ignore\n        if (window.navigator.msSaveOrOpenBlob) {\n          var n = bstr.length;\n          var u8arr = new Uint8Array(n);\n          while (n--) {\n            u8arr[n] = bstr.charCodeAt(n);\n          }\n          var blob = new Blob([u8arr]); // @ts-ignore\n          window.navigator.msSaveOrOpenBlob(blob, filename);\n        } else {\n          var frame = document.createElement('iframe');\n          document.body.appendChild(frame);\n          var cw = frame.contentWindow;\n          var doc = cw.document;\n          doc.open('image/svg+xml', 'replace');\n          doc.write(bstr);\n          doc.close();\n          cw.focus();\n          doc.execCommand('SaveAs', true, filename);\n          document.body.removeChild(frame);\n        }\n      } else {\n        var lang = model.get('lang');\n        var html = '' + '<body style=\"margin:0;\">' + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + (lang && lang[0] || '') + '\" />' + '</body>';\n        var tab = window.open();\n        tab.document.write(html);\n        tab.document.title = title;\n      }\n    }\n  };\n  SaveAsImage.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\n      title: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'title']),\n      type: 'png',\n      // Default use option.backgroundColor\n      // backgroundColor: '#fff',\n      connectedBackgroundColor: tokens.color.neutral00,\n      name: '',\n      excludeComponents: ['toolbox'],\n      // use current pixel ratio of device by default\n      // pixelRatio: 1,\n      lang: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'lang'])\n    };\n    return defaultOption;\n  };\n  return SaveAsImage;\n}(ToolboxFeature);\nexport default SaveAsImage;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { SINGLE_REFERRING } from '../../../util/model.js';\nvar INNER_STACK_KEYWORD = '__ec_magicType_stack__';\nvar ICON_TYPES = ['line', 'bar', 'stack'];\n// stack and tiled appears in pair for the title\nvar TITLE_TYPES = ['line', 'bar', 'stack', 'tiled'];\nvar radioTypes = [['line', 'bar'], ['stack']];\nvar MagicType = /** @class */function (_super) {\n  __extends(MagicType, _super);\n  function MagicType() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  MagicType.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon');\n    var icons = {};\n    zrUtil.each(model.get('type'), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n  MagicType.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: [],\n      // Icon group\n      icon: {\n        line: 'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',\n        bar: 'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',\n        // eslint-disable-next-line\n        stack: 'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z' // jshint ignore:line\n      },\n      // `line`, `bar`, `stack`, `tiled`\n      title: ecModel.getLocaleModel().get(['toolbox', 'magicType', 'title']),\n      option: {},\n      seriesIndex: {}\n    };\n    return defaultOption;\n  };\n  MagicType.prototype.onclick = function (ecModel, api, type) {\n    var model = this.model;\n    var seriesIndex = model.get(['seriesIndex', type]);\n    // Not supported magicType\n    if (!seriesOptGenreator[type]) {\n      return;\n    }\n    var newOption = {\n      series: []\n    };\n    var generateNewSeriesTypes = function (seriesModel) {\n      var seriesType = seriesModel.subType;\n      var seriesId = seriesModel.id;\n      var newSeriesOpt = seriesOptGenreator[type](seriesType, seriesId, seriesModel, model);\n      if (newSeriesOpt) {\n        // PENDING If merge original option?\n        zrUtil.defaults(newSeriesOpt, seriesModel.option);\n        newOption.series.push(newSeriesOpt);\n      }\n      // Modify boundaryGap\n      var coordSys = seriesModel.coordinateSystem;\n      if (coordSys && coordSys.type === 'cartesian2d' && (type === 'line' || type === 'bar')) {\n        var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n        if (categoryAxis) {\n          var axisDim = categoryAxis.dim;\n          var axisType = axisDim + 'Axis';\n          var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n          var axisIndex = axisModel.componentIndex;\n          newOption[axisType] = newOption[axisType] || [];\n          for (var i = 0; i <= axisIndex; i++) {\n            newOption[axisType][axisIndex] = newOption[axisType][axisIndex] || {};\n          }\n          newOption[axisType][axisIndex].boundaryGap = type === 'bar';\n        }\n      }\n    };\n    zrUtil.each(radioTypes, function (radio) {\n      if (zrUtil.indexOf(radio, type) >= 0) {\n        zrUtil.each(radio, function (item) {\n          model.setIconStatus(item, 'normal');\n        });\n      }\n    });\n    model.setIconStatus(type, 'emphasis');\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: seriesIndex == null ? null : {\n        seriesIndex: seriesIndex\n      }\n    }, generateNewSeriesTypes);\n    var newTitle;\n    var currentType = type;\n    // Change title of stack\n    if (type === 'stack') {\n      // use titles in model instead of ecModel\n      // as stack and tiled appears in pair, just flip them\n      // no need of checking stack state\n      newTitle = zrUtil.merge({\n        stack: model.option.title.tiled,\n        tiled: model.option.title.stack\n      }, model.option.title);\n      if (model.get(['iconStatus', type]) !== 'emphasis') {\n        currentType = 'tiled';\n      }\n    }\n    api.dispatchAction({\n      type: 'changeMagicType',\n      currentType: currentType,\n      newOption: newOption,\n      newTitle: newTitle,\n      featureName: 'magicType'\n    });\n  };\n  return MagicType;\n}(ToolboxFeature);\nvar seriesOptGenreator = {\n  'line': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'bar') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'line',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'line']) || {}, true);\n    }\n  },\n  'bar': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'line') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'bar',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'bar']) || {}, true);\n    }\n  },\n  'stack': function (seriesType, seriesId, seriesModel, model) {\n    var isStack = seriesModel.get('stack') === INNER_STACK_KEYWORD;\n    if (seriesType === 'line' || seriesType === 'bar') {\n      model.setIconStatus('stack', isStack ? 'normal' : 'emphasis');\n      return zrUtil.merge({\n        id: seriesId,\n        stack: isStack ? '' : INNER_STACK_KEYWORD\n      }, model.get(['option', 'stack']) || {}, true);\n    }\n  }\n};\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'changeMagicType',\n  event: 'magicTypeChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.mergeOption(payload.newOption);\n});\nexport default MagicType;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global document */\nimport * as echarts from '../../../core/echarts.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { addEventListener } from 'zrender/lib/core/event.js';\nimport { warn } from '../../../util/log.js';\nimport tokens from '../../../visual/tokens.js';\n/* global document */\nvar BLOCK_SPLITER = new Array(60).join('-');\nvar ITEM_SPLITER = '\\t';\n/**\n * Group series into two types\n *  1. on category axis, like line, bar\n *  2. others, like scatter, pie\n */\nfunction groupSeries(ecModel) {\n  var seriesGroupByCategoryAxis = {};\n  var otherSeries = [];\n  var meta = [];\n  ecModel.eachRawSeries(function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\n      // TODO: TYPE Consider polar? Include polar may increase unecessary bundle size.\n      var baseAxis = coordSys.getBaseAxis();\n      if (baseAxis.type === 'category') {\n        var key = baseAxis.dim + '_' + baseAxis.index;\n        if (!seriesGroupByCategoryAxis[key]) {\n          seriesGroupByCategoryAxis[key] = {\n            categoryAxis: baseAxis,\n            valueAxis: coordSys.getOtherAxis(baseAxis),\n            series: []\n          };\n          meta.push({\n            axisDim: baseAxis.dim,\n            axisIndex: baseAxis.index\n          });\n        }\n        seriesGroupByCategoryAxis[key].series.push(seriesModel);\n      } else {\n        otherSeries.push(seriesModel);\n      }\n    } else {\n      otherSeries.push(seriesModel);\n    }\n  });\n  return {\n    seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\n    other: otherSeries,\n    meta: meta\n  };\n}\n/**\n * Assemble content of series on cateogory axis\n * @inner\n */\nfunction assembleSeriesWithCategoryAxis(groups) {\n  var tables = [];\n  zrUtil.each(groups, function (group, key) {\n    var categoryAxis = group.categoryAxis;\n    var valueAxis = group.valueAxis;\n    var valueAxisDim = valueAxis.dim;\n    var headers = [' '].concat(zrUtil.map(group.series, function (series) {\n      return series.name;\n    }));\n    // @ts-ignore TODO Polar\n    var columns = [categoryAxis.model.getCategories()];\n    zrUtil.each(group.series, function (series) {\n      var rawData = series.getRawData();\n      columns.push(series.getRawData().mapArray(rawData.mapDimension(valueAxisDim), function (val) {\n        return val;\n      }));\n    });\n    // Assemble table content\n    var lines = [headers.join(ITEM_SPLITER)];\n    for (var i = 0; i < columns[0].length; i++) {\n      var items = [];\n      for (var j = 0; j < columns.length; j++) {\n        items.push(columns[j][i]);\n      }\n      lines.push(items.join(ITEM_SPLITER));\n    }\n    tables.push(lines.join('\\n'));\n  });\n  return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n/**\n * Assemble content of other series\n */\nfunction assembleOtherSeries(series) {\n  return zrUtil.map(series, function (series) {\n    var data = series.getRawData();\n    var lines = [series.name];\n    var vals = [];\n    data.each(data.dimensions, function () {\n      var argLen = arguments.length;\n      var dataIndex = arguments[argLen - 1];\n      var name = data.getName(dataIndex);\n      for (var i = 0; i < argLen - 1; i++) {\n        vals[i] = arguments[i];\n      }\n      lines.push((name ? name + ITEM_SPLITER : '') + vals.join(ITEM_SPLITER));\n    });\n    return lines.join('\\n');\n  }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\nfunction getContentFromModel(ecModel) {\n  var result = groupSeries(ecModel);\n  return {\n    value: zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis), assembleOtherSeries(result.other)], function (str) {\n      return !!str.replace(/[\\n\\t\\s]/g, '');\n    }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\n    meta: result.meta\n  };\n}\nfunction trim(str) {\n  return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n}\n/**\n * If a block is tsv format\n */\nfunction isTSVFormat(block) {\n  // Simple method to find out if a block is tsv format\n  var firstLine = block.slice(0, block.indexOf('\\n'));\n  if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\n    return true;\n  }\n}\nvar itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\n/**\n * @param {string} tsv\n * @return {Object}\n */\nfunction parseTSVContents(tsv) {\n  var tsvLines = tsv.split(/\\n+/g);\n  var headers = trim(tsvLines.shift()).split(itemSplitRegex);\n  var categories = [];\n  var series = zrUtil.map(headers, function (header) {\n    return {\n      name: header,\n      data: []\n    };\n  });\n  for (var i = 0; i < tsvLines.length; i++) {\n    var items = trim(tsvLines[i]).split(itemSplitRegex);\n    categories.push(items.shift());\n    for (var j = 0; j < items.length; j++) {\n      series[j] && (series[j].data[i] = items[j]);\n    }\n  }\n  return {\n    series: series,\n    categories: categories\n  };\n}\nfunction parseListContents(str) {\n  var lines = str.split(/\\n+/g);\n  var seriesName = trim(lines.shift());\n  var data = [];\n  for (var i = 0; i < lines.length; i++) {\n    // if line is empty, ignore it.\n    // there is a case that a user forgot to delete `\\n`.\n    var line = trim(lines[i]);\n    if (!line) {\n      continue;\n    }\n    var items = line.split(itemSplitRegex);\n    var name_1 = '';\n    var value = void 0;\n    var hasName = false;\n    if (isNaN(items[0])) {\n      // First item is name\n      hasName = true;\n      name_1 = items[0];\n      items = items.slice(1);\n      data[i] = {\n        name: name_1,\n        value: []\n      };\n      value = data[i].value;\n    } else {\n      value = data[i] = [];\n    }\n    for (var j = 0; j < items.length; j++) {\n      value.push(+items[j]);\n    }\n    if (value.length === 1) {\n      hasName ? data[i].value = value[0] : data[i] = value[0];\n    }\n  }\n  return {\n    name: seriesName,\n    data: data\n  };\n}\nfunction parseContents(str, blockMetaList) {\n  var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\n  var newOption = {\n    series: []\n  };\n  zrUtil.each(blocks, function (block, idx) {\n    if (isTSVFormat(block)) {\n      var result = parseTSVContents(block);\n      var blockMeta = blockMetaList[idx];\n      var axisKey = blockMeta.axisDim + 'Axis';\n      if (blockMeta) {\n        newOption[axisKey] = newOption[axisKey] || [];\n        newOption[axisKey][blockMeta.axisIndex] = {\n          data: result.categories\n        };\n        newOption.series = newOption.series.concat(result.series);\n      }\n    } else {\n      var result = parseListContents(block);\n      newOption.series.push(result);\n    }\n  });\n  return newOption;\n}\nvar DataView = /** @class */function (_super) {\n  __extends(DataView, _super);\n  function DataView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  DataView.prototype.onclick = function (ecModel, api) {\n    // FIXME: better way?\n    setTimeout(function () {\n      api.dispatchAction({\n        type: 'hideTip'\n      });\n    });\n    var container = api.getDom();\n    var model = this.model;\n    if (this._dom) {\n      container.removeChild(this._dom);\n    }\n    var root = document.createElement('div');\n    // use padding to avoid 5px whitespace\n    root.style.cssText = 'position:absolute;top:0;bottom:0;left:0;right:0;padding:5px';\n    root.style.backgroundColor = model.get('backgroundColor') || tokens.color.neutral00;\n    // Create elements\n    var header = document.createElement('h4');\n    var lang = model.get('lang') || [];\n    header.innerHTML = lang[0] || model.get('title');\n    header.style.cssText = 'margin:10px 20px';\n    header.style.color = model.get('textColor');\n    var viewMain = document.createElement('div');\n    var textarea = document.createElement('textarea');\n    viewMain.style.cssText = 'overflow:auto';\n    var optionToContent = model.get('optionToContent');\n    var contentToOption = model.get('contentToOption');\n    var result = getContentFromModel(ecModel);\n    if (zrUtil.isFunction(optionToContent)) {\n      var htmlOrDom = optionToContent(api.getOption());\n      if (zrUtil.isString(htmlOrDom)) {\n        viewMain.innerHTML = htmlOrDom;\n      } else if (zrUtil.isDom(htmlOrDom)) {\n        viewMain.appendChild(htmlOrDom);\n      }\n    } else {\n      // Use default textarea\n      textarea.readOnly = model.get('readOnly');\n      var style = textarea.style;\n      // eslint-disable-next-line max-len\n      style.cssText = 'display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none';\n      style.color = model.get('textColor');\n      style.borderColor = model.get('textareaBorderColor');\n      style.backgroundColor = model.get('textareaColor');\n      textarea.value = result.value;\n      viewMain.appendChild(textarea);\n    }\n    var blockMetaList = result.meta;\n    var buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'position:absolute;bottom:5px;left:0;right:0';\n    // eslint-disable-next-line max-len\n    var buttonStyle = 'float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\n    var closeButton = document.createElement('div');\n    var refreshButton = document.createElement('div');\n    buttonStyle += ';background-color:' + model.get('buttonColor');\n    buttonStyle += ';color:' + model.get('buttonTextColor');\n    var self = this;\n    function close() {\n      container.removeChild(root);\n      self._dom = null;\n    }\n    addEventListener(closeButton, 'click', close);\n    addEventListener(refreshButton, 'click', function () {\n      if (contentToOption == null && optionToContent != null || contentToOption != null && optionToContent == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          // eslint-disable-next-line\n          warn('It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored.');\n        }\n        close();\n        return;\n      }\n      var newOption;\n      try {\n        if (zrUtil.isFunction(contentToOption)) {\n          newOption = contentToOption(viewMain, api.getOption());\n        } else {\n          newOption = parseContents(textarea.value, blockMetaList);\n        }\n      } catch (e) {\n        close();\n        throw new Error('Data view format error ' + e);\n      }\n      if (newOption) {\n        api.dispatchAction({\n          type: 'changeDataView',\n          newOption: newOption\n        });\n      }\n      close();\n    });\n    closeButton.innerHTML = lang[1];\n    refreshButton.innerHTML = lang[2];\n    refreshButton.style.cssText = closeButton.style.cssText = buttonStyle;\n    !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\n    buttonContainer.appendChild(closeButton);\n    root.appendChild(header);\n    root.appendChild(viewMain);\n    root.appendChild(buttonContainer);\n    viewMain.style.height = container.clientHeight - 80 + 'px';\n    container.appendChild(root);\n    this._dom = root;\n  };\n  DataView.prototype.remove = function (ecModel, api) {\n    this._dom && api.getDom().removeChild(this._dom);\n  };\n  DataView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n  DataView.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      readOnly: false,\n      optionToContent: null,\n      contentToOption: null,\n      // eslint-disable-next-line\n      icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'title']),\n      lang: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'lang']),\n      backgroundColor: tokens.color.background,\n      textColor: tokens.color.primary,\n      textareaColor: tokens.color.background,\n      textareaBorderColor: tokens.color.border,\n      buttonColor: tokens.color.accent50,\n      buttonTextColor: tokens.color.neutral00\n    };\n    return defaultOption;\n  };\n  return DataView;\n}(ToolboxFeature);\n/**\n * @inner\n */\nfunction tryMergeDataOption(newData, originalData) {\n  return zrUtil.map(newData, function (newVal, idx) {\n    var original = originalData && originalData[idx];\n    if (zrUtil.isObject(original) && !zrUtil.isArray(original)) {\n      var newValIsObject = zrUtil.isObject(newVal) && !zrUtil.isArray(newVal);\n      if (!newValIsObject) {\n        newVal = {\n          value: newVal\n        };\n      }\n      // original data has name but new data has no name\n      var shouldDeleteName = original.name != null && newVal.name == null;\n      // Original data has option\n      newVal = zrUtil.defaults(newVal, original);\n      shouldDeleteName && delete newVal.name;\n      return newVal;\n    } else {\n      return newVal;\n    }\n  });\n}\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'changeDataView',\n  event: 'dataViewChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  var newSeriesOptList = [];\n  zrUtil.each(payload.newOption.series, function (seriesOpt) {\n    var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\n    if (!seriesModel) {\n      // New created series\n      // Geuss the series type\n      newSeriesOptList.push(zrUtil.extend({\n        // Default is scatter\n        type: 'scatter'\n      }, seriesOpt));\n    } else {\n      var originalData = seriesModel.get('data');\n      newSeriesOptList.push({\n        name: seriesOpt.name,\n        data: tryMergeDataOption(seriesOpt.data, originalData)\n      });\n    }\n  });\n  ecModel.mergeOption(zrUtil.defaults({\n    series: newSeriesOptList\n  }, payload.newOption));\n});\nexport default DataView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nvar each = zrUtil.each;\nvar inner = makeInner();\n/**\n * @param ecModel\n * @param newSnapshot key is dataZoomId\n */\nexport function push(ecModel, newSnapshot) {\n  var storedSnapshots = getStoreSnapshots(ecModel);\n  // If previous dataZoom can not be found,\n  // complete an range with current range.\n  each(newSnapshot, function (batchItem, dataZoomId) {\n    var i = storedSnapshots.length - 1;\n    for (; i >= 0; i--) {\n      var snapshot = storedSnapshots[i];\n      if (snapshot[dataZoomId]) {\n        break;\n      }\n    }\n    if (i < 0) {\n      // No origin range set, create one by current range.\n      var dataZoomModel = ecModel.queryComponents({\n        mainType: 'dataZoom',\n        subType: 'select',\n        id: dataZoomId\n      })[0];\n      if (dataZoomModel) {\n        var percentRange = dataZoomModel.getPercentRange();\n        storedSnapshots[0][dataZoomId] = {\n          dataZoomId: dataZoomId,\n          start: percentRange[0],\n          end: percentRange[1]\n        };\n      }\n    }\n  });\n  storedSnapshots.push(newSnapshot);\n}\nexport function pop(ecModel) {\n  var storedSnapshots = getStoreSnapshots(ecModel);\n  var head = storedSnapshots[storedSnapshots.length - 1];\n  storedSnapshots.length > 1 && storedSnapshots.pop();\n  // Find top for all dataZoom.\n  var snapshot = {};\n  each(head, function (batchItem, dataZoomId) {\n    for (var i = storedSnapshots.length - 1; i >= 0; i--) {\n      batchItem = storedSnapshots[i][dataZoomId];\n      if (batchItem) {\n        snapshot[dataZoomId] = batchItem;\n        break;\n      }\n    }\n  });\n  return snapshot;\n}\nexport function clear(ecModel) {\n  inner(ecModel).snapshots = null;\n}\nexport function count(ecModel) {\n  return getStoreSnapshots(ecModel).length;\n}\n/**\n * History length of each dataZoom may be different.\n * this._history[0] is used to store origin range.\n */\nfunction getStoreSnapshots(ecModel) {\n  var store = inner(ecModel);\n  if (!store.snapshots) {\n    store.snapshots = [{}];\n  }\n  return store.snapshots;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts.js';\nimport * as history from '../../dataZoom/history.js';\nimport { ToolboxFeature } from '../featureManager.js';\nvar RestoreOption = /** @class */function (_super) {\n  __extends(RestoreOption, _super);\n  function RestoreOption() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  RestoreOption.prototype.onclick = function (ecModel, api) {\n    history.clear(ecModel);\n    api.dispatchAction({\n      type: 'restore',\n      from: this.uid\n    });\n  };\n  RestoreOption.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      // eslint-disable-next-line\n      icon: 'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',\n      title: ecModel.getLocaleModel().get(['toolbox', 'restore', 'title'])\n    };\n    return defaultOption;\n  };\n  return RestoreOption;\n}(ToolboxFeature);\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'restore',\n  event: 'restore',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.resetOption('recreate');\n});\nexport default RestoreOption;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, indexOf, curry, assert, map, createHashMap } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as brushHelper from './brushHelper.js';\nimport { parseFinder as modelUtilParseFinder } from '../../util/model.js';\n// FIXME\n// how to genarialize to more coordinate systems.\nvar INCLUDE_FINDER_MAIN_TYPES = ['grid', 'xAxis', 'yAxis', 'geo', 'graph', 'polar', 'radiusAxis', 'angleAxis', 'bmap'];\nvar BrushTargetManager = /** @class */function () {\n  /**\n   * @param finder contains Index/Id/Name of xAxis/yAxis/geo/grid\n   *        Each can be {number|Array.<number>}. like: {xAxisIndex: [3, 4]}\n   * @param opt.include include coordinate system types.\n   */\n  function BrushTargetManager(finder, ecModel, opt) {\n    var _this = this;\n    this._targetInfoList = [];\n    var foundCpts = parseFinder(ecModel, finder);\n    each(targetInfoBuilders, function (builder, type) {\n      if (!opt || !opt.include || indexOf(opt.include, type) >= 0) {\n        builder(foundCpts, _this._targetInfoList);\n      }\n    });\n  }\n  BrushTargetManager.prototype.setOutputRanges = function (areas, ecModel) {\n    this.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      (area.coordRanges || (area.coordRanges = [])).push(coordRange);\n      // area.coordRange is the first of area.coordRanges\n      if (!area.coordRange) {\n        area.coordRange = coordRange;\n        // In 'category' axis, coord to pixel is not reversible, so we can not\n        // rebuild range by coordRange accrately, which may bring trouble when\n        // brushing only one item. So we use __rangeOffset to rebuilding range\n        // by coordRange. And this it only used in brush component so it is no\n        // need to be adapted to coordRanges.\n        var result = coordConvert[area.brushType](0, coordSys, coordRange);\n        area.__rangeOffset = {\n          offset: diffProcessor[area.brushType](result.values, area.range, [1, 1]),\n          xyMinMax: result.xyMinMax\n        };\n      }\n    });\n    return areas;\n  };\n  BrushTargetManager.prototype.matchOutputRanges = function (areas, ecModel, cb) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n      if (targetInfo && targetInfo !== true) {\n        each(targetInfo.coordSyses, function (coordSys) {\n          var result = coordConvert[area.brushType](1, coordSys, area.range, true);\n          cb(area, result.values, coordSys, ecModel);\n        });\n      }\n    }, this);\n  };\n  /**\n   * the `areas` is `BrushModel.areas`.\n   * Called in layout stage.\n   * convert `area.coordRange` to global range and set panelId to `area.range`.\n   */\n  BrushTargetManager.prototype.setInputRanges = function (areas, ecModel) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n      if (process.env.NODE_ENV !== 'production') {\n        assert(!targetInfo || targetInfo === true || area.coordRange, 'coordRange must be specified when coord index specified.');\n        assert(!targetInfo || targetInfo !== true || area.range, 'range must be specified in global brush.');\n      }\n      area.range = area.range || [];\n      // convert coordRange to global range and set panelId.\n      if (targetInfo && targetInfo !== true) {\n        area.panelId = targetInfo.panelId;\n        // (1) area.range should always be calculate from coordRange but does\n        // not keep its original value, for the sake of the dataZoom scenario,\n        // where area.coordRange remains unchanged but area.range may be changed.\n        // (2) Only support converting one coordRange to pixel range in brush\n        // component. So do not consider `coordRanges`.\n        // (3) About __rangeOffset, see comment above.\n        var result = coordConvert[area.brushType](0, targetInfo.coordSys, area.coordRange);\n        var rangeOffset = area.__rangeOffset;\n        area.range = rangeOffset ? diffProcessor[area.brushType](result.values, rangeOffset.offset, getScales(result.xyMinMax, rangeOffset.xyMinMax)) : result.values;\n      }\n    }, this);\n  };\n  BrushTargetManager.prototype.makePanelOpts = function (api, getDefaultBrushType) {\n    return map(this._targetInfoList, function (targetInfo) {\n      var rect = targetInfo.getPanelRect();\n      return {\n        panelId: targetInfo.panelId,\n        defaultBrushType: getDefaultBrushType ? getDefaultBrushType(targetInfo) : null,\n        clipPath: brushHelper.makeRectPanelClipPath(rect),\n        isTargetByCursor: brushHelper.makeRectIsTargetByCursor(rect, api, targetInfo.coordSysModel),\n        getLinearBrushOtherExtent: brushHelper.makeLinearBrushOtherExtent(rect)\n      };\n    });\n  };\n  BrushTargetManager.prototype.controlSeries = function (area, seriesModel, ecModel) {\n    // Check whether area is bound in coord, and series do not belong to that coord.\n    // If do not do this check, some brush (like lineX) will controll all axes.\n    var targetInfo = this.findTargetInfo(area, ecModel);\n    return targetInfo === true || targetInfo && indexOf(targetInfo.coordSyses, seriesModel.coordinateSystem) >= 0;\n  };\n  /**\n   * If return Object, a coord found.\n   * If return true, global found.\n   * Otherwise nothing found.\n   */\n  BrushTargetManager.prototype.findTargetInfo = function (area, ecModel) {\n    var targetInfoList = this._targetInfoList;\n    var foundCpts = parseFinder(ecModel, area);\n    for (var i = 0; i < targetInfoList.length; i++) {\n      var targetInfo = targetInfoList[i];\n      var areaPanelId = area.panelId;\n      if (areaPanelId) {\n        if (targetInfo.panelId === areaPanelId) {\n          return targetInfo;\n        }\n      } else {\n        for (var j = 0; j < targetInfoMatchers.length; j++) {\n          if (targetInfoMatchers[j](foundCpts, targetInfo)) {\n            return targetInfo;\n          }\n        }\n      }\n    }\n    return true;\n  };\n  return BrushTargetManager;\n}();\nfunction formatMinMax(minMax) {\n  minMax[0] > minMax[1] && minMax.reverse();\n  return minMax;\n}\nfunction parseFinder(ecModel, finder) {\n  return modelUtilParseFinder(ecModel, finder, {\n    includeMainTypes: INCLUDE_FINDER_MAIN_TYPES\n  });\n}\nvar targetInfoBuilders = {\n  grid: function (foundCpts, targetInfoList) {\n    var xAxisModels = foundCpts.xAxisModels;\n    var yAxisModels = foundCpts.yAxisModels;\n    var gridModels = foundCpts.gridModels;\n    // Remove duplicated.\n    var gridModelMap = createHashMap();\n    var xAxesHas = {};\n    var yAxesHas = {};\n    if (!xAxisModels && !yAxisModels && !gridModels) {\n      return;\n    }\n    each(xAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n    });\n    each(yAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      yAxesHas[gridModel.id] = true;\n    });\n    each(gridModels, function (gridModel) {\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n      yAxesHas[gridModel.id] = true;\n    });\n    gridModelMap.each(function (gridModel) {\n      var grid = gridModel.coordinateSystem;\n      var cartesians = [];\n      each(grid.getCartesians(), function (cartesian, index) {\n        if (indexOf(xAxisModels, cartesian.getAxis('x').model) >= 0 || indexOf(yAxisModels, cartesian.getAxis('y').model) >= 0) {\n          cartesians.push(cartesian);\n        }\n      });\n      targetInfoList.push({\n        panelId: 'grid--' + gridModel.id,\n        gridModel: gridModel,\n        coordSysModel: gridModel,\n        // Use the first one as the representitive coordSys.\n        coordSys: cartesians[0],\n        coordSyses: cartesians,\n        getPanelRect: panelRectBuilders.grid,\n        xAxisDeclared: xAxesHas[gridModel.id],\n        yAxisDeclared: yAxesHas[gridModel.id]\n      });\n    });\n  },\n  geo: function (foundCpts, targetInfoList) {\n    each(foundCpts.geoModels, function (geoModel) {\n      var coordSys = geoModel.coordinateSystem;\n      targetInfoList.push({\n        panelId: 'geo--' + geoModel.id,\n        geoModel: geoModel,\n        coordSysModel: geoModel,\n        coordSys: coordSys,\n        coordSyses: [coordSys],\n        getPanelRect: panelRectBuilders.geo\n      });\n    });\n  }\n};\nvar targetInfoMatchers = [\n// grid\nfunction (foundCpts, targetInfo) {\n  var xAxisModel = foundCpts.xAxisModel;\n  var yAxisModel = foundCpts.yAxisModel;\n  var gridModel = foundCpts.gridModel;\n  !gridModel && xAxisModel && (gridModel = xAxisModel.axis.grid.model);\n  !gridModel && yAxisModel && (gridModel = yAxisModel.axis.grid.model);\n  return gridModel && gridModel === targetInfo.gridModel;\n},\n// geo\nfunction (foundCpts, targetInfo) {\n  var geoModel = foundCpts.geoModel;\n  return geoModel && geoModel === targetInfo.geoModel;\n}];\nvar panelRectBuilders = {\n  grid: function () {\n    // grid is not Transformable.\n    return this.coordSys.master.getRect().clone();\n  },\n  geo: function () {\n    var coordSys = this.coordSys;\n    var rect = coordSys.getBoundingRect().clone();\n    // geo roam and zoom transform\n    rect.applyTransform(graphic.getTransform(coordSys));\n    return rect;\n  }\n};\nvar coordConvert = {\n  lineX: curry(axisConvert, 0),\n  lineY: curry(axisConvert, 1),\n  rect: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xminymin = to ? coordSys.pointToData([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp);\n    var xmaxymax = to ? coordSys.pointToData([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp);\n    var values = [formatMinMax([xminymin[0], xmaxymax[0]]), formatMinMax([xminymin[1], xmaxymax[1]])];\n    return {\n      values: values,\n      xyMinMax: values\n    };\n  },\n  polygon: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xyMinMax = [[Infinity, -Infinity], [Infinity, -Infinity]];\n    var values = map(rangeOrCoordRange, function (item) {\n      var p = to ? coordSys.pointToData(item, clamp) : coordSys.dataToPoint(item, clamp);\n      xyMinMax[0][0] = Math.min(xyMinMax[0][0], p[0]);\n      xyMinMax[1][0] = Math.min(xyMinMax[1][0], p[1]);\n      xyMinMax[0][1] = Math.max(xyMinMax[0][1], p[0]);\n      xyMinMax[1][1] = Math.max(xyMinMax[1][1], p[1]);\n      return p;\n    });\n    return {\n      values: values,\n      xyMinMax: xyMinMax\n    };\n  }\n};\nfunction axisConvert(axisNameIndex, to, coordSys, rangeOrCoordRange) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(coordSys.type === 'cartesian2d', 'lineX/lineY brush is available only in cartesian2d.');\n  }\n  var axis = coordSys.getAxis(['x', 'y'][axisNameIndex]);\n  var values = formatMinMax(map([0, 1], function (i) {\n    return to ? axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i]), true) : axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]));\n  }));\n  var xyMinMax = [];\n  xyMinMax[axisNameIndex] = values;\n  xyMinMax[1 - axisNameIndex] = [NaN, NaN];\n  return {\n    values: values,\n    xyMinMax: xyMinMax\n  };\n}\nvar diffProcessor = {\n  lineX: curry(axisDiffProcessor, 0),\n  lineY: curry(axisDiffProcessor, 1),\n  rect: function (values, refer, scales) {\n    return [[values[0][0] - scales[0] * refer[0][0], values[0][1] - scales[0] * refer[0][1]], [values[1][0] - scales[1] * refer[1][0], values[1][1] - scales[1] * refer[1][1]]];\n  },\n  polygon: function (values, refer, scales) {\n    return map(values, function (item, idx) {\n      return [item[0] - scales[0] * refer[idx][0], item[1] - scales[1] * refer[idx][1]];\n    });\n  }\n};\nfunction axisDiffProcessor(axisNameIndex, values, refer, scales) {\n  return [values[0] - scales[axisNameIndex] * refer[0], values[1] - scales[axisNameIndex] * refer[1]];\n}\n// We have to process scale caused by dataZoom manually,\n// although it might be not accurate.\n// Return [0~1, 0~1]\nfunction getScales(xyMinMaxCurr, xyMinMaxOrigin) {\n  var sizeCurr = getSize(xyMinMaxCurr);\n  var sizeOrigin = getSize(xyMinMaxOrigin);\n  var scales = [sizeCurr[0] / sizeOrigin[0], sizeCurr[1] / sizeOrigin[1]];\n  isNaN(scales[0]) && (scales[0] = 1);\n  isNaN(scales[1]) && (scales[1] = 1);\n  return scales;\n}\nfunction getSize(xyMinMax) {\n  return xyMinMax ? [xyMinMax[0][1] - xyMinMax[0][0], xyMinMax[1][1] - xyMinMax[1][0]] : [NaN, NaN];\n}\nexport default BrushTargetManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n// TODO depends on DataZoom and Brush\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BrushController from '../../helper/BrushController.js';\nimport BrushTargetManager from '../../helper/BrushTargetManager.js';\nimport * as history from '../../dataZoom/history.js';\nimport sliderMove from '../../helper/sliderMove.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { makeInternalComponentId, parseFinder } from '../../../util/model.js';\nimport { registerInternalOptionCreator } from '../../../model/internalComponentCreator.js';\nimport tokens from '../../../visual/tokens.js';\nvar each = zrUtil.each;\nvar DATA_ZOOM_ID_BASE = makeInternalComponentId('toolbox-dataZoom_');\nvar ICON_TYPES = ['zoom', 'back'];\nvar DataZoomFeature = /** @class */function (_super) {\n  __extends(DataZoomFeature, _super);\n  function DataZoomFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  DataZoomFeature.prototype.render = function (featureModel, ecModel, api, payload) {\n    if (!this._brushController) {\n      this._brushController = new BrushController(api.getZr());\n      this._brushController.on('brush', zrUtil.bind(this._onBrush, this)).mount();\n    }\n    updateZoomBtnStatus(featureModel, ecModel, this, payload, api);\n    updateBackBtnStatus(featureModel, ecModel);\n  };\n  DataZoomFeature.prototype.onclick = function (ecModel, api, type) {\n    handlers[type].call(this);\n  };\n  DataZoomFeature.prototype.remove = function (ecModel, api) {\n    this._brushController && this._brushController.unmount();\n  };\n  DataZoomFeature.prototype.dispose = function (ecModel, api) {\n    this._brushController && this._brushController.dispose();\n  };\n  DataZoomFeature.prototype._onBrush = function (eventParam) {\n    var areas = eventParam.areas;\n    if (!eventParam.isEnd || !areas.length) {\n      return;\n    }\n    var snapshot = {};\n    var ecModel = this.ecModel;\n    this._brushController.updateCovers([]); // remove cover\n    var brushTargetManager = new BrushTargetManager(makeAxisFinder(this.model), ecModel, {\n      include: ['grid']\n    });\n    brushTargetManager.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      if (coordSys.type !== 'cartesian2d') {\n        return;\n      }\n      var brushType = area.brushType;\n      if (brushType === 'rect') {\n        setBatch('x', coordSys, coordRange[0]);\n        setBatch('y', coordSys, coordRange[1]);\n      } else {\n        setBatch({\n          lineX: 'x',\n          lineY: 'y'\n        }[brushType], coordSys, coordRange);\n      }\n    });\n    history.push(ecModel, snapshot);\n    this._dispatchZoomAction(snapshot);\n    function setBatch(dimName, coordSys, minMax) {\n      var axis = coordSys.getAxis(dimName);\n      var axisModel = axis.model;\n      var dataZoomModel = findDataZoom(dimName, axisModel, ecModel);\n      // Restrict range.\n      var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();\n      if (minMaxSpan.minValueSpan != null || minMaxSpan.maxValueSpan != null) {\n        minMax = sliderMove(0, minMax.slice(), axis.scale.getExtent(), 0, minMaxSpan.minValueSpan, minMaxSpan.maxValueSpan);\n      }\n      dataZoomModel && (snapshot[dataZoomModel.id] = {\n        dataZoomId: dataZoomModel.id,\n        startValue: minMax[0],\n        endValue: minMax[1]\n      });\n    }\n    function findDataZoom(dimName, axisModel, ecModel) {\n      var found;\n      ecModel.eachComponent({\n        mainType: 'dataZoom',\n        subType: 'select'\n      }, function (dzModel) {\n        var has = dzModel.getAxisModel(dimName, axisModel.componentIndex);\n        has && (found = dzModel);\n      });\n      return found;\n    }\n  };\n  ;\n  DataZoomFeature.prototype._dispatchZoomAction = function (snapshot) {\n    var batch = [];\n    // Convert from hash map to array.\n    each(snapshot, function (batchItem, dataZoomId) {\n      batch.push(zrUtil.clone(batchItem));\n    });\n    batch.length && this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      batch: batch\n    });\n  };\n  DataZoomFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      filterMode: 'filter',\n      // Icon group\n      icon: {\n        zoom: 'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',\n        back: 'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'\n      },\n      // `zoom`, `back`\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataZoom', 'title']),\n      brushStyle: {\n        borderWidth: 0,\n        color: tokens.color.backgroundTint\n      }\n    };\n    return defaultOption;\n  };\n  return DataZoomFeature;\n}(ToolboxFeature);\nvar handlers = {\n  zoom: function () {\n    var nextActive = !this._isZoomActive;\n    this.api.dispatchAction({\n      type: 'takeGlobalCursor',\n      key: 'dataZoomSelect',\n      dataZoomSelectActive: nextActive\n    });\n  },\n  back: function () {\n    this._dispatchZoomAction(history.pop(this.ecModel));\n  }\n};\nfunction makeAxisFinder(dzFeatureModel) {\n  var setting = {\n    xAxisIndex: dzFeatureModel.get('xAxisIndex', true),\n    yAxisIndex: dzFeatureModel.get('yAxisIndex', true),\n    xAxisId: dzFeatureModel.get('xAxisId', true),\n    yAxisId: dzFeatureModel.get('yAxisId', true)\n  };\n  // If both `xAxisIndex` `xAxisId` not set, it means 'all'.\n  // If both `yAxisIndex` `yAxisId` not set, it means 'all'.\n  // Some old cases set like this below to close yAxis control but leave xAxis control:\n  // `{ feature: { dataZoom: { yAxisIndex: false } }`.\n  if (setting.xAxisIndex == null && setting.xAxisId == null) {\n    setting.xAxisIndex = 'all';\n  }\n  if (setting.yAxisIndex == null && setting.yAxisId == null) {\n    setting.yAxisIndex = 'all';\n  }\n  return setting;\n}\nfunction updateBackBtnStatus(featureModel, ecModel) {\n  featureModel.setIconStatus('back', history.count(ecModel) > 1 ? 'emphasis' : 'normal');\n}\nfunction updateZoomBtnStatus(featureModel, ecModel, view, payload, api) {\n  var zoomActive = view._isZoomActive;\n  if (payload && payload.type === 'takeGlobalCursor') {\n    zoomActive = payload.key === 'dataZoomSelect' ? payload.dataZoomSelectActive : false;\n  }\n  view._isZoomActive = zoomActive;\n  featureModel.setIconStatus('zoom', zoomActive ? 'emphasis' : 'normal');\n  var brushTargetManager = new BrushTargetManager(makeAxisFinder(featureModel), ecModel, {\n    include: ['grid']\n  });\n  var panels = brushTargetManager.makePanelOpts(api, function (targetInfo) {\n    return targetInfo.xAxisDeclared && !targetInfo.yAxisDeclared ? 'lineX' : !targetInfo.xAxisDeclared && targetInfo.yAxisDeclared ? 'lineY' : 'rect';\n  });\n  view._brushController.setPanels(panels).enableBrush(zoomActive && panels.length ? {\n    brushType: 'auto',\n    brushStyle: featureModel.getModel('brushStyle').getItemStyle()\n  } : false);\n}\nregisterInternalOptionCreator('dataZoom', function (ecModel) {\n  var toolboxModel = ecModel.getComponent('toolbox', 0);\n  var featureDataZoomPath = ['feature', 'dataZoom'];\n  if (!toolboxModel || toolboxModel.get(featureDataZoomPath) == null) {\n    return;\n  }\n  var dzFeatureModel = toolboxModel.getModel(featureDataZoomPath);\n  var dzOptions = [];\n  var finder = makeAxisFinder(dzFeatureModel);\n  var finderResult = parseFinder(ecModel, finder);\n  each(finderResult.xAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'xAxis', 'xAxisIndex');\n  });\n  each(finderResult.yAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'yAxis', 'yAxisIndex');\n  });\n  function buildInternalOptions(axisModel, axisMainType, axisIndexPropName) {\n    var axisIndex = axisModel.componentIndex;\n    var newOpt = {\n      type: 'select',\n      $fromToolbox: true,\n      // Default to be filter\n      filterMode: dzFeatureModel.get('filterMode', true) || 'filter',\n      // Id for merge mapping.\n      id: DATA_ZOOM_ID_BASE + axisMainType + axisIndex\n    };\n    newOpt[axisIndexPropName] = axisIndex;\n    dzOptions.push(newOpt);\n  }\n  return dzOptions;\n});\nexport default DataZoomFeature;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport { install as installDataZoomSelect } from '../../component/dataZoom/installDataZoomSelect.js';\nimport ToolboxModel from './ToolboxModel.js';\nimport ToolboxView from './ToolboxView.js';\n// TODOD: REGISTER IN INSTALL\nimport { registerFeature } from './featureManager.js';\nimport SaveAsImage from './feature/SaveAsImage.js';\nimport MagicType from './feature/MagicType.js';\nimport DataView from './feature/DataView.js';\nimport Restore from './feature/Restore.js';\nimport DataZoom from './feature/DataZoom.js';\nexport function install(registers) {\n  registers.registerComponentModel(ToolboxModel);\n  registers.registerComponentView(ToolboxView);\n  registerFeature('saveAsImage', SaveAsImage);\n  registerFeature('magicType', MagicType);\n  registerFeature('dataView', DataView);\n  registerFeature('dataZoom', DataZoom);\n  registerFeature('restore', Restore);\n  use(installDataZoomSelect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/**\n * @file Visual solution, for consistent option specification.\n */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapping from './VisualMapping.js';\nimport { getItemVisualFromData, setItemVisualFromData } from './helper.js';\nvar each = zrUtil.each;\nfunction hasKeys(obj) {\n  if (obj) {\n    for (var name_1 in obj) {\n      if (obj.hasOwnProperty(name_1)) {\n        return true;\n      }\n    }\n  }\n}\nexport function createVisualMappings(option, stateList, supplementVisualOption) {\n  var visualMappings = {};\n  each(stateList, function (state) {\n    var mappings = visualMappings[state] = createMappings();\n    each(option[state], function (visualData, visualType) {\n      if (!VisualMapping.isValidType(visualType)) {\n        return;\n      }\n      var mappingOption = {\n        type: visualType,\n        visual: visualData\n      };\n      supplementVisualOption && supplementVisualOption(mappingOption, state);\n      mappings[visualType] = new VisualMapping(mappingOption);\n      // Prepare a alpha for opacity, for some case that opacity\n      // is not supported, such as rendering using gradient color.\n      if (visualType === 'opacity') {\n        mappingOption = zrUtil.clone(mappingOption);\n        mappingOption.type = 'colorAlpha';\n        mappings.__hidden.__alphaForOpacity = new VisualMapping(mappingOption);\n      }\n    });\n  });\n  return visualMappings;\n  function createMappings() {\n    var Creater = function () {};\n    // Make sure hidden fields will not be visited by\n    // object iteration (with hasOwnProperty checking).\n    Creater.prototype.__hidden = Creater.prototype;\n    var obj = new Creater();\n    return obj;\n  }\n}\nexport function replaceVisualOption(thisOption, newOption, keys) {\n  // Visual attributes merge is not supported, otherwise it\n  // brings overcomplicated merge logic. See #2853. So if\n  // newOption has anyone of these keys, all of these keys\n  // will be reset. Otherwise, all keys remain.\n  var has;\n  zrUtil.each(keys, function (key) {\n    if (newOption.hasOwnProperty(key) && hasKeys(newOption[key])) {\n      has = true;\n    }\n  });\n  has && zrUtil.each(keys, function (key) {\n    if (newOption.hasOwnProperty(key) && hasKeys(newOption[key])) {\n      thisOption[key] = zrUtil.clone(newOption[key]);\n    } else {\n      delete thisOption[key];\n    }\n  });\n}\n/**\n * @param stateList\n * @param visualMappings\n * @param list\n * @param getValueState param: valueOrIndex, return: state.\n * @param scope Scope for getValueState\n * @param dimension Concrete dimension, if used.\n */\n// ???! handle brush?\nexport function applyVisual(stateList, visualMappings, data, getValueState, scope, dimension) {\n  var visualTypesMap = {};\n  zrUtil.each(stateList, function (state) {\n    var visualTypes = VisualMapping.prepareVisualTypes(visualMappings[state]);\n    visualTypesMap[state] = visualTypes;\n  });\n  var dataIndex;\n  function getVisual(key) {\n    return getItemVisualFromData(data, dataIndex, key);\n  }\n  function setVisual(key, value) {\n    setItemVisualFromData(data, dataIndex, key, value);\n  }\n  if (dimension == null) {\n    data.each(eachItem);\n  } else {\n    data.each([dimension], eachItem);\n  }\n  function eachItem(valueOrIndex, index) {\n    dataIndex = dimension == null ? valueOrIndex // First argument is index\n    : index;\n    var rawDataItem = data.getRawDataItem(dataIndex);\n    // Consider performance\n    // @ts-ignore\n    if (rawDataItem && rawDataItem.visualMap === false) {\n      return;\n    }\n    var valueState = getValueState.call(scope, valueOrIndex);\n    var mappings = visualMappings[valueState];\n    var visualTypes = visualTypesMap[valueState];\n    for (var i = 0, len = visualTypes.length; i < len; i++) {\n      var type = visualTypes[i];\n      mappings[type] && mappings[type].applyVisual(valueOrIndex, getVisual, setVisual);\n    }\n  }\n}\n/**\n * @param data\n * @param stateList\n * @param visualMappings <state, Object.<visualType, module:echarts/visual/VisualMapping>>\n * @param getValueState param: valueOrIndex, return: state.\n * @param dim dimension or dimension index.\n */\nexport function incrementalApplyVisual(stateList, visualMappings, getValueState, dim) {\n  var visualTypesMap = {};\n  zrUtil.each(stateList, function (state) {\n    var visualTypes = VisualMapping.prepareVisualTypes(visualMappings[state]);\n    visualTypesMap[state] = visualTypes;\n  });\n  return {\n    progress: function progress(params, data) {\n      var dimIndex;\n      if (dim != null) {\n        dimIndex = data.getDimensionIndex(dim);\n      }\n      function getVisual(key) {\n        return getItemVisualFromData(data, dataIndex, key);\n      }\n      function setVisual(key, value) {\n        setItemVisualFromData(data, dataIndex, key, value);\n      }\n      var dataIndex;\n      var store = data.getStore();\n      while ((dataIndex = params.next()) != null) {\n        var rawDataItem = data.getRawDataItem(dataIndex);\n        // Consider performance\n        // @ts-ignore\n        if (rawDataItem && rawDataItem.visualMap === false) {\n          continue;\n        }\n        var value = dim != null ? store.get(dimIndex, dataIndex) : dataIndex;\n        var valueState = getValueState(value);\n        var mappings = visualMappings[valueState];\n        var visualTypes = visualTypesMap[valueState];\n        for (var i = 0, len = visualTypes.length; i < len; i++) {\n          var type = visualTypes[i];\n          mappings[type] && mappings[type].applyVisual(value, getVisual, setVisual);\n        }\n      }\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport { each, isObject, clone } from 'zrender/lib/core/util.js';\nimport { convertOptionIdName, getDataItemValue } from '../../util/model.js';\nimport tokens from '../../visual/tokens.js';\nvar TimelineModel = /** @class */function (_super) {\n  __extends(TimelineModel, _super);\n  function TimelineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TimelineModel.type;\n    _this.layoutMode = 'box';\n    return _this;\n  }\n  /**\n   * @override\n   */\n  TimelineModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    this._initData();\n  };\n  /**\n   * @override\n   */\n  TimelineModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n    this._initData();\n  };\n  TimelineModel.prototype.setCurrentIndex = function (currentIndex) {\n    if (currentIndex == null) {\n      currentIndex = this.option.currentIndex;\n    }\n    var count = this._data.count();\n    if (this.option.loop) {\n      currentIndex = (currentIndex % count + count) % count;\n    } else {\n      currentIndex >= count && (currentIndex = count - 1);\n      currentIndex < 0 && (currentIndex = 0);\n    }\n    this.option.currentIndex = currentIndex;\n  };\n  /**\n   * @return {number} currentIndex\n   */\n  TimelineModel.prototype.getCurrentIndex = function () {\n    return this.option.currentIndex;\n  };\n  /**\n   * @return {boolean}\n   */\n  TimelineModel.prototype.isIndexMax = function () {\n    return this.getCurrentIndex() >= this._data.count() - 1;\n  };\n  /**\n   * @param {boolean} state true: play, false: stop\n   */\n  TimelineModel.prototype.setPlayState = function (state) {\n    this.option.autoPlay = !!state;\n  };\n  /**\n   * @return {boolean} true: play, false: stop\n   */\n  TimelineModel.prototype.getPlayState = function () {\n    return !!this.option.autoPlay;\n  };\n  /**\n   * @private\n   */\n  TimelineModel.prototype._initData = function () {\n    var thisOption = this.option;\n    var dataArr = thisOption.data || [];\n    var axisType = thisOption.axisType;\n    var names = this._names = [];\n    var processedDataArr;\n    if (axisType === 'category') {\n      processedDataArr = [];\n      each(dataArr, function (item, index) {\n        var value = convertOptionIdName(getDataItemValue(item), '');\n        var newItem;\n        if (isObject(item)) {\n          newItem = clone(item);\n          newItem.value = index;\n        } else {\n          newItem = index;\n        }\n        processedDataArr.push(newItem);\n        names.push(value);\n      });\n    } else {\n      processedDataArr = dataArr;\n    }\n    var dimType = {\n      category: 'ordinal',\n      time: 'time',\n      value: 'number'\n    }[axisType] || 'number';\n    var data = this._data = new SeriesData([{\n      name: 'value',\n      type: dimType\n    }], this);\n    data.initData(processedDataArr, names);\n  };\n  TimelineModel.prototype.getData = function () {\n    return this._data;\n  };\n  /**\n   * @public\n   * @return {Array.<string>} categoreis\n   */\n  TimelineModel.prototype.getCategories = function () {\n    if (this.get('axisType') === 'category') {\n      return this._names.slice();\n    }\n  };\n  TimelineModel.type = 'timeline';\n  /**\n   * @protected\n   */\n  TimelineModel.defaultOption = {\n    // zlevel: 0,                  // \n    z: 4,\n    show: true,\n    axisType: 'time',\n    realtime: true,\n    left: '20%',\n    top: null,\n    right: '20%',\n    bottom: 0,\n    width: null,\n    height: 40,\n    padding: tokens.size.m,\n    controlPosition: 'left',\n    autoPlay: false,\n    rewind: false,\n    loop: true,\n    playInterval: 2000,\n    currentIndex: 0,\n    itemStyle: {},\n    label: {\n      color: tokens.color.secondary\n    },\n    data: []\n  };\n  return TimelineModel;\n}(ComponentModel);\nexport default TimelineModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport TimelineModel from './TimelineModel.js';\nimport { DataFormatMixin } from '../../model/mixin/dataFormat.js';\nimport { mixin } from 'zrender/lib/core/util.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nimport tokens from '../../visual/tokens.js';\nvar SliderTimelineModel = /** @class */function (_super) {\n  __extends(SliderTimelineModel, _super);\n  function SliderTimelineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SliderTimelineModel.type;\n    return _this;\n  }\n  SliderTimelineModel.type = 'timeline.slider';\n  /**\n   * @protected\n   */\n  SliderTimelineModel.defaultOption = inheritDefaultOption(TimelineModel.defaultOption, {\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: tokens.color.border,\n    borderWidth: 0,\n    orient: 'horizontal',\n    inverse: false,\n    tooltip: {\n      trigger: 'item' // data item may also have tootip attr.\n    },\n    symbol: 'circle',\n    symbolSize: 12,\n    lineStyle: {\n      show: true,\n      width: 2,\n      color: tokens.color.accent10\n    },\n    label: {\n      position: 'auto',\n      // When using number, label position is not\n      // restricted by viewRect.\n      // positive: right/bottom, negative: left/top\n      show: true,\n      interval: 'auto',\n      rotate: 0,\n      // formatter: null,\n      // TEXTSTYLE\n      color: tokens.color.tertiary\n    },\n    itemStyle: {\n      color: tokens.color.accent20,\n      borderWidth: 0\n    },\n    checkpointStyle: {\n      symbol: 'circle',\n      symbolSize: 15,\n      color: tokens.color.accent50,\n      borderColor: tokens.color.accent50,\n      borderWidth: 0,\n      shadowBlur: 0,\n      shadowOffsetX: 0,\n      shadowOffsetY: 0,\n      shadowColor: 'rgba(0, 0, 0, 0)',\n      // borderColor: 'rgba(194,53,49, 0.5)',\n      animation: true,\n      animationDuration: 300,\n      animationEasing: 'quinticInOut'\n    },\n    controlStyle: {\n      show: true,\n      showPlayBtn: true,\n      showPrevBtn: true,\n      showNextBtn: true,\n      itemSize: 24,\n      itemGap: 12,\n      position: 'left',\n      playIcon: 'path://M15 0C23.2843 0 30 6.71573 30 15C30 23.2843 23.2843 30 15 30C6.71573 30 0 23.2843 0 15C0 6.71573 6.71573 0 15 0ZM15 3C8.37258 3 3 8.37258 3 15C3 21.6274 8.37258 27 15 27C21.6274 27 27 21.6274 27 15C27 8.37258 21.6274 3 15 3ZM11.5 10.6699C11.5 9.90014 12.3333 9.41887 13 9.80371L20.5 14.1338C21.1667 14.5187 21.1667 15.4813 20.5 15.8662L13 20.1963C12.3333 20.5811 11.5 20.0999 11.5 19.3301V10.6699Z',\n      stopIcon: 'path://M15 0C23.2843 0 30 6.71573 30 15C30 23.2843 23.2843 30 15 30C6.71573 30 0 23.2843 0 15C0 6.71573 6.71573 0 15 0ZM15 3C8.37258 3 3 8.37258 3 15C3 21.6274 8.37258 27 15 27C21.6274 27 27 21.6274 27 15C27 8.37258 21.6274 3 15 3ZM11.5 10C12.3284 10 13 10.6716 13 11.5V18.5C13 19.3284 12.3284 20 11.5 20C10.6716 20 10 19.3284 10 18.5V11.5C10 10.6716 10.6716 10 11.5 10ZM18.5 10C19.3284 10 20 10.6716 20 11.5V18.5C20 19.3284 19.3284 20 18.5 20C17.6716 20 17 19.3284 17 18.5V11.5C17 10.6716 17.6716 10 18.5 10Z',\n      // eslint-disable-next-line max-len\n      nextIcon: 'path://M0.838834 18.7383C0.253048 18.1525 0.253048 17.2028 0.838834 16.617L7.55635 9.89949L0.838834 3.18198C0.253048 2.59619 0.253048 1.64645 0.838834 1.06066C1.42462 0.474874 2.37437 0.474874 2.96015 1.06066L10.7383 8.83883L10.8412 8.95277C11.2897 9.50267 11.2897 10.2963 10.8412 10.8462L10.7383 10.9602L2.96015 18.7383C2.37437 19.3241 1.42462 19.3241 0.838834 18.7383Z',\n      // eslint-disable-next-line max-len\n      prevIcon: 'path://M10.9602 1.06066C11.5459 1.64645 11.5459 2.59619 10.9602 3.18198L4.24264 9.89949L10.9602 16.617C11.5459 17.2028 11.5459 18.1525 10.9602 18.7383C10.3744 19.3241 9.42462 19.3241 8.83883 18.7383L1.06066 10.9602L0.957771 10.8462C0.509245 10.2963 0.509245 9.50267 0.957771 8.95277L1.06066 8.83883L8.83883 1.06066C9.42462 0.474874 10.3744 0.474874 10.9602 1.06066Z',\n      prevBtnSize: 18,\n      nextBtnSize: 18,\n      color: tokens.color.accent50,\n      borderColor: tokens.color.accent50,\n      borderWidth: 0\n    },\n    emphasis: {\n      label: {\n        show: true,\n        // TEXTSTYLE\n        color: tokens.color.accent60\n      },\n      itemStyle: {\n        color: tokens.color.accent60,\n        borderColor: tokens.color.accent60\n      },\n      controlStyle: {\n        color: tokens.color.accent70,\n        borderColor: tokens.color.accent70\n      }\n    },\n    progress: {\n      lineStyle: {\n        color: tokens.color.accent30\n      },\n      itemStyle: {\n        color: tokens.color.accent40\n      }\n    },\n    data: []\n  });\n  return SliderTimelineModel;\n}(TimelineModel);\nmixin(SliderTimelineModel, DataFormatMixin.prototype);\nexport default SliderTimelineModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nvar TimelineView = /** @class */function (_super) {\n  __extends(TimelineView, _super);\n  function TimelineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TimelineView.type;\n    return _this;\n  }\n  TimelineView.type = 'timeline';\n  return TimelineView;\n}(ComponentView);\nexport default TimelineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../../coord/Axis.js';\n/**\n * Extend axis 2d\n */\nvar TimelineAxis = /** @class */function (_super) {\n  __extends(TimelineAxis, _super);\n  function TimelineAxis(dim, scale, coordExtent, axisType) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n    _this.type = axisType || 'value';\n    return _this;\n  }\n  /**\n   * @override\n   */\n  TimelineAxis.prototype.getLabelModel = function () {\n    // Force override\n    return this.model.getModel('label');\n  };\n  /**\n   * @override\n   */\n  TimelineAxis.prototype.isHorizontal = function () {\n    return this.model.get('orient') === 'horizontal';\n  };\n  return TimelineAxis;\n}(Axis);\nexport default TimelineAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as graphic from '../../util/graphic.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport * as layout from '../../util/layout.js';\nimport TimelineView from './TimelineView.js';\nimport TimelineAxis from './TimelineAxis.js';\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol.js';\nimport * as numberUtil from '../../util/number.js';\nimport { merge, each, extend, isString, bind, defaults, retrieve2 } from 'zrender/lib/core/util.js';\nimport OrdinalScale from '../../scale/Ordinal.js';\nimport TimeScale from '../../scale/Time.js';\nimport IntervalScale from '../../scale/Interval.js';\nimport { parsePercent } from 'zrender/lib/contain/text.js';\nimport { makeInner } from '../../util/model.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { enableHoverEmphasis } from '../../util/states.js';\nimport { createTooltipMarkup } from '../tooltip/tooltipMarkup.js';\nvar PI = Math.PI;\nvar labelDataIndexStore = makeInner();\nvar SliderTimelineView = /** @class */function (_super) {\n  __extends(SliderTimelineView, _super);\n  function SliderTimelineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SliderTimelineView.type;\n    return _this;\n  }\n  SliderTimelineView.prototype.init = function (ecModel, api) {\n    this.api = api;\n  };\n  /**\n   * @override\n   */\n  SliderTimelineView.prototype.render = function (timelineModel, ecModel, api) {\n    this.model = timelineModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    this.group.removeAll();\n    if (timelineModel.get('show', true)) {\n      var layoutInfo_1 = this._layout(timelineModel, api);\n      var mainGroup_1 = this._createGroup('_mainGroup');\n      var labelGroup = this._createGroup('_labelGroup');\n      var axis_1 = this._axis = this._createAxis(layoutInfo_1, timelineModel);\n      timelineModel.formatTooltip = function (dataIndex) {\n        var name = axis_1.scale.getLabel({\n          value: dataIndex\n        });\n        return createTooltipMarkup('nameValue', {\n          noName: true,\n          value: name\n        });\n      };\n      each(['AxisLine', 'AxisTick', 'Control', 'CurrentPointer'], function (name) {\n        this['_render' + name](layoutInfo_1, mainGroup_1, axis_1, timelineModel);\n      }, this);\n      this._renderAxisLabel(layoutInfo_1, labelGroup, axis_1, timelineModel);\n      this._position(layoutInfo_1, timelineModel);\n    }\n    this._doPlayStop();\n    this._updateTicksStatus();\n  };\n  /**\n   * @override\n   */\n  SliderTimelineView.prototype.remove = function () {\n    this._clearTimer();\n    this.group.removeAll();\n  };\n  /**\n   * @override\n   */\n  SliderTimelineView.prototype.dispose = function () {\n    this._clearTimer();\n  };\n  SliderTimelineView.prototype._layout = function (timelineModel, api) {\n    var labelPosOpt = timelineModel.get(['label', 'position']);\n    var orient = timelineModel.get('orient');\n    var viewRect = getViewRect(timelineModel, api);\n    var parsedLabelPos;\n    // Auto label offset.\n    if (labelPosOpt == null || labelPosOpt === 'auto') {\n      parsedLabelPos = orient === 'horizontal' ? viewRect.y + viewRect.height / 2 < api.getHeight() / 2 ? '-' : '+' : viewRect.x + viewRect.width / 2 < api.getWidth() / 2 ? '+' : '-';\n    } else if (isString(labelPosOpt)) {\n      parsedLabelPos = {\n        horizontal: {\n          top: '-',\n          bottom: '+'\n        },\n        vertical: {\n          left: '-',\n          right: '+'\n        }\n      }[orient][labelPosOpt];\n    } else {\n      // is number\n      parsedLabelPos = labelPosOpt;\n    }\n    var labelAlignMap = {\n      horizontal: 'center',\n      vertical: parsedLabelPos >= 0 || parsedLabelPos === '+' ? 'left' : 'right'\n    };\n    var labelBaselineMap = {\n      horizontal: parsedLabelPos >= 0 || parsedLabelPos === '+' ? 'top' : 'bottom',\n      vertical: 'middle'\n    };\n    var rotationMap = {\n      horizontal: 0,\n      vertical: PI / 2\n    };\n    // Position\n    var mainLength = orient === 'vertical' ? viewRect.height : viewRect.width;\n    var controlModel = timelineModel.getModel('controlStyle');\n    var showControl = controlModel.get('show', true);\n    var controlSize = showControl ? controlModel.get('itemSize') : 0;\n    var controlGap = showControl ? controlModel.get('itemGap') : 0;\n    var sizePlusGap = controlSize + controlGap;\n    // Special label rotate.\n    var labelRotation = timelineModel.get(['label', 'rotate']) || 0;\n    labelRotation = labelRotation * PI / 180; // To radian.\n    var playPosition;\n    var prevBtnPosition;\n    var nextBtnPosition;\n    var controlPosition = controlModel.get('position', true);\n    var showPlayBtn = showControl && controlModel.get('showPlayBtn', true);\n    var showPrevBtn = showControl && controlModel.get('showPrevBtn', true);\n    var showNextBtn = showControl && controlModel.get('showNextBtn', true);\n    var xLeft = 0;\n    var xRight = mainLength;\n    // position[0] means left, position[1] means middle.\n    if (controlPosition === 'left' || controlPosition === 'bottom') {\n      showPlayBtn && (playPosition = [0, 0], xLeft += sizePlusGap);\n      showPrevBtn && (prevBtnPosition = [xLeft, 0], xLeft += sizePlusGap);\n      showNextBtn && (nextBtnPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n    } else {\n      // 'top' 'right'\n      showPlayBtn && (playPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n      showPrevBtn && (prevBtnPosition = [0, 0], xLeft += sizePlusGap);\n      showNextBtn && (nextBtnPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n    }\n    var axisExtent = [xLeft, xRight];\n    if (timelineModel.get('inverse')) {\n      axisExtent.reverse();\n    }\n    return {\n      viewRect: viewRect,\n      mainLength: mainLength,\n      orient: orient,\n      rotation: rotationMap[orient],\n      labelRotation: labelRotation,\n      labelPosOpt: parsedLabelPos,\n      labelAlign: timelineModel.get(['label', 'align']) || labelAlignMap[orient],\n      labelBaseline: timelineModel.get(['label', 'verticalAlign']) || timelineModel.get(['label', 'baseline']) || labelBaselineMap[orient],\n      // Based on mainGroup.\n      playPosition: playPosition,\n      prevBtnPosition: prevBtnPosition,\n      nextBtnPosition: nextBtnPosition,\n      axisExtent: axisExtent,\n      controlSize: controlSize,\n      controlGap: controlGap\n    };\n  };\n  SliderTimelineView.prototype._position = function (layoutInfo, timelineModel) {\n    // Position is be called finally, because bounding rect is needed for\n    // adapt content to fill viewRect (auto adapt offset).\n    // Timeline may be not all in the viewRect when 'offset' is specified\n    // as a number, because it is more appropriate that label aligns at\n    // 'offset' but not the other edge defined by viewRect.\n    var mainGroup = this._mainGroup;\n    var labelGroup = this._labelGroup;\n    var viewRect = layoutInfo.viewRect;\n    if (layoutInfo.orient === 'vertical') {\n      // transform to horizontal, inverse rotate by left-top point.\n      var m = matrix.create();\n      var rotateOriginX = viewRect.x;\n      var rotateOriginY = viewRect.y + viewRect.height;\n      matrix.translate(m, m, [-rotateOriginX, -rotateOriginY]);\n      matrix.rotate(m, m, -PI / 2);\n      matrix.translate(m, m, [rotateOriginX, rotateOriginY]);\n      viewRect = viewRect.clone();\n      viewRect.applyTransform(m);\n    }\n    var viewBound = getBound(viewRect);\n    var mainBound = getBound(mainGroup.getBoundingRect());\n    var labelBound = getBound(labelGroup.getBoundingRect());\n    var mainPosition = [mainGroup.x, mainGroup.y];\n    var labelsPosition = [labelGroup.x, labelGroup.y];\n    labelsPosition[0] = mainPosition[0] = viewBound[0][0];\n    var labelPosOpt = layoutInfo.labelPosOpt;\n    if (labelPosOpt == null || isString(labelPosOpt)) {\n      // '+' or '-'\n      var mainBoundIdx = labelPosOpt === '+' ? 0 : 1;\n      toBound(mainPosition, mainBound, viewBound, 1, mainBoundIdx);\n      toBound(labelsPosition, labelBound, viewBound, 1, 1 - mainBoundIdx);\n    } else {\n      var mainBoundIdx = labelPosOpt >= 0 ? 0 : 1;\n      toBound(mainPosition, mainBound, viewBound, 1, mainBoundIdx);\n      labelsPosition[1] = mainPosition[1] + labelPosOpt;\n    }\n    mainGroup.setPosition(mainPosition);\n    labelGroup.setPosition(labelsPosition);\n    mainGroup.rotation = labelGroup.rotation = layoutInfo.rotation;\n    setOrigin(mainGroup);\n    setOrigin(labelGroup);\n    function setOrigin(targetGroup) {\n      targetGroup.originX = viewBound[0][0] - targetGroup.x;\n      targetGroup.originY = viewBound[1][0] - targetGroup.y;\n    }\n    function getBound(rect) {\n      // [[xmin, xmax], [ymin, ymax]]\n      return [[rect.x, rect.x + rect.width], [rect.y, rect.y + rect.height]];\n    }\n    function toBound(fromPos, from, to, dimIdx, boundIdx) {\n      fromPos[dimIdx] += to[dimIdx][boundIdx] - from[dimIdx][boundIdx];\n    }\n  };\n  SliderTimelineView.prototype._createAxis = function (layoutInfo, timelineModel) {\n    var data = timelineModel.getData();\n    var axisType = timelineModel.get('axisType');\n    var scale = createScaleByModel(timelineModel, axisType);\n    // Customize scale. The `tickValue` is `dataIndex`.\n    scale.getTicks = function () {\n      return data.mapArray(['value'], function (value) {\n        return {\n          value: value\n        };\n      });\n    };\n    var dataExtent = data.getDataExtent('value');\n    scale.setExtent(dataExtent[0], dataExtent[1]);\n    scale.calcNiceTicks();\n    var axis = new TimelineAxis('value', scale, layoutInfo.axisExtent, axisType);\n    axis.model = timelineModel;\n    return axis;\n  };\n  SliderTimelineView.prototype._createGroup = function (key) {\n    var newGroup = this[key] = new graphic.Group();\n    this.group.add(newGroup);\n    return newGroup;\n  };\n  SliderTimelineView.prototype._renderAxisLine = function (layoutInfo, group, axis, timelineModel) {\n    var axisExtent = axis.getExtent();\n    if (!timelineModel.get(['lineStyle', 'show'])) {\n      return;\n    }\n    var line = new graphic.Line({\n      shape: {\n        x1: axisExtent[0],\n        y1: 0,\n        x2: axisExtent[1],\n        y2: 0\n      },\n      style: extend({\n        lineCap: 'round'\n      }, timelineModel.getModel('lineStyle').getLineStyle()),\n      silent: true,\n      z2: 1\n    });\n    group.add(line);\n    var progressLine = this._progressLine = new graphic.Line({\n      shape: {\n        x1: axisExtent[0],\n        x2: this._currentPointer ? this._currentPointer.x : axisExtent[0],\n        y1: 0,\n        y2: 0\n      },\n      style: defaults({\n        lineCap: 'round',\n        lineWidth: line.style.lineWidth\n      }, timelineModel.getModel(['progress', 'lineStyle']).getLineStyle()),\n      silent: true,\n      z2: 1\n    });\n    group.add(progressLine);\n  };\n  SliderTimelineView.prototype._renderAxisTick = function (layoutInfo, group, axis, timelineModel) {\n    var _this = this;\n    var data = timelineModel.getData();\n    // Show all ticks, despite ignoring strategy.\n    var ticks = axis.scale.getTicks();\n    this._tickSymbols = [];\n    // The value is dataIndex, see the customized scale.\n    each(ticks, function (tick) {\n      var tickCoord = axis.dataToCoord(tick.value);\n      var itemModel = data.getItemModel(tick.value);\n      var itemStyleModel = itemModel.getModel('itemStyle');\n      var hoverStyleModel = itemModel.getModel(['emphasis', 'itemStyle']);\n      var progressStyleModel = itemModel.getModel(['progress', 'itemStyle']);\n      var symbolOpt = {\n        x: tickCoord,\n        y: 0,\n        onclick: bind(_this._changeTimeline, _this, tick.value)\n      };\n      var el = giveSymbol(itemModel, itemStyleModel, group, symbolOpt);\n      el.ensureState('emphasis').style = hoverStyleModel.getItemStyle();\n      el.ensureState('progress').style = progressStyleModel.getItemStyle();\n      enableHoverEmphasis(el);\n      var ecData = getECData(el);\n      if (itemModel.get('tooltip')) {\n        ecData.dataIndex = tick.value;\n        ecData.dataModel = timelineModel;\n      } else {\n        ecData.dataIndex = ecData.dataModel = null;\n      }\n      _this._tickSymbols.push(el);\n    });\n  };\n  SliderTimelineView.prototype._renderAxisLabel = function (layoutInfo, group, axis, timelineModel) {\n    var _this = this;\n    var labelModel = axis.getLabelModel();\n    if (!labelModel.get('show')) {\n      return;\n    }\n    var data = timelineModel.getData();\n    var labels = axis.getViewLabels();\n    this._tickLabels = [];\n    each(labels, function (labelItem) {\n      // The tickValue is dataIndex, see the customized scale.\n      var dataIndex = labelItem.tickValue;\n      var itemModel = data.getItemModel(dataIndex);\n      var normalLabelModel = itemModel.getModel('label');\n      var hoverLabelModel = itemModel.getModel(['emphasis', 'label']);\n      var progressLabelModel = itemModel.getModel(['progress', 'label']);\n      var tickCoord = axis.dataToCoord(labelItem.tickValue);\n      var textEl = new graphic.Text({\n        x: tickCoord,\n        y: 0,\n        rotation: layoutInfo.labelRotation - layoutInfo.rotation,\n        onclick: bind(_this._changeTimeline, _this, dataIndex),\n        silent: false,\n        style: createTextStyle(normalLabelModel, {\n          text: labelItem.formattedLabel,\n          align: layoutInfo.labelAlign,\n          verticalAlign: layoutInfo.labelBaseline\n        })\n      });\n      textEl.ensureState('emphasis').style = createTextStyle(hoverLabelModel);\n      textEl.ensureState('progress').style = createTextStyle(progressLabelModel);\n      group.add(textEl);\n      enableHoverEmphasis(textEl);\n      labelDataIndexStore(textEl).dataIndex = dataIndex;\n      _this._tickLabels.push(textEl);\n    });\n  };\n  SliderTimelineView.prototype._renderControl = function (layoutInfo, group, axis, timelineModel) {\n    var controlSize = layoutInfo.controlSize;\n    var rotation = layoutInfo.rotation;\n    var itemStyle = timelineModel.getModel('controlStyle').getItemStyle();\n    var hoverStyle = timelineModel.getModel(['emphasis', 'controlStyle']).getItemStyle();\n    var playState = timelineModel.getPlayState();\n    var inverse = timelineModel.get('inverse', true);\n    makeBtn(layoutInfo.nextBtnPosition, 'next', bind(this._changeTimeline, this, inverse ? '-' : '+'));\n    makeBtn(layoutInfo.prevBtnPosition, 'prev', bind(this._changeTimeline, this, inverse ? '+' : '-'));\n    makeBtn(layoutInfo.playPosition, playState ? 'stop' : 'play', bind(this._handlePlayClick, this, !playState), true);\n    function makeBtn(position, iconName, onclick, willRotate) {\n      if (!position) {\n        return;\n      }\n      var iconSize = parsePercent(retrieve2(timelineModel.get(['controlStyle', iconName + 'BtnSize']), controlSize), controlSize);\n      var rect = [0, -iconSize / 2, iconSize, iconSize];\n      var btn = makeControlIcon(timelineModel, iconName + 'Icon', rect, {\n        x: position[0],\n        y: position[1],\n        originX: controlSize / 2,\n        originY: 0,\n        rotation: willRotate ? -rotation : 0,\n        rectHover: true,\n        style: itemStyle,\n        onclick: onclick\n      });\n      btn.ensureState('emphasis').style = hoverStyle;\n      group.add(btn);\n      enableHoverEmphasis(btn);\n    }\n  };\n  SliderTimelineView.prototype._renderCurrentPointer = function (layoutInfo, group, axis, timelineModel) {\n    var data = timelineModel.getData();\n    var currentIndex = timelineModel.getCurrentIndex();\n    var pointerModel = data.getItemModel(currentIndex).getModel('checkpointStyle');\n    var me = this;\n    var callback = {\n      onCreate: function (pointer) {\n        pointer.draggable = true;\n        pointer.drift = bind(me._handlePointerDrag, me);\n        pointer.ondragend = bind(me._handlePointerDragend, me);\n        pointerMoveTo(pointer, me._progressLine, currentIndex, axis, timelineModel, true);\n      },\n      onUpdate: function (pointer) {\n        pointerMoveTo(pointer, me._progressLine, currentIndex, axis, timelineModel);\n      }\n    };\n    // Reuse when exists, for animation and drag.\n    this._currentPointer = giveSymbol(pointerModel, pointerModel, this._mainGroup, {}, this._currentPointer, callback);\n  };\n  SliderTimelineView.prototype._handlePlayClick = function (nextState) {\n    this._clearTimer();\n    this.api.dispatchAction({\n      type: 'timelinePlayChange',\n      playState: nextState,\n      from: this.uid\n    });\n  };\n  SliderTimelineView.prototype._handlePointerDrag = function (dx, dy, e) {\n    this._clearTimer();\n    this._pointerChangeTimeline([e.offsetX, e.offsetY]);\n  };\n  SliderTimelineView.prototype._handlePointerDragend = function (e) {\n    this._pointerChangeTimeline([e.offsetX, e.offsetY], true);\n  };\n  SliderTimelineView.prototype._pointerChangeTimeline = function (mousePos, trigger) {\n    var toCoord = this._toAxisCoord(mousePos)[0];\n    var axis = this._axis;\n    var axisExtent = numberUtil.asc(axis.getExtent().slice());\n    toCoord > axisExtent[1] && (toCoord = axisExtent[1]);\n    toCoord < axisExtent[0] && (toCoord = axisExtent[0]);\n    this._currentPointer.x = toCoord;\n    this._currentPointer.markRedraw();\n    var progressLine = this._progressLine;\n    if (progressLine) {\n      progressLine.shape.x2 = toCoord;\n      progressLine.dirty();\n    }\n    var targetDataIndex = this._findNearestTick(toCoord);\n    var timelineModel = this.model;\n    if (trigger || targetDataIndex !== timelineModel.getCurrentIndex() && timelineModel.get('realtime')) {\n      this._changeTimeline(targetDataIndex);\n    }\n  };\n  SliderTimelineView.prototype._doPlayStop = function () {\n    var _this = this;\n    this._clearTimer();\n    if (this.model.getPlayState()) {\n      this._timer = setTimeout(function () {\n        // Do not cache\n        var timelineModel = _this.model;\n        _this._changeTimeline(timelineModel.getCurrentIndex() + (timelineModel.get('rewind', true) ? -1 : 1));\n      }, this.model.get('playInterval'));\n    }\n  };\n  SliderTimelineView.prototype._toAxisCoord = function (vertex) {\n    var trans = this._mainGroup.getLocalTransform();\n    return graphic.applyTransform(vertex, trans, true);\n  };\n  SliderTimelineView.prototype._findNearestTick = function (axisCoord) {\n    var data = this.model.getData();\n    var dist = Infinity;\n    var targetDataIndex;\n    var axis = this._axis;\n    data.each(['value'], function (value, dataIndex) {\n      var coord = axis.dataToCoord(value);\n      var d = Math.abs(coord - axisCoord);\n      if (d < dist) {\n        dist = d;\n        targetDataIndex = dataIndex;\n      }\n    });\n    return targetDataIndex;\n  };\n  SliderTimelineView.prototype._clearTimer = function () {\n    if (this._timer) {\n      clearTimeout(this._timer);\n      this._timer = null;\n    }\n  };\n  SliderTimelineView.prototype._changeTimeline = function (nextIndex) {\n    var currentIndex = this.model.getCurrentIndex();\n    if (nextIndex === '+') {\n      nextIndex = currentIndex + 1;\n    } else if (nextIndex === '-') {\n      nextIndex = currentIndex - 1;\n    }\n    this.api.dispatchAction({\n      type: 'timelineChange',\n      currentIndex: nextIndex,\n      from: this.uid\n    });\n  };\n  SliderTimelineView.prototype._updateTicksStatus = function () {\n    var currentIndex = this.model.getCurrentIndex();\n    var tickSymbols = this._tickSymbols;\n    var tickLabels = this._tickLabels;\n    if (tickSymbols) {\n      for (var i = 0; i < tickSymbols.length; i++) {\n        tickSymbols && tickSymbols[i] && tickSymbols[i].toggleState('progress', i < currentIndex);\n      }\n    }\n    if (tickLabels) {\n      for (var i = 0; i < tickLabels.length; i++) {\n        tickLabels && tickLabels[i] && tickLabels[i].toggleState('progress', labelDataIndexStore(tickLabels[i]).dataIndex <= currentIndex);\n      }\n    }\n  };\n  SliderTimelineView.type = 'timeline.slider';\n  return SliderTimelineView;\n}(TimelineView);\nfunction createScaleByModel(model, axisType) {\n  axisType = axisType || model.get('type');\n  if (axisType) {\n    switch (axisType) {\n      // Buildin scale\n      case 'category':\n        return new OrdinalScale({\n          ordinalMeta: model.getCategories(),\n          extent: [Infinity, -Infinity]\n        });\n      case 'time':\n        return new TimeScale({\n          locale: model.ecModel.getLocaleModel(),\n          useUTC: model.ecModel.get('useUTC')\n        });\n      default:\n        // default to be value\n        return new IntervalScale();\n    }\n  }\n}\nfunction getViewRect(model, api) {\n  return layout.getLayoutRect(model.getBoxLayoutParams(), layout.createBoxLayoutReference(model, api).refContainer, model.get('padding'));\n}\nfunction makeControlIcon(timelineModel, objPath, rect, opts) {\n  var style = opts.style;\n  var icon = graphic.createIcon(timelineModel.get(['controlStyle', objPath]), opts || {}, new BoundingRect(rect[0], rect[1], rect[2], rect[3]));\n  // TODO createIcon won't use style in opt.\n  if (style) {\n    icon.setStyle(style);\n  }\n  return icon;\n}\n/**\n * Create symbol or update symbol\n * opt: basic position and event handlers\n */\nfunction giveSymbol(hostModel, itemStyleModel, group, opt, symbol, callback) {\n  var color = itemStyleModel.get('color');\n  if (!symbol) {\n    var symbolType = hostModel.get('symbol');\n    symbol = createSymbol(symbolType, -1, -1, 2, 2, color);\n    symbol.setStyle('strokeNoScale', true);\n    group.add(symbol);\n    callback && callback.onCreate(symbol);\n  } else {\n    symbol.setColor(color);\n    group.add(symbol); // Group may be new, also need to add.\n    callback && callback.onUpdate(symbol);\n  }\n  // Style\n  var itemStyle = itemStyleModel.getItemStyle(['color']);\n  symbol.setStyle(itemStyle);\n  // Transform and events.\n  opt = merge({\n    rectHover: true,\n    z2: 100\n  }, opt, true);\n  var symbolSize = normalizeSymbolSize(hostModel.get('symbolSize'));\n  opt.scaleX = symbolSize[0] / 2;\n  opt.scaleY = symbolSize[1] / 2;\n  var symbolOffset = normalizeSymbolOffset(hostModel.get('symbolOffset'), symbolSize);\n  if (symbolOffset) {\n    opt.x = (opt.x || 0) + symbolOffset[0];\n    opt.y = (opt.y || 0) + symbolOffset[1];\n  }\n  var symbolRotate = hostModel.get('symbolRotate');\n  opt.rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n  symbol.attr(opt);\n  // FIXME\n  // (1) When symbol.style.strokeNoScale is true and updateTransform is not performed,\n  // getBoundingRect will return wrong result.\n  // (This is supposed to be resolved in zrender, but it is a little difficult to\n  // leverage performance and auto updateTransform)\n  // (2) All of ancesters of symbol do not scale, so we can just updateTransform symbol.\n  symbol.updateTransform();\n  return symbol;\n}\nfunction pointerMoveTo(pointer, progressLine, dataIndex, axis, timelineModel, noAnimation) {\n  if (pointer.dragging) {\n    return;\n  }\n  var pointerModel = timelineModel.getModel('checkpointStyle');\n  var toCoord = axis.dataToCoord(timelineModel.getData().get('value', dataIndex));\n  if (noAnimation || !pointerModel.get('animation', true)) {\n    pointer.attr({\n      x: toCoord,\n      y: 0\n    });\n    progressLine && progressLine.attr({\n      shape: {\n        x2: toCoord\n      }\n    });\n  } else {\n    var animationCfg = {\n      duration: pointerModel.get('animationDuration', true),\n      easing: pointerModel.get('animationEasing', true)\n    };\n    pointer.stopAnimation(null, true);\n    pointer.animateTo({\n      x: toCoord,\n      y: 0\n    }, animationCfg);\n    progressLine && progressLine.animateTo({\n      shape: {\n        x2: toCoord\n      }\n    }, animationCfg);\n  }\n}\nexport default SliderTimelineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { defaults } from 'zrender/lib/core/util.js';\nexport function installTimelineAction(registers) {\n  registers.registerAction({\n    type: 'timelineChange',\n    event: 'timelineChanged',\n    update: 'prepareAndUpdate'\n  }, function (payload, ecModel, api) {\n    var timelineModel = ecModel.getComponent('timeline');\n    if (timelineModel && payload.currentIndex != null) {\n      timelineModel.setCurrentIndex(payload.currentIndex);\n      if (!timelineModel.get('loop', true) && timelineModel.isIndexMax() && timelineModel.getPlayState()) {\n        timelineModel.setPlayState(false);\n        // The timeline has played to the end, trigger event\n        api.dispatchAction({\n          type: 'timelinePlayChange',\n          playState: false,\n          from: payload.from\n        });\n      }\n    }\n    // Set normalized currentIndex to payload.\n    ecModel.resetOption('timeline', {\n      replaceMerge: timelineModel.get('replaceMerge', true)\n    });\n    return defaults({\n      currentIndex: timelineModel.option.currentIndex\n    }, payload);\n  });\n  registers.registerAction({\n    type: 'timelinePlayChange',\n    event: 'timelinePlayChanged',\n    update: 'update'\n  }, function (payload, ecModel) {\n    var timelineModel = ecModel.getComponent('timeline');\n    if (timelineModel && payload.playState != null) {\n      timelineModel.setPlayState(payload.playState);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function timelinePreprocessor(option) {\n  var timelineOpt = option && option.timeline;\n  if (!zrUtil.isArray(timelineOpt)) {\n    timelineOpt = timelineOpt ? [timelineOpt] : [];\n  }\n  zrUtil.each(timelineOpt, function (opt) {\n    if (!opt) {\n      return;\n    }\n    compatibleEC2(opt);\n  });\n}\nfunction compatibleEC2(opt) {\n  var type = opt.type;\n  var ec2Types = {\n    'number': 'value',\n    'time': 'time'\n  };\n  // Compatible with ec2\n  if (ec2Types[type]) {\n    opt.axisType = ec2Types[type];\n    delete opt.type;\n  }\n  transferItem(opt);\n  if (has(opt, 'controlPosition')) {\n    var controlStyle = opt.controlStyle || (opt.controlStyle = {});\n    if (!has(controlStyle, 'position')) {\n      controlStyle.position = opt.controlPosition;\n    }\n    if (controlStyle.position === 'none' && !has(controlStyle, 'show')) {\n      controlStyle.show = false;\n      delete controlStyle.position;\n    }\n    delete opt.controlPosition;\n  }\n  zrUtil.each(opt.data || [], function (dataItem) {\n    if (zrUtil.isObject(dataItem) && !zrUtil.isArray(dataItem)) {\n      if (!has(dataItem, 'value') && has(dataItem, 'name')) {\n        // In ec2, using name as value.\n        dataItem.value = dataItem.name;\n      }\n      transferItem(dataItem);\n    }\n  });\n}\nfunction transferItem(opt) {\n  var itemStyle = opt.itemStyle || (opt.itemStyle = {});\n  var itemStyleEmphasis = itemStyle.emphasis || (itemStyle.emphasis = {});\n  // Transfer label out\n  var label = opt.label || opt.label || {};\n  var labelNormal = label.normal || (label.normal = {});\n  var excludeLabelAttr = {\n    normal: 1,\n    emphasis: 1\n  };\n  zrUtil.each(label, function (value, name) {\n    if (!excludeLabelAttr[name] && !has(labelNormal, name)) {\n      labelNormal[name] = value;\n    }\n  });\n  if (itemStyleEmphasis.label && !has(label, 'emphasis')) {\n    label.emphasis = itemStyleEmphasis.label;\n    delete itemStyleEmphasis.label;\n  }\n}\nfunction has(obj, attr) {\n  return obj.hasOwnProperty(attr);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport SliderTimelineModel from './SliderTimelineModel.js';\nimport SliderTimelineView from './SliderTimelineView.js';\nimport { installTimelineAction } from './timelineAction.js';\nimport preprocessor from './preprocessor.js';\nexport function install(registers) {\n  registers.registerComponentModel(SliderTimelineModel);\n  registers.registerComponentView(SliderTimelineView);\n  registers.registerSubTypeDefaulter('timeline', function () {\n    // Only slider now.\n    return 'slider';\n  });\n  installTimelineAction(registers);\n  registers.registerPreprocessor(preprocessor);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isArray } from 'zrender/lib/core/util.js';\nexport default function checkMarkerInSeries(seriesOpts, markerType) {\n  if (!seriesOpts) {\n    return false;\n  }\n  var seriesOptArr = isArray(seriesOpts) ? seriesOpts : [seriesOpts];\n  for (var idx = 0; idx < seriesOptArr.length; idx++) {\n    if (seriesOptArr[idx] && seriesOptArr[idx][markerType]) {\n      return true;\n    }\n  }\n  return false;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport { DataFormatMixin } from '../../model/mixin/dataFormat.js';\nimport ComponentModel from '../../model/Component.js';\nimport { makeInner, defaultEmphasis } from '../../util/model.js';\nimport { createTooltipMarkup } from '../tooltip/tooltipMarkup.js';\nfunction fillLabel(opt) {\n  defaultEmphasis(opt, 'label', ['show']);\n}\n// { [componentType]: MarkerModel }\nvar inner = makeInner();\nvar MarkerModel = /** @class */function (_super) {\n  __extends(MarkerModel, _super);\n  function MarkerModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MarkerModel.type;\n    /**\n     * If marker model is created by self from series\n     */\n    _this.createdBySelf = false;\n    _this.preventAutoZ = true;\n    return _this;\n  }\n  /**\n   * @overrite\n   */\n  MarkerModel.prototype.init = function (option, parentModel, ecModel) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.type === 'marker') {\n        throw new Error('Marker component is abstract component. Use markLine, markPoint, markArea instead.');\n      }\n    }\n    this.mergeDefaultAndTheme(option, ecModel);\n    this._mergeOption(option, ecModel, false, true);\n  };\n  MarkerModel.prototype.isAnimationEnabled = function () {\n    if (env.node) {\n      return false;\n    }\n    var hostSeries = this.__hostSeries;\n    return this.getShallow('animation') && hostSeries && hostSeries.isAnimationEnabled();\n  };\n  /**\n   * @overrite\n   */\n  MarkerModel.prototype.mergeOption = function (newOpt, ecModel) {\n    this._mergeOption(newOpt, ecModel, false, false);\n  };\n  MarkerModel.prototype._mergeOption = function (newOpt, ecModel, createdBySelf, isInit) {\n    var componentType = this.mainType;\n    if (!createdBySelf) {\n      ecModel.eachSeries(function (seriesModel) {\n        // mainType can be markPoint, markLine, markArea\n        var markerOpt = seriesModel.get(this.mainType, true);\n        var markerModel = inner(seriesModel)[componentType];\n        if (!markerOpt || !markerOpt.data) {\n          inner(seriesModel)[componentType] = null;\n          return;\n        }\n        if (!markerModel) {\n          if (isInit) {\n            // Default label emphasis `position` and `show`\n            fillLabel(markerOpt);\n          }\n          zrUtil.each(markerOpt.data, function (item) {\n            // FIXME Overwrite fillLabel method ?\n            if (item instanceof Array) {\n              fillLabel(item[0]);\n              fillLabel(item[1]);\n            } else {\n              fillLabel(item);\n            }\n          });\n          markerModel = this.createMarkerModelFromSeries(markerOpt, this, ecModel);\n          // markerModel = new ImplementedMarkerModel(\n          //     markerOpt, this, ecModel\n          // );\n          zrUtil.extend(markerModel, {\n            mainType: this.mainType,\n            // Use the same series index and name\n            seriesIndex: seriesModel.seriesIndex,\n            name: seriesModel.name,\n            createdBySelf: true\n          });\n          markerModel.__hostSeries = seriesModel;\n        } else {\n          markerModel._mergeOption(markerOpt, ecModel, true);\n        }\n        inner(seriesModel)[componentType] = markerModel;\n      }, this);\n    }\n  };\n  MarkerModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var itemName = data.getName(dataIndex);\n    return createTooltipMarkup('section', {\n      header: this.name,\n      blocks: [createTooltipMarkup('nameValue', {\n        name: itemName,\n        value: value,\n        noName: !itemName,\n        noValue: value == null\n      })]\n    });\n  };\n  MarkerModel.prototype.getData = function () {\n    return this._data;\n  };\n  MarkerModel.prototype.setData = function (data) {\n    this._data = data;\n  };\n  MarkerModel.prototype.getDataParams = function (dataIndex, dataType) {\n    var params = DataFormatMixin.prototype.getDataParams.call(this, dataIndex, dataType);\n    var hostSeries = this.__hostSeries;\n    if (hostSeries) {\n      params.seriesId = hostSeries.id;\n      params.seriesName = hostSeries.name;\n      params.seriesType = hostSeries.subType;\n    }\n    return params;\n  };\n  MarkerModel.getMarkerModelFromSeries = function (seriesModel,\n  // Support three types of markers. Strict check.\n  componentType) {\n    return inner(seriesModel)[componentType];\n  };\n  MarkerModel.type = 'marker';\n  MarkerModel.dependencies = ['series', 'grid', 'polar', 'geo'];\n  return MarkerModel;\n}(ComponentModel);\nzrUtil.mixin(MarkerModel, DataFormatMixin.prototype);\nexport default MarkerModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as numberUtil from '../../util/number.js';\nimport { isDimensionStacked } from '../../data/helper/dataStackHelper.js';\nimport { indexOf, curry, clone, isArray } from 'zrender/lib/core/util.js';\nimport { parseDataValue } from '../../data/helper/dataValueHelper.js';\nfunction hasXOrY(item) {\n  return !(isNaN(parseFloat(item.x)) && isNaN(parseFloat(item.y)));\n}\nfunction hasXAndY(item) {\n  return !isNaN(parseFloat(item.x)) && !isNaN(parseFloat(item.y));\n}\nfunction markerTypeCalculatorWithExtent(markerType, data, axisDim, otherDataDim, targetDataDim, otherCoordIndex, targetCoordIndex) {\n  var coordArr = [];\n  var stacked = isDimensionStacked(data, targetDataDim /* , otherDataDim */);\n  var calcDataDim = stacked ? data.getCalculationInfo('stackResultDimension') : targetDataDim;\n  var value = numCalculate(data, calcDataDim, markerType);\n  var seriesModel = data.hostModel;\n  var dataIndex = seriesModel.indicesOfNearest(axisDim, calcDataDim, value)[0];\n  coordArr[otherCoordIndex] = data.get(otherDataDim, dataIndex);\n  coordArr[targetCoordIndex] = data.get(calcDataDim, dataIndex);\n  var coordArrValue = data.get(targetDataDim, dataIndex);\n  // Make it simple, do not visit all stacked value to count precision.\n  var precision = numberUtil.getPrecision(data.get(targetDataDim, dataIndex));\n  precision = Math.min(precision, 20);\n  if (precision >= 0) {\n    coordArr[targetCoordIndex] = +coordArr[targetCoordIndex].toFixed(precision);\n  }\n  return [coordArr, coordArrValue];\n}\n// TODO Specified percent\nvar markerTypeCalculator = {\n  min: curry(markerTypeCalculatorWithExtent, 'min'),\n  max: curry(markerTypeCalculatorWithExtent, 'max'),\n  average: curry(markerTypeCalculatorWithExtent, 'average'),\n  median: curry(markerTypeCalculatorWithExtent, 'median')\n};\n/**\n * Transform markPoint data item to format used in List by do the following\n * 1. Calculate statistic like `max`, `min`, `average`\n * 2. Convert `item.xAxis`, `item.yAxis` to `item.coord` array\n */\nexport function dataTransform(seriesModel, item) {\n  if (!item) {\n    return;\n  }\n  var data = seriesModel.getData();\n  var coordSys = seriesModel.coordinateSystem;\n  var dims = coordSys && coordSys.dimensions;\n  // 1. If not specify the position with pixel directly\n  // 2. If `coord` is not a data array. Which uses `xAxis`,\n  // `yAxis` to specify the coord on each dimension\n  // parseFloat first because item.x and item.y can be percent string like '20%'\n  if (!hasXAndY(item) && !isArray(item.coord) && isArray(dims)) {\n    var axisInfo = getAxisInfo(item, data, coordSys, seriesModel);\n    // Clone the option\n    // Transform the properties xAxis, yAxis, radiusAxis, angleAxis, geoCoord to value\n    item = clone(item);\n    if (item.type && markerTypeCalculator[item.type] && axisInfo.baseAxis && axisInfo.valueAxis) {\n      var otherCoordIndex = indexOf(dims, axisInfo.baseAxis.dim);\n      var targetCoordIndex = indexOf(dims, axisInfo.valueAxis.dim);\n      var coordInfo = markerTypeCalculator[item.type](data, axisInfo.valueAxis.dim, axisInfo.baseDataDim, axisInfo.valueDataDim, otherCoordIndex, targetCoordIndex);\n      item.coord = coordInfo[0];\n      // Force to use the value of calculated value.\n      // let item use the value without stack.\n      item.value = coordInfo[1];\n    } else {\n      // FIXME Only has one of xAxis and yAxis.\n      item.coord = [item.xAxis != null ? item.xAxis : item.radiusAxis, item.yAxis != null ? item.yAxis : item.angleAxis];\n    }\n  }\n  // x y is provided\n  if (item.coord == null || !isArray(dims)) {\n    item.coord = [];\n    var baseAxis = seriesModel.getBaseAxis();\n    if (baseAxis && item.type && markerTypeCalculator[item.type]) {\n      var otherAxis = coordSys.getOtherAxis(baseAxis);\n      if (otherAxis) {\n        item.value = numCalculate(data, data.mapDimension(otherAxis.dim), item.type);\n      }\n    }\n  } else {\n    // Each coord support max, min, average\n    var coord = item.coord;\n    for (var i = 0; i < 2; i++) {\n      if (markerTypeCalculator[coord[i]]) {\n        coord[i] = numCalculate(data, data.mapDimension(dims[i]), coord[i]);\n      }\n    }\n  }\n  return item;\n}\nexport function getAxisInfo(item, data, coordSys, seriesModel) {\n  var ret = {};\n  if (item.valueIndex != null || item.valueDim != null) {\n    ret.valueDataDim = item.valueIndex != null ? data.getDimension(item.valueIndex) : item.valueDim;\n    ret.valueAxis = coordSys.getAxis(dataDimToCoordDim(seriesModel, ret.valueDataDim));\n    ret.baseAxis = coordSys.getOtherAxis(ret.valueAxis);\n    ret.baseDataDim = data.mapDimension(ret.baseAxis.dim);\n  } else {\n    ret.baseAxis = seriesModel.getBaseAxis();\n    ret.valueAxis = coordSys.getOtherAxis(ret.baseAxis);\n    ret.baseDataDim = data.mapDimension(ret.baseAxis.dim);\n    ret.valueDataDim = data.mapDimension(ret.valueAxis.dim);\n  }\n  return ret;\n}\nfunction dataDimToCoordDim(seriesModel, dataDim) {\n  var dimItem = seriesModel.getData().getDimensionInfo(dataDim);\n  return dimItem && dimItem.coordDim;\n}\n/**\n * Filter data which is out of coordinateSystem range\n * [dataFilter description]\n */\nexport function dataFilter(\n// Currently only polar and cartesian has containData.\ncoordSys, item) {\n  // Always return true if there is no coordSys\n  return coordSys && coordSys.containData && item.coord && !hasXOrY(item) ? coordSys.containData(item.coord) : true;\n}\nexport function zoneFilter(\n// Currently only polar and cartesian has containData.\ncoordSys, item1, item2) {\n  // Always return true if there is no coordSys\n  return coordSys && coordSys.containZone && item1.coord && item2.coord && !hasXOrY(item1) && !hasXOrY(item2) ? coordSys.containZone(item1.coord, item2.coord) : true;\n}\nexport function createMarkerDimValueGetter(inCoordSys, dims) {\n  return inCoordSys ? function (item, dimName, dataIndex, dimIndex) {\n    var rawVal = dimIndex < 2\n    // x, y, radius, angle\n    ? item.coord && item.coord[dimIndex] : item.value;\n    return parseDataValue(rawVal, dims[dimIndex]);\n  } : function (item, dimName, dataIndex, dimIndex) {\n    return parseDataValue(item.value, dims[dimIndex]);\n  };\n}\nexport function numCalculate(data, valueDataDim, type) {\n  if (type === 'average') {\n    var sum_1 = 0;\n    var count_1 = 0;\n    data.each(valueDataDim, function (val, idx) {\n      if (!isNaN(val)) {\n        sum_1 += val;\n        count_1++;\n      }\n    });\n    return sum_1 / count_1;\n  } else if (type === 'median') {\n    return data.getMedian(valueDataDim);\n  } else {\n    // max & min\n    return data.getDataExtent(valueDataDim)[type === 'max' ? 1 : 0];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nimport { createHashMap, each } from 'zrender/lib/core/util.js';\nimport MarkerModel from './MarkerModel.js';\nimport { makeInner } from '../../util/model.js';\nimport { enterBlur, leaveBlur } from '../../util/states.js';\nimport { traverseUpdateZ, retrieveZInfo } from '../../util/graphic.js';\nvar inner = makeInner();\nvar MarkerView = /** @class */function (_super) {\n  __extends(MarkerView, _super);\n  function MarkerView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MarkerView.type;\n    return _this;\n  }\n  MarkerView.prototype.init = function () {\n    this.markerGroupMap = createHashMap();\n  };\n  MarkerView.prototype.render = function (markerModel, ecModel, api) {\n    var _this = this;\n    var markerGroupMap = this.markerGroupMap;\n    markerGroupMap.each(function (item) {\n      inner(item).keep = false;\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      var markerModel = MarkerModel.getMarkerModelFromSeries(seriesModel, _this.type);\n      markerModel && _this.renderSeries(seriesModel, markerModel, ecModel, api);\n    });\n    markerGroupMap.each(function (item) {\n      !inner(item).keep && _this.group.remove(item.group);\n    });\n    updateZ(ecModel, markerGroupMap, this.type);\n  };\n  MarkerView.prototype.markKeep = function (drawGroup) {\n    inner(drawGroup).keep = true;\n  };\n  MarkerView.prototype.toggleBlurSeries = function (seriesModelList, isBlur) {\n    var _this = this;\n    each(seriesModelList, function (seriesModel) {\n      var markerModel = MarkerModel.getMarkerModelFromSeries(seriesModel, _this.type);\n      if (markerModel) {\n        var data = markerModel.getData();\n        data.eachItemGraphicEl(function (el) {\n          if (el) {\n            isBlur ? enterBlur(el) : leaveBlur(el);\n          }\n        });\n      }\n    });\n  };\n  MarkerView.type = 'marker';\n  return MarkerView;\n}(ComponentView);\nfunction updateZ(ecModel, markerGroupMap, type) {\n  ecModel.eachSeries(function (seriesModel) {\n    var markerModel = MarkerModel.getMarkerModelFromSeries(seriesModel, type);\n    var markerDraw = markerGroupMap.get(seriesModel.id);\n    if (markerModel && markerDraw && markerDraw.group) {\n      var _a = retrieveZInfo(markerModel),\n        z = _a.z,\n        zlevel = _a.zlevel;\n      traverseUpdateZ(markerDraw.group, z, zlevel);\n    }\n  });\n}\nexport default MarkerView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport MarkerModel from './MarkerModel.js';\nvar MarkLineModel = /** @class */function (_super) {\n  __extends(MarkLineModel, _super);\n  function MarkLineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MarkLineModel.type;\n    return _this;\n  }\n  MarkLineModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\n    return new MarkLineModel(markerOpt, masterMarkerModel, ecModel);\n  };\n  MarkLineModel.type = 'markLine';\n  MarkLineModel.defaultOption = {\n    // zlevel: 0,\n    z: 5,\n    symbol: ['circle', 'arrow'],\n    symbolSize: [8, 16],\n    // symbolRotate: 0,\n    symbolOffset: 0,\n    precision: 2,\n    tooltip: {\n      trigger: 'item'\n    },\n    label: {\n      show: true,\n      position: 'end',\n      distance: 5\n    },\n    lineStyle: {\n      type: 'dashed'\n    },\n    emphasis: {\n      label: {\n        show: true\n      },\n      lineStyle: {\n        width: 3\n      }\n    },\n    animationEasing: 'linear'\n  };\n  return MarkLineModel;\n}(MarkerModel);\nexport default MarkLineModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesData from '../../data/SeriesData.js';\nimport * as numberUtil from '../../util/number.js';\nimport * as markerHelper from './markerHelper.js';\nimport LineDraw from '../../chart/helper/LineDraw.js';\nimport MarkerView from './MarkerView.js';\nimport { getStackedDimension } from '../../data/helper/dataStackHelper.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport { getECData } from '../../util/innerStore.js';\nimport MarkerModel from './MarkerModel.js';\nimport { isArray, retrieve, retrieve2, clone, extend, logError, merge, map, curry, filter, isNumber } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nimport { getVisualFromData } from '../../visual/helper.js';\nvar inner = makeInner();\nvar markLineTransform = function (seriesModel, coordSys, mlModel, item) {\n  var data = seriesModel.getData();\n  var itemArray;\n  if (!isArray(item)) {\n    // Special type markLine like 'min', 'max', 'average', 'median'\n    var mlType = item.type;\n    if (mlType === 'min' || mlType === 'max' || mlType === 'average' || mlType === 'median'\n    // In case\n    // data: [{\n    //   yAxis: 10\n    // }]\n    || item.xAxis != null || item.yAxis != null) {\n      var valueAxis = void 0;\n      var value = void 0;\n      if (item.yAxis != null || item.xAxis != null) {\n        valueAxis = coordSys.getAxis(item.yAxis != null ? 'y' : 'x');\n        value = retrieve(item.yAxis, item.xAxis);\n      } else {\n        var axisInfo = markerHelper.getAxisInfo(item, data, coordSys, seriesModel);\n        valueAxis = axisInfo.valueAxis;\n        var valueDataDim = getStackedDimension(data, axisInfo.valueDataDim);\n        value = markerHelper.numCalculate(data, valueDataDim, mlType);\n      }\n      var valueIndex = valueAxis.dim === 'x' ? 0 : 1;\n      var baseIndex = 1 - valueIndex;\n      // Normized to 2d data with start and end point\n      var mlFrom = clone(item);\n      var mlTo = {\n        coord: []\n      };\n      mlFrom.type = null;\n      mlFrom.coord = [];\n      mlFrom.coord[baseIndex] = -Infinity;\n      mlTo.coord[baseIndex] = Infinity;\n      var precision = mlModel.get('precision');\n      if (precision >= 0 && isNumber(value)) {\n        value = +value.toFixed(Math.min(precision, 20));\n      }\n      mlFrom.coord[valueIndex] = mlTo.coord[valueIndex] = value;\n      itemArray = [mlFrom, mlTo, {\n        type: mlType,\n        valueIndex: item.valueIndex,\n        // Force to use the value of calculated value.\n        value: value\n      }];\n    } else {\n      // Invalid data\n      if (process.env.NODE_ENV !== 'production') {\n        logError('Invalid markLine data.');\n      }\n      itemArray = [];\n    }\n  } else {\n    itemArray = item;\n  }\n  var normalizedItem = [markerHelper.dataTransform(seriesModel, itemArray[0]), markerHelper.dataTransform(seriesModel, itemArray[1]), extend({}, itemArray[2])];\n  // Avoid line data type is extended by from(to) data type\n  normalizedItem[2].type = normalizedItem[2].type || null;\n  // Merge from option and to option into line option\n  merge(normalizedItem[2], normalizedItem[0]);\n  merge(normalizedItem[2], normalizedItem[1]);\n  return normalizedItem;\n};\nfunction isInfinity(val) {\n  return !isNaN(val) && !isFinite(val);\n}\n// If a markLine has one dim\nfunction ifMarkLineHasOnlyDim(dimIndex, fromCoord, toCoord, coordSys) {\n  var otherDimIndex = 1 - dimIndex;\n  var dimName = coordSys.dimensions[dimIndex];\n  return isInfinity(fromCoord[otherDimIndex]) && isInfinity(toCoord[otherDimIndex]) && fromCoord[dimIndex] === toCoord[dimIndex] && coordSys.getAxis(dimName).containData(fromCoord[dimIndex]);\n}\nfunction markLineFilter(coordSys, item) {\n  if (coordSys.type === 'cartesian2d') {\n    var fromCoord = item[0].coord;\n    var toCoord = item[1].coord;\n    // In case\n    // {\n    //  markLine: {\n    //    data: [{ yAxis: 2 }]\n    //  }\n    // }\n    if (fromCoord && toCoord && (ifMarkLineHasOnlyDim(1, fromCoord, toCoord, coordSys) || ifMarkLineHasOnlyDim(0, fromCoord, toCoord, coordSys))) {\n      return true;\n    }\n  }\n  return markerHelper.dataFilter(coordSys, item[0]) && markerHelper.dataFilter(coordSys, item[1]);\n}\nfunction updateSingleMarkerEndLayout(data, idx, isFrom, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  var itemModel = data.getItemModel(idx);\n  var point;\n  var xPx = numberUtil.parsePercent(itemModel.get('x'), api.getWidth());\n  var yPx = numberUtil.parsePercent(itemModel.get('y'), api.getHeight());\n  if (!isNaN(xPx) && !isNaN(yPx)) {\n    point = [xPx, yPx];\n  } else {\n    // Chart like bar may have there own marker positioning logic\n    if (seriesModel.getMarkerPosition) {\n      // Use the getMarkerPosition\n      point = seriesModel.getMarkerPosition(data.getValues(data.dimensions, idx));\n    } else {\n      var dims = coordSys.dimensions;\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n      point = coordSys.dataToPoint([x, y]);\n    }\n    // Expand line to the edge of grid if value on one axis is Inifnity\n    // In case\n    //  markLine: {\n    //    data: [{\n    //      yAxis: 2\n    //      // or\n    //      type: 'average'\n    //    }]\n    //  }\n    if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n      // TODO: TYPE ts@4.1 may still infer it as Axis instead of Axis2D. Not sure if it's a bug\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n      var dims = coordSys.dimensions;\n      if (isInfinity(data.get(dims[0], idx))) {\n        point[0] = xAxis.toGlobalCoord(xAxis.getExtent()[isFrom ? 0 : 1]);\n      } else if (isInfinity(data.get(dims[1], idx))) {\n        point[1] = yAxis.toGlobalCoord(yAxis.getExtent()[isFrom ? 0 : 1]);\n      }\n    }\n    // Use x, y if has any\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n  }\n  data.setItemLayout(idx, point);\n}\nvar MarkLineView = /** @class */function (_super) {\n  __extends(MarkLineView, _super);\n  function MarkLineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MarkLineView.type;\n    return _this;\n  }\n  MarkLineView.prototype.updateTransform = function (markLineModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var mlModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markLine');\n      if (mlModel) {\n        var mlData_1 = mlModel.getData();\n        var fromData_1 = inner(mlModel).from;\n        var toData_1 = inner(mlModel).to;\n        // Update visual and layout of from symbol and to symbol\n        fromData_1.each(function (idx) {\n          updateSingleMarkerEndLayout(fromData_1, idx, true, seriesModel, api);\n          updateSingleMarkerEndLayout(toData_1, idx, false, seriesModel, api);\n        });\n        // Update layout of line\n        mlData_1.each(function (idx) {\n          mlData_1.setItemLayout(idx, [fromData_1.getItemLayout(idx), toData_1.getItemLayout(idx)]);\n        });\n        this.markerGroupMap.get(seriesModel.id).updateLayout();\n      }\n    }, this);\n  };\n  MarkLineView.prototype.renderSeries = function (seriesModel, mlModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var lineDrawMap = this.markerGroupMap;\n    var lineDraw = lineDrawMap.get(seriesId) || lineDrawMap.set(seriesId, new LineDraw());\n    this.group.add(lineDraw.group);\n    var mlData = createList(coordSys, seriesModel, mlModel);\n    var fromData = mlData.from;\n    var toData = mlData.to;\n    var lineData = mlData.line;\n    inner(mlModel).from = fromData;\n    inner(mlModel).to = toData;\n    // Line data for tooltip and formatter\n    mlModel.setData(lineData);\n    // TODO\n    // Functionally, `symbolSize` & `symbolOffset` can also be 2D array now.\n    // But the related logic and type definition are not finished yet.\n    // Finish it if required\n    var symbolType = mlModel.get('symbol');\n    var symbolSize = mlModel.get('symbolSize');\n    var symbolRotate = mlModel.get('symbolRotate');\n    var symbolOffset = mlModel.get('symbolOffset');\n    // TODO: support callback function like markPoint\n    if (!isArray(symbolType)) {\n      symbolType = [symbolType, symbolType];\n    }\n    if (!isArray(symbolSize)) {\n      symbolSize = [symbolSize, symbolSize];\n    }\n    if (!isArray(symbolRotate)) {\n      symbolRotate = [symbolRotate, symbolRotate];\n    }\n    if (!isArray(symbolOffset)) {\n      symbolOffset = [symbolOffset, symbolOffset];\n    }\n    // Update visual and layout of from symbol and to symbol\n    mlData.from.each(function (idx) {\n      updateDataVisualAndLayout(fromData, idx, true);\n      updateDataVisualAndLayout(toData, idx, false);\n    });\n    // Update visual and layout of line\n    lineData.each(function (idx) {\n      var itemModel = lineData.getItemModel(idx);\n      var lineStyle = itemModel.getModel('lineStyle').getLineStyle();\n      // lineData.setItemVisual(idx, {\n      //     color: lineColor || fromData.getItemVisual(idx, 'color')\n      // });\n      lineData.setItemLayout(idx, [fromData.getItemLayout(idx), toData.getItemLayout(idx)]);\n      var z2 = itemModel.get('z2');\n      if (lineStyle.stroke == null) {\n        lineStyle.stroke = fromData.getItemVisual(idx, 'style').fill;\n      }\n      lineData.setItemVisual(idx, {\n        z2: retrieve2(z2, 0),\n        fromSymbolKeepAspect: fromData.getItemVisual(idx, 'symbolKeepAspect'),\n        fromSymbolOffset: fromData.getItemVisual(idx, 'symbolOffset'),\n        fromSymbolRotate: fromData.getItemVisual(idx, 'symbolRotate'),\n        fromSymbolSize: fromData.getItemVisual(idx, 'symbolSize'),\n        fromSymbol: fromData.getItemVisual(idx, 'symbol'),\n        toSymbolKeepAspect: toData.getItemVisual(idx, 'symbolKeepAspect'),\n        toSymbolOffset: toData.getItemVisual(idx, 'symbolOffset'),\n        toSymbolRotate: toData.getItemVisual(idx, 'symbolRotate'),\n        toSymbolSize: toData.getItemVisual(idx, 'symbolSize'),\n        toSymbol: toData.getItemVisual(idx, 'symbol'),\n        style: lineStyle\n      });\n    });\n    lineDraw.updateData(lineData);\n    // Set host model for tooltip\n    // FIXME\n    mlData.line.eachItemGraphicEl(function (el) {\n      getECData(el).dataModel = mlModel;\n      el.traverse(function (child) {\n        getECData(child).dataModel = mlModel;\n      });\n    });\n    function updateDataVisualAndLayout(data, idx, isFrom) {\n      var itemModel = data.getItemModel(idx);\n      updateSingleMarkerEndLayout(data, idx, isFrom, seriesModel, api);\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n      if (style.fill == null) {\n        style.fill = getVisualFromData(seriesData, 'color');\n      }\n      data.setItemVisual(idx, {\n        symbolKeepAspect: itemModel.get('symbolKeepAspect'),\n        // `0` should be considered as a valid value, so use `retrieve2` instead of `||`\n        symbolOffset: retrieve2(itemModel.get('symbolOffset', true), symbolOffset[isFrom ? 0 : 1]),\n        symbolRotate: retrieve2(itemModel.get('symbolRotate', true), symbolRotate[isFrom ? 0 : 1]),\n        // TODO: when 2d array is supported, it should ignore parent\n        symbolSize: retrieve2(itemModel.get('symbolSize'), symbolSize[isFrom ? 0 : 1]),\n        symbol: retrieve2(itemModel.get('symbol', true), symbolType[isFrom ? 0 : 1]),\n        style: style\n      });\n    }\n    this.markKeep(lineDraw);\n    lineDraw.group.silent = mlModel.get('silent') || seriesModel.get('silent');\n  };\n  MarkLineView.type = 'markLine';\n  return MarkLineView;\n}(MarkerView);\nfunction createList(coordSys, seriesModel, mlModel) {\n  var coordDimsInfos;\n  if (coordSys) {\n    coordDimsInfos = map(coordSys && coordSys.dimensions, function (coordDim) {\n      var info = seriesModel.getData().getDimensionInfo(seriesModel.getData().mapDimension(coordDim)) || {};\n      // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n      return extend(extend({}, info), {\n        name: coordDim,\n        // DON'T use ordinalMeta to parse and collect ordinal.\n        ordinalMeta: null\n      });\n    });\n  } else {\n    coordDimsInfos = [{\n      name: 'value',\n      type: 'float'\n    }];\n  }\n  var fromData = new SeriesData(coordDimsInfos, mlModel);\n  var toData = new SeriesData(coordDimsInfos, mlModel);\n  // No dimensions\n  var lineData = new SeriesData([], mlModel);\n  var optData = map(mlModel.get('data'), curry(markLineTransform, seriesModel, coordSys, mlModel));\n  if (coordSys) {\n    optData = filter(optData, curry(markLineFilter, coordSys));\n  }\n  var dimValueGetter = markerHelper.createMarkerDimValueGetter(!!coordSys, coordDimsInfos);\n  fromData.initData(map(optData, function (item) {\n    return item[0];\n  }), null, dimValueGetter);\n  toData.initData(map(optData, function (item) {\n    return item[1];\n  }), null, dimValueGetter);\n  lineData.initData(map(optData, function (item) {\n    return item[2];\n  }));\n  lineData.hasItemOption = true;\n  return {\n    from: fromData,\n    to: toData,\n    line: lineData\n  };\n}\nexport default MarkLineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport checkMarkerInSeries from './checkMarkerInSeries.js';\nimport MarkLineModel from './MarkLineModel.js';\nimport MarkLineView from './MarkLineView.js';\nexport function install(registers) {\n  registers.registerComponentModel(MarkLineModel);\n  registers.registerComponentView(MarkLineView);\n  registers.registerPreprocessor(function (opt) {\n    if (checkMarkerInSeries(opt.series, 'markLine')) {\n      // Make sure markLine component is enabled\n      opt.markLine = opt.markLine || {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport MarkerModel from './MarkerModel.js';\nvar MarkAreaModel = /** @class */function (_super) {\n  __extends(MarkAreaModel, _super);\n  function MarkAreaModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MarkAreaModel.type;\n    return _this;\n  }\n  MarkAreaModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\n    return new MarkAreaModel(markerOpt, masterMarkerModel, ecModel);\n  };\n  MarkAreaModel.type = 'markArea';\n  MarkAreaModel.defaultOption = {\n    // zlevel: 0,\n    // PENDING\n    z: 1,\n    tooltip: {\n      trigger: 'item'\n    },\n    // markArea should fixed on the coordinate system\n    animation: false,\n    label: {\n      show: true,\n      position: 'top'\n    },\n    itemStyle: {\n      // color and borderColor default to use color from series\n      // color: 'auto'\n      // borderColor: 'auto'\n      borderWidth: 0\n    },\n    emphasis: {\n      label: {\n        show: true,\n        position: 'top'\n      }\n    }\n  };\n  return MarkAreaModel;\n}(MarkerModel);\nexport default MarkAreaModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n// TODO Optimize on polar\nimport * as colorUtil from 'zrender/lib/tool/color.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport * as numberUtil from '../../util/number.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis, setStatesStylesFromModel } from '../../util/states.js';\nimport * as markerHelper from './markerHelper.js';\nimport MarkerView from './MarkerView.js';\nimport { retrieve, mergeAll, map, curry, filter, extend, isString, retrieve2 } from 'zrender/lib/core/util.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport MarkerModel from './MarkerModel.js';\nimport { makeInner } from '../../util/model.js';\nimport { getVisualFromData } from '../../visual/helper.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { parseDataValue } from '../../data/helper/dataValueHelper.js';\nimport tokens from '../../visual/tokens.js';\nvar inner = makeInner();\nvar markAreaTransform = function (seriesModel, coordSys, maModel, item) {\n  // item may be null\n  var item0 = item[0];\n  var item1 = item[1];\n  if (!item0 || !item1) {\n    return;\n  }\n  var lt = markerHelper.dataTransform(seriesModel, item0);\n  var rb = markerHelper.dataTransform(seriesModel, item1);\n  // FIXME make sure lt is less than rb\n  var ltCoord = lt.coord;\n  var rbCoord = rb.coord;\n  ltCoord[0] = retrieve(ltCoord[0], -Infinity);\n  ltCoord[1] = retrieve(ltCoord[1], -Infinity);\n  rbCoord[0] = retrieve(rbCoord[0], Infinity);\n  rbCoord[1] = retrieve(rbCoord[1], Infinity);\n  // Merge option into one\n  var result = mergeAll([{}, lt, rb]);\n  result.coord = [lt.coord, rb.coord];\n  result.x0 = lt.x;\n  result.y0 = lt.y;\n  result.x1 = rb.x;\n  result.y1 = rb.y;\n  return result;\n};\nfunction isInfinity(val) {\n  return !isNaN(val) && !isFinite(val);\n}\n// If a markArea has one dim\nfunction ifMarkAreaHasOnlyDim(dimIndex, fromCoord, toCoord, coordSys) {\n  var otherDimIndex = 1 - dimIndex;\n  return isInfinity(fromCoord[otherDimIndex]) && isInfinity(toCoord[otherDimIndex]);\n}\nfunction markAreaFilter(coordSys, item) {\n  var fromCoord = item.coord[0];\n  var toCoord = item.coord[1];\n  var item0 = {\n    coord: fromCoord,\n    x: item.x0,\n    y: item.y0\n  };\n  var item1 = {\n    coord: toCoord,\n    x: item.x1,\n    y: item.y1\n  };\n  if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n    // In case\n    // {\n    //  markArea: {\n    //    data: [{ yAxis: 2 }]\n    //  }\n    // }\n    if (fromCoord && toCoord && (ifMarkAreaHasOnlyDim(1, fromCoord, toCoord, coordSys) || ifMarkAreaHasOnlyDim(0, fromCoord, toCoord, coordSys))) {\n      return true;\n    }\n    // Directly returning true may also do the work,\n    // because markArea will not be shown automatically\n    // when it's not included in coordinate system.\n    // But filtering ahead can avoid keeping rendering markArea\n    // when there are too many of them.\n    return markerHelper.zoneFilter(coordSys, item0, item1);\n  }\n  return markerHelper.dataFilter(coordSys, item0) || markerHelper.dataFilter(coordSys, item1);\n}\n// dims can be ['x0', 'y0'], ['x1', 'y1'], ['x0', 'y1'], ['x1', 'y0']\nfunction getSingleMarkerEndPoint(data, idx, dims, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  var itemModel = data.getItemModel(idx);\n  var point;\n  var xPx = numberUtil.parsePercent(itemModel.get(dims[0]), api.getWidth());\n  var yPx = numberUtil.parsePercent(itemModel.get(dims[1]), api.getHeight());\n  if (!isNaN(xPx) && !isNaN(yPx)) {\n    point = [xPx, yPx];\n  } else {\n    // Chart like bar may have there own marker positioning logic\n    if (seriesModel.getMarkerPosition) {\n      // Consider the case that user input the right-bottom point first\n      // Pick the larger x and y as 'x1' and 'y1'\n      var pointValue0 = data.getValues(['x0', 'y0'], idx);\n      var pointValue1 = data.getValues(['x1', 'y1'], idx);\n      var clampPointValue0 = coordSys.clampData(pointValue0);\n      var clampPointValue1 = coordSys.clampData(pointValue1);\n      var pointValue = [];\n      if (dims[0] === 'x0') {\n        pointValue[0] = clampPointValue0[0] > clampPointValue1[0] ? pointValue1[0] : pointValue0[0];\n      } else {\n        pointValue[0] = clampPointValue0[0] > clampPointValue1[0] ? pointValue0[0] : pointValue1[0];\n      }\n      if (dims[1] === 'y0') {\n        pointValue[1] = clampPointValue0[1] > clampPointValue1[1] ? pointValue1[1] : pointValue0[1];\n      } else {\n        pointValue[1] = clampPointValue0[1] > clampPointValue1[1] ? pointValue0[1] : pointValue1[1];\n      }\n      // Use the getMarkerPosition\n      point = seriesModel.getMarkerPosition(pointValue, dims, true);\n    } else {\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n      var pt = [x, y];\n      coordSys.clampData && coordSys.clampData(pt, pt);\n      point = coordSys.dataToPoint(pt, true);\n    }\n    if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n      // TODO: TYPE ts@4.1 may still infer it as Axis instead of Axis2D. Not sure if it's a bug\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n      if (isInfinity(x)) {\n        point[0] = xAxis.toGlobalCoord(xAxis.getExtent()[dims[0] === 'x0' ? 0 : 1]);\n      } else if (isInfinity(y)) {\n        point[1] = yAxis.toGlobalCoord(yAxis.getExtent()[dims[1] === 'y0' ? 0 : 1]);\n      }\n    }\n    // Use x, y if has any\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n  }\n  return point;\n}\nexport var dimPermutations = [['x0', 'y0'], ['x1', 'y0'], ['x1', 'y1'], ['x0', 'y1']];\nvar MarkAreaView = /** @class */function (_super) {\n  __extends(MarkAreaView, _super);\n  function MarkAreaView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MarkAreaView.type;\n    return _this;\n  }\n  MarkAreaView.prototype.updateTransform = function (markAreaModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var maModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markArea');\n      if (maModel) {\n        var areaData_1 = maModel.getData();\n        areaData_1.each(function (idx) {\n          var points = map(dimPermutations, function (dim) {\n            return getSingleMarkerEndPoint(areaData_1, idx, dim, seriesModel, api);\n          });\n          // Layout\n          areaData_1.setItemLayout(idx, points);\n          var el = areaData_1.getItemGraphicEl(idx);\n          el.setShape('points', points);\n        });\n      }\n    }, this);\n  };\n  MarkAreaView.prototype.renderSeries = function (seriesModel, maModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var areaGroupMap = this.markerGroupMap;\n    var polygonGroup = areaGroupMap.get(seriesId) || areaGroupMap.set(seriesId, {\n      group: new graphic.Group()\n    });\n    this.group.add(polygonGroup.group);\n    this.markKeep(polygonGroup);\n    var areaData = createList(coordSys, seriesModel, maModel);\n    // Line data for tooltip and formatter\n    maModel.setData(areaData);\n    // Update visual and layout of line\n    areaData.each(function (idx) {\n      // Layout\n      var points = map(dimPermutations, function (dim) {\n        return getSingleMarkerEndPoint(areaData, idx, dim, seriesModel, api);\n      });\n      var xAxisScale = coordSys.getAxis('x').scale;\n      var yAxisScale = coordSys.getAxis('y').scale;\n      var xAxisExtent = xAxisScale.getExtent();\n      var yAxisExtent = yAxisScale.getExtent();\n      var xPointExtent = [xAxisScale.parse(areaData.get('x0', idx)), xAxisScale.parse(areaData.get('x1', idx))];\n      var yPointExtent = [yAxisScale.parse(areaData.get('y0', idx)), yAxisScale.parse(areaData.get('y1', idx))];\n      numberUtil.asc(xPointExtent);\n      numberUtil.asc(yPointExtent);\n      var overlapped = !(xAxisExtent[0] > xPointExtent[1] || xAxisExtent[1] < xPointExtent[0] || yAxisExtent[0] > yPointExtent[1] || yAxisExtent[1] < yPointExtent[0]);\n      // If none of the area is inside coordSys, allClipped is set to be true\n      // in layout so that label will not be displayed. See #12591\n      var allClipped = !overlapped;\n      areaData.setItemLayout(idx, {\n        points: points,\n        allClipped: allClipped\n      });\n      var itemModel = areaData.getItemModel(idx);\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n      var z2 = itemModel.get('z2');\n      var color = getVisualFromData(seriesData, 'color');\n      if (!style.fill) {\n        style.fill = color;\n        if (isString(style.fill)) {\n          style.fill = colorUtil.modifyAlpha(style.fill, 0.4);\n        }\n      }\n      if (!style.stroke) {\n        style.stroke = color;\n      }\n      // Visual\n      areaData.setItemVisual(idx, 'style', style);\n      areaData.setItemVisual(idx, 'z2', retrieve2(z2, 0));\n    });\n    areaData.diff(inner(polygonGroup).data).add(function (idx) {\n      var layout = areaData.getItemLayout(idx);\n      var z2 = areaData.getItemVisual(idx, 'z2');\n      if (!layout.allClipped) {\n        var polygon = new graphic.Polygon({\n          z2: retrieve2(z2, 0),\n          shape: {\n            points: layout.points\n          }\n        });\n        areaData.setItemGraphicEl(idx, polygon);\n        polygonGroup.group.add(polygon);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var polygon = inner(polygonGroup).data.getItemGraphicEl(oldIdx);\n      var layout = areaData.getItemLayout(newIdx);\n      var z2 = areaData.getItemVisual(newIdx, 'z2');\n      if (!layout.allClipped) {\n        if (polygon) {\n          graphic.updateProps(polygon, {\n            z2: retrieve2(z2, 0),\n            shape: {\n              points: layout.points\n            }\n          }, maModel, newIdx);\n        } else {\n          polygon = new graphic.Polygon({\n            shape: {\n              points: layout.points\n            }\n          });\n        }\n        areaData.setItemGraphicEl(newIdx, polygon);\n        polygonGroup.group.add(polygon);\n      } else if (polygon) {\n        polygonGroup.group.remove(polygon);\n      }\n    }).remove(function (idx) {\n      var polygon = inner(polygonGroup).data.getItemGraphicEl(idx);\n      polygonGroup.group.remove(polygon);\n    }).execute();\n    areaData.eachItemGraphicEl(function (polygon, idx) {\n      var itemModel = areaData.getItemModel(idx);\n      var style = areaData.getItemVisual(idx, 'style');\n      polygon.useStyle(areaData.getItemVisual(idx, 'style'));\n      setLabelStyle(polygon, getLabelStatesModels(itemModel), {\n        labelFetcher: maModel,\n        labelDataIndex: idx,\n        defaultText: areaData.getName(idx) || '',\n        inheritColor: isString(style.fill) ? colorUtil.modifyAlpha(style.fill, 1) : tokens.color.neutral99\n      });\n      setStatesStylesFromModel(polygon, itemModel);\n      toggleHoverEmphasis(polygon, null, null, itemModel.get(['emphasis', 'disabled']));\n      getECData(polygon).dataModel = maModel;\n    });\n    inner(polygonGroup).data = areaData;\n    polygonGroup.group.silent = maModel.get('silent') || seriesModel.get('silent');\n  };\n  MarkAreaView.type = 'markArea';\n  return MarkAreaView;\n}(MarkerView);\nfunction createList(coordSys, seriesModel, maModel) {\n  var areaData;\n  var dataDims;\n  var dims = ['x0', 'y0', 'x1', 'y1'];\n  if (coordSys) {\n    var coordDimsInfos_1 = map(coordSys && coordSys.dimensions, function (coordDim) {\n      var data = seriesModel.getData();\n      var info = data.getDimensionInfo(data.mapDimension(coordDim)) || {};\n      // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n      return extend(extend({}, info), {\n        name: coordDim,\n        // DON'T use ordinalMeta to parse and collect ordinal.\n        ordinalMeta: null\n      });\n    });\n    dataDims = map(dims, function (dim, idx) {\n      return {\n        name: dim,\n        type: coordDimsInfos_1[idx % 2].type\n      };\n    });\n    areaData = new SeriesData(dataDims, maModel);\n  } else {\n    dataDims = [{\n      name: 'value',\n      type: 'float'\n    }];\n    areaData = new SeriesData(dataDims, maModel);\n  }\n  var optData = map(maModel.get('data'), curry(markAreaTransform, seriesModel, coordSys, maModel));\n  if (coordSys) {\n    optData = filter(optData, curry(markAreaFilter, coordSys));\n  }\n  var dimValueGetter = coordSys ? function (item, dimName, dataIndex, dimIndex) {\n    // TODO should convert to ParsedValue?\n    var rawVal = item.coord[Math.floor(dimIndex / 2)][dimIndex % 2];\n    return parseDataValue(rawVal, dataDims[dimIndex]);\n  } : function (item, dimName, dataIndex, dimIndex) {\n    return parseDataValue(item.value, dataDims[dimIndex]);\n  };\n  areaData.initData(optData, null, dimValueGetter);\n  areaData.hasItemOption = true;\n  return areaData;\n}\nexport default MarkAreaView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport checkMarkerInSeries from './checkMarkerInSeries.js';\nimport MarkAreaModel from './MarkAreaModel.js';\nimport MarkAreaView from './MarkAreaView.js';\nexport function install(registers) {\n  registers.registerComponentModel(MarkAreaModel);\n  registers.registerComponentView(MarkAreaView);\n  registers.registerPreprocessor(function (opt) {\n    if (checkMarkerInSeries(opt.series, 'markArea')) {\n      // Make sure markArea component is enabled\n      opt.markArea = opt.markArea || {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar InsideZoomModel = /** @class */function (_super) {\n  __extends(InsideZoomModel, _super);\n  function InsideZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = InsideZoomModel.type;\n    return _this;\n  }\n  InsideZoomModel.type = 'dataZoom.inside';\n  InsideZoomModel.defaultOption = inheritDefaultOption(DataZoomModel.defaultOption, {\n    disabled: false,\n    zoomLock: false,\n    zoomOnMouseWheel: true,\n    moveOnMouseMove: true,\n    moveOnMouseWheel: false,\n    preventDefaultMouseMove: true\n  });\n  return InsideZoomModel;\n}(DataZoomModel);\nexport default InsideZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Only create one roam controller for each coordinate system.\n// one roam controller might be refered by two inside data zoom\n// components (for example, one for x and one for y). When user\n// pan or zoom, only dispatch one action for those data zoom\n// components.\nimport RoamController from '../../component/helper/RoamController.js';\nimport * as throttleUtil from '../../util/throttle.js';\nimport { makeInner } from '../../util/model.js';\nimport { each, curry, createHashMap } from 'zrender/lib/core/util.js';\nimport { collectReferCoordSysModelInfo } from './helper.js';\nvar inner = makeInner();\nexport function setViewInfoToCoordSysRecord(api, dataZoomModel, getRange) {\n  inner(api).coordSysRecordMap.each(function (coordSysRecord) {\n    var dzInfo = coordSysRecord.dataZoomInfoMap.get(dataZoomModel.uid);\n    if (dzInfo) {\n      dzInfo.getRange = getRange;\n    }\n  });\n}\nexport function disposeCoordSysRecordIfNeeded(api, dataZoomModel) {\n  var coordSysRecordMap = inner(api).coordSysRecordMap;\n  var coordSysKeyArr = coordSysRecordMap.keys();\n  for (var i = 0; i < coordSysKeyArr.length; i++) {\n    var coordSysKey = coordSysKeyArr[i];\n    var coordSysRecord = coordSysRecordMap.get(coordSysKey);\n    var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n    if (dataZoomInfoMap) {\n      var dzUid = dataZoomModel.uid;\n      var dzInfo = dataZoomInfoMap.get(dzUid);\n      if (dzInfo) {\n        dataZoomInfoMap.removeKey(dzUid);\n        if (!dataZoomInfoMap.keys().length) {\n          disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n        }\n      }\n    }\n  }\n}\nfunction disposeCoordSysRecord(coordSysRecordMap, coordSysRecord) {\n  if (coordSysRecord) {\n    coordSysRecordMap.removeKey(coordSysRecord.model.uid);\n    var controller = coordSysRecord.controller;\n    controller && controller.dispose();\n  }\n}\nfunction createCoordSysRecord(api, coordSysModel) {\n  // These init props will never change after record created.\n  var coordSysRecord = {\n    model: coordSysModel,\n    containsPoint: curry(containsPoint, coordSysModel),\n    dispatchAction: curry(dispatchAction, api),\n    dataZoomInfoMap: null,\n    controller: null\n  };\n  // Must not do anything depends on coordSysRecord outside the event handler here,\n  // because coordSysRecord not completed yet.\n  var controller = coordSysRecord.controller = new RoamController(api.getZr());\n  each(['pan', 'zoom', 'scrollMove'], function (eventName) {\n    controller.on(eventName, function (event) {\n      var batch = [];\n      coordSysRecord.dataZoomInfoMap.each(function (dzInfo) {\n        // Check whether the behaviors (zoomOnMouseWheel, moveOnMouseMove,\n        // moveOnMouseWheel, ...) enabled.\n        if (!event.isAvailableBehavior(dzInfo.model.option)) {\n          return;\n        }\n        var method = (dzInfo.getRange || {})[eventName];\n        var range = method && method(dzInfo.dzReferCoordSysInfo, coordSysRecord.model.mainType, coordSysRecord.controller, event);\n        !dzInfo.model.get('disabled', true) && range && batch.push({\n          dataZoomId: dzInfo.model.id,\n          start: range[0],\n          end: range[1]\n        });\n      });\n      batch.length && coordSysRecord.dispatchAction(batch);\n    });\n  });\n  return coordSysRecord;\n}\n/**\n * This action will be throttled.\n */\nfunction dispatchAction(api, batch) {\n  if (!api.isDisposed()) {\n    api.dispatchAction({\n      type: 'dataZoom',\n      animation: {\n        easing: 'cubicOut',\n        duration: 100\n      },\n      batch: batch\n    });\n  }\n}\nfunction containsPoint(coordSysModel, e, x, y) {\n  return coordSysModel.coordinateSystem.containPoint([x, y]);\n}\n/**\n * Merge roamController settings when multiple dataZooms share one roamController.\n */\nfunction mergeControllerParams(dataZoomInfoMap, coordSysRecord, api) {\n  var controlType;\n  // DO NOT use reserved word (true, false, undefined) as key literally. Even if encapsulated\n  // as string, it is probably revert to reserved word by compress tool. See #7411.\n  var prefix = 'type_';\n  var typePriority = {\n    'type_true': 2,\n    'type_move': 1,\n    'type_false': 0,\n    'type_undefined': -1\n  };\n  var preventDefaultMouseMove = true;\n  dataZoomInfoMap.each(function (dataZoomInfo) {\n    var dataZoomModel = dataZoomInfo.model;\n    var oneType = dataZoomModel.get('disabled', true) ? false : dataZoomModel.get('zoomLock', true) ? 'move' : true;\n    if (typePriority[prefix + oneType] > typePriority[prefix + controlType]) {\n      controlType = oneType;\n    }\n    // Prevent default move event by default. If one false, do not prevent. Otherwise\n    // users may be confused why it does not work when multiple insideZooms exist.\n    preventDefaultMouseMove = preventDefaultMouseMove && dataZoomModel.get('preventDefaultMouseMove', true);\n  });\n  return {\n    controlType: controlType,\n    opt: {\n      // RoamController will enable all of these functionalities,\n      // and the final behavior is determined by its event listener\n      // provided by each inside zoom.\n      zoomOnMouseWheel: true,\n      moveOnMouseMove: true,\n      moveOnMouseWheel: true,\n      preventDefaultMouseMove: !!preventDefaultMouseMove,\n      api: api,\n      zInfo: {\n        component: coordSysRecord.model\n      },\n      triggerInfo: {\n        roamTrigger: null,\n        isInSelf: coordSysRecord.containsPoint\n      }\n    }\n  };\n}\nexport function installDataZoomRoamProcessor(registers) {\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER, function (ecModel, api) {\n    var apiInner = inner(api);\n    var coordSysRecordMap = apiInner.coordSysRecordMap || (apiInner.coordSysRecordMap = createHashMap());\n    coordSysRecordMap.each(function (coordSysRecord) {\n      // `coordSysRecordMap` always exists (because it holds the `roam controller`, which should\n      // better not re-create each time), but clear `dataZoomInfoMap` each round of the workflow.\n      coordSysRecord.dataZoomInfoMap = null;\n    });\n    ecModel.eachComponent({\n      mainType: 'dataZoom',\n      subType: 'inside'\n    }, function (dataZoomModel) {\n      var dzReferCoordSysWrap = collectReferCoordSysModelInfo(dataZoomModel);\n      each(dzReferCoordSysWrap.infoList, function (dzCoordSysInfo) {\n        var coordSysUid = dzCoordSysInfo.model.uid;\n        var coordSysRecord = coordSysRecordMap.get(coordSysUid) || coordSysRecordMap.set(coordSysUid, createCoordSysRecord(api, dzCoordSysInfo.model));\n        var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap || (coordSysRecord.dataZoomInfoMap = createHashMap());\n        // Notice these props might be changed each time for a single dataZoomModel.\n        dataZoomInfoMap.set(dataZoomModel.uid, {\n          dzReferCoordSysInfo: dzCoordSysInfo,\n          model: dataZoomModel,\n          getRange: null\n        });\n      });\n    });\n    // (1) Merge dataZoom settings for each coord sys and set to the roam controller.\n    // (2) Clear coord sys if not refered by any dataZoom.\n    coordSysRecordMap.each(function (coordSysRecord) {\n      var controller = coordSysRecord.controller;\n      var firstDzInfo;\n      var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n      if (dataZoomInfoMap) {\n        var firstDzKey = dataZoomInfoMap.keys()[0];\n        if (firstDzKey != null) {\n          firstDzInfo = dataZoomInfoMap.get(firstDzKey);\n        }\n      }\n      if (!firstDzInfo) {\n        disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n        return;\n      }\n      var controllerParams = mergeControllerParams(dataZoomInfoMap, coordSysRecord, api);\n      controller.enable(controllerParams.controlType, controllerParams.opt);\n      throttleUtil.createOrUpdate(coordSysRecord, 'dispatchAction', firstDzInfo.model.get('throttle', true), 'fixRate');\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomView from './DataZoomView.js';\nimport sliderMove from '../helper/sliderMove.js';\nimport * as roams from './roams.js';\nimport { bind } from 'zrender/lib/core/util.js';\nvar InsideZoomView = /** @class */function (_super) {\n  __extends(InsideZoomView, _super);\n  function InsideZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'dataZoom.inside';\n    return _this;\n  }\n  InsideZoomView.prototype.render = function (dataZoomModel, ecModel, api) {\n    _super.prototype.render.apply(this, arguments);\n    if (dataZoomModel.noTarget()) {\n      this._clear();\n      return;\n    }\n    // Hence the `throttle` util ensures to preserve command order,\n    // here simply updating range all the time will not cause missing\n    // any of the the roam change.\n    this.range = dataZoomModel.getPercentRange();\n    // Reset controllers.\n    roams.setViewInfoToCoordSysRecord(api, dataZoomModel, {\n      pan: bind(getRangeHandlers.pan, this),\n      zoom: bind(getRangeHandlers.zoom, this),\n      scrollMove: bind(getRangeHandlers.scrollMove, this)\n    });\n  };\n  InsideZoomView.prototype.dispose = function () {\n    this._clear();\n    _super.prototype.dispose.apply(this, arguments);\n  };\n  InsideZoomView.prototype._clear = function () {\n    roams.disposeCoordSysRecordIfNeeded(this.api, this.dataZoomModel);\n    this.range = null;\n  };\n  InsideZoomView.type = 'dataZoom.inside';\n  return InsideZoomView;\n}(DataZoomView);\nvar getRangeHandlers = {\n  zoom: function (coordSysInfo, coordSysMainType, controller, e) {\n    var lastRange = this.range;\n    var range = lastRange.slice();\n    // Calculate transform by the first axis.\n    var axisModel = coordSysInfo.axisModels[0];\n    if (!axisModel) {\n      return;\n    }\n    var directionInfo = getDirectionInfo[coordSysMainType](null, [e.originX, e.originY], axisModel, controller, coordSysInfo);\n    var percentPoint = (directionInfo.signal > 0 ? directionInfo.pixelStart + directionInfo.pixelLength - directionInfo.pixel : directionInfo.pixel - directionInfo.pixelStart) / directionInfo.pixelLength * (range[1] - range[0]) + range[0];\n    var scale = Math.max(1 / e.scale, 0);\n    range[0] = (range[0] - percentPoint) * scale + percentPoint;\n    range[1] = (range[1] - percentPoint) * scale + percentPoint;\n    // Restrict range.\n    var minMaxSpan = this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n    sliderMove(0, range, [0, 100], 0, minMaxSpan.minSpan, minMaxSpan.maxSpan);\n    this.range = range;\n    if (lastRange[0] !== range[0] || lastRange[1] !== range[1]) {\n      return range;\n    }\n  },\n  pan: makeMover(function (range, axisModel, coordSysInfo, coordSysMainType, controller, e) {\n    var directionInfo = getDirectionInfo[coordSysMainType]([e.oldX, e.oldY], [e.newX, e.newY], axisModel, controller, coordSysInfo);\n    return directionInfo.signal * (range[1] - range[0]) * directionInfo.pixel / directionInfo.pixelLength;\n  }),\n  scrollMove: makeMover(function (range, axisModel, coordSysInfo, coordSysMainType, controller, e) {\n    var directionInfo = getDirectionInfo[coordSysMainType]([0, 0], [e.scrollDelta, e.scrollDelta], axisModel, controller, coordSysInfo);\n    return directionInfo.signal * (range[1] - range[0]) * e.scrollDelta;\n  })\n};\nfunction makeMover(getPercentDelta) {\n  return function (coordSysInfo, coordSysMainType, controller, e) {\n    var lastRange = this.range;\n    var range = lastRange.slice();\n    // Calculate transform by the first axis.\n    var axisModel = coordSysInfo.axisModels[0];\n    if (!axisModel) {\n      return;\n    }\n    var percentDelta = getPercentDelta(range, axisModel, coordSysInfo, coordSysMainType, controller, e);\n    sliderMove(percentDelta, range, [0, 100], 'all');\n    this.range = range;\n    if (lastRange[0] !== range[0] || lastRange[1] !== range[1]) {\n      return range;\n    }\n  };\n}\nvar getDirectionInfo = {\n  grid: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var ret = {};\n    var rect = coordSysInfo.model.coordinateSystem.getRect();\n    oldPoint = oldPoint || [0, 0];\n    if (axis.dim === 'x') {\n      ret.pixel = newPoint[0] - oldPoint[0];\n      ret.pixelLength = rect.width;\n      ret.pixelStart = rect.x;\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // axis.dim === 'y'\n      ret.pixel = newPoint[1] - oldPoint[1];\n      ret.pixelLength = rect.height;\n      ret.pixelStart = rect.y;\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n    return ret;\n  },\n  polar: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var ret = {};\n    var polar = coordSysInfo.model.coordinateSystem;\n    var radiusExtent = polar.getRadiusAxis().getExtent();\n    var angleExtent = polar.getAngleAxis().getExtent();\n    oldPoint = oldPoint ? polar.pointToCoord(oldPoint) : [0, 0];\n    newPoint = polar.pointToCoord(newPoint);\n    if (axisModel.mainType === 'radiusAxis') {\n      ret.pixel = newPoint[0] - oldPoint[0];\n      // ret.pixelLength = Math.abs(radiusExtent[1] - radiusExtent[0]);\n      // ret.pixelStart = Math.min(radiusExtent[0], radiusExtent[1]);\n      ret.pixelLength = radiusExtent[1] - radiusExtent[0];\n      ret.pixelStart = radiusExtent[0];\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // 'angleAxis'\n      ret.pixel = newPoint[1] - oldPoint[1];\n      // ret.pixelLength = Math.abs(angleExtent[1] - angleExtent[0]);\n      // ret.pixelStart = Math.min(angleExtent[0], angleExtent[1]);\n      ret.pixelLength = angleExtent[1] - angleExtent[0];\n      ret.pixelStart = angleExtent[0];\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n    return ret;\n  },\n  singleAxis: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var rect = coordSysInfo.model.coordinateSystem.getRect();\n    var ret = {};\n    oldPoint = oldPoint || [0, 0];\n    if (axis.orient === 'horizontal') {\n      ret.pixel = newPoint[0] - oldPoint[0];\n      ret.pixelLength = rect.width;\n      ret.pixelStart = rect.x;\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // 'vertical'\n      ret.pixel = newPoint[1] - oldPoint[1];\n      ret.pixelLength = rect.height;\n      ret.pixelStart = rect.y;\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n    return ret;\n  }\n};\nexport default InsideZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport InsideZoomModel from './InsideZoomModel.js';\nimport InsideZoomView from './InsideZoomView.js';\nimport { installDataZoomRoamProcessor } from './roams.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  installCommon(registers);\n  registers.registerComponentModel(InsideZoomModel);\n  registers.registerComponentView(InsideZoomView);\n  installDataZoomRoamProcessor(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nimport tokens from '../../visual/tokens.js';\nvar SliderZoomModel = /** @class */function (_super) {\n  __extends(SliderZoomModel, _super);\n  function SliderZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SliderZoomModel.type;\n    return _this;\n  }\n  SliderZoomModel.type = 'dataZoom.slider';\n  SliderZoomModel.layoutMode = 'box';\n  SliderZoomModel.defaultOption = inheritDefaultOption(DataZoomModel.defaultOption, {\n    show: true,\n    // deault value can only be drived in view stage.\n    right: 'ph',\n    top: 'ph',\n    width: 'ph',\n    height: 'ph',\n    left: null,\n    bottom: null,\n    borderColor: tokens.color.accent10,\n    borderRadius: 0,\n    backgroundColor: tokens.color.transparent,\n    // dataBackgroundColor: '#ddd',\n    dataBackground: {\n      lineStyle: {\n        color: tokens.color.accent30,\n        width: 0.5\n      },\n      areaStyle: {\n        color: tokens.color.accent20,\n        opacity: 0.2\n      }\n    },\n    selectedDataBackground: {\n      lineStyle: {\n        color: tokens.color.accent40,\n        width: 0.5\n      },\n      areaStyle: {\n        color: tokens.color.accent20,\n        opacity: 0.3\n      }\n    },\n    // Color of selected window.\n    fillerColor: 'rgba(135,175,274,0.2)',\n    handleIcon: 'path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z',\n    // Percent of the slider height\n    handleSize: '100%',\n    handleStyle: {\n      color: tokens.color.neutral00,\n      borderColor: tokens.color.accent20\n    },\n    moveHandleSize: 7,\n    moveHandleIcon: 'path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z',\n    moveHandleStyle: {\n      color: tokens.color.accent40,\n      opacity: 0.5\n    },\n    showDetail: true,\n    showDataShadow: 'auto',\n    realtime: true,\n    zoomLock: false,\n    textStyle: {\n      color: tokens.color.tertiary\n    },\n    brushSelect: true,\n    brushStyle: {\n      color: tokens.color.accent30,\n      opacity: 0.3\n    },\n    emphasis: {\n      handleLabel: {\n        show: true\n      },\n      handleStyle: {\n        borderColor: tokens.color.accent40\n      },\n      moveHandleStyle: {\n        opacity: 0.8\n      }\n    },\n    defaultLocationEdgeGap: 15\n  });\n  return SliderZoomModel;\n}(DataZoomModel);\nexport default SliderZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { bind, each, isFunction, isString, indexOf } from 'zrender/lib/core/util.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as throttle from '../../util/throttle.js';\nimport DataZoomView from './DataZoomView.js';\nimport { linearMap, asc, parsePercent } from '../../util/number.js';\nimport * as layout from '../../util/layout.js';\nimport sliderMove from '../helper/sliderMove.js';\nimport { getAxisMainType, collectReferCoordSysModelInfo } from './helper.js';\nimport { enableHoverEmphasis } from '../../util/states.js';\nimport { createSymbol, symbolBuildProxies } from '../../util/symbol.js';\nimport { deprecateLog } from '../../util/log.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport tokens from '../../visual/tokens.js';\nvar Rect = graphic.Rect;\n// Constants\nvar DEFAULT_FRAME_BORDER_WIDTH = 1;\nvar DEFAULT_FILLER_SIZE = 30;\nvar DEFAULT_MOVE_HANDLE_SIZE = 7;\nvar HORIZONTAL = 'horizontal';\nvar VERTICAL = 'vertical';\nvar LABEL_GAP = 5;\nvar SHOW_DATA_SHADOW_SERIES_TYPE = ['line', 'bar', 'candlestick', 'scatter'];\nvar REALTIME_ANIMATION_CONFIG = {\n  easing: 'cubicOut',\n  duration: 100,\n  delay: 0\n};\nvar SliderZoomView = /** @class */function (_super) {\n  __extends(SliderZoomView, _super);\n  function SliderZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SliderZoomView.type;\n    _this._displayables = {};\n    return _this;\n  }\n  SliderZoomView.prototype.init = function (ecModel, api) {\n    this.api = api;\n    // A unique handler for each dataZoom component\n    this._onBrush = bind(this._onBrush, this);\n    this._onBrushEnd = bind(this._onBrushEnd, this);\n  };\n  SliderZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\n    _super.prototype.render.apply(this, arguments);\n    throttle.createOrUpdate(this, '_dispatchZoomAction', dataZoomModel.get('throttle'), 'fixRate');\n    this._orient = dataZoomModel.getOrient();\n    if (dataZoomModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    }\n    if (dataZoomModel.noTarget()) {\n      this._clear();\n      this.group.removeAll();\n      return;\n    }\n    // Notice: this._resetInterval() should not be executed when payload.type\n    // is 'dataZoom', origin this._range should be maintained, otherwise 'pan'\n    // or 'zoom' info will be missed because of 'throttle' of this.dispatchAction,\n    if (!payload || payload.type !== 'dataZoom' || payload.from !== this.uid) {\n      this._buildView();\n    }\n    this._updateView();\n  };\n  SliderZoomView.prototype.dispose = function () {\n    this._clear();\n    _super.prototype.dispose.apply(this, arguments);\n  };\n  SliderZoomView.prototype._clear = function () {\n    throttle.clear(this, '_dispatchZoomAction');\n    var zr = this.api.getZr();\n    zr.off('mousemove', this._onBrush);\n    zr.off('mouseup', this._onBrushEnd);\n  };\n  SliderZoomView.prototype._buildView = function () {\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n    this._brushing = false;\n    this._displayables.brushRect = null;\n    this._resetLocation();\n    this._resetInterval();\n    var barGroup = this._displayables.sliderGroup = new graphic.Group();\n    this._renderBackground();\n    this._renderHandle();\n    this._renderDataShadow();\n    thisGroup.add(barGroup);\n    this._positionGroup();\n  };\n  SliderZoomView.prototype._resetLocation = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var api = this.api;\n    var showMoveHandle = dataZoomModel.get('brushSelect');\n    var moveHandleSize = showMoveHandle ? DEFAULT_MOVE_HANDLE_SIZE : 0;\n    var refContainer = layout.createBoxLayoutReference(dataZoomModel, api).refContainer;\n    // If some of x/y/width/height are not specified,\n    // auto-adapt according to target grid.\n    var coordRect = this._findCoordRect();\n    var edgeGap = dataZoomModel.get('defaultLocationEdgeGap', true) || 0;\n    // Default align by coordinate system rect.\n    var positionInfo = this._orient === HORIZONTAL ? {\n      // Why using 'right', because right should be used in vertical,\n      // and it is better to be consistent for dealing with position param merge.\n      right: refContainer.width - coordRect.x - coordRect.width,\n      top: refContainer.height - DEFAULT_FILLER_SIZE - edgeGap - moveHandleSize,\n      width: coordRect.width,\n      height: DEFAULT_FILLER_SIZE\n    } : {\n      right: edgeGap,\n      top: coordRect.y,\n      width: DEFAULT_FILLER_SIZE,\n      height: coordRect.height\n    };\n    // Do not write back to option and replace value 'ph', because\n    // the 'ph' value should be recalculated when resize.\n    var layoutParams = layout.getLayoutParams(dataZoomModel.option);\n    // Replace the placeholder value.\n    each(['right', 'top', 'width', 'height'], function (name) {\n      if (layoutParams[name] === 'ph') {\n        layoutParams[name] = positionInfo[name];\n      }\n    });\n    var layoutRect = layout.getLayoutRect(layoutParams, refContainer);\n    this._location = {\n      x: layoutRect.x,\n      y: layoutRect.y\n    };\n    this._size = [layoutRect.width, layoutRect.height];\n    this._orient === VERTICAL && this._size.reverse();\n  };\n  SliderZoomView.prototype._positionGroup = function () {\n    var thisGroup = this.group;\n    var location = this._location;\n    var orient = this._orient;\n    // Just use the first axis to determine mapping.\n    var targetAxisModel = this.dataZoomModel.getFirstTargetAxisModel();\n    var inverse = targetAxisModel && targetAxisModel.get('inverse');\n    var sliderGroup = this._displayables.sliderGroup;\n    var otherAxisInverse = (this._dataShadowInfo || {}).otherAxisInverse;\n    // Transform barGroup.\n    sliderGroup.attr(orient === HORIZONTAL && !inverse ? {\n      scaleY: otherAxisInverse ? 1 : -1,\n      scaleX: 1\n    } : orient === HORIZONTAL && inverse ? {\n      scaleY: otherAxisInverse ? 1 : -1,\n      scaleX: -1\n    } : orient === VERTICAL && !inverse ? {\n      scaleY: otherAxisInverse ? -1 : 1,\n      scaleX: 1,\n      rotation: Math.PI / 2\n    }\n    // Don't use Math.PI, considering shadow direction.\n    : {\n      scaleY: otherAxisInverse ? -1 : 1,\n      scaleX: -1,\n      rotation: Math.PI / 2\n    });\n    // Position barGroup\n    var rect = thisGroup.getBoundingRect([sliderGroup]);\n    thisGroup.x = location.x - rect.x;\n    thisGroup.y = location.y - rect.y;\n    thisGroup.markRedraw();\n  };\n  SliderZoomView.prototype._getViewExtent = function () {\n    return [0, this._size[0]];\n  };\n  SliderZoomView.prototype._renderBackground = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var size = this._size;\n    var barGroup = this._displayables.sliderGroup;\n    var brushSelect = dataZoomModel.get('brushSelect');\n    barGroup.add(new Rect({\n      silent: true,\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        fill: dataZoomModel.get('backgroundColor')\n      },\n      z2: -40\n    }));\n    // Click panel, over shadow, below handles.\n    var clickPanel = new Rect({\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        fill: 'transparent'\n      },\n      z2: 0,\n      onclick: bind(this._onClickPanel, this)\n    });\n    var zr = this.api.getZr();\n    if (brushSelect) {\n      clickPanel.on('mousedown', this._onBrushStart, this);\n      clickPanel.cursor = 'crosshair';\n      zr.on('mousemove', this._onBrush);\n      zr.on('mouseup', this._onBrushEnd);\n    } else {\n      zr.off('mousemove', this._onBrush);\n      zr.off('mouseup', this._onBrushEnd);\n    }\n    barGroup.add(clickPanel);\n  };\n  SliderZoomView.prototype._renderDataShadow = function () {\n    var info = this._dataShadowInfo = this._prepareDataShadowInfo();\n    this._displayables.dataShadowSegs = [];\n    if (!info) {\n      return;\n    }\n    var size = this._size;\n    var oldSize = this._shadowSize || [];\n    var seriesModel = info.series;\n    var data = seriesModel.getRawData();\n    var candlestickDim = seriesModel.getShadowDim && seriesModel.getShadowDim();\n    var otherDim = candlestickDim && data.getDimensionInfo(candlestickDim) ? seriesModel.getShadowDim() // @see candlestick\n    : info.otherDim;\n    if (otherDim == null) {\n      return;\n    }\n    var polygonPts = this._shadowPolygonPts;\n    var polylinePts = this._shadowPolylinePts;\n    // Not re-render if data doesn't change.\n    if (data !== this._shadowData || otherDim !== this._shadowDim || size[0] !== oldSize[0] || size[1] !== oldSize[1]) {\n      var thisDataExtent_1 = data.getDataExtent(info.thisDim);\n      var otherDataExtent_1 = data.getDataExtent(otherDim);\n      // Nice extent.\n      var otherOffset = (otherDataExtent_1[1] - otherDataExtent_1[0]) * 0.3;\n      otherDataExtent_1 = [otherDataExtent_1[0] - otherOffset, otherDataExtent_1[1] + otherOffset];\n      var otherShadowExtent_1 = [0, size[1]];\n      var thisShadowExtent = [0, size[0]];\n      var areaPoints_1 = [[size[0], 0], [0, 0]];\n      var linePoints_1 = [];\n      var step_1 = thisShadowExtent[1] / Math.max(1, data.count() - 1);\n      var normalizationConstant_1 = size[0] / (thisDataExtent_1[1] - thisDataExtent_1[0]);\n      var isTimeAxis_1 = info.thisAxis.type === 'time';\n      var thisCoord_1 = -step_1;\n      // Optimize for large data shadow\n      var stride_1 = Math.round(data.count() / size[0]);\n      var lastIsEmpty_1;\n      data.each([info.thisDim, otherDim], function (thisValue, otherValue, index) {\n        if (stride_1 > 0 && index % stride_1) {\n          if (!isTimeAxis_1) {\n            thisCoord_1 += step_1;\n          }\n          return;\n        }\n        thisCoord_1 = isTimeAxis_1 ? (+thisValue - thisDataExtent_1[0]) * normalizationConstant_1 : thisCoord_1 + step_1;\n        // FIXME\n        // Should consider axis.min/axis.max when drawing dataShadow.\n        // FIXME\n        // list\n        var isEmpty = otherValue == null || isNaN(otherValue) || otherValue === '';\n        // See #4235.\n        var otherCoord = isEmpty ? 0 : linearMap(otherValue, otherDataExtent_1, otherShadowExtent_1, true);\n        // Attempt to draw data shadow precisely when there are empty value.\n        if (isEmpty && !lastIsEmpty_1 && index) {\n          areaPoints_1.push([areaPoints_1[areaPoints_1.length - 1][0], 0]);\n          linePoints_1.push([linePoints_1[linePoints_1.length - 1][0], 0]);\n        } else if (!isEmpty && lastIsEmpty_1) {\n          areaPoints_1.push([thisCoord_1, 0]);\n          linePoints_1.push([thisCoord_1, 0]);\n        }\n        if (!isEmpty) {\n          areaPoints_1.push([thisCoord_1, otherCoord]);\n          linePoints_1.push([thisCoord_1, otherCoord]);\n        }\n        lastIsEmpty_1 = isEmpty;\n      });\n      polygonPts = this._shadowPolygonPts = areaPoints_1;\n      polylinePts = this._shadowPolylinePts = linePoints_1;\n    }\n    this._shadowData = data;\n    this._shadowDim = otherDim;\n    this._shadowSize = [size[0], size[1]];\n    var dataZoomModel = this.dataZoomModel;\n    function createDataShadowGroup(isSelectedArea) {\n      var model = dataZoomModel.getModel(isSelectedArea ? 'selectedDataBackground' : 'dataBackground');\n      var group = new graphic.Group();\n      var polygon = new graphic.Polygon({\n        shape: {\n          points: polygonPts\n        },\n        segmentIgnoreThreshold: 1,\n        style: model.getModel('areaStyle').getAreaStyle(),\n        silent: true,\n        z2: -20\n      });\n      var polyline = new graphic.Polyline({\n        shape: {\n          points: polylinePts\n        },\n        segmentIgnoreThreshold: 1,\n        style: model.getModel('lineStyle').getLineStyle(),\n        silent: true,\n        z2: -19\n      });\n      group.add(polygon);\n      group.add(polyline);\n      return group;\n    }\n    // let dataBackgroundModel = dataZoomModel.getModel('dataBackground');\n    for (var i = 0; i < 3; i++) {\n      var group = createDataShadowGroup(i === 1);\n      this._displayables.sliderGroup.add(group);\n      this._displayables.dataShadowSegs.push(group);\n    }\n  };\n  SliderZoomView.prototype._prepareDataShadowInfo = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var showDataShadow = dataZoomModel.get('showDataShadow');\n    if (showDataShadow === false) {\n      return;\n    }\n    // Find a representative series.\n    var result;\n    var ecModel = this.ecModel;\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      var seriesModels = dataZoomModel.getAxisProxy(axisDim, axisIndex).getTargetSeriesModels();\n      each(seriesModels, function (seriesModel) {\n        if (result) {\n          return;\n        }\n        if (showDataShadow !== true && indexOf(SHOW_DATA_SHADOW_SERIES_TYPE, seriesModel.get('type')) < 0) {\n          return;\n        }\n        var thisAxis = ecModel.getComponent(getAxisMainType(axisDim), axisIndex).axis;\n        var otherDim = getOtherDim(axisDim);\n        var otherAxisInverse;\n        var coordSys = seriesModel.coordinateSystem;\n        if (otherDim != null && coordSys.getOtherAxis) {\n          otherAxisInverse = coordSys.getOtherAxis(thisAxis).inverse;\n        }\n        otherDim = seriesModel.getData().mapDimension(otherDim);\n        var thisDim = seriesModel.getData().mapDimension(axisDim);\n        result = {\n          thisAxis: thisAxis,\n          series: seriesModel,\n          thisDim: thisDim,\n          otherDim: otherDim,\n          otherAxisInverse: otherAxisInverse\n        };\n      }, this);\n    }, this);\n    return result;\n  };\n  SliderZoomView.prototype._renderHandle = function () {\n    var thisGroup = this.group;\n    var displayables = this._displayables;\n    var handles = displayables.handles = [null, null];\n    var handleLabels = displayables.handleLabels = [null, null];\n    var sliderGroup = this._displayables.sliderGroup;\n    var size = this._size;\n    var dataZoomModel = this.dataZoomModel;\n    var api = this.api;\n    var borderRadius = dataZoomModel.get('borderRadius') || 0;\n    var brushSelect = dataZoomModel.get('brushSelect');\n    var filler = displayables.filler = new Rect({\n      silent: brushSelect,\n      style: {\n        fill: dataZoomModel.get('fillerColor')\n      },\n      textConfig: {\n        position: 'inside'\n      }\n    });\n    sliderGroup.add(filler);\n    // Frame border.\n    sliderGroup.add(new Rect({\n      silent: true,\n      subPixelOptimize: true,\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1],\n        r: borderRadius\n      },\n      style: {\n        // deprecated option\n        stroke: dataZoomModel.get('dataBackgroundColor') || dataZoomModel.get('borderColor'),\n        lineWidth: DEFAULT_FRAME_BORDER_WIDTH,\n        fill: tokens.color.transparent\n      }\n    }));\n    // Left and right handle to resize\n    each([0, 1], function (handleIndex) {\n      var iconStr = dataZoomModel.get('handleIcon');\n      if (!symbolBuildProxies[iconStr] && iconStr.indexOf('path://') < 0 && iconStr.indexOf('image://') < 0) {\n        // Compatitable with the old icon parsers. Which can use a path string without path://\n        iconStr = 'path://' + iconStr;\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateLog('handleIcon now needs \\'path://\\' prefix when using a path string');\n        }\n      }\n      var path = createSymbol(iconStr, -1, 0, 2, 2, null, true);\n      path.attr({\n        cursor: getCursor(this._orient),\n        draggable: true,\n        drift: bind(this._onDragMove, this, handleIndex),\n        ondragend: bind(this._onDragEnd, this),\n        onmouseover: bind(this._showDataInfo, this, true),\n        onmouseout: bind(this._showDataInfo, this, false),\n        z2: 5\n      });\n      var bRect = path.getBoundingRect();\n      var handleSize = dataZoomModel.get('handleSize');\n      this._handleHeight = parsePercent(handleSize, this._size[1]);\n      this._handleWidth = bRect.width / bRect.height * this._handleHeight;\n      path.setStyle(dataZoomModel.getModel('handleStyle').getItemStyle());\n      path.style.strokeNoScale = true;\n      path.rectHover = true;\n      path.ensureState('emphasis').style = dataZoomModel.getModel(['emphasis', 'handleStyle']).getItemStyle();\n      enableHoverEmphasis(path);\n      var handleColor = dataZoomModel.get('handleColor'); // deprecated option\n      // Compatitable with previous version\n      if (handleColor != null) {\n        path.style.fill = handleColor;\n      }\n      sliderGroup.add(handles[handleIndex] = path);\n      var textStyleModel = dataZoomModel.getModel('textStyle');\n      var handleLabel = dataZoomModel.get('handleLabel') || {};\n      var handleLabelShow = handleLabel.show || false;\n      thisGroup.add(handleLabels[handleIndex] = new graphic.Text({\n        silent: true,\n        invisible: !handleLabelShow,\n        style: createTextStyle(textStyleModel, {\n          x: 0,\n          y: 0,\n          text: '',\n          verticalAlign: 'middle',\n          align: 'center',\n          fill: textStyleModel.getTextColor(),\n          font: textStyleModel.getFont()\n        }),\n        z2: 10\n      }));\n    }, this);\n    // Handle to move. Only visible when brushSelect is set true.\n    var actualMoveZone = filler;\n    if (brushSelect) {\n      var moveHandleHeight = parsePercent(dataZoomModel.get('moveHandleSize'), size[1]);\n      var moveHandle_1 = displayables.moveHandle = new graphic.Rect({\n        style: dataZoomModel.getModel('moveHandleStyle').getItemStyle(),\n        silent: true,\n        shape: {\n          r: [0, 0, 2, 2],\n          y: size[1] - 0.5,\n          height: moveHandleHeight\n        }\n      });\n      var iconSize = moveHandleHeight * 0.8;\n      var moveHandleIcon = displayables.moveHandleIcon = createSymbol(dataZoomModel.get('moveHandleIcon'), -iconSize / 2, -iconSize / 2, iconSize, iconSize, tokens.color.neutral00, true);\n      moveHandleIcon.silent = true;\n      moveHandleIcon.y = size[1] + moveHandleHeight / 2 - 0.5;\n      moveHandle_1.ensureState('emphasis').style = dataZoomModel.getModel(['emphasis', 'moveHandleStyle']).getItemStyle();\n      var moveZoneExpandSize = Math.min(size[1] / 2, Math.max(moveHandleHeight, 10));\n      actualMoveZone = displayables.moveZone = new graphic.Rect({\n        invisible: true,\n        shape: {\n          y: size[1] - moveZoneExpandSize,\n          height: moveHandleHeight + moveZoneExpandSize\n        }\n      });\n      actualMoveZone.on('mouseover', function () {\n        api.enterEmphasis(moveHandle_1);\n      }).on('mouseout', function () {\n        api.leaveEmphasis(moveHandle_1);\n      });\n      sliderGroup.add(moveHandle_1);\n      sliderGroup.add(moveHandleIcon);\n      sliderGroup.add(actualMoveZone);\n    }\n    actualMoveZone.attr({\n      draggable: true,\n      cursor: 'default',\n      drift: bind(this._onDragMove, this, 'all'),\n      ondragstart: bind(this._showDataInfo, this, true),\n      ondragend: bind(this._onDragEnd, this),\n      onmouseover: bind(this._showDataInfo, this, true),\n      onmouseout: bind(this._showDataInfo, this, false)\n    });\n  };\n  SliderZoomView.prototype._resetInterval = function () {\n    var range = this._range = this.dataZoomModel.getPercentRange();\n    var viewExtent = this._getViewExtent();\n    this._handleEnds = [linearMap(range[0], [0, 100], viewExtent, true), linearMap(range[1], [0, 100], viewExtent, true)];\n  };\n  SliderZoomView.prototype._updateInterval = function (handleIndex, delta) {\n    var dataZoomModel = this.dataZoomModel;\n    var handleEnds = this._handleEnds;\n    var viewExtend = this._getViewExtent();\n    var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n    var percentExtent = [0, 100];\n    sliderMove(delta, handleEnds, viewExtend, dataZoomModel.get('zoomLock') ? 'all' : handleIndex, minMaxSpan.minSpan != null ? linearMap(minMaxSpan.minSpan, percentExtent, viewExtend, true) : null, minMaxSpan.maxSpan != null ? linearMap(minMaxSpan.maxSpan, percentExtent, viewExtend, true) : null);\n    var lastRange = this._range;\n    var range = this._range = asc([linearMap(handleEnds[0], viewExtend, percentExtent, true), linearMap(handleEnds[1], viewExtend, percentExtent, true)]);\n    return !lastRange || lastRange[0] !== range[0] || lastRange[1] !== range[1];\n  };\n  SliderZoomView.prototype._updateView = function (nonRealtime) {\n    var displaybles = this._displayables;\n    var handleEnds = this._handleEnds;\n    var handleInterval = asc(handleEnds.slice());\n    var size = this._size;\n    each([0, 1], function (handleIndex) {\n      // Handles\n      var handle = displaybles.handles[handleIndex];\n      var handleHeight = this._handleHeight;\n      handle.attr({\n        scaleX: handleHeight / 2,\n        scaleY: handleHeight / 2,\n        // This is a trick, by adding an extra tiny offset to let the default handle's end point align to the drag window.\n        // NOTE: It may affect some custom shapes a bit. But we prefer to have better result by default.\n        x: handleEnds[handleIndex] + (handleIndex ? -1 : 1),\n        y: size[1] / 2 - handleHeight / 2\n      });\n    }, this);\n    // Filler\n    displaybles.filler.setShape({\n      x: handleInterval[0],\n      y: 0,\n      width: handleInterval[1] - handleInterval[0],\n      height: size[1]\n    });\n    var viewExtent = {\n      x: handleInterval[0],\n      width: handleInterval[1] - handleInterval[0]\n    };\n    // Move handle\n    if (displaybles.moveHandle) {\n      displaybles.moveHandle.setShape(viewExtent);\n      displaybles.moveZone.setShape(viewExtent);\n      // Force update path on the invisible object\n      displaybles.moveZone.getBoundingRect();\n      displaybles.moveHandleIcon && displaybles.moveHandleIcon.attr('x', viewExtent.x + viewExtent.width / 2);\n    }\n    // update clip path of shadow.\n    var dataShadowSegs = displaybles.dataShadowSegs;\n    var segIntervals = [0, handleInterval[0], handleInterval[1], size[0]];\n    for (var i = 0; i < dataShadowSegs.length; i++) {\n      var segGroup = dataShadowSegs[i];\n      var clipPath = segGroup.getClipPath();\n      if (!clipPath) {\n        clipPath = new graphic.Rect();\n        segGroup.setClipPath(clipPath);\n      }\n      clipPath.setShape({\n        x: segIntervals[i],\n        y: 0,\n        width: segIntervals[i + 1] - segIntervals[i],\n        height: size[1]\n      });\n    }\n    this._updateDataInfo(nonRealtime);\n  };\n  SliderZoomView.prototype._updateDataInfo = function (nonRealtime) {\n    var dataZoomModel = this.dataZoomModel;\n    var displaybles = this._displayables;\n    var handleLabels = displaybles.handleLabels;\n    var orient = this._orient;\n    var labelTexts = ['', ''];\n    // FIXME\n    // dateformatterautoformatterec2 date.getAutoFormatter\n    if (dataZoomModel.get('showDetail')) {\n      var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n      if (axisProxy) {\n        var axis = axisProxy.getAxisModel().axis;\n        var range = this._range;\n        var dataInterval = nonRealtime\n        // See #4434, data and axis are not processed and reset yet in non-realtime mode.\n        ? axisProxy.calculateDataWindow({\n          start: range[0],\n          end: range[1]\n        }).valueWindow : axisProxy.getDataValueWindow();\n        labelTexts = [this._formatLabel(dataInterval[0], axis), this._formatLabel(dataInterval[1], axis)];\n      }\n    }\n    var orderedHandleEnds = asc(this._handleEnds.slice());\n    setLabel.call(this, 0);\n    setLabel.call(this, 1);\n    function setLabel(handleIndex) {\n      // Label\n      // Text should not transform by barGroup.\n      // Ignore handlers transform\n      var barTransform = graphic.getTransform(displaybles.handles[handleIndex].parent, this.group);\n      var direction = graphic.transformDirection(handleIndex === 0 ? 'right' : 'left', barTransform);\n      var offset = this._handleWidth / 2 + LABEL_GAP;\n      var textPoint = graphic.applyTransform([orderedHandleEnds[handleIndex] + (handleIndex === 0 ? -offset : offset), this._size[1] / 2], barTransform);\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        verticalAlign: orient === HORIZONTAL ? 'middle' : direction,\n        align: orient === HORIZONTAL ? direction : 'center',\n        text: labelTexts[handleIndex]\n      });\n    }\n  };\n  SliderZoomView.prototype._formatLabel = function (value, axis) {\n    var dataZoomModel = this.dataZoomModel;\n    var labelFormatter = dataZoomModel.get('labelFormatter');\n    var labelPrecision = dataZoomModel.get('labelPrecision');\n    if (labelPrecision == null || labelPrecision === 'auto') {\n      labelPrecision = axis.getPixelPrecision();\n    }\n    var valueStr = value == null || isNaN(value) ? ''\n    // FIXME Glue code\n    : axis.type === 'category' || axis.type === 'time' ? axis.scale.getLabel({\n      value: Math.round(value)\n    })\n    // param of toFixed should less then 20.\n    : value.toFixed(Math.min(labelPrecision, 20));\n    return isFunction(labelFormatter) ? labelFormatter(value, valueStr) : isString(labelFormatter) ? labelFormatter.replace('{value}', valueStr) : valueStr;\n  };\n  /**\n   * @param isEmphasis true: show, false: hide\n   */\n  SliderZoomView.prototype._showDataInfo = function (isEmphasis) {\n    var handleLabel = this.dataZoomModel.get('handleLabel') || {};\n    var normalShow = handleLabel.show || false;\n    var emphasisHandleLabel = this.dataZoomModel.getModel(['emphasis', 'handleLabel']);\n    var emphasisShow = emphasisHandleLabel.get('show') || false;\n    // Dragging is considered as emphasis, unless emphasisShow is false\n    var toShow = isEmphasis || this._dragging ? emphasisShow : normalShow;\n    var displayables = this._displayables;\n    var handleLabels = displayables.handleLabels;\n    handleLabels[0].attr('invisible', !toShow);\n    handleLabels[1].attr('invisible', !toShow);\n    // Highlight move handle\n    displayables.moveHandle && this.api[toShow ? 'enterEmphasis' : 'leaveEmphasis'](displayables.moveHandle, 1);\n  };\n  SliderZoomView.prototype._onDragMove = function (handleIndex, dx, dy, event) {\n    this._dragging = true;\n    // For mobile device, prevent screen slider on the button.\n    eventTool.stop(event.event);\n    // Transform dx, dy to bar coordination.\n    var barTransform = this._displayables.sliderGroup.getLocalTransform();\n    var vertex = graphic.applyTransform([dx, dy], barTransform, true);\n    var changed = this._updateInterval(handleIndex, vertex[0]);\n    var realtime = this.dataZoomModel.get('realtime');\n    this._updateView(!realtime);\n    // Avoid dispatch dataZoom repeatly but range not changed,\n    // which cause bad visual effect when progressive enabled.\n    changed && realtime && this._dispatchZoomAction(true);\n  };\n  SliderZoomView.prototype._onDragEnd = function () {\n    this._dragging = false;\n    this._showDataInfo(false);\n    // While in realtime mode and stream mode, dispatch action when\n    // drag end will cause the whole view rerender, which is unnecessary.\n    var realtime = this.dataZoomModel.get('realtime');\n    !realtime && this._dispatchZoomAction(false);\n  };\n  SliderZoomView.prototype._onClickPanel = function (e) {\n    var size = this._size;\n    var localPoint = this._displayables.sliderGroup.transformCoordToLocal(e.offsetX, e.offsetY);\n    if (localPoint[0] < 0 || localPoint[0] > size[0] || localPoint[1] < 0 || localPoint[1] > size[1]) {\n      return;\n    }\n    var handleEnds = this._handleEnds;\n    var center = (handleEnds[0] + handleEnds[1]) / 2;\n    var changed = this._updateInterval('all', localPoint[0] - center);\n    this._updateView();\n    changed && this._dispatchZoomAction(false);\n  };\n  SliderZoomView.prototype._onBrushStart = function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    this._brushStart = new graphic.Point(x, y);\n    this._brushing = true;\n    this._brushStartTime = +new Date();\n    // this._updateBrushRect(x, y);\n  };\n  SliderZoomView.prototype._onBrushEnd = function (e) {\n    if (!this._brushing) {\n      return;\n    }\n    var brushRect = this._displayables.brushRect;\n    this._brushing = false;\n    if (!brushRect) {\n      return;\n    }\n    brushRect.attr('ignore', true);\n    var brushShape = brushRect.shape;\n    var brushEndTime = +new Date();\n    // console.log(brushEndTime - this._brushStartTime);\n    if (brushEndTime - this._brushStartTime < 200 && Math.abs(brushShape.width) < 5) {\n      // Will treat it as a click\n      return;\n    }\n    var viewExtend = this._getViewExtent();\n    var percentExtent = [0, 100];\n    var handleEnds = this._handleEnds = [brushShape.x, brushShape.x + brushShape.width];\n    var minMaxSpan = this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n    // Restrict range.\n    sliderMove(0, handleEnds, viewExtend, 0, minMaxSpan.minSpan != null ? linearMap(minMaxSpan.minSpan, percentExtent, viewExtend, true) : null, minMaxSpan.maxSpan != null ? linearMap(minMaxSpan.maxSpan, percentExtent, viewExtend, true) : null);\n    this._range = asc([linearMap(handleEnds[0], viewExtend, percentExtent, true), linearMap(handleEnds[1], viewExtend, percentExtent, true)]);\n    this._updateView();\n    this._dispatchZoomAction(false);\n  };\n  SliderZoomView.prototype._onBrush = function (e) {\n    if (this._brushing) {\n      // For mobile device, prevent screen slider on the button.\n      eventTool.stop(e.event);\n      this._updateBrushRect(e.offsetX, e.offsetY);\n    }\n  };\n  SliderZoomView.prototype._updateBrushRect = function (mouseX, mouseY) {\n    var displayables = this._displayables;\n    var dataZoomModel = this.dataZoomModel;\n    var brushRect = displayables.brushRect;\n    if (!brushRect) {\n      brushRect = displayables.brushRect = new Rect({\n        silent: true,\n        style: dataZoomModel.getModel('brushStyle').getItemStyle()\n      });\n      displayables.sliderGroup.add(brushRect);\n    }\n    brushRect.attr('ignore', false);\n    var brushStart = this._brushStart;\n    var sliderGroup = this._displayables.sliderGroup;\n    var endPoint = sliderGroup.transformCoordToLocal(mouseX, mouseY);\n    var startPoint = sliderGroup.transformCoordToLocal(brushStart.x, brushStart.y);\n    var size = this._size;\n    endPoint[0] = Math.max(Math.min(size[0], endPoint[0]), 0);\n    brushRect.setShape({\n      x: startPoint[0],\n      y: 0,\n      width: endPoint[0] - startPoint[0],\n      height: size[1]\n    });\n  };\n  /**\n   * This action will be throttled.\n   */\n  SliderZoomView.prototype._dispatchZoomAction = function (realtime) {\n    var range = this._range;\n    this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      dataZoomId: this.dataZoomModel.id,\n      animation: realtime ? REALTIME_ANIMATION_CONFIG : null,\n      start: range[0],\n      end: range[1]\n    });\n  };\n  SliderZoomView.prototype._findCoordRect = function () {\n    // Find the grid corresponding to the first axis referred by dataZoom.\n    var rect;\n    var coordSysInfoList = collectReferCoordSysModelInfo(this.dataZoomModel).infoList;\n    if (!rect && coordSysInfoList.length) {\n      var coordSys = coordSysInfoList[0].model.coordinateSystem;\n      rect = coordSys.getRect && coordSys.getRect();\n    }\n    if (!rect) {\n      var width = this.api.getWidth();\n      var height = this.api.getHeight();\n      rect = {\n        x: width * 0.2,\n        y: height * 0.2,\n        width: width * 0.6,\n        height: height * 0.6\n      };\n    }\n    return rect;\n  };\n  SliderZoomView.type = 'dataZoom.slider';\n  return SliderZoomView;\n}(DataZoomView);\nfunction getOtherDim(thisDim) {\n  // FIXME\n  // getOtherAxis\n  var map = {\n    x: 'y',\n    y: 'x',\n    radius: 'angle',\n    angle: 'radius'\n  };\n  return map[thisDim];\n}\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\nexport default SliderZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SliderZoomModel from './SliderZoomModel.js';\nimport SliderZoomView from './SliderZoomView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(SliderZoomModel);\n  registers.registerComponentView(SliderZoomView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport { install as installDataZoomInside } from './installDataZoomInside.js';\nimport { install as installDataZoomSlider } from './installDataZoomSlider.js';\nexport function install(registers) {\n  use(installDataZoomInside);\n  use(installDataZoomSlider);\n  // Do not install './dataZoomSelect',\n  // since it only work for toolbox dataZoom.\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/**\n * @file Visual mapping.\n */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport tokens from './tokens.js';\nvar visualDefault = {\n  /**\n   * @public\n   */\n  get: function (visualType, key, isCategory) {\n    var value = zrUtil.clone((defaultOption[visualType] || {})[key]);\n    return isCategory ? zrUtil.isArray(value) ? value[value.length - 1] : value : value;\n  }\n};\nvar defaultOption = {\n  color: {\n    active: ['#006edd', '#e0ffff'],\n    inactive: [tokens.color.transparent]\n  },\n  colorHue: {\n    active: [0, 360],\n    inactive: [0, 0]\n  },\n  colorSaturation: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  colorLightness: {\n    active: [0.9, 0.5],\n    inactive: [0, 0]\n  },\n  colorAlpha: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  opacity: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  symbol: {\n    active: ['circle', 'roundRect', 'diamond'],\n    inactive: ['none']\n  },\n  symbolSize: {\n    active: [10, 50],\n    inactive: [0, 0]\n  }\n};\nexport default visualDefault;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport visualDefault from '../../visual/visualDefault.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport * as visualSolution from '../../visual/visualSolution.js';\nimport * as modelUtil from '../../util/model.js';\nimport * as numberUtil from '../../util/number.js';\nimport ComponentModel from '../../model/Component.js';\nimport tokens from '../../visual/tokens.js';\nvar mapVisual = VisualMapping.mapVisual;\nvar eachVisual = VisualMapping.eachVisual;\nvar isArray = zrUtil.isArray;\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\nvar linearMap = numberUtil.linearMap;\nvar VisualMapModel = /** @class */function (_super) {\n  __extends(VisualMapModel, _super);\n  function VisualMapModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = VisualMapModel.type;\n    _this.stateList = ['inRange', 'outOfRange'];\n    _this.replacableOptionKeys = ['inRange', 'outOfRange', 'target', 'controller', 'color'];\n    _this.layoutMode = {\n      type: 'box',\n      ignoreSize: true\n    };\n    /**\n     * [lowerBound, upperBound]\n     */\n    _this.dataBound = [-Infinity, Infinity];\n    _this.targetVisuals = {};\n    _this.controllerVisuals = {};\n    return _this;\n  }\n  VisualMapModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n  };\n  /**\n   * @protected\n   */\n  VisualMapModel.prototype.optionUpdated = function (newOption, isInit) {\n    var thisOption = this.option;\n    !isInit && visualSolution.replaceVisualOption(thisOption, newOption, this.replacableOptionKeys);\n    this.textStyleModel = this.getModel('textStyle');\n    this.resetItemSize();\n    this.completeVisualOption();\n  };\n  /**\n   * @protected\n   */\n  VisualMapModel.prototype.resetVisual = function (supplementVisualOption) {\n    var stateList = this.stateList;\n    supplementVisualOption = zrUtil.bind(supplementVisualOption, this);\n    this.controllerVisuals = visualSolution.createVisualMappings(this.option.controller, stateList, supplementVisualOption);\n    this.targetVisuals = visualSolution.createVisualMappings(this.option.target, stateList, supplementVisualOption);\n  };\n  /**\n   * @public\n   */\n  VisualMapModel.prototype.getItemSymbol = function () {\n    return null;\n  };\n  /**\n   * @return An array of series indices.\n   */\n  VisualMapModel.prototype.getTargetSeriesIndices = function () {\n    var optionSeriesId = this.option.seriesId;\n    var optionSeriesIndex = this.option.seriesIndex;\n    if (optionSeriesIndex == null && optionSeriesId == null) {\n      optionSeriesIndex = 'all';\n    }\n    var seriesModels = modelUtil.queryReferringComponents(this.ecModel, 'series', {\n      index: optionSeriesIndex,\n      id: optionSeriesId\n    }, {\n      useDefault: false,\n      enableAll: true,\n      enableNone: false\n    }).models;\n    return zrUtil.map(seriesModels, function (seriesModel) {\n      return seriesModel.componentIndex;\n    });\n  };\n  /**\n   * @public\n   */\n  VisualMapModel.prototype.eachTargetSeries = function (callback, context) {\n    zrUtil.each(this.getTargetSeriesIndices(), function (seriesIndex) {\n      var seriesModel = this.ecModel.getSeriesByIndex(seriesIndex);\n      if (seriesModel) {\n        callback.call(context, seriesModel);\n      }\n    }, this);\n  };\n  /**\n   * @pubilc\n   */\n  VisualMapModel.prototype.isTargetSeries = function (seriesModel) {\n    var is = false;\n    this.eachTargetSeries(function (model) {\n      model === seriesModel && (is = true);\n    });\n    return is;\n  };\n  /**\n   * @example\n   * this.formatValueText(someVal); // format single numeric value to text.\n   * this.formatValueText(someVal, true); // format single category value to text.\n   * this.formatValueText([min, max]); // format numeric min-max to text.\n   * this.formatValueText([this.dataBound[0], max]); // using data lower bound.\n   * this.formatValueText([min, this.dataBound[1]]); // using data upper bound.\n   *\n   * @param value Real value, or this.dataBound[0 or 1].\n   * @param isCategory Only available when value is number.\n   * @param edgeSymbols Open-close symbol when value is interval.\n   * @protected\n   */\n  VisualMapModel.prototype.formatValueText = function (value, isCategory, edgeSymbols) {\n    var option = this.option;\n    var precision = option.precision;\n    var dataBound = this.dataBound;\n    var formatter = option.formatter;\n    var isMinMax;\n    edgeSymbols = edgeSymbols || ['<', '>'];\n    if (zrUtil.isArray(value)) {\n      value = value.slice();\n      isMinMax = true;\n    }\n    var textValue = isCategory ? value // Value is string when isCategory\n    : isMinMax ? [toFixed(value[0]), toFixed(value[1])] : toFixed(value);\n    if (zrUtil.isString(formatter)) {\n      return formatter.replace('{value}', isMinMax ? textValue[0] : textValue).replace('{value2}', isMinMax ? textValue[1] : textValue);\n    } else if (zrUtil.isFunction(formatter)) {\n      return isMinMax ? formatter(value[0], value[1]) : formatter(value);\n    }\n    if (isMinMax) {\n      if (value[0] === dataBound[0]) {\n        return edgeSymbols[0] + ' ' + textValue[1];\n      } else if (value[1] === dataBound[1]) {\n        return edgeSymbols[1] + ' ' + textValue[0];\n      } else {\n        return textValue[0] + ' - ' + textValue[1];\n      }\n    } else {\n      // Format single value (includes category case).\n      return textValue;\n    }\n    function toFixed(val) {\n      return val === dataBound[0] ? 'min' : val === dataBound[1] ? 'max' : (+val).toFixed(Math.min(precision, 20));\n    }\n  };\n  /**\n   * @protected\n   */\n  VisualMapModel.prototype.resetExtent = function () {\n    var thisOption = this.option;\n    // Can not calculate data extent by data here.\n    // Because series and data may be modified in processing stage.\n    // So we do not support the feature \"auto min/max\".\n    var extent = asc([thisOption.min, thisOption.max]);\n    this._dataExtent = extent;\n  };\n  /**\n   * PENDING:\n   * delete this method if no outer usage.\n   *\n   * Return  Concrete dimension. If null/undefined is returned, no dimension is used.\n   */\n  // getDataDimension(data: SeriesData) {\n  //     const optDim = this.option.dimension;\n  //     if (optDim != null) {\n  //         return data.getDimension(optDim);\n  //     }\n  //     const dimNames = data.dimensions;\n  //     for (let i = dimNames.length - 1; i >= 0; i--) {\n  //         const dimName = dimNames[i];\n  //         const dimInfo = data.getDimensionInfo(dimName);\n  //         if (!dimInfo.isCalculationCoord) {\n  //             return dimName;\n  //         }\n  //     }\n  // }\n  VisualMapModel.prototype.getDataDimensionIndex = function (data) {\n    var optDim = this.option.dimension;\n    if (optDim != null) {\n      return data.getDimensionIndex(optDim);\n    }\n    var dimNames = data.dimensions;\n    for (var i = dimNames.length - 1; i >= 0; i--) {\n      var dimName = dimNames[i];\n      var dimInfo = data.getDimensionInfo(dimName);\n      if (!dimInfo.isCalculationCoord) {\n        return dimInfo.storeDimIndex;\n      }\n    }\n  };\n  VisualMapModel.prototype.getExtent = function () {\n    return this._dataExtent.slice();\n  };\n  VisualMapModel.prototype.completeVisualOption = function () {\n    var ecModel = this.ecModel;\n    var thisOption = this.option;\n    var base = {\n      inRange: thisOption.inRange,\n      outOfRange: thisOption.outOfRange\n    };\n    var target = thisOption.target || (thisOption.target = {});\n    var controller = thisOption.controller || (thisOption.controller = {});\n    zrUtil.merge(target, base); // Do not override\n    zrUtil.merge(controller, base); // Do not override\n    var isCategory = this.isCategory();\n    completeSingle.call(this, target);\n    completeSingle.call(this, controller);\n    completeInactive.call(this, target, 'inRange', 'outOfRange');\n    // completeInactive.call(this, target, 'outOfRange', 'inRange');\n    completeController.call(this, controller);\n    function completeSingle(base) {\n      // Compatible with ec2 dataRange.color.\n      // The mapping order of dataRange.color is: [high value, ..., low value]\n      // whereas inRange.color and outOfRange.color is [low value, ..., high value]\n      // Notice: ec2 has no inverse.\n      if (isArray(thisOption.color)\n      // If there has been inRange: {symbol: ...}, adding color is a mistake.\n      // So adding color only when no inRange defined.\n      && !base.inRange) {\n        base.inRange = {\n          color: thisOption.color.slice().reverse()\n        };\n      }\n      // Compatible with previous logic, always give a default color, otherwise\n      // simple config with no inRange and outOfRange will not work.\n      // Originally we use visualMap.color as the default color, but setOption at\n      // the second time the default color will be erased. So we change to use\n      // constant DEFAULT_COLOR.\n      // If user do not want the default color, set inRange: {color: null}.\n      base.inRange = base.inRange || {\n        color: ecModel.get('gradientColor')\n      };\n    }\n    function completeInactive(base, stateExist, stateAbsent) {\n      var optExist = base[stateExist];\n      var optAbsent = base[stateAbsent];\n      if (optExist && !optAbsent) {\n        optAbsent = base[stateAbsent] = {};\n        each(optExist, function (visualData, visualType) {\n          if (!VisualMapping.isValidType(visualType)) {\n            return;\n          }\n          var defa = visualDefault.get(visualType, 'inactive', isCategory);\n          if (defa != null) {\n            optAbsent[visualType] = defa;\n            // Compatibable with ec2:\n            // Only inactive color to rgba(0,0,0,0) can not\n            // make label transparent, so use opacity also.\n            if (visualType === 'color' && !optAbsent.hasOwnProperty('opacity') && !optAbsent.hasOwnProperty('colorAlpha')) {\n              optAbsent.opacity = [0, 0];\n            }\n          }\n        });\n      }\n    }\n    function completeController(controller) {\n      var symbolExists = (controller.inRange || {}).symbol || (controller.outOfRange || {}).symbol;\n      var symbolSizeExists = (controller.inRange || {}).symbolSize || (controller.outOfRange || {}).symbolSize;\n      var inactiveColor = this.get('inactiveColor');\n      var itemSymbol = this.getItemSymbol();\n      var defaultSymbol = itemSymbol || 'roundRect';\n      each(this.stateList, function (state) {\n        var itemSize = this.itemSize;\n        var visuals = controller[state];\n        // Set inactive color for controller if no other color\n        // attr (like colorAlpha) specified.\n        if (!visuals) {\n          visuals = controller[state] = {\n            color: isCategory ? inactiveColor : [inactiveColor]\n          };\n        }\n        // Consistent symbol and symbolSize if not specified.\n        if (visuals.symbol == null) {\n          visuals.symbol = symbolExists && zrUtil.clone(symbolExists) || (isCategory ? defaultSymbol : [defaultSymbol]);\n        }\n        if (visuals.symbolSize == null) {\n          visuals.symbolSize = symbolSizeExists && zrUtil.clone(symbolSizeExists) || (isCategory ? itemSize[0] : [itemSize[0], itemSize[0]]);\n        }\n        // Filter none\n        visuals.symbol = mapVisual(visuals.symbol, function (symbol) {\n          return symbol === 'none' ? defaultSymbol : symbol;\n        });\n        // Normalize symbolSize\n        var symbolSize = visuals.symbolSize;\n        if (symbolSize != null) {\n          var max_1 = -Infinity;\n          // symbolSize can be object when categories defined.\n          eachVisual(symbolSize, function (value) {\n            value > max_1 && (max_1 = value);\n          });\n          visuals.symbolSize = mapVisual(symbolSize, function (value) {\n            return linearMap(value, [0, max_1], [0, itemSize[0]], true);\n          });\n        }\n      }, this);\n    }\n  };\n  VisualMapModel.prototype.resetItemSize = function () {\n    this.itemSize = [parseFloat(this.get('itemWidth')), parseFloat(this.get('itemHeight'))];\n  };\n  VisualMapModel.prototype.isCategory = function () {\n    return !!this.option.categories;\n  };\n  /**\n   * @public\n   * @abstract\n   */\n  VisualMapModel.prototype.setSelected = function (selected) {};\n  VisualMapModel.prototype.getSelected = function () {\n    return null;\n  };\n  /**\n   * @public\n   * @abstract\n   */\n  VisualMapModel.prototype.getValueState = function (value) {\n    return null;\n  };\n  /**\n   * FIXME\n   * Do not publish to thirt-part-dev temporarily\n   * util the interface is stable. (Should it return\n   * a function but not visual meta?)\n   *\n   * @pubilc\n   * @abstract\n   * @param getColorVisual\n   *        params: value, valueState\n   *        return: color\n   * @return {Object} visualMeta\n   *        should includes {stops, outerColors}\n   *        outerColor means [colorBeyondMinValue, colorBeyondMaxValue]\n   */\n  VisualMapModel.prototype.getVisualMeta = function (getColorVisual) {\n    return null;\n  };\n  VisualMapModel.type = 'visualMap';\n  VisualMapModel.dependencies = ['series'];\n  VisualMapModel.defaultOption = {\n    show: true,\n    // zlevel: 0,\n    z: 4,\n    // seriesIndex: 'all',\n    min: 0,\n    max: 200,\n    left: 0,\n    right: null,\n    top: null,\n    bottom: 0,\n    itemWidth: null,\n    itemHeight: null,\n    inverse: false,\n    orient: 'vertical',\n    backgroundColor: tokens.color.transparent,\n    borderColor: tokens.color.borderTint,\n    contentColor: tokens.color.theme[0],\n    inactiveColor: tokens.color.disabled,\n    borderWidth: 0,\n    padding: tokens.size.m,\n    // css\n    textGap: 10,\n    precision: 0,\n    textStyle: {\n      color: tokens.color.secondary // \n    }\n  };\n  return VisualMapModel;\n}(ComponentModel);\nexport default VisualMapModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapModel from './VisualMapModel.js';\nimport * as numberUtil from '../../util/number.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nimport tokens from '../../visual/tokens.js';\n// Constant\nvar DEFAULT_BAR_BOUND = [20, 140];\nvar ContinuousModel = /** @class */function (_super) {\n  __extends(ContinuousModel, _super);\n  function ContinuousModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ContinuousModel.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n  ContinuousModel.prototype.optionUpdated = function (newOption, isInit) {\n    _super.prototype.optionUpdated.apply(this, arguments);\n    this.resetExtent();\n    this.resetVisual(function (mappingOption) {\n      mappingOption.mappingMethod = 'linear';\n      mappingOption.dataExtent = this.getExtent();\n    });\n    this._resetRange();\n  };\n  /**\n   * @protected\n   * @override\n   */\n  ContinuousModel.prototype.resetItemSize = function () {\n    _super.prototype.resetItemSize.apply(this, arguments);\n    var itemSize = this.itemSize;\n    (itemSize[0] == null || isNaN(itemSize[0])) && (itemSize[0] = DEFAULT_BAR_BOUND[0]);\n    (itemSize[1] == null || isNaN(itemSize[1])) && (itemSize[1] = DEFAULT_BAR_BOUND[1]);\n  };\n  /**\n   * @private\n   */\n  ContinuousModel.prototype._resetRange = function () {\n    var dataExtent = this.getExtent();\n    var range = this.option.range;\n    if (!range || range.auto) {\n      // `range` should always be array (so we don't use other\n      // value like 'auto') for user-friend. (consider getOption).\n      dataExtent.auto = 1;\n      this.option.range = dataExtent;\n    } else if (zrUtil.isArray(range)) {\n      if (range[0] > range[1]) {\n        range.reverse();\n      }\n      range[0] = Math.max(range[0], dataExtent[0]);\n      range[1] = Math.min(range[1], dataExtent[1]);\n    }\n  };\n  /**\n   * @protected\n   * @override\n   */\n  ContinuousModel.prototype.completeVisualOption = function () {\n    _super.prototype.completeVisualOption.apply(this, arguments);\n    zrUtil.each(this.stateList, function (state) {\n      var symbolSize = this.option.controller[state].symbolSize;\n      if (symbolSize && symbolSize[0] !== symbolSize[1]) {\n        symbolSize[0] = symbolSize[1] / 3; // For good looking.\n      }\n    }, this);\n  };\n  /**\n   * @override\n   */\n  ContinuousModel.prototype.setSelected = function (selected) {\n    this.option.range = selected.slice();\n    this._resetRange();\n  };\n  /**\n   * @public\n   */\n  ContinuousModel.prototype.getSelected = function () {\n    var dataExtent = this.getExtent();\n    var dataInterval = numberUtil.asc((this.get('range') || []).slice());\n    // Clamp\n    dataInterval[0] > dataExtent[1] && (dataInterval[0] = dataExtent[1]);\n    dataInterval[1] > dataExtent[1] && (dataInterval[1] = dataExtent[1]);\n    dataInterval[0] < dataExtent[0] && (dataInterval[0] = dataExtent[0]);\n    dataInterval[1] < dataExtent[0] && (dataInterval[1] = dataExtent[0]);\n    return dataInterval;\n  };\n  /**\n   * @override\n   */\n  ContinuousModel.prototype.getValueState = function (value) {\n    var range = this.option.range;\n    var dataExtent = this.getExtent();\n    var unboundedRange = zrUtil.retrieve2(this.option.unboundedRange, true);\n    return (unboundedRange && range[0] <= dataExtent[0] || range[0] <= value) && (unboundedRange && range[1] >= dataExtent[1] || value <= range[1]) ? 'inRange' : 'outOfRange';\n  };\n  ContinuousModel.prototype.findTargetDataIndices = function (range) {\n    var result = [];\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimensionIndex(data), function (value, dataIndex) {\n        range[0] <= value && value <= range[1] && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  };\n  /**\n   * @implement\n   */\n  ContinuousModel.prototype.getVisualMeta = function (getColorVisual) {\n    var oVals = getColorStopValues(this, 'outOfRange', this.getExtent());\n    var iVals = getColorStopValues(this, 'inRange', this.option.range.slice());\n    var stops = [];\n    function setStop(value, valueState) {\n      stops.push({\n        value: value,\n        color: getColorVisual(value, valueState)\n      });\n    }\n    // Format to: outOfRange -- inRange -- outOfRange.\n    var iIdx = 0;\n    var oIdx = 0;\n    var iLen = iVals.length;\n    var oLen = oVals.length;\n    for (; oIdx < oLen && (!iVals.length || oVals[oIdx] <= iVals[0]); oIdx++) {\n      // If oVal[oIdx] === iVals[iIdx], oVal[oIdx] should be ignored.\n      if (oVals[oIdx] < iVals[iIdx]) {\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n    for (var first = 1; iIdx < iLen; iIdx++, first = 0) {\n      // If range is full, value beyond min, max will be clamped.\n      // make a singularity\n      first && stops.length && setStop(iVals[iIdx], 'outOfRange');\n      setStop(iVals[iIdx], 'inRange');\n    }\n    for (var first = 1; oIdx < oLen; oIdx++) {\n      if (!iVals.length || iVals[iVals.length - 1] < oVals[oIdx]) {\n        // make a singularity\n        if (first) {\n          stops.length && setStop(stops[stops.length - 1].value, 'outOfRange');\n          first = 0;\n        }\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n    var stopsLen = stops.length;\n    return {\n      stops: stops,\n      outerColors: [stopsLen ? stops[0].color : 'transparent', stopsLen ? stops[stopsLen - 1].color : 'transparent']\n    };\n  };\n  ContinuousModel.type = 'visualMap.continuous';\n  ContinuousModel.defaultOption = inheritDefaultOption(VisualMapModel.defaultOption, {\n    align: 'auto',\n    calculable: false,\n    hoverLink: true,\n    realtime: true,\n    handleIcon: 'path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z',\n    handleSize: '120%',\n    handleStyle: {\n      borderColor: tokens.color.neutral00,\n      borderWidth: 1\n    },\n    indicatorIcon: 'circle',\n    indicatorSize: '50%',\n    indicatorStyle: {\n      borderColor: tokens.color.neutral00,\n      borderWidth: 2,\n      shadowBlur: 2,\n      shadowOffsetX: 1,\n      shadowOffsetY: 1,\n      shadowColor: tokens.color.shadow\n    }\n    // emphasis: {\n    //     handleStyle: {\n    //         shadowBlur: 3,\n    //         shadowOffsetX: 1,\n    //         shadowOffsetY: 1,\n    //         shadowColor: tokens.color.shadow\n    //     }\n    // }\n  });\n  return ContinuousModel;\n}(VisualMapModel);\nfunction getColorStopValues(visualMapModel, valueState, dataExtent) {\n  if (dataExtent[0] === dataExtent[1]) {\n    return dataExtent.slice();\n  }\n  // When using colorHue mapping, it is not linear color any more.\n  // Moreover, canvas gradient seems not to be accurate linear.\n  // FIXME\n  // Should be arbitrary value 100? or based on pixel size?\n  var count = 200;\n  var step = (dataExtent[1] - dataExtent[0]) / count;\n  var value = dataExtent[0];\n  var stopValues = [];\n  for (var i = 0; i <= count && value < dataExtent[1]; i++) {\n    stopValues.push(value);\n    value += step;\n  }\n  stopValues.push(dataExtent[1]);\n  return stopValues;\n}\nexport default ContinuousModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { Rect } from '../../util/graphic.js';\nimport * as formatUtil from '../../util/format.js';\nimport * as layout from '../../util/layout.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport ComponentView from '../../view/Component.js';\nvar VisualMapView = /** @class */function (_super) {\n  __extends(VisualMapView, _super);\n  function VisualMapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = VisualMapView.type;\n    _this.autoPositionValues = {\n      left: 1,\n      right: 1,\n      top: 1,\n      bottom: 1\n    };\n    return _this;\n  }\n  VisualMapView.prototype.init = function (ecModel, api) {\n    this.ecModel = ecModel;\n    this.api = api;\n  };\n  /**\n   * @protected\n   */\n  VisualMapView.prototype.render = function (visualMapModel, ecModel, api, payload // TODO: TYPE\n  ) {\n    this.visualMapModel = visualMapModel;\n    if (visualMapModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    }\n    this.doRender(visualMapModel, ecModel, api, payload);\n  };\n  /**\n   * @protected\n   */\n  VisualMapView.prototype.renderBackground = function (group) {\n    var visualMapModel = this.visualMapModel;\n    var padding = formatUtil.normalizeCssArray(visualMapModel.get('padding') || 0);\n    var rect = group.getBoundingRect();\n    group.add(new Rect({\n      z2: -1,\n      silent: true,\n      shape: {\n        x: rect.x - padding[3],\n        y: rect.y - padding[0],\n        width: rect.width + padding[3] + padding[1],\n        height: rect.height + padding[0] + padding[2]\n      },\n      style: {\n        fill: visualMapModel.get('backgroundColor'),\n        stroke: visualMapModel.get('borderColor'),\n        lineWidth: visualMapModel.get('borderWidth')\n      }\n    }));\n  };\n  /**\n   * @protected\n   * @param targetValue can be Infinity or -Infinity\n   * @param visualCluster Only can be 'color' 'opacity' 'symbol' 'symbolSize'\n   * @param opts\n   * @param opts.forceState Specify state, instead of using getValueState method.\n   * @param opts.convertOpacityToAlpha For color gradient in controller widget.\n   * @return {*} Visual value.\n   */\n  VisualMapView.prototype.getControllerVisual = function (targetValue, visualCluster, opts) {\n    opts = opts || {};\n    var forceState = opts.forceState;\n    var visualMapModel = this.visualMapModel;\n    var visualObj = {};\n    // Default values.\n    if (visualCluster === 'color') {\n      var defaultColor = visualMapModel.get('contentColor');\n      visualObj.color = defaultColor;\n    }\n    function getter(key) {\n      return visualObj[key];\n    }\n    function setter(key, value) {\n      visualObj[key] = value;\n    }\n    var mappings = visualMapModel.controllerVisuals[forceState || visualMapModel.getValueState(targetValue)];\n    var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n    zrUtil.each(visualTypes, function (type) {\n      var visualMapping = mappings[type];\n      if (opts.convertOpacityToAlpha && type === 'opacity') {\n        type = 'colorAlpha';\n        visualMapping = mappings.__alphaForOpacity;\n      }\n      if (VisualMapping.dependsOn(type, visualCluster)) {\n        visualMapping && visualMapping.applyVisual(targetValue, getter, setter);\n      }\n    });\n    return visualObj[visualCluster];\n  };\n  VisualMapView.prototype.positionGroup = function (group) {\n    var model = this.visualMapModel;\n    var api = this.api;\n    var refContainer = layout.createBoxLayoutReference(model, api).refContainer;\n    layout.positionElement(group, model.getBoxLayoutParams(), refContainer);\n  };\n  VisualMapView.prototype.doRender = function (visualMapModel, ecModel, api, payload) {};\n  VisualMapView.type = 'visualMap';\n  return VisualMapView;\n}(ComponentView);\nexport default VisualMapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getLayoutRect } from '../../util/layout.js';\nvar paramsSet = [['left', 'right', 'width'], ['top', 'bottom', 'height']];\n/**\n * @param visualMapModel\n * @param api\n * @param itemSize always [short, long]\n * @return {string} 'left' or 'right' or 'top' or 'bottom'\n */\nexport function getItemAlign(visualMapModel, api, itemSize) {\n  var modelOption = visualMapModel.option;\n  var itemAlign = modelOption.align;\n  if (itemAlign != null && itemAlign !== 'auto') {\n    return itemAlign;\n  }\n  // Auto decision align.\n  var ecSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var realIndex = modelOption.orient === 'horizontal' ? 1 : 0;\n  var reals = paramsSet[realIndex];\n  var fakeValue = [0, null, 10];\n  var layoutInput = {};\n  for (var i = 0; i < 3; i++) {\n    layoutInput[paramsSet[1 - realIndex][i]] = fakeValue[i];\n    layoutInput[reals[i]] = i === 2 ? itemSize[0] : modelOption[reals[i]];\n  }\n  var rParam = [['x', 'width', 3], ['y', 'height', 0]][realIndex];\n  var rect = getLayoutRect(layoutInput, ecSize, modelOption.padding);\n  return reals[(rect.margin[rParam[2]] || 0) + rect[rParam[0]] + rect[rParam[1]] * 0.5 < ecSize[rParam[1]] * 0.5 ? 0 : 1];\n}\n/**\n * Prepare dataIndex for outside usage, where dataIndex means rawIndex, and\n * dataIndexInside means filtered index.\n */\n// TODO: TYPE more specified payload types.\nexport function makeHighDownBatch(batch, visualMapModel) {\n  zrUtil.each(batch || [], function (batchItem) {\n    if (batchItem.dataIndex != null) {\n      batchItem.dataIndexInside = batchItem.dataIndex;\n      batchItem.dataIndex = null;\n    }\n    batchItem.highlightKey = 'visualMap' + (visualMapModel ? visualMapModel.componentIndex : '');\n  });\n  return batch;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport LinearGradient from 'zrender/lib/graphic/LinearGradient.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport VisualMapView from './VisualMapView.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as numberUtil from '../../util/number.js';\nimport sliderMove from '../helper/sliderMove.js';\nimport * as helper from './helper.js';\nimport * as modelUtil from '../../util/model.js';\nimport { parsePercent } from 'zrender/lib/contain/text.js';\nimport { setAsHighDownDispatcher } from '../../util/states.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { findEventDispatcher } from '../../util/event.js';\nvar linearMap = numberUtil.linearMap;\nvar each = zrUtil.each;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\n// Arbitrary value\nvar HOVER_LINK_SIZE = 12;\nvar HOVER_LINK_OUT = 6;\n// Notice:\n// Any \"interval\" should be by the order of [low, high].\n// \"handle0\" (handleIndex === 0) maps to\n// low data value: this._dataInterval[0] and has low coord.\n// \"handle1\" (handleIndex === 1) maps to\n// high data value: this._dataInterval[1] and has high coord.\n// The logic of transform is implemented in this._createBarGroup.\nvar ContinuousView = /** @class */function (_super) {\n  __extends(ContinuousView, _super);\n  function ContinuousView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ContinuousView.type;\n    _this._shapes = {};\n    _this._dataInterval = [];\n    _this._handleEnds = [];\n    _this._hoverLinkDataIndices = [];\n    return _this;\n  }\n  ContinuousView.prototype.init = function (ecModel, api) {\n    _super.prototype.init.call(this, ecModel, api);\n    this._hoverLinkFromSeriesMouseOver = zrUtil.bind(this._hoverLinkFromSeriesMouseOver, this);\n    this._hideIndicator = zrUtil.bind(this._hideIndicator, this);\n  };\n  ContinuousView.prototype.doRender = function (visualMapModel, ecModel, api, payload) {\n    if (!payload || payload.type !== 'selectDataRange' || payload.from !== this.uid) {\n      this._buildView();\n    }\n  };\n  ContinuousView.prototype._buildView = function () {\n    this.group.removeAll();\n    var visualMapModel = this.visualMapModel;\n    var thisGroup = this.group;\n    this._orient = visualMapModel.get('orient');\n    this._useHandle = visualMapModel.get('calculable');\n    this._resetInterval();\n    this._renderBar(thisGroup);\n    var dataRangeText = visualMapModel.get('text');\n    this._renderEndsText(thisGroup, dataRangeText, 0);\n    this._renderEndsText(thisGroup, dataRangeText, 1);\n    // Do this for background size calculation.\n    this._updateView(true);\n    // After updating view, inner shapes is built completely,\n    // and then background can be rendered.\n    this.renderBackground(thisGroup);\n    // Real update view\n    this._updateView();\n    this._enableHoverLinkToSeries();\n    this._enableHoverLinkFromSeries();\n    this.positionGroup(thisGroup);\n  };\n  ContinuousView.prototype._renderEndsText = function (group, dataRangeText, endsIndex) {\n    if (!dataRangeText) {\n      return;\n    }\n    // Compatible with ec2, text[0] map to high value, text[1] map low value.\n    var text = dataRangeText[1 - endsIndex];\n    text = text != null ? text + '' : '';\n    var visualMapModel = this.visualMapModel;\n    var textGap = visualMapModel.get('textGap');\n    var itemSize = visualMapModel.itemSize;\n    var barGroup = this._shapes.mainGroup;\n    var position = this._applyTransform([itemSize[0] / 2, endsIndex === 0 ? -textGap : itemSize[1] + textGap], barGroup);\n    var align = this._applyTransform(endsIndex === 0 ? 'bottom' : 'top', barGroup);\n    var orient = this._orient;\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    this.group.add(new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        x: position[0],\n        y: position[1],\n        verticalAlign: textStyleModel.get('verticalAlign') || (orient === 'horizontal' ? 'middle' : align),\n        align: textStyleModel.get('align') || (orient === 'horizontal' ? align : 'center'),\n        text: text\n      })\n    }));\n  };\n  ContinuousView.prototype._renderBar = function (targetGroup) {\n    var visualMapModel = this.visualMapModel;\n    var shapes = this._shapes;\n    var itemSize = visualMapModel.itemSize;\n    var orient = this._orient;\n    var useHandle = this._useHandle;\n    var itemAlign = helper.getItemAlign(visualMapModel, this.api, itemSize);\n    var mainGroup = shapes.mainGroup = this._createBarGroup(itemAlign);\n    var gradientBarGroup = new graphic.Group();\n    mainGroup.add(gradientBarGroup);\n    // Bar\n    gradientBarGroup.add(shapes.outOfRange = createPolygon());\n    gradientBarGroup.add(shapes.inRange = createPolygon(null, useHandle ? getCursor(this._orient) : null, zrUtil.bind(this._dragHandle, this, 'all', false), zrUtil.bind(this._dragHandle, this, 'all', true)));\n    // A border radius clip.\n    gradientBarGroup.setClipPath(new graphic.Rect({\n      shape: {\n        x: 0,\n        y: 0,\n        width: itemSize[0],\n        height: itemSize[1],\n        r: 3\n      }\n    }));\n    var textRect = visualMapModel.textStyleModel.getTextRect('');\n    var textSize = mathMax(textRect.width, textRect.height);\n    // Handle\n    if (useHandle) {\n      shapes.handleThumbs = [];\n      shapes.handleLabels = [];\n      shapes.handleLabelPoints = [];\n      this._createHandle(visualMapModel, mainGroup, 0, itemSize, textSize, orient);\n      this._createHandle(visualMapModel, mainGroup, 1, itemSize, textSize, orient);\n    }\n    this._createIndicator(visualMapModel, mainGroup, itemSize, textSize, orient);\n    targetGroup.add(mainGroup);\n  };\n  ContinuousView.prototype._createHandle = function (visualMapModel, mainGroup, handleIndex, itemSize, textSize, orient) {\n    var onDrift = zrUtil.bind(this._dragHandle, this, handleIndex, false);\n    var onDragEnd = zrUtil.bind(this._dragHandle, this, handleIndex, true);\n    var handleSize = parsePercent(visualMapModel.get('handleSize'), itemSize[0]);\n    var handleThumb = createSymbol(visualMapModel.get('handleIcon'), -handleSize / 2, -handleSize / 2, handleSize, handleSize, null, true);\n    var cursor = getCursor(this._orient);\n    handleThumb.attr({\n      cursor: cursor,\n      draggable: true,\n      drift: onDrift,\n      ondragend: onDragEnd,\n      onmousemove: function (e) {\n        eventTool.stop(e.event);\n      }\n    });\n    handleThumb.x = itemSize[0] / 2;\n    handleThumb.useStyle(visualMapModel.getModel('handleStyle').getItemStyle());\n    handleThumb.setStyle({\n      strokeNoScale: true,\n      strokeFirst: true\n    });\n    handleThumb.style.lineWidth *= 2;\n    handleThumb.ensureState('emphasis').style = visualMapModel.getModel(['emphasis', 'handleStyle']).getItemStyle();\n    setAsHighDownDispatcher(handleThumb, true);\n    mainGroup.add(handleThumb);\n    // Text is always horizontal layout but should not be effected by\n    // transform (orient/inverse). So label is built separately but not\n    // use zrender/graphic/helper/RectText, and is located based on view\n    // group (according to handleLabelPoint) but not barGroup.\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var handleLabel = new graphic.Text({\n      cursor: cursor,\n      draggable: true,\n      drift: onDrift,\n      onmousemove: function (e) {\n        // For mobile device, prevent screen slider on the button.\n        eventTool.stop(e.event);\n      },\n      ondragend: onDragEnd,\n      style: createTextStyle(textStyleModel, {\n        x: 0,\n        y: 0,\n        text: ''\n      })\n    });\n    handleLabel.ensureState('blur').style = {\n      opacity: 0.1\n    };\n    handleLabel.stateTransition = {\n      duration: 200\n    };\n    this.group.add(handleLabel);\n    var handleLabelPoint = [handleSize, 0];\n    var shapes = this._shapes;\n    shapes.handleThumbs[handleIndex] = handleThumb;\n    shapes.handleLabelPoints[handleIndex] = handleLabelPoint;\n    shapes.handleLabels[handleIndex] = handleLabel;\n  };\n  ContinuousView.prototype._createIndicator = function (visualMapModel, mainGroup, itemSize, textSize, orient) {\n    var scale = parsePercent(visualMapModel.get('indicatorSize'), itemSize[0]);\n    var indicator = createSymbol(visualMapModel.get('indicatorIcon'), -scale / 2, -scale / 2, scale, scale, null, true);\n    indicator.attr({\n      cursor: 'move',\n      invisible: true,\n      silent: true,\n      x: itemSize[0] / 2\n    });\n    var indicatorStyle = visualMapModel.getModel('indicatorStyle').getItemStyle();\n    if (indicator instanceof ZRImage) {\n      var pathStyle = indicator.style;\n      indicator.useStyle(zrUtil.extend({\n        // TODO other properties like x, y ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, indicatorStyle));\n    } else {\n      indicator.useStyle(indicatorStyle);\n    }\n    mainGroup.add(indicator);\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var indicatorLabel = new graphic.Text({\n      silent: true,\n      invisible: true,\n      style: createTextStyle(textStyleModel, {\n        x: 0,\n        y: 0,\n        text: ''\n      })\n    });\n    this.group.add(indicatorLabel);\n    var indicatorLabelPoint = [(orient === 'horizontal' ? textSize / 2 : HOVER_LINK_OUT) + itemSize[0] / 2, 0];\n    var shapes = this._shapes;\n    shapes.indicator = indicator;\n    shapes.indicatorLabel = indicatorLabel;\n    shapes.indicatorLabelPoint = indicatorLabelPoint;\n    this._firstShowIndicator = true;\n  };\n  ContinuousView.prototype._dragHandle = function (handleIndex, isEnd,\n  // dx is event from ondragend if isEnd is true. It's not used\n  dx, dy) {\n    if (!this._useHandle) {\n      return;\n    }\n    this._dragging = !isEnd;\n    if (!isEnd) {\n      // Transform dx, dy to bar coordination.\n      var vertex = this._applyTransform([dx, dy], this._shapes.mainGroup, true);\n      this._updateInterval(handleIndex, vertex[1]);\n      this._hideIndicator();\n      // Considering realtime, update view should be executed\n      // before dispatch action.\n      this._updateView();\n    }\n    // dragEnd do not dispatch action when realtime.\n    if (isEnd === !this.visualMapModel.get('realtime')) {\n      // jshint ignore:line\n      this.api.dispatchAction({\n        type: 'selectDataRange',\n        from: this.uid,\n        visualMapId: this.visualMapModel.id,\n        selected: this._dataInterval.slice()\n      });\n    }\n    if (isEnd) {\n      !this._hovering && this._clearHoverLinkToSeries();\n    } else if (useHoverLinkOnHandle(this.visualMapModel)) {\n      this._doHoverLinkToSeries(this._handleEnds[handleIndex], false);\n    }\n  };\n  ContinuousView.prototype._resetInterval = function () {\n    var visualMapModel = this.visualMapModel;\n    var dataInterval = this._dataInterval = visualMapModel.getSelected();\n    var dataExtent = visualMapModel.getExtent();\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    this._handleEnds = [linearMap(dataInterval[0], dataExtent, sizeExtent, true), linearMap(dataInterval[1], dataExtent, sizeExtent, true)];\n  };\n  /**\n   * @private\n   * @param {(number|string)} handleIndex 0 or 1 or 'all'\n   * @param {number} dx\n   * @param {number} dy\n   */\n  ContinuousView.prototype._updateInterval = function (handleIndex, delta) {\n    delta = delta || 0;\n    var visualMapModel = this.visualMapModel;\n    var handleEnds = this._handleEnds;\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    sliderMove(delta, handleEnds, sizeExtent, handleIndex,\n    // cross is forbidden\n    0);\n    var dataExtent = visualMapModel.getExtent();\n    // Update data interval.\n    this._dataInterval = [linearMap(handleEnds[0], sizeExtent, dataExtent, true), linearMap(handleEnds[1], sizeExtent, dataExtent, true)];\n  };\n  ContinuousView.prototype._updateView = function (forSketch) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var shapes = this._shapes;\n    var outOfRangeHandleEnds = [0, visualMapModel.itemSize[1]];\n    var inRangeHandleEnds = forSketch ? outOfRangeHandleEnds : this._handleEnds;\n    var visualInRange = this._createBarVisual(this._dataInterval, dataExtent, inRangeHandleEnds, 'inRange');\n    var visualOutOfRange = this._createBarVisual(dataExtent, dataExtent, outOfRangeHandleEnds, 'outOfRange');\n    shapes.inRange.setStyle({\n      fill: visualInRange.barColor\n      // opacity: visualInRange.opacity\n    }).setShape('points', visualInRange.barPoints);\n    shapes.outOfRange.setStyle({\n      fill: visualOutOfRange.barColor\n      // opacity: visualOutOfRange.opacity\n    }).setShape('points', visualOutOfRange.barPoints);\n    this._updateHandle(inRangeHandleEnds, visualInRange);\n  };\n  ContinuousView.prototype._createBarVisual = function (dataInterval, dataExtent, handleEnds, forceState) {\n    var opts = {\n      forceState: forceState,\n      convertOpacityToAlpha: true\n    };\n    var colorStops = this._makeColorGradient(dataInterval, opts);\n    var symbolSizes = [this.getControllerVisual(dataInterval[0], 'symbolSize', opts), this.getControllerVisual(dataInterval[1], 'symbolSize', opts)];\n    var barPoints = this._createBarPoints(handleEnds, symbolSizes);\n    return {\n      barColor: new LinearGradient(0, 0, 0, 1, colorStops),\n      barPoints: barPoints,\n      handlesColor: [colorStops[0].color, colorStops[colorStops.length - 1].color]\n    };\n  };\n  ContinuousView.prototype._makeColorGradient = function (dataInterval, opts) {\n    // Considering colorHue, which is not linear, so we have to sample\n    // to calculate gradient color stops, but not only calculate head\n    // and tail.\n    var sampleNumber = 100; // Arbitrary value.\n    var colorStops = [];\n    var step = (dataInterval[1] - dataInterval[0]) / sampleNumber;\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[0], 'color', opts),\n      offset: 0\n    });\n    for (var i = 1; i < sampleNumber; i++) {\n      var currValue = dataInterval[0] + step * i;\n      if (currValue > dataInterval[1]) {\n        break;\n      }\n      colorStops.push({\n        color: this.getControllerVisual(currValue, 'color', opts),\n        offset: i / sampleNumber\n      });\n    }\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[1], 'color', opts),\n      offset: 1\n    });\n    return colorStops;\n  };\n  ContinuousView.prototype._createBarPoints = function (handleEnds, symbolSizes) {\n    var itemSize = this.visualMapModel.itemSize;\n    return [[itemSize[0] - symbolSizes[0], handleEnds[0]], [itemSize[0], handleEnds[0]], [itemSize[0], handleEnds[1]], [itemSize[0] - symbolSizes[1], handleEnds[1]]];\n  };\n  ContinuousView.prototype._createBarGroup = function (itemAlign) {\n    var orient = this._orient;\n    var inverse = this.visualMapModel.get('inverse');\n    return new graphic.Group(orient === 'horizontal' && !inverse ? {\n      scaleX: itemAlign === 'bottom' ? 1 : -1,\n      rotation: Math.PI / 2\n    } : orient === 'horizontal' && inverse ? {\n      scaleX: itemAlign === 'bottom' ? -1 : 1,\n      rotation: -Math.PI / 2\n    } : orient === 'vertical' && !inverse ? {\n      scaleX: itemAlign === 'left' ? 1 : -1,\n      scaleY: -1\n    } : {\n      scaleX: itemAlign === 'left' ? 1 : -1\n    });\n  };\n  ContinuousView.prototype._updateHandle = function (handleEnds, visualInRange) {\n    if (!this._useHandle) {\n      return;\n    }\n    var shapes = this._shapes;\n    var visualMapModel = this.visualMapModel;\n    var handleThumbs = shapes.handleThumbs;\n    var handleLabels = shapes.handleLabels;\n    var itemSize = visualMapModel.itemSize;\n    var dataExtent = visualMapModel.getExtent();\n    var align = this._applyTransform('left', shapes.mainGroup);\n    each([0, 1], function (handleIndex) {\n      var handleThumb = handleThumbs[handleIndex];\n      handleThumb.setStyle('fill', visualInRange.handlesColor[handleIndex]);\n      handleThumb.y = handleEnds[handleIndex];\n      var val = linearMap(handleEnds[handleIndex], [0, itemSize[1]], dataExtent, true);\n      var symbolSize = this.getControllerVisual(val, 'symbolSize');\n      handleThumb.scaleX = handleThumb.scaleY = symbolSize / itemSize[0];\n      handleThumb.x = itemSize[0] - symbolSize / 2;\n      // Update handle label position.\n      var textPoint = graphic.applyTransform(shapes.handleLabelPoints[handleIndex], graphic.getTransform(handleThumb, this.group));\n      if (this._orient === 'horizontal') {\n        // If visualMap controls symbol size, an additional offset needs to be added to labels to avoid collision at minimum size.\n        // Offset reaches value of 0 at \"maximum\" position, so maximum position is not altered at all.\n        var minimumOffset = align === 'left' || align === 'top' ? (itemSize[0] - symbolSize) / 2 : (itemSize[0] - symbolSize) / -2;\n        textPoint[1] += minimumOffset;\n      }\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        text: visualMapModel.formatValueText(this._dataInterval[handleIndex]),\n        verticalAlign: 'middle',\n        align: this._orient === 'vertical' ? this._applyTransform('left', shapes.mainGroup) : 'center'\n      });\n    }, this);\n  };\n  ContinuousView.prototype._showIndicator = function (cursorValue, textValue, rangeSymbol, halfHoverLinkSize) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var itemSize = visualMapModel.itemSize;\n    var sizeExtent = [0, itemSize[1]];\n    var shapes = this._shapes;\n    var indicator = shapes.indicator;\n    if (!indicator) {\n      return;\n    }\n    indicator.attr('invisible', false);\n    var opts = {\n      convertOpacityToAlpha: true\n    };\n    var color = this.getControllerVisual(cursorValue, 'color', opts);\n    var symbolSize = this.getControllerVisual(cursorValue, 'symbolSize');\n    var y = linearMap(cursorValue, dataExtent, sizeExtent, true);\n    var x = itemSize[0] - symbolSize / 2;\n    var oldIndicatorPos = {\n      x: indicator.x,\n      y: indicator.y\n    };\n    // Update handle label position.\n    indicator.y = y;\n    indicator.x = x;\n    var textPoint = graphic.applyTransform(shapes.indicatorLabelPoint, graphic.getTransform(indicator, this.group));\n    var indicatorLabel = shapes.indicatorLabel;\n    indicatorLabel.attr('invisible', false);\n    var align = this._applyTransform('left', shapes.mainGroup);\n    var orient = this._orient;\n    var isHorizontal = orient === 'horizontal';\n    indicatorLabel.setStyle({\n      text: (rangeSymbol ? rangeSymbol : '') + visualMapModel.formatValueText(textValue),\n      verticalAlign: isHorizontal ? align : 'middle',\n      align: isHorizontal ? 'center' : align\n    });\n    var indicatorNewProps = {\n      x: x,\n      y: y,\n      style: {\n        fill: color\n      }\n    };\n    var labelNewProps = {\n      style: {\n        x: textPoint[0],\n        y: textPoint[1]\n      }\n    };\n    if (visualMapModel.ecModel.isAnimationEnabled() && !this._firstShowIndicator) {\n      var animationCfg = {\n        duration: 100,\n        easing: 'cubicInOut',\n        additive: true\n      };\n      indicator.x = oldIndicatorPos.x;\n      indicator.y = oldIndicatorPos.y;\n      indicator.animateTo(indicatorNewProps, animationCfg);\n      indicatorLabel.animateTo(labelNewProps, animationCfg);\n    } else {\n      indicator.attr(indicatorNewProps);\n      indicatorLabel.attr(labelNewProps);\n    }\n    this._firstShowIndicator = false;\n    var handleLabels = this._shapes.handleLabels;\n    if (handleLabels) {\n      for (var i = 0; i < handleLabels.length; i++) {\n        // Fade out handle labels.\n        // NOTE: Must use api enter/leave on emphasis/blur/select state. Or the global states manager will change it.\n        this.api.enterBlur(handleLabels[i]);\n      }\n    }\n  };\n  ContinuousView.prototype._enableHoverLinkToSeries = function () {\n    var self = this;\n    this._shapes.mainGroup.on('mousemove', function (e) {\n      self._hovering = true;\n      if (!self._dragging) {\n        var itemSize = self.visualMapModel.itemSize;\n        var pos = self._applyTransform([e.offsetX, e.offsetY], self._shapes.mainGroup, true, true);\n        // For hover link show when hover handle, which might be\n        // below or upper than sizeExtent.\n        pos[1] = mathMin(mathMax(0, pos[1]), itemSize[1]);\n        self._doHoverLinkToSeries(pos[1], 0 <= pos[0] && pos[0] <= itemSize[0]);\n      }\n    }).on('mouseout', function () {\n      // When mouse is out of handle, hoverLink still need\n      // to be displayed when realtime is set as false.\n      self._hovering = false;\n      !self._dragging && self._clearHoverLinkToSeries();\n    });\n  };\n  ContinuousView.prototype._enableHoverLinkFromSeries = function () {\n    var zr = this.api.getZr();\n    if (this.visualMapModel.option.hoverLink) {\n      zr.on('mouseover', this._hoverLinkFromSeriesMouseOver, this);\n      zr.on('mouseout', this._hideIndicator, this);\n    } else {\n      this._clearHoverLinkFromSeries();\n    }\n  };\n  ContinuousView.prototype._doHoverLinkToSeries = function (cursorPos, hoverOnBar) {\n    var visualMapModel = this.visualMapModel;\n    var itemSize = visualMapModel.itemSize;\n    if (!visualMapModel.option.hoverLink) {\n      return;\n    }\n    var sizeExtent = [0, itemSize[1]];\n    var dataExtent = visualMapModel.getExtent();\n    // For hover link show when hover handle, which might be below or upper than sizeExtent.\n    cursorPos = mathMin(mathMax(sizeExtent[0], cursorPos), sizeExtent[1]);\n    var halfHoverLinkSize = getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent);\n    var hoverRange = [cursorPos - halfHoverLinkSize, cursorPos + halfHoverLinkSize];\n    var cursorValue = linearMap(cursorPos, sizeExtent, dataExtent, true);\n    var valueRange = [linearMap(hoverRange[0], sizeExtent, dataExtent, true), linearMap(hoverRange[1], sizeExtent, dataExtent, true)];\n    // Consider data range is out of visualMap range, see test/visualMap-continuous.html,\n    // where china and india has very large population.\n    hoverRange[0] < sizeExtent[0] && (valueRange[0] = -Infinity);\n    hoverRange[1] > sizeExtent[1] && (valueRange[1] = Infinity);\n    // Do not show indicator when mouse is over handle,\n    // otherwise labels overlap, especially when dragging.\n    if (hoverOnBar) {\n      if (valueRange[0] === -Infinity) {\n        this._showIndicator(cursorValue, valueRange[1], '< ', halfHoverLinkSize);\n      } else if (valueRange[1] === Infinity) {\n        this._showIndicator(cursorValue, valueRange[0], '> ', halfHoverLinkSize);\n      } else {\n        this._showIndicator(cursorValue, cursorValue, ' ', halfHoverLinkSize);\n      }\n    }\n    // When realtime is set as false, handles, which are in barGroup,\n    // also trigger hoverLink, which help user to realize where they\n    // focus on when dragging. (see test/heatmap-large.html)\n    // When realtime is set as true, highlight will not show when hover\n    // handle, because the label on handle, which displays a exact value\n    // but not range, might mislead users.\n    var oldBatch = this._hoverLinkDataIndices;\n    var newBatch = [];\n    if (hoverOnBar || useHoverLinkOnHandle(visualMapModel)) {\n      newBatch = this._hoverLinkDataIndices = visualMapModel.findTargetDataIndices(valueRange);\n    }\n    var resultBatches = modelUtil.compressBatches(oldBatch, newBatch);\n    this._dispatchHighDown('downplay', helper.makeHighDownBatch(resultBatches[0], visualMapModel));\n    this._dispatchHighDown('highlight', helper.makeHighDownBatch(resultBatches[1], visualMapModel));\n  };\n  ContinuousView.prototype._hoverLinkFromSeriesMouseOver = function (e) {\n    var ecData;\n    findEventDispatcher(e.target, function (target) {\n      var currECData = getECData(target);\n      if (currECData.dataIndex != null) {\n        ecData = currECData;\n        return true;\n      }\n    }, true);\n    if (!ecData) {\n      return;\n    }\n    var dataModel = this.ecModel.getSeriesByIndex(ecData.seriesIndex);\n    var visualMapModel = this.visualMapModel;\n    if (!visualMapModel.isTargetSeries(dataModel)) {\n      return;\n    }\n    var data = dataModel.getData(ecData.dataType);\n    var value = data.getStore().get(visualMapModel.getDataDimensionIndex(data), ecData.dataIndex);\n    if (!isNaN(value)) {\n      this._showIndicator(value, value);\n    }\n  };\n  ContinuousView.prototype._hideIndicator = function () {\n    var shapes = this._shapes;\n    shapes.indicator && shapes.indicator.attr('invisible', true);\n    shapes.indicatorLabel && shapes.indicatorLabel.attr('invisible', true);\n    var handleLabels = this._shapes.handleLabels;\n    if (handleLabels) {\n      for (var i = 0; i < handleLabels.length; i++) {\n        // Fade out handle labels.\n        // NOTE: Must use api enter/leave on emphasis/blur/select state. Or the global states manager will change it.\n        this.api.leaveBlur(handleLabels[i]);\n      }\n    }\n  };\n  ContinuousView.prototype._clearHoverLinkToSeries = function () {\n    this._hideIndicator();\n    var indices = this._hoverLinkDataIndices;\n    this._dispatchHighDown('downplay', helper.makeHighDownBatch(indices, this.visualMapModel));\n    indices.length = 0;\n  };\n  ContinuousView.prototype._clearHoverLinkFromSeries = function () {\n    this._hideIndicator();\n    var zr = this.api.getZr();\n    zr.off('mouseover', this._hoverLinkFromSeriesMouseOver);\n    zr.off('mouseout', this._hideIndicator);\n  };\n  ContinuousView.prototype._applyTransform = function (vertex, element, inverse, global) {\n    var transform = graphic.getTransform(element, global ? null : this.group);\n    return zrUtil.isArray(vertex) ? graphic.applyTransform(vertex, transform, inverse) : graphic.transformDirection(vertex, transform, inverse);\n  };\n  // TODO: TYPE more specified payload types.\n  ContinuousView.prototype._dispatchHighDown = function (type, batch) {\n    batch && batch.length && this.api.dispatchAction({\n      type: type,\n      batch: batch\n    });\n  };\n  /**\n   * @override\n   */\n  ContinuousView.prototype.dispose = function () {\n    this._clearHoverLinkFromSeries();\n    this._clearHoverLinkToSeries();\n  };\n  ContinuousView.type = 'visualMap.continuous';\n  return ContinuousView;\n}(VisualMapView);\nfunction createPolygon(points, cursor, onDrift, onDragEnd) {\n  return new graphic.Polygon({\n    shape: {\n      points: points\n    },\n    draggable: !!onDrift,\n    cursor: cursor,\n    drift: onDrift,\n    onmousemove: function (e) {\n      // For mobile device, prevent screen slider on the button.\n      eventTool.stop(e.event);\n    },\n    ondragend: onDragEnd\n  });\n}\nfunction getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent) {\n  var halfHoverLinkSize = HOVER_LINK_SIZE / 2;\n  var hoverLinkDataSize = visualMapModel.get('hoverLinkDataSize');\n  if (hoverLinkDataSize) {\n    halfHoverLinkSize = linearMap(hoverLinkDataSize, dataExtent, sizeExtent, true) / 2;\n  }\n  return halfHoverLinkSize;\n}\nfunction useHoverLinkOnHandle(visualMapModel) {\n  var hoverLinkOnHandle = visualMapModel.get('hoverLinkOnHandle');\n  return !!(hoverLinkOnHandle == null ? visualMapModel.get('realtime') : hoverLinkOnHandle);\n}\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\nexport default ContinuousView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport var visualMapActionInfo = {\n  type: 'selectDataRange',\n  event: 'dataRangeSelected',\n  // FIXME use updateView appears wrong\n  update: 'update'\n};\nexport var visualMapActionHander = function (payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'visualMap',\n    query: payload\n  }, function (model) {\n    model.setSelected(payload.selected);\n  });\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as visualSolution from '../../visual/visualSolution.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport { getVisualFromData } from '../../visual/helper.js';\nexport var visualMapEncodingHandlers = [{\n  createOnAllSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var resetDefines = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      var pipelineContext = seriesModel.pipelineContext;\n      if (!visualMapModel.isTargetSeries(seriesModel) || pipelineContext && pipelineContext.large) {\n        return;\n      }\n      resetDefines.push(visualSolution.incrementalApplyVisual(visualMapModel.stateList, visualMapModel.targetVisuals, zrUtil.bind(visualMapModel.getValueState, visualMapModel), visualMapModel.getDataDimensionIndex(seriesModel.getData())));\n    });\n    return resetDefines;\n  }\n},\n// Only support color.\n{\n  createOnAllSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var visualMetaList = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      if (visualMapModel.isTargetSeries(seriesModel)) {\n        var visualMeta = visualMapModel.getVisualMeta(zrUtil.bind(getColorVisual, null, seriesModel, visualMapModel)) || {\n          stops: [],\n          outerColors: []\n        };\n        var dimIdx = visualMapModel.getDataDimensionIndex(data);\n        if (dimIdx >= 0) {\n          // visualMeta.dimension should be dimension index, but not concrete dimension.\n          visualMeta.dimension = dimIdx;\n          visualMetaList.push(visualMeta);\n        }\n      }\n    });\n    // console.log(JSON.stringify(visualMetaList.map(a => a.stops)));\n    seriesModel.getData().setVisual('visualMeta', visualMetaList);\n  }\n}];\n// FIXME\n// performance and export for heatmap?\n// value can be Infinity or -Infinity\nfunction getColorVisual(seriesModel, visualMapModel, value, valueState) {\n  var mappings = visualMapModel.targetVisuals[valueState];\n  var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n  var resultVisual = {\n    color: getVisualFromData(seriesModel.getData(), 'color') // default color.\n  };\n  for (var i = 0, len = visualTypes.length; i < len; i++) {\n    var type = visualTypes[i];\n    var mapping = mappings[type === 'opacity' ? '__alphaForOpacity' : type];\n    mapping && mapping.applyVisual(value, getVisual, setVisual);\n  }\n  return resultVisual.color;\n  function getVisual(key) {\n    return resultVisual[key];\n  }\n  function setVisual(key, value) {\n    resultVisual[key] = value;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar each = zrUtil.each;\nexport default function visualMapPreprocessor(option) {\n  var visualMap = option && option.visualMap;\n  if (!zrUtil.isArray(visualMap)) {\n    visualMap = visualMap ? [visualMap] : [];\n  }\n  each(visualMap, function (opt) {\n    if (!opt) {\n      return;\n    }\n    // rename splitList to pieces\n    if (has(opt, 'splitList') && !has(opt, 'pieces')) {\n      opt.pieces = opt.splitList;\n      delete opt.splitList;\n    }\n    var pieces = opt.pieces;\n    if (pieces && zrUtil.isArray(pieces)) {\n      each(pieces, function (piece) {\n        if (zrUtil.isObject(piece)) {\n          if (has(piece, 'start') && !has(piece, 'min')) {\n            piece.min = piece.start;\n          }\n          if (has(piece, 'end') && !has(piece, 'max')) {\n            piece.max = piece.end;\n          }\n        }\n      });\n    }\n  });\n}\nfunction has(obj, name) {\n  return obj && obj.hasOwnProperty && obj.hasOwnProperty(name);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { visualMapActionInfo, visualMapActionHander } from './visualMapAction.js';\nimport { visualMapEncodingHandlers } from './visualEncoding.js';\nimport { each } from 'zrender/lib/core/util.js';\nimport preprocessor from './preprocessor.js';\nvar installed = false;\nexport default function installCommon(registers) {\n  if (installed) {\n    return;\n  }\n  installed = true;\n  registers.registerSubTypeDefaulter('visualMap', function (option) {\n    // Compatible with ec2, when splitNumber === 0, continuous visualMap will be used.\n    return !option.categories && (!(option.pieces ? option.pieces.length > 0 : option.splitNumber > 0) || option.calculable) ? 'continuous' : 'piecewise';\n  });\n  registers.registerAction(visualMapActionInfo, visualMapActionHander);\n  each(visualMapEncodingHandlers, function (handler) {\n    registers.registerVisual(registers.PRIORITY.VISUAL.COMPONENT, handler);\n  });\n  registers.registerPreprocessor(preprocessor);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport ContinuousModel from './ContinuousModel.js';\nimport ContinuousView from './ContinuousView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(ContinuousModel);\n  registers.registerComponentView(ContinuousView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapModel from './VisualMapModel.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport visualDefault from '../../visual/visualDefault.js';\nimport { reformIntervals } from '../../util/number.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar PiecewiseModel = /** @class */function (_super) {\n  __extends(PiecewiseModel, _super);\n  function PiecewiseModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = PiecewiseModel.type;\n    /**\n     * The order is always [low, ..., high].\n     * [{text: string, interval: Array.<number>}, ...]\n     */\n    _this._pieceList = [];\n    return _this;\n  }\n  PiecewiseModel.prototype.optionUpdated = function (newOption, isInit) {\n    _super.prototype.optionUpdated.apply(this, arguments);\n    this.resetExtent();\n    var mode = this._mode = this._determineMode();\n    this._pieceList = [];\n    resetMethods[this._mode].call(this, this._pieceList);\n    this._resetSelected(newOption, isInit);\n    var categories = this.option.categories;\n    this.resetVisual(function (mappingOption, state) {\n      if (mode === 'categories') {\n        mappingOption.mappingMethod = 'category';\n        mappingOption.categories = zrUtil.clone(categories);\n      } else {\n        mappingOption.dataExtent = this.getExtent();\n        mappingOption.mappingMethod = 'piecewise';\n        mappingOption.pieceList = zrUtil.map(this._pieceList, function (piece) {\n          piece = zrUtil.clone(piece);\n          if (state !== 'inRange') {\n            // FIXME\n            // outOfRange do not support special visual in pieces.\n            piece.visual = null;\n          }\n          return piece;\n        });\n      }\n    });\n  };\n  /**\n   * @protected\n   * @override\n   */\n  PiecewiseModel.prototype.completeVisualOption = function () {\n    // Consider this case:\n    // visualMap: {\n    //      pieces: [{symbol: 'circle', lt: 0}, {symbol: 'rect', gte: 0}]\n    // }\n    // where no inRange/outOfRange set but only pieces. So we should make\n    // default inRange/outOfRange for this case, otherwise visuals that only\n    // appear in `pieces` will not be taken into account in visual encoding.\n    var option = this.option;\n    var visualTypesInPieces = {};\n    var visualTypes = VisualMapping.listVisualTypes();\n    var isCategory = this.isCategory();\n    zrUtil.each(option.pieces, function (piece) {\n      zrUtil.each(visualTypes, function (visualType) {\n        if (piece.hasOwnProperty(visualType)) {\n          visualTypesInPieces[visualType] = 1;\n        }\n      });\n    });\n    zrUtil.each(visualTypesInPieces, function (v, visualType) {\n      var exists = false;\n      zrUtil.each(this.stateList, function (state) {\n        exists = exists || has(option, state, visualType) || has(option.target, state, visualType);\n      }, this);\n      !exists && zrUtil.each(this.stateList, function (state) {\n        (option[state] || (option[state] = {}))[visualType] = visualDefault.get(visualType, state === 'inRange' ? 'active' : 'inactive', isCategory);\n      });\n    }, this);\n    function has(obj, state, visualType) {\n      return obj && obj[state] && obj[state].hasOwnProperty(visualType);\n    }\n    _super.prototype.completeVisualOption.apply(this, arguments);\n  };\n  PiecewiseModel.prototype._resetSelected = function (newOption, isInit) {\n    var thisOption = this.option;\n    var pieceList = this._pieceList;\n    // Selected do not merge but all override.\n    var selected = (isInit ? thisOption : newOption).selected || {};\n    thisOption.selected = selected;\n    // Consider 'not specified' means true.\n    zrUtil.each(pieceList, function (piece, index) {\n      var key = this.getSelectedMapKey(piece);\n      if (!selected.hasOwnProperty(key)) {\n        selected[key] = true;\n      }\n    }, this);\n    if (thisOption.selectedMode === 'single') {\n      // Ensure there is only one selected.\n      var hasSel_1 = false;\n      zrUtil.each(pieceList, function (piece, index) {\n        var key = this.getSelectedMapKey(piece);\n        if (selected[key]) {\n          hasSel_1 ? selected[key] = false : hasSel_1 = true;\n        }\n      }, this);\n    }\n    // thisOption.selectedMode === 'multiple', default: all selected.\n  };\n  /**\n   * @public\n   */\n  PiecewiseModel.prototype.getItemSymbol = function () {\n    return this.get('itemSymbol');\n  };\n  /**\n   * @public\n   */\n  PiecewiseModel.prototype.getSelectedMapKey = function (piece) {\n    return this._mode === 'categories' ? piece.value + '' : piece.index + '';\n  };\n  /**\n   * @public\n   */\n  PiecewiseModel.prototype.getPieceList = function () {\n    return this._pieceList;\n  };\n  /**\n   * @return {string}\n   */\n  PiecewiseModel.prototype._determineMode = function () {\n    var option = this.option;\n    return option.pieces && option.pieces.length > 0 ? 'pieces' : this.option.categories ? 'categories' : 'splitNumber';\n  };\n  /**\n   * @override\n   */\n  PiecewiseModel.prototype.setSelected = function (selected) {\n    this.option.selected = zrUtil.clone(selected);\n  };\n  /**\n   * @override\n   */\n  PiecewiseModel.prototype.getValueState = function (value) {\n    var index = VisualMapping.findPieceIndex(value, this._pieceList);\n    return index != null ? this.option.selected[this.getSelectedMapKey(this._pieceList[index])] ? 'inRange' : 'outOfRange' : 'outOfRange';\n  };\n  /**\n   * @public\n   * @param pieceIndex piece index in visualMapModel.getPieceList()\n   */\n  PiecewiseModel.prototype.findTargetDataIndices = function (pieceIndex) {\n    var result = [];\n    var pieceList = this._pieceList;\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimensionIndex(data), function (value, dataIndex) {\n        // Should always base on model pieceList, because it is order sensitive.\n        var pIdx = VisualMapping.findPieceIndex(value, pieceList);\n        pIdx === pieceIndex && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  };\n  /**\n   * @private\n   * @param piece piece.value or piece.interval is required.\n   * @return  Can be Infinity or -Infinity\n   */\n  PiecewiseModel.prototype.getRepresentValue = function (piece) {\n    var representValue;\n    if (this.isCategory()) {\n      representValue = piece.value;\n    } else {\n      if (piece.value != null) {\n        representValue = piece.value;\n      } else {\n        var pieceInterval = piece.interval || [];\n        representValue = pieceInterval[0] === -Infinity && pieceInterval[1] === Infinity ? 0 : (pieceInterval[0] + pieceInterval[1]) / 2;\n      }\n    }\n    return representValue;\n  };\n  PiecewiseModel.prototype.getVisualMeta = function (getColorVisual) {\n    // Do not support category. (category axis is ordinal, numerical)\n    if (this.isCategory()) {\n      return;\n    }\n    var stops = [];\n    var outerColors = ['', ''];\n    var visualMapModel = this;\n    function setStop(interval, valueState) {\n      var representValue = visualMapModel.getRepresentValue({\n        interval: interval\n      }); // Not category\n      if (!valueState) {\n        valueState = visualMapModel.getValueState(representValue);\n      }\n      var color = getColorVisual(representValue, valueState);\n      if (interval[0] === -Infinity) {\n        outerColors[0] = color;\n      } else if (interval[1] === Infinity) {\n        outerColors[1] = color;\n      } else {\n        stops.push({\n          value: interval[0],\n          color: color\n        }, {\n          value: interval[1],\n          color: color\n        });\n      }\n    }\n    // Suplement\n    var pieceList = this._pieceList.slice();\n    if (!pieceList.length) {\n      pieceList.push({\n        interval: [-Infinity, Infinity]\n      });\n    } else {\n      var edge = pieceList[0].interval[0];\n      edge !== -Infinity && pieceList.unshift({\n        interval: [-Infinity, edge]\n      });\n      edge = pieceList[pieceList.length - 1].interval[1];\n      edge !== Infinity && pieceList.push({\n        interval: [edge, Infinity]\n      });\n    }\n    var curr = -Infinity;\n    zrUtil.each(pieceList, function (piece) {\n      var interval = piece.interval;\n      if (interval) {\n        // Fulfill gap.\n        interval[0] > curr && setStop([curr, interval[0]], 'outOfRange');\n        setStop(interval.slice());\n        curr = interval[1];\n      }\n    }, this);\n    return {\n      stops: stops,\n      outerColors: outerColors\n    };\n  };\n  PiecewiseModel.type = 'visualMap.piecewise';\n  PiecewiseModel.defaultOption = inheritDefaultOption(VisualMapModel.defaultOption, {\n    selected: null,\n    minOpen: false,\n    maxOpen: false,\n    align: 'auto',\n    itemWidth: 20,\n    itemHeight: 14,\n    itemSymbol: 'roundRect',\n    pieces: null,\n    categories: null,\n    splitNumber: 5,\n    selectedMode: 'multiple',\n    itemGap: 10,\n    hoverLink: true // Enable hover highlight.\n  });\n  return PiecewiseModel;\n}(VisualMapModel);\n;\n/**\n * Key is this._mode\n * @type {Object}\n * @this {module:echarts/component/viusalMap/PiecewiseMode}\n */\nvar resetMethods = {\n  splitNumber: function (outPieceList) {\n    var thisOption = this.option;\n    var precision = Math.min(thisOption.precision, 20);\n    var dataExtent = this.getExtent();\n    var splitNumber = thisOption.splitNumber;\n    splitNumber = Math.max(parseInt(splitNumber, 10), 1);\n    thisOption.splitNumber = splitNumber;\n    var splitStep = (dataExtent[1] - dataExtent[0]) / splitNumber;\n    // Precision auto-adaption\n    while (+splitStep.toFixed(precision) !== splitStep && precision < 5) {\n      precision++;\n    }\n    thisOption.precision = precision;\n    splitStep = +splitStep.toFixed(precision);\n    if (thisOption.minOpen) {\n      outPieceList.push({\n        interval: [-Infinity, dataExtent[0]],\n        close: [0, 0]\n      });\n    }\n    for (var index = 0, curr = dataExtent[0]; index < splitNumber; curr += splitStep, index++) {\n      var max = index === splitNumber - 1 ? dataExtent[1] : curr + splitStep;\n      outPieceList.push({\n        interval: [curr, max],\n        close: [1, 1]\n      });\n    }\n    if (thisOption.maxOpen) {\n      outPieceList.push({\n        interval: [dataExtent[1], Infinity],\n        close: [0, 0]\n      });\n    }\n    reformIntervals(outPieceList);\n    zrUtil.each(outPieceList, function (piece, index) {\n      piece.index = index;\n      piece.text = this.formatValueText(piece.interval);\n    }, this);\n  },\n  categories: function (outPieceList) {\n    var thisOption = this.option;\n    zrUtil.each(thisOption.categories, function (cate) {\n      // FIXME categorypieceListvisualMappingpieceList\n      // \n      outPieceList.push({\n        text: this.formatValueText(cate, true),\n        value: cate\n      });\n    }, this);\n    // See \"Order Rule\".\n    normalizeReverse(thisOption, outPieceList);\n  },\n  pieces: function (outPieceList) {\n    var thisOption = this.option;\n    zrUtil.each(thisOption.pieces, function (pieceListItem, index) {\n      if (!zrUtil.isObject(pieceListItem)) {\n        pieceListItem = {\n          value: pieceListItem\n        };\n      }\n      var item = {\n        text: '',\n        index: index\n      };\n      if (pieceListItem.label != null) {\n        item.text = pieceListItem.label;\n      }\n      if (pieceListItem.hasOwnProperty('value')) {\n        var value = item.value = pieceListItem.value;\n        item.interval = [value, value];\n        item.close = [1, 1];\n      } else {\n        // `min` `max` is legacy option.\n        // `lt` `gt` `lte` `gte` is recommended.\n        var interval = item.interval = [];\n        var close_1 = item.close = [0, 0];\n        var closeList = [1, 0, 1];\n        var infinityList = [-Infinity, Infinity];\n        var useMinMax = [];\n        for (var lg = 0; lg < 2; lg++) {\n          var names = [['gte', 'gt', 'min'], ['lte', 'lt', 'max']][lg];\n          for (var i = 0; i < 3 && interval[lg] == null; i++) {\n            interval[lg] = pieceListItem[names[i]];\n            close_1[lg] = closeList[i];\n            useMinMax[lg] = i === 2;\n          }\n          interval[lg] == null && (interval[lg] = infinityList[lg]);\n        }\n        useMinMax[0] && interval[1] === Infinity && (close_1[0] = 0);\n        useMinMax[1] && interval[0] === -Infinity && (close_1[1] = 0);\n        if (process.env.NODE_ENV !== 'production') {\n          if (interval[0] > interval[1]) {\n            console.warn('Piece ' + index + 'is illegal: ' + interval + ' lower bound should not greater then uppper bound.');\n          }\n        }\n        if (interval[0] === interval[1] && close_1[0] && close_1[1]) {\n          // Consider: [{min: 5, max: 5, visual: {...}}, {min: 0, max: 5}],\n          // we use value to lift the priority when min === max\n          item.value = interval[0];\n        }\n      }\n      item.visual = VisualMapping.retrieveVisuals(pieceListItem);\n      outPieceList.push(item);\n    }, this);\n    // See \"Order Rule\".\n    normalizeReverse(thisOption, outPieceList);\n    // Only pieces\n    reformIntervals(outPieceList);\n    zrUtil.each(outPieceList, function (piece) {\n      var close = piece.close;\n      var edgeSymbols = [['<', ''][close[1]], ['>', ''][close[0]]];\n      piece.text = piece.text || this.formatValueText(piece.value != null ? piece.value : piece.interval, false, edgeSymbols);\n    }, this);\n  }\n};\nfunction normalizeReverse(thisOption, pieceList) {\n  var inverse = thisOption.inverse;\n  if (thisOption.orient === 'vertical' ? !inverse : inverse) {\n    pieceList.reverse();\n  }\n}\nexport default PiecewiseModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapView from './VisualMapView.js';\nimport * as graphic from '../../util/graphic.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport * as layout from '../../util/layout.js';\nimport * as helper from './helper.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nvar PiecewiseVisualMapView = /** @class */function (_super) {\n  __extends(PiecewiseVisualMapView, _super);\n  function PiecewiseVisualMapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = PiecewiseVisualMapView.type;\n    return _this;\n  }\n  PiecewiseVisualMapView.prototype.doRender = function () {\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n    var visualMapModel = this.visualMapModel;\n    var textGap = visualMapModel.get('textGap');\n    var textStyleModel = visualMapModel.textStyleModel;\n    var itemAlign = this._getItemAlign();\n    var itemSize = visualMapModel.itemSize;\n    var viewData = this._getViewData();\n    var endsText = viewData.endsText;\n    var showLabel = zrUtil.retrieve(visualMapModel.get('showLabel', true), !endsText);\n    var silent = !visualMapModel.get('selectedMode');\n    endsText && this._renderEndsText(thisGroup, endsText[0], itemSize, showLabel, itemAlign);\n    zrUtil.each(viewData.viewPieceList, function (item) {\n      var piece = item.piece;\n      var itemGroup = new graphic.Group();\n      itemGroup.onclick = zrUtil.bind(this._onItemClick, this, piece);\n      this._enableHoverLink(itemGroup, item.indexInModelPieceList);\n      // TODO Category\n      var representValue = visualMapModel.getRepresentValue(piece);\n      this._createItemSymbol(itemGroup, representValue, [0, 0, itemSize[0], itemSize[1]], silent);\n      if (showLabel) {\n        var visualState = this.visualMapModel.getValueState(representValue);\n        var align = textStyleModel.get('align') || itemAlign;\n        itemGroup.add(new graphic.Text({\n          style: createTextStyle(textStyleModel, {\n            x: align === 'right' ? -textGap : itemSize[0] + textGap,\n            y: itemSize[1] / 2,\n            text: piece.text,\n            verticalAlign: textStyleModel.get('verticalAlign') || 'middle',\n            align: align,\n            opacity: zrUtil.retrieve2(textStyleModel.get('opacity'), visualState === 'outOfRange' ? 0.5 : 1)\n          }),\n          silent: silent\n        }));\n      }\n      thisGroup.add(itemGroup);\n    }, this);\n    endsText && this._renderEndsText(thisGroup, endsText[1], itemSize, showLabel, itemAlign);\n    layout.box(visualMapModel.get('orient'), thisGroup, visualMapModel.get('itemGap'));\n    this.renderBackground(thisGroup);\n    this.positionGroup(thisGroup);\n  };\n  PiecewiseVisualMapView.prototype._enableHoverLink = function (itemGroup, pieceIndex) {\n    var _this = this;\n    itemGroup.on('mouseover', function () {\n      return onHoverLink('highlight');\n    }).on('mouseout', function () {\n      return onHoverLink('downplay');\n    });\n    var onHoverLink = function (method) {\n      var visualMapModel = _this.visualMapModel;\n      // TODO: TYPE More detailed action types\n      visualMapModel.option.hoverLink && _this.api.dispatchAction({\n        type: method,\n        batch: helper.makeHighDownBatch(visualMapModel.findTargetDataIndices(pieceIndex), visualMapModel)\n      });\n    };\n  };\n  PiecewiseVisualMapView.prototype._getItemAlign = function () {\n    var visualMapModel = this.visualMapModel;\n    var modelOption = visualMapModel.option;\n    if (modelOption.orient === 'vertical') {\n      return helper.getItemAlign(visualMapModel, this.api, visualMapModel.itemSize);\n    } else {\n      // horizontal, most case left unless specifying right.\n      var align = modelOption.align;\n      if (!align || align === 'auto') {\n        align = 'left';\n      }\n      return align;\n    }\n  };\n  PiecewiseVisualMapView.prototype._renderEndsText = function (group, text, itemSize, showLabel, itemAlign) {\n    if (!text) {\n      return;\n    }\n    var itemGroup = new graphic.Group();\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    itemGroup.add(new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        x: showLabel ? itemAlign === 'right' ? itemSize[0] : 0 : itemSize[0] / 2,\n        y: itemSize[1] / 2,\n        verticalAlign: 'middle',\n        align: showLabel ? itemAlign : 'center',\n        text: text\n      })\n    }));\n    group.add(itemGroup);\n  };\n  /**\n   * @private\n   * @return {Object} {peiceList, endsText} The order is the same as screen pixel order.\n   */\n  PiecewiseVisualMapView.prototype._getViewData = function () {\n    var visualMapModel = this.visualMapModel;\n    var viewPieceList = zrUtil.map(visualMapModel.getPieceList(), function (piece, index) {\n      return {\n        piece: piece,\n        indexInModelPieceList: index\n      };\n    });\n    var endsText = visualMapModel.get('text');\n    // Consider orient and inverse.\n    var orient = visualMapModel.get('orient');\n    var inverse = visualMapModel.get('inverse');\n    // Order of model pieceList is always [low, ..., high]\n    if (orient === 'horizontal' ? inverse : !inverse) {\n      viewPieceList.reverse();\n    }\n    // Origin order of endsText is [high, low]\n    else if (endsText) {\n      endsText = endsText.slice().reverse();\n    }\n    return {\n      viewPieceList: viewPieceList,\n      endsText: endsText\n    };\n  };\n  PiecewiseVisualMapView.prototype._createItemSymbol = function (group, representValue, shapeParam, silent) {\n    var itemSymbol = createSymbol(\n    // symbol will be string\n    this.getControllerVisual(representValue, 'symbol'), shapeParam[0], shapeParam[1], shapeParam[2], shapeParam[3],\n    // color will be string\n    this.getControllerVisual(representValue, 'color'));\n    itemSymbol.silent = silent;\n    group.add(itemSymbol);\n  };\n  PiecewiseVisualMapView.prototype._onItemClick = function (piece) {\n    var visualMapModel = this.visualMapModel;\n    var option = visualMapModel.option;\n    var selectedMode = option.selectedMode;\n    if (!selectedMode) {\n      return;\n    }\n    var selected = zrUtil.clone(option.selected);\n    var newKey = visualMapModel.getSelectedMapKey(piece);\n    if (selectedMode === 'single' || selectedMode === true) {\n      selected[newKey] = true;\n      zrUtil.each(selected, function (o, key) {\n        selected[key] = key === newKey;\n      });\n    } else {\n      selected[newKey] = !selected[newKey];\n    }\n    this.api.dispatchAction({\n      type: 'selectDataRange',\n      from: this.uid,\n      visualMapId: this.visualMapModel.id,\n      selected: selected\n    });\n  };\n  PiecewiseVisualMapView.type = 'visualMap.piecewise';\n  return PiecewiseVisualMapView;\n}(VisualMapView);\nexport default PiecewiseVisualMapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport PiecewiseModel from './PiecewiseModel.js';\nimport PiecewiseView from './PiecewiseView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(PiecewiseModel);\n  registers.registerComponentView(PiecewiseView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport { install as installVisualMapContinuous } from './installVisualMapContinuous.js';\nimport { install as installVisualMapPiecewise } from './installVisualMapPiecewise.js';\nexport function install(registers) {\n  use(installVisualMapContinuous);\n  use(installVisualMapPiecewise);\n  // Do not install './dataZoomSelect',\n  // since it only work for toolbox dataZoom.\n}","// Circle icon with handles - for slightly bigger data-zoom slider.\nconst handleIcon =\n  'path://M18.1 10.7V9.3c-.3-4.9-4.4-8.8-9.4-8.8-5 0-9.1 3.9-9.4 8.8v1.3c.3 4.9 4.4 8.8 9.4 8.8C13.7 19.5 17.8 15.6 18.1 10.7zM5.6 13.3V6.7H7v6.6H5.6zM10.4 13.3V6.7h1.4v6.6H10.4z';\n\nexport const dataZoomPartial = {\n  show: true,\n  type: 'slider',\n  handleIcon,\n  handleSize: '80%',\n};\n\nexport const echartsGridDefault = {\n  left: '55',\n  right: '30',\n  bottom: 80,\n};\n"],"names":["CoordSysInfo","coordSysName","createHashMap","getCoordSysInfoBySeries","seriesModel","result","fetch","fetchers","axisMap","categoryAxisMap","xAxisModel","SINGLE_REFERRING","yAxisModel","isCategory","singleAxisModel","polarModel","radiusAxisModel","angleAxisModel","ecModel","parallelModel","coordSysDims","each","axisIndex","index","axisModel","axisDim","matrixModel","xModel","yModel","getCoordSysDimDefs","coordSysInfo","registeredCoordSys","CoordinateSystem","coordSysDimDefs","zrUtil.map","dim","dimInfo","axisType","getDimensionTypeByAxis","injectOrdinalMeta","dimInfoList","createInvertedIndices","firstCategoryDimIndex","hasNameEncode","zrUtil.each","dimIndex","coordDim","categoryAxisModel","createSeriesData","sourceRaw","opt","sourceManager","source","isOriginalSource","createSourceFromSeriesDataOption","SOURCE_FORMAT_ORIGINAL","useEncodeDefaulter","encodeDefaulter","zrUtil.isFunction","zrUtil.curry","makeSeriesEncodeForAxisCoordSys","createDimensionOptions","schema","prepareSeriesDataSchema","store","stackCalculationInfo","enableDataStack","data","SeriesData","dimValueGetter","isNeedCompleteOrdinalData","itemOpt","dimName","dataIndex","sampleItem","firstDataNotNull","zrUtil.isArray","getDataItemValue","arr","i","AxisModelCommonMixin","option","NORMALIZED_EXTENT","Axis","scale","extent","coord","min","max","dataExtent","getPixelPrecision","start","end","clamp","fixExtentWithBands","linearMap","t","point","tickModel","createAxisTicks","ticks","ticksCoords","map","tickVal","alignWithLabel","fixOnBandTicksCoords","minorTickModel","splitNumber","minorTicks","minorTicksCoords","minorTicksGroup","minorTick","ctx","createAxisLabelsComputingContext","AxisTickLabelComputingKind","createAxisLabels","axisExtent","len","size","calculateCategoryInterval","nTick","margin","axis","ticksLen","last","diffSize","crossLen","shift_1","ticksItem","inverse","littleThan","a","b","round","LineSeriesModel","_super","__extends","_this","group","Group","line","createSymbol","visualType","visualRotate","symbolType","symbol","symbolRotate","tokens","SeriesModel","getDefaultLabel","labelDims","rawVal","retrieveRawValue","vals","getDefaultInterpolatedLabel","interpolatedValue","isArray","Symbol","idx","seriesScope","opts","symbolSize","z2","keepAspect","symbolPath","retrieve2","driftSymbol","toLastFrame","enterEmphasis","leaveEmphasis","zlevel","z","draggable","hasCursorOption","isInit","disableAnimation","target","graphic.updateProps","saveOldStyle","graphic.initProps","emphasisItemStyle","blurItemStyle","selectItemStyle","focus","blurScope","emphasisDisabled","labelStatesModels","hoverScale","cursorStyle","itemModel","emphasisModel","getLabelStatesModels","symbolOffset","normalizeSymbolOffset","symbolStyle","visualColor","ZRImage","pathStyle","extend","liftZ","z2Origin","useNameLabel","setLabelStyle","getLabelDefaultText","emphasisState","scaleRatio","toggleHoverEmphasis","cb","getECData","animationOpt","textContent","graphic.removeElement","normalizeSymbolSize","graphic.Group","dx","dy","symbolNeedsDraw","normalizeUpdateOpt","isObject","makeSeriesScope","SymbolDraw","SymbolCtor","SymbolClz","oldData","symbolUpdateOpt","getSymbolPoint","newIdx","symbolEl","oldIdx","newSymbolType","oldSymbolType","el","taskParams","updateIncrementalAndHover","graphic.traverseElements","enableAnimation","prepareDataCoordInfo","coordSys","valueOrigin","baseAxis","valueAxis","valueStart","getValueStart","baseAxisDim","valueAxisDim","valueDim","baseDim","baseDataOffset","dims","stacked","stackResultDim","isDimensionStacked","isNumber","getStackedOnPoint","dataCoordInfo","value","stackedData","diffData","newData","diffResult","lineAnimationDiff","oldStackedOnPoints","newStackedOnPoints","oldCoordSys","newCoordSys","oldValueOrigin","newValueOrigin","diff","currPoints","nextPoints","currStackedPoints","nextStackedPoints","status","sortedIndices","rawIndices","newDataOldCoordInfo","oldPoints","newPoints","diffItem","pointAdded","oldIdx2","newIdx2","currentX","currentY","nextX","nextY","newDataDimsForPoint","oldPt","stackedOnPoint","sortedCurrPoints","createFloat32Array","sortedNextPoints","sortedCurrStackedPoints","sortedNextStackedPoints","sortedStatus","i2","idx2","mathMin","mathMax","isPointNull","x","y","drawSegment","points","segLen","allLen","dir","smooth","smoothMonotone","connectNulls","prevX","prevY","cpx0","cpy0","cpx1","cpy1","k","nextIdx","tmpK","ratioNextSeg","vx","vy","nextCpx0","nextCpy0","dx0","dx1","dy0","dy1","lenPrevSeg","lenNextSeg","dir_1","dir_2","ECPolylineShape","ECPolyline","shape","xOrY","path","CMD","PathProxy","x0","y0","isDimX","roots","cmd","x2","y2","x3","y3","val","nRoot","cubicRootAt","i_1","t_1","cubicAt","Path","ECPolygonShape","ECPolygon","stackedOnPoints","createGridClipPath","cartesian","hasAnimation","done","during","rect","width","height","lineWidth","clipPath","graphic.Rect","isHorizontal","isAxisInversed","duringCb","isFunction","percent","createPolarClipPath","polar","sectorArea","r0","r","graphic.Sector","isRadial","createClipPath","isCoordinateSystemType","type","isPointsSame","points1","points2","bboxFromPoints","minX","minY","maxX","maxY","getBoundingDiff","_a","min1","max1","_b","min2","max2","getSmooth","zrUtil.isNumber","getStackedOnPoints","pt","turnPointsIntoStep","basePoints","stepTurnAt","baseIndex","stepPoints","stepPt","nextPt","filteredPoints","reference","middle","stepPt2","clipColorStops","colorStops","maxSize","newColorStops","prevOutOfRangeColorStop","prevInRangeColorStop","lerpStop","stop0","stop1","clippedCoord","coord0","color","lerp","stop_1","getVisualGradient","api","visualMetaList","visualMeta","stop","stopLen","outerColors","colorStopsInRange","inRangeStopLen","tinyExtent","minCoord","maxCoord","coordSpan","gradient","graphic.LinearGradient","getIsIgnoreFunc","showAllSymbol","isAuto","categoryAxis","canShowAllSymbolForCategory","categoryDataDim","labelMap","labelItem","ordinalNumber","availSize","dataLen","step","getLastIndexNotNull","getPointAtIndex","getIndexRange","dimIdx","prevIndex","nextIndex","anyStateShowEndLabel","SPECIAL_STATES","createLineClipPath","lineView","endLabelModel_1","valueAnimation_1","data_1","labelAnimationRecord_1","clipRect","endLabel","rectShape","expandSize","getEndLabelStateSpecified","endLabelModel","isBaseInversed","align","verticalAlign","LineView","lineGroup","symbolDraw","zrUtil.bind","lineStyleModel","areaStyleModel","isCoordSysPolar","prevCoordSys","polyline","polygon","isAreaChart","showSymbol","isIgnoreFunc","clipShapeForSymbol","convertToColorString","oldClipPath","newClipPath","zrUtil.defaults","setStatesStylesFromModel","emphasisLineStyle","stackedOnSeries","stackedOnSmooth","changePolyState","payload","modelUtil.queryDataIndex","symbolLabel","ChartView","toState","setStatesFlag","clipShape","isHorizontalOrRadial","isAxisInverse","seriesDuration","seriesDelay","seriesDelayValue","current","polarClip","gridClip","ratio","delay","text","inheritColor","data_2","graphic.Text","animationRecord","valueAnimation","precision","distance","distanceX","distanceY","dataIndexRange","indices","startValue","endValue","modelUtil.interpolateRawValues","inner","labelInner","stackedOnCurrent","next","stackedOnNext","updatedDataInfo","diffStatus","offset","pointsLayout","seriesType","forceStoreInTypedArray","createRenderPlanner","pipelineContext","useTypedArray","dimLen","dimIdx0","dimIdx1","params","segCount","tmpIn","tmpOut","samplers","frame","sum","count","indexSampler","dataSample","sampling","dpr","rate","sampler","isString","install","registers","LineSeries","layoutPoints","lineStyle","BaseBarSeriesModel","startingAtTick","clampData_1","pt_1","tickCoords","alignTicksWithLabel","targetTickId","isEnd","leftCoord","stepTickValue","tickCoord","tickValue","offsetIndex","BarSeriesModel","progressiveThreshold","largeThreshold","selectors","inheritDefaultOption","SausageShape","SausagePath","cx","cy","dr","rCenter","startAngle","endAngle","clockwise","PI2","lessThanCircle","unitStartX","unitStartY","unitEndX","unitEndY","createSectorCalculateTextPosition","positionMapping","isRoundCap","out","boundingRect","textPosition","calculateTextPosition","mappedSectorPosition","sector","middleR","middleAngle","extraDist","mathCos","mathSin","textAlign","textVerticalAlign","adjustAngleDistanceX","adjustAngleDistanceY","setSectorTextRotation","rotateType","anchorAngle","rotate","angle","getClipArea","coordSysClipArea","expandWidth","BarView","coordinateSystemType","traverseElements","isLargeDraw","animationModel","realtimeSortCfg","shouldRealtimeSort","needsClip","roundCap","drawBackground","backgroundModel","barBorderRadius","bgEls","oldBgEls","isInitSort","isChangeOrder","createBackground","bgLayout","getLayout","bgEl","createBackgroundEl","layout","isValidLayout","isClipped","clip","elementCreator","updateStyle","updateRealtimeAnimation","initProps","newIndex","oldIndex","createBackgroundShape","updateProps","roundCapChanged","removeElementWithFadeOut","textEl","labelInnerStore","bgGroup","createLarge","orderMapping_1","orderMapping","info","dataIdx","mappedValue","item","ordinalDataDim","lastValue","tickNum","rawIdx","orderInfo","tickMax","sortInfo","sortResult","model","coordSysBoundingRect","signWidth","signHeight","coordSysX2","coordSysY2","xClipped","yClipped","signR","tmp","clipped","isUpdate","Rect","animateProperty","ShapeClass","Sausage","Sector","positionMap","createPolarPositionMapping","sectorShape","animateTarget","realtimeSortOption","seriesAnimationModel","seriesTarget","axisTarget","axisAnimationModel","checkPropertiesNotValid","obj","props","rectPropties","polarPropties","fixedLineWidth","getLineWidth","signX","signY","isZeroOnPolar","arcOrAngle","position","isPolar","style","cornerRadius","getSectorCornerRadius","borderRadius","labelPositionOutside","label","setLabelValueAnimation","state","rawLayout","borderColor","LagePathShape","LargePath","baseDimIdx","valueDimIdx","startPoint","barWidth","progressiveEls","incremental","largeDataIndices","bgPoints","largePathUpdateDataIndex","throttle","event","largePath","largePathFindDataIndex","ii","coordLayout","ElementClz","BarSeries","createProgressiveLayout","componentType","componentModel","ScatterSeriesModel","progressive","BOOST_SIZE_THRESHOLD","LargeSymbolPathShape","LargeSymbolPath","symbolProxy","symbolProxyShape","canBoost","softClipShape","w","h","localPos","graphic.BoundingRect","graphic.Path","LargeSymbolDraw","child","byteOffset","lastAdded","oldLen","hostModel","extrudeShadow","globalStyle","ecData","e","ScatterView","res","OUTER_BOUNDS_DEFAULT","OUTER_BOUNDS_CLAMP_DEFAULT","GridModel","outerBoundsCp","getLayoutParams","mergeLayoutParam","newOption","ComponentModel","CartesianAxisModel","zrUtil.mixin","defaultOption","zrUtil.merge","timeAxis","logAxis","axisDefault","AXIS_TYPES","axisModelCreator","axisName","BaseAxisModelClass","extraDefaultOption","v","merge","AxisModel","layoutMode","fetchLayoutMode","inputPositionParams","themeModel","getAxisType","thisOption","OrdinalMeta","rawData","axisBreakHelper","getAxisBreakHelper","Cartesian","name","scaleType","zrUtil.filter","cartesian2DDimensions","canCalculateAffineTransform","Cartesian2D","xAxisScale","yAxisScale","xScaleExtent","yScaleExtent","xScaleSpan","yScaleSpan","scaleX","scaleY","translateX","translateY","m","invert","axisX","axisY","data1","data2","zoneDiag1","zoneDiag2","area","zone","BoundingRect","xVal","yVal","applyTransform","xAxis","yAxis","xScale","yScale","xAxisExtent","yAxisExtent","tolerance","xExtent","yExtent","Axis2D","coordExtent","asc","ret","alignScaleTicks","alignToScale","intervalScaleProto","IntervalScale","alignToTicks","alignToNicedTicks","alignToSplitNumber","alignToInterval","scaleExtent","getScaleExtent","rawExtent","isMinFixed","isMaxFixed","logTransform","retrieveAxisBreaksOption","interval","increaseInterval","nicedSplitNumber","range","t0","t1","XY_TO_MARGIN_IDX","Grid","gridModel","axesMap","updateAxisTicks","axes","alignTo","axesIndices","keys","axisNeedsAlign","isIntervalOrLogScale","niceScaleExtent","onZeroRecords","fixAxisOnZero","beforeDataProcessing","layoutRef","createBoxLayoutReference","gridRect","getLayoutRect","coordsList","optionContainLabel","updateAllAxisExtentTransByGridRect","axisBuilderSharedCtx","createAxisBiulders","noPxChange","legacyLayOutGridByContainLabel","layOutGridByOuterBounds","prepareOuterBounds","outerBoundsRect","parsedOuterBoundsContain","outerBoundsClamp","createOrUpdateAxesView","axesMapOnDim","xAxisIndex","yAxisIndex","key","coordList","finder","indexOf","grid","axisPositionUsed","axesCount","createAxisCreator","isAxisUsedInTheGrid","axisPosition","createScaleByModel","categorySortInfo","isCartesian2DInjectedAsDataCoordSys","axesModelMap","findAxisModels","unionExtent","getDataDimensionsOnAxis","baseAxes","otherAxes","otherAxis","grids","injectCoordSysByOption","coordSysProvider","otherAxisDim","otherAxisOnZeroOf","onZero","onZeroAxisIndex","canOnZeroToAxis","getOnZeroRecordKey","ifAxisCrossZero","updateAxisTransform","coordBase","axisExtentSum","updateAxisExtentTransByGridRect","gridXY","gridWH","registerLegacyGridContainLabelImpl","impl","outerBoundsContain","fillLabelNameOverflowOnOneDimension","fillMarginOnOneDimension","find","expandOrShrinkRect","xyIdx","XY","shouldAxisShow","sharedRecord","labelInfoList","labelInfo","proportion","getLabelInner","nameLayout","isNameLocationCenter","itemRect","overflow1","overflow2","WH","applyProportion","minIdx","maxIdx","overflow","eqNaN","cartesians","AxisBuilderSharedContext","resolveAxisNameOverlapForGrid","axisList","defaultNameMoveOverlap","createCartesianAxisViewCommonPartBuilder","kind","isDetermine","updateCartesianAxisViewCommonPartBuilder","nameMarginLevelMap","calcNameMarginLevel","xy","rawRridRect","optionOuterBoundsMode","optionOuterBoundsContain","parsePositionSizeOption","cfg","nameLayoutInfo","nameMoveDirVec","thisRecord","perpendicularDim","resolveAxisNameOverlapDefault","perpenRecord","moveIfOverlapByLinearLabels","makeInner","rectCoordAxisBuildSplitArea","axisView","axisGroup","splitAreaModel","areaColors","areaColorsLen","lastSplitAreaColors","newSplitAreaColors","zrUtil.createHashMap","colorIndex","cIndex","prev","areaStyle","rectCoordAxisHandleRemove","selfBuilderAttrs","CartesianAxisView","oldAxisGroup","axisElementBuilders","isInitialSortFromBarRacing","graphic.groupTransition","AxisView","splitLineModel","lineColors","showMinLine","showMaxLine","lineCount","p1","p2","graphic.Line","graphic.subPixelOptimizeLine","minorSplitLineModel","CartesianXAxisView","CartesianYAxisView","GridView","defaults","ComponentView","extraOption","needFixJitter","coordinateSystem","coordType","seriesValid","axisValid","fixJitter","fixedAxis","fixedCoord","floatCoord","radius","jitter","jitterOverlap","jitterMargin","bandWidth","fixJitterIgnoreOverlaps","fixJitterAvoidOverlaps","maxJitter","actualJitter","items","overlapA","placeJitterOnDirection","overlapB","minFloat","direction","d2","requiredY","jitterLayout","baseAxis_1","hasJitter","orient","isSingleY","rawSize","jittered","use","installGridSimple","installScatterJitter","take","zr","resourceKey","userKey","release","uKey","isTaken","echarts.registerAction","noop","IRRELEVANT_EXCLUDES","onIrrelevantElement","targetComponent","eventElComponent","eventElCoordSys","eventElCmptZInfo","retrieveZInfo","targetCmptZInfo","RoamController","mousedownHandler","bind","mousemoveHandler","mouseupHandler","mousewheelHandler","pinchHandler","controlType","rawOpt","zInfo","zInfoParsed","triggerInfo","addRoamZrListener","removeRoamZrListener","roamTrigger","inArea","forReverse","eventTool.isMiddleOrRightButtonOnMouseUpDown","eventConsumed","interactionMutex.isTaken","isAvailableBehavior","oldX","oldY","eventTool.stop","trigger","shouldZoom","shouldMove","wheelDelta","absWheelDeltaDelta","originX","originY","factor","absDelta","scrollDelta","controller","eventName","behaviorToCheck","contollerEvent","Eventful","innerZrStore","ensureZrStore","eventType","listener","roam","listenerList","currZInfo","ensureUniformListener","removeUniformListener","uniform","settings","setting","zrUtil.isObject","CATEGORY_DEFAULT_VISUAL_INDEX","VisualMapping","mappingMethod","zrUtil.clone","normalizers","visualHandler","normalizeVisualRange","preprocessForPiecewise","preprocessForSpecifiedCategory","zrUtil.assert","normalized","zrUtil.keys","visual","callback","context","isPrimary","newVisual","newVal","hasVisual","visualTypes","types_1","type1","type2","visualType1","visualType2","pieceList","findClosestWhenOutside","possibleI","abs","pieceValue","zrUtil.isString","updatePossible","piece","close_1","newAbs","makeApplyVisual","isNormalized","doMapCategory","returnRGBArray","zrColor.fastLerp","zrColor.stringify","getSpecifiedVisual","doMapFixed","makePartialColorVisualHandler","zrColor.modifyHSL","zrColor.modifyAlpha","createNormalizedToNumericVisual","getter","setter","symbolCfg","doMapToArray","categories","categoryMap","cate","visualArr_1","setVisualToOption","visualArr","doNotNeedPair","applyValue","colorChannel","sourceExtent","pieceIndex","zrColor.parse","zrUtil.noop","close","straightLineProto","bezierCurveProto","graphic.BezierCurve","StraightLineShape","CurveShape","isStraightLine","ECLinePath","p","vec2.normalize","SYMBOL_CATEGORIES","makeSymbolTypeKey","symbolCategory","makeSymbolTypeValue","lineData","symbolKeepAspect","symbolSizeArr","symbolUtil.normalizeSymbolSize","symbolOffsetArr","symbolUtil.normalizeSymbolOffset","symbolUtil.createSymbol","createLine","setLinePoints","targetShape","cp1","Line","linePoints","blurLineStyle","selectLineStyle","stateName","lineState","lineStateStyle","stateStyle","labelNormalModel","linePath","symbolFrom","symbolTo","invScale","parentNode","fromPos","toPos","d","vector.sub","vector.normalize","setSymbolRotation","specifiedRotation","tangent","halfPercent","n","cp","rotation","LineDraw","LineCtor","LineGroup","lineDraw","oldLineData","isEffectObject","itemLayout","lineNeedsDraw","newLineData","itemEl","isPointNaN","pts","sliderMove","delta","handleEnds","handleIndex","minSpan","maxSpan","extentSpan","restrict","handleSpan","originalDistSign","getSpanSign","extentMinSpan","realExtent","currDistSign","dist","BRUSH_PANEL_GLOBAL","mathPow","COVER_Z","UNSELECT_THRESHOLD","MIN_RESIZE_LINE_WIDTH","MUTEX_RESOURCE_KEY","DIRECTION_MAP","CURSOR_MAP","DEFAULT_BRUSH_OPT","baseUID","BrushController","pointerHandlers","handler","brushOption","interactionMutex.take","clone","interactionMutex.release","panelOpts","panels_1","thisGroup","coverConfigList","coverConfig","tmpIdPrefix","oldCovers","newCovers","creatingCover","DataDiffer","oldGetKey","getKey","addOrUpdate","remove","cover","newBrushInternal","endCreating","createCover","updateCoverAfterCreation","clearCovers","coverRenderers","updateZ","coverRenderer","getCoverRenderer","updateCoverShape","getPanelByPoint","localCursorPoint","panels","panel","transform","pn","getPanelByCover","panelId","covers","originalLength","areas","shouldShowCover","track","getTrackEnds","tail","createBaseRectCover","rectRangeConverter","edgeNameSequences","makeStyle","curry","driftRect","nameSequence","updateBaseRect","localRange","handleSize","xa","ya","x2a","y2a","widtha","heighta","updateRectShape","updateCommon","transformable","mainEl","globalDir","getGlobalDirection1","getGlobalDirection2","pointsToRect","clipByPanel","formatRectRange","getTransform","graphic.getTransform","localDirName","inverseMap","graphic.transformDirection","localDirNameSeq","dirNameSequence","rectRange","localDelta","toLocalDelta","dirName","ind","driftPolygon","localD","localZero","xmin","ymin","xmax","ymax","resetCursor","isOutsideZrArea","currPanel","preventDefault","rawE","mainShapeContain","updateCoverByMouse","thisBrushOption","eventParams","determineBrushType","coverBrushOption","brushType","handleDragEnd","getLineRenderer","returnInput","localTrack","ends","graphic.Polyline","graphic.Polygon","xyIndex","otherExtent","makeRectPanelClipPath","normalizeRect","localPoints","graphicUtil.clipPointsByRect","makeLinearBrushOtherExtent","specifiedXYIndex","brushWidth","base","makeRectIsTargetByCursor","targetModel","WhiskerBoxCommonMixin","encodeRules","ordinalMeta","xAxisType","yAxisType","addOrdinal","coordDims","baseAxisDimIndex","axisModels","baseAxisType","otherAxisType","newOptionData_1","newItem","zrUtil.extend","defaultValueDimensions","coordDimensions","createSeriesDataSimply","positiveBorderColorQuery","negativeBorderColorQuery","dojiBorderColorQuery","positiveColorQuery","negativeColorQuery","getColor","sign","getBorderColor","candlestickVisual","isLargeRender","existsStyle","SKIP_PROPS","CandlestickView","isSimpleBox","clipArea","isNormalBoxClipped","createNormalBox","setBoxCommon","NormalBoxPathShape","NormalBoxPath","transInit","stateModel","LargeBoxPathShape","LargeBoxPath","largePoints","elP","elN","elDoji","setLargeStyle","itemStyle","CandlestickSeriesModel","mixin","candlestickPreprocessor","seriesItem","candlestickLayout","candleWidth","calculateCandleWidth","cDimIdx","vDimIdx","cDimI","vDimsI","openDimI","closeDimI","lowestDimI","highestDimI","largeProgress","normalProgress","axisDimVal","openVal","closeVal","lowestVal","highestVal","ocLow","ocHigh","ocLowPoint","getPoint","ocHighPoint","lowestPoint","highestPoint","addBodyEnd","subPixelOptimizePoint","hasDojiColor","getSign","makeBrushRect","point1","point2","subPixelOptimize","pmin","pmax","barMaxWidth","parsePercent","barMinWidth","preprocessor","isEC4CompatibleStyle","elType","hasOwnTextContentOption","hasOwnTextConfig","hasOwn","convertFromEC4CompatibleStyle","hostStyle","isNormal","srcStyle","textConfig","textContentStyle","hasOwnPos","convertEC4CompatibleRichItem","richItem","convertToEC4StyleForCustomSerise","itemStl","txStl","txCfg","isInside","hostFill","convertToEC4RichItem","textFillNotSet","LEGACY_TRANSFORM_PROPS_MAP","LEGACY_TRANSFORM_PROPS","reduce","TRANSFORMABLE_PROPS","ELEMENT_ANIMATABLE_PROPS","transitionInnerStore","getElementAnimationConfig","animationType","elOption","parentModel","animationProp","config","getAnimationConfig","userDuring","duringCall","applyUpdateTransition","animatableModel","clearStyle","styleOpt","transFromProps","propsToSet","prepareTransformAllPropsFinal","paths","optionPaths","prepareShapeOrExtraAllPropsFinal","prepareTransformTransitionFrom","prepareShapeOrExtraTransitionFrom","prepareStyleTransitionFrom","applyPropsDirectly","applyMiscProps","enterFromProps_1","propName","prop","applyPropsTransition","updateLeaveTo","leaveToProps","applyLeaveTransition","onRemove","parent_1","isTransitionAll","transition","allPropsFinal","animators","animator","Displayable","tmpDuringScope","transitionDuringAPI","extra","scope","latestUserDuring","scopeUserDuring","mainAttr","fromEl","attrOpt","elPropsInAttr","transFromPropsInAttr","attrTransition","transitionKeys","normalizeToArray","elVal","elPropsInAttrKeys","isNonStyleTransitionEnabled","allProps","allPropsInAttr","keysInAttr","cloneValue","legacyName","xyName","legacyArr","fromElStyle","transFromStyleProps","styleTransition","elTransition","animationProps","animationStyleProps","styleKeys","optVal","isArrayLike","getStateToRestore","KEYFRAME_EXCLUDE_KEYS","stopPreviousKeyframeAnimationAndRestore","applyKeyframeAnimation","animationOpts","singleAnimationOpts","keyframes","duration","stateToRestore","targetPropName","kf","kfValues","propKeys","filter","savedTarget","installSimple","installAxisPointer","CalendarModel","mergeAndNormalizeLayoutParams","raw","cellSize","cellSizeArr","ignoreSize","hvIdx","sizeCalculable","CalendarView","calendarModel","rangeData","localeModel","itemRectStyleModel","sw","sh","self","show","firstDay","addPoints","date","rs","poyline","parsedDate","tmpD","formatter","formatTplSimple","aligns","yearLabel","pos","xc","yc","posPoints","content","yearText","createTextStyle","isCenter","vAlign","monthLabel","nameMap","termPoints","getLocaleModel","labelSilent","firstDayPoints","name_1","monthText","isStart","dayLabel","firstDayOfWeek","dayOfWeekShort","day","weekText","PROXIMATE_ONE_DAY","Calendar","numberUtil.parseDate","mStr","dStr","weeks","whNames","layoutParams","cellNumbers","cellSizeSpecified","whGlobal","calendarRect","layout.getLayoutRect","dayInfo","week","nthWeek","contentRect","nthX","nthY","getCoordSys","pixel","normalizedRange","rangeStr","parsedRange","reversed","allDay","startDateNum","endDateNum","dateNum","rangeInfo","nthDay","calendarList","calendar","mainType","simpleCoordSysInjectionProvider","setKeyInfoToNewElOption","resultItem","newElOption","existElOption","newElParentOption","isSetLoc","isSet","mergeNewElOptionToExist","existList","newElOptCopy","$action","copyLayoutParams","copyTransitionInfo","TRANSITION_PROPS_TO_COPY","ROOT_TRANSITION_PROPS_TO_COPY","targetProp","setLayoutInfoToExist","existItem","existingGroupOpt","newGroupOpt","GraphicComponentModel","elements","newList","flattenedList","mappingResult","modelUtil.mappingToExists","elOptionsToUpdate","optionList","parentOption","children","els","nonShapeGraphicElements","graphicUtil.Group","graphicUtil.Image","graphicUtil.Text","modelUtil.makeInner","GraphicComponentView","graphicModel","elMap","rootGroup","globalZ","globalZLevel","id","modelUtil.convertOptionIdName","elExisting","parentId","targetElParent","elOptionStyle","textContentOption","convertResult","elOptionCleaned","getCleanedElOption","isMerge","isReplace","el_1","createEl","updateCommonAttrs","removeEl","el_2","textContentExisting","clipPathOption","clipPathType","newEl","elInner","setEventData","graphicUtil.setTooltipConfig","elOptions","apiWidth","apiHeight","parentEl","isParentRoot","parentElInner","containerInfo","layoutPos","layouted","layoutUtil.positionElement","animatePos","zrUtil.indexOf","graphicType","Clz","zrUtil.hasOwn","graphicUtil.getShapeClass","existElParent","defaultZ","defaultZlevel","zrUtil.retrieve2","layoutUtil.LOCATION_PARAMS","eventData","graphicOption","DATA_ZOOM_AXIS_DIMENSIONS","SERIES_COORDS","isCoordSupported","getAxisMainType","findEffectedDataZooms","axisRecords","effectedModels","effectedModelMap","dataZoomModel","addToEffected","foundNewLink","processSingle","isLinked","dataZoom","markAxisControlled","isLink","axisIdxArr","collectReferCoordSysModelInfo","coordSysInfoWrap","coordSysModel","coordSysUid","DataZoomAxisInfo","axisCmptIdx","DataZoomModel","inputRawOption","retrieveRawOption","settledOption","names","optionOrient","targetAxisIndexMap","hasAxisSpecified","axisInfo","refering","MULTIPLE_REFERRING","needAuto","setParallelAxis","gridModel_1","axModel","globalOption","rangePropMode","rangeModeInOption","percentSpecified","valueSpecified","firstAxisModel","axisProxy","firstProxy","axisDimList","j","proxy","SelectDataZoomModel","DataZoomView","SelectDataZoomView","numberUtil.asc","AxisProxy","seriesModels","axisMainType","percentExtent","percentWindow","valueWindow","hasPropModeValue","boundPercent","boundValue","numberUtil.linearMap","spans","restrictSet","fromWindow","toWindow","fromExtent","toExtent","toValue","suffix","targetSeries","calculateDataExtent","dataWindow","filterMode","seriesData","dataDims","store_1","dataDimIndices_1","leftOut","rightOut","hasValue","thisHasValue","thisLeftOut","thisRightOut","isInWindow","minMaxSpan","minMax","percentSpan","valueSpan","numberUtil.getPixelPrecision","rawExtentInfo","unionAxisExtentFromData","rawExtentResult","ensureScaleRawExtentInfo","dataZoomProcessor","eachAxisModel","proxyList","seriesModelMap","percentRange","valueRange","installDataZoomAction","installed","installCommon","SelectZoomModel","SelectZoomView","ToolboxFeature","features","registerFeature","ctor","getFeature","ToolboxModel","featureOpt","featureName","Feature","featureManager.getFeature","ToolboxView","toolboxModel","itemSize","isVertical","featureOpts","featureNames","processFeature","oldName","featureModel","Model","feature","isUserFeatureName","getUID","isToolboxFeature","createIconPaths","iconName","iconPaths","iconStyleModel","iconStyleEmphasisModel","icons","titles","iconsMap","titlesMap","iconStr","graphic.createIcon","pathEmphasisState","ZRText","getFont","graphic.setTooltipConfig","hoverStyle","defaultTextPosition","refContainer","boxLayoutParams","padding","viewRect","box","positionElement","listComponentHelper.makeBackground","icon","titleText","emphasisTextConfig","emphasisTextState","emphasisTextStyle","textContain.getBoundingRect","offsetX","offsetY","needPutOnTop","topOffset","SaveAsImage","title","isSvg","url","browser","env","$a","evt","parts","base64Encoded","bstr","filename","u8arr","blob","cw","doc","lang","html","tab","INNER_STACK_KEYWORD","radioTypes","MagicType","availableIcons","seriesIndex","seriesOptGenreator","generateNewSeriesTypes","seriesId","newSeriesOpt","radio","newTitle","currentType","isStack","BLOCK_SPLITER","ITEM_SPLITER","groupSeries","seriesGroupByCategoryAxis","otherSeries","meta","assembleSeriesWithCategoryAxis","groups","tables","headers","series","columns","lines","assembleOtherSeries","argLen","getContentFromModel","str","trim","isTSVFormat","block","firstLine","itemSplitRegex","parseTSVContents","tsv","tsvLines","header","parseListContents","seriesName","hasName","parseContents","blockMetaList","blocks","blockMeta","axisKey","DataView","container","root","viewMain","textarea","optionToContent","contentToOption","htmlOrDom","zrUtil.isDom","buttonContainer","buttonStyle","closeButton","refreshButton","addEventListener","tryMergeDataOption","originalData","original","newValIsObject","shouldDeleteName","newSeriesOptList","seriesOpt","push","newSnapshot","storedSnapshots","getStoreSnapshots","batchItem","dataZoomId","snapshot","pop","head","clear","RestoreOption","history.clear","INCLUDE_FINDER_MAIN_TYPES","BrushTargetManager","foundCpts","parseFinder","targetInfoBuilders","builder","coordRange","coordConvert","diffProcessor","targetInfo","rangeOffset","getScales","getDefaultBrushType","brushHelper.makeRectPanelClipPath","brushHelper.makeRectIsTargetByCursor","brushHelper.makeLinearBrushOtherExtent","targetInfoList","areaPanelId","targetInfoMatchers","formatMinMax","modelUtilParseFinder","xAxisModels","yAxisModels","gridModels","gridModelMap","xAxesHas","yAxesHas","panelRectBuilders","geoModel","axisConvert","to","rangeOrCoordRange","xminymin","xmaxymax","values","xyMinMax","axisNameIndex","axisDiffProcessor","refer","scales","xyMinMaxCurr","xyMinMaxOrigin","sizeCurr","getSize","sizeOrigin","DATA_ZOOM_ID_BASE","makeInternalComponentId","DataZoomFeature","updateZoomBtnStatus","updateBackBtnStatus","handlers","eventParam","brushTargetManager","makeAxisFinder","setBatch","history.push","findDataZoom","found","dzModel","has","batch","nextActive","history.pop","dzFeatureModel","history.count","view","zoomActive","registerInternalOptionCreator","featureDataZoomPath","dzOptions","finderResult","buildInternalOptions","axisIndexPropName","newOpt","DataZoom","Restore","installDataZoomSelect","hasKeys","createVisualMappings","stateList","supplementVisualOption","visualMappings","mappings","createMappings","visualData","mappingOption","Creater","replaceVisualOption","applyVisual","getValueState","dimension","visualTypesMap","getVisual","getItemVisualFromData","setVisual","setItemVisualFromData","eachItem","valueOrIndex","rawDataItem","valueState","incrementalApplyVisual","TimelineModel","currentIndex","dataArr","processedDataArr","convertOptionIdName","dimType","SliderTimelineModel","DataFormatMixin","TimelineView","TimelineAxis","PI","labelDataIndexStore","SliderTimelineView","timelineModel","layoutInfo_1","mainGroup_1","labelGroup","axis_1","createTooltipMarkup","labelPosOpt","getViewRect","parsedLabelPos","labelAlignMap","labelBaselineMap","rotationMap","mainLength","controlModel","showControl","controlSize","controlGap","sizePlusGap","labelRotation","playPosition","prevBtnPosition","nextBtnPosition","controlPosition","showPlayBtn","showPrevBtn","showNextBtn","xLeft","xRight","layoutInfo","mainGroup","matrix.create","rotateOriginX","rotateOriginY","matrix.translate","matrix.rotate","viewBound","getBound","mainBound","labelBound","mainPosition","labelsPosition","mainBoundIdx","toBound","setOrigin","targetGroup","from","boundIdx","newGroup","progressLine","tick","itemStyleModel","hoverStyleModel","progressStyleModel","symbolOpt","giveSymbol","enableHoverEmphasis","labelModel","labels","normalLabelModel","hoverLabelModel","progressLabelModel","playState","makeBtn","onclick","willRotate","iconSize","btn","makeControlIcon","pointerModel","me","pointer","pointerMoveTo","nextState","mousePos","toCoord","targetDataIndex","vertex","trans","graphic.applyTransform","axisCoord","tickSymbols","tickLabels","OrdinalScale","TimeScale","layout.createBoxLayoutReference","objPath","noAnimation","animationCfg","installTimelineAction","timelinePreprocessor","timelineOpt","compatibleEC2","ec2Types","transferItem","controlStyle","dataItem","itemStyleEmphasis","labelNormal","excludeLabelAttr","attr","checkMarkerInSeries","seriesOpts","markerType","seriesOptArr","fillLabel","defaultEmphasis","MarkerModel","hostSeries","createdBySelf","markerOpt","markerModel","multipleSeries","dataType","itemName","hasXOrY","hasXAndY","markerTypeCalculatorWithExtent","otherDataDim","targetDataDim","otherCoordIndex","targetCoordIndex","coordArr","calcDataDim","numCalculate","coordArrValue","numberUtil.getPrecision","markerTypeCalculator","dataTransform","getAxisInfo","coordInfo","dataDimToCoordDim","dataDim","dimItem","dataFilter","zoneFilter","item1","item2","createMarkerDimValueGetter","inCoordSys","parseDataValue","valueDataDim","sum_1","count_1","MarkerView","markerGroupMap","drawGroup","seriesModelList","isBlur","enterBlur","leaveBlur","markerDraw","traverseUpdateZ","MarkLineModel","masterMarkerModel","markLineTransform","mlModel","itemArray","mlType","retrieve","markerHelper.getAxisInfo","getStackedDimension","markerHelper.numCalculate","valueIndex","mlFrom","mlTo","normalizedItem","markerHelper.dataTransform","isInfinity","ifMarkLineHasOnlyDim","fromCoord","otherDimIndex","markLineFilter","markerHelper.dataFilter","updateSingleMarkerEndLayout","isFrom","xPx","numberUtil.parsePercent","yPx","MarkLineView","markLineModel","mlData_1","fromData_1","toData_1","lineDrawMap","mlData","createList","fromData","toData","updateDataVisualAndLayout","getVisualFromData","coordDimsInfos","optData","markerHelper.createMarkerDimValueGetter","MarkAreaModel","markAreaTransform","maModel","item0","lt","rb","ltCoord","rbCoord","mergeAll","ifMarkAreaHasOnlyDim","markAreaFilter","markerHelper.zoneFilter","getSingleMarkerEndPoint","pointValue0","pointValue1","clampPointValue0","clampPointValue1","pointValue","dimPermutations","MarkAreaView","markAreaModel","areaData_1","areaGroupMap","polygonGroup","areaData","xPointExtent","yPointExtent","overlapped","allClipped","colorUtil.modifyAlpha","coordDimsInfos_1","InsideZoomModel","setViewInfoToCoordSysRecord","getRange","coordSysRecord","dzInfo","disposeCoordSysRecordIfNeeded","coordSysRecordMap","coordSysKeyArr","coordSysKey","dataZoomInfoMap","dzUid","disposeCoordSysRecord","createCoordSysRecord","containsPoint","dispatchAction","method","mergeControllerParams","prefix","typePriority","preventDefaultMouseMove","dataZoomInfo","oneType","installDataZoomRoamProcessor","apiInner","dzReferCoordSysWrap","dzCoordSysInfo","firstDzInfo","firstDzKey","controllerParams","throttleUtil.createOrUpdate","InsideZoomView","roams.setViewInfoToCoordSysRecord","getRangeHandlers","roams.disposeCoordSysRecordIfNeeded","coordSysMainType","lastRange","directionInfo","getDirectionInfo","percentPoint","makeMover","getPercentDelta","percentDelta","oldPoint","newPoint","radiusExtent","angleExtent","SliderZoomModel","DEFAULT_FRAME_BORDER_WIDTH","DEFAULT_FILLER_SIZE","DEFAULT_MOVE_HANDLE_SIZE","HORIZONTAL","VERTICAL","LABEL_GAP","SHOW_DATA_SHADOW_SERIES_TYPE","REALTIME_ANIMATION_CONFIG","SliderZoomView","throttle.createOrUpdate","throttle.clear","barGroup","showMoveHandle","moveHandleSize","coordRect","edgeGap","positionInfo","layout.getLayoutParams","layoutRect","location","targetAxisModel","sliderGroup","otherAxisInverse","brushSelect","clickPanel","oldSize","candlestickDim","otherDim","polygonPts","polylinePts","thisDataExtent_1","otherDataExtent_1","otherOffset","otherShadowExtent_1","thisShadowExtent","areaPoints_1","linePoints_1","step_1","normalizationConstant_1","isTimeAxis_1","thisCoord_1","stride_1","lastIsEmpty_1","thisValue","otherValue","isEmpty","otherCoord","createDataShadowGroup","isSelectedArea","showDataShadow","thisAxis","getOtherDim","thisDim","displayables","handles","handleLabels","filler","symbolBuildProxies","getCursor","bRect","handleColor","textStyleModel","handleLabel","handleLabelShow","actualMoveZone","moveHandleHeight","moveHandle_1","moveHandleIcon","moveZoneExpandSize","viewExtent","viewExtend","nonRealtime","displaybles","handleInterval","handle","handleHeight","dataShadowSegs","segIntervals","segGroup","labelTexts","dataInterval","orderedHandleEnds","setLabel","barTransform","textPoint","labelFormatter","labelPrecision","valueStr","isEmphasis","normalShow","emphasisHandleLabel","emphasisShow","toShow","changed","realtime","localPoint","center","graphic.Point","brushRect","brushShape","brushEndTime","mouseX","mouseY","brushStart","endPoint","coordSysInfoList","installDataZoomInside","installDataZoomSlider","visualDefault","mapVisual","eachVisual","VisualMapModel","visualSolution.replaceVisualOption","visualSolution.createVisualMappings","optionSeriesId","optionSeriesIndex","modelUtil.queryReferringComponents","is","edgeSymbols","dataBound","isMinMax","textValue","toFixed","optDim","dimNames","completeSingle","completeInactive","completeController","stateExist","stateAbsent","optExist","optAbsent","defa","symbolExists","symbolSizeExists","inactiveColor","itemSymbol","defaultSymbol","visuals","max_1","selected","getColorVisual","DEFAULT_BAR_BOUND","ContinuousModel","unboundedRange","dataIndices","oVals","getColorStopValues","iVals","stops","setStop","iIdx","oIdx","iLen","oLen","first","stopsLen","visualMapModel","stopValues","VisualMapView","formatUtil.normalizeCssArray","targetValue","visualCluster","forceState","visualObj","defaultColor","visualMapping","layout.positionElement","paramsSet","getItemAlign","modelOption","itemAlign","ecSize","realIndex","reals","fakeValue","layoutInput","rParam","makeHighDownBatch","HOVER_LINK_SIZE","HOVER_LINK_OUT","ContinuousView","dataRangeText","endsIndex","textGap","shapes","useHandle","helper.getItemAlign","gradientBarGroup","createPolygon","textRect","textSize","onDrift","onDragEnd","handleThumb","cursor","setAsHighDownDispatcher","handleLabelPoint","indicator","indicatorStyle","indicatorLabel","indicatorLabelPoint","useHoverLinkOnHandle","sizeExtent","forSketch","outOfRangeHandleEnds","inRangeHandleEnds","visualInRange","visualOutOfRange","symbolSizes","barPoints","LinearGradient","sampleNumber","currValue","handleThumbs","minimumOffset","cursorValue","rangeSymbol","halfHoverLinkSize","oldIndicatorPos","indicatorNewProps","labelNewProps","cursorPos","hoverOnBar","getHalfHoverLinkSize","hoverRange","oldBatch","newBatch","resultBatches","modelUtil.compressBatches","helper.makeHighDownBatch","findEventDispatcher","currECData","dataModel","element","global","hoverLinkDataSize","hoverLinkOnHandle","visualMapActionInfo","visualMapActionHander","visualMapEncodingHandlers","resetDefines","visualSolution.incrementalApplyVisual","resultVisual","mapping","visualMapPreprocessor","visualMap","pieces","PiecewiseModel","mode","resetMethods","visualTypesInPieces","exists","hasSel_1","pIdx","representValue","pieceInterval","edge","curr","outPieceList","splitStep","reformIntervals","normalizeReverse","pieceListItem","closeList","infinityList","useMinMax","lg","PiecewiseVisualMapView","viewData","endsText","showLabel","zrUtil.retrieve","silent","itemGroup","visualState","layout.box","onHoverLink","viewPieceList","shapeParam","selectedMode","newKey","o","PiecewiseView","installVisualMapContinuous","installVisualMapPiecewise","handleIcon","dataZoomPartial","echartsGridDefault"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132]}