import{d as oe,r as A,o as He,Y as K,c as C,a as y,e as O,b as g,t as R,a9 as be,f as a,i as z,g as ge,h as V,_ as tt,m as Ot,a2 as nt,aw as St,a3 as it,ax as It,ay as _t,az as wt,aA as Re,aB as kt,aC as Ct,aD as Mt,aE as ke,P as ne,q as D,Q as T,a1 as ot,p as B,aF as ee,aG as Lt,y as j,s as lt,aH as Vt,aI as Pt,aJ as Tt,aK as At,aL as Dt,aM as Bt,af as Et,ai as Ht,aN as xe,aO as Ke,al as Ft,as as Ue,aP as Oe,aQ as $t,aR as ze,at as Ce,aS as Rt,aT as ue,aq as Kt,a5 as te,x as je,aU as Ut,aV as zt,F as Se,v as st,Z as at,j as G,aW as jt,aX as Ae,aY as Nt,a8 as Gt,aZ as Ie,a_ as Zt,u as rt,C as qt,$ as ut,l as Xt,H as Ne,B as Fe,a$ as Yt,b0 as Wt,K as dt,J as De,b1 as Ge,N as Jt,b2 as Qt,b3 as de,D as en,b4 as tn,a0 as nn,k as on}from"./index-BoH2X4lE.js";import{s as ln}from"./index-C37AQFYw.js";import{s as sn,a as an,_ as ct,b as rn}from"./index-6JvTfbEk.js";import{_ as un}from"./check-BvUZzYk1.js";import{u as dn,E as cn,e as pn,a as fn,b as hn,c as mn,d as bn,i as gn}from"./installCanvasRenderer-Db7nzp7W.js";import{a as vn,c as yn,b as xn,h as On,j as Sn,f as In,k as _n,l as wn,m as kn,n as Cn,o as Mn,i as Ln,g as Vn,p as Pn,d as Tn}from"./chartZoom-BxGMNc4V.js";const An={class:"flex flex-row"},Dn={class:"flex flex-col grow"},Bn={for:"selAvailableIndicator",class:"form-label"},pt=oe({__name:"PlotIndicatorSelect",props:{modelValue:{required:!1,default:"",type:String},columns:{required:!0,type:Array},label:{required:!0,type:String}},emits:["update:modelValue","indicatorSelected"],setup(t,{emit:e}){const n=t,o=e,l=A("");function i(){o("indicatorSelected",l.value),o("update:modelValue",l.value)}function s(){l.value="",i()}return He(()=>{l.value=n.modelValue}),K(l,()=>{i()}),K(()=>n.modelValue,u=>{l.value=u}),(u,d)=>{const c=be,r=tt,I=ge;return y(),C("div",An,[O("div",Dn,[O("label",Bn,R(t.label),1),g(c,{modelValue:a(l),"onUpdate:modelValue":d[0]||(d[0]=M=>z(l)?l.value=M:null),options:t.columns,size:"small",clearable:!1,filter:"","auto-filter-focus":""},null,8,["modelValue","options"])]),g(I,{size:"small",title:"Abort",class:"ms-1 mt-auto",severity:"secondary",onClick:s},{icon:V(()=>[g(r)]),_:1})])}}}),En={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Hn(t,e){return y(),C("svg",En,e[0]||(e[0]=[O("path",{fill:"currentColor",d:"M19.78 3h-8.56C10.55 3 10 3.55 10 4.22V8h6v6h3.78c.67 0 1.22-.55 1.22-1.22V4.22C21 3.55 20.45 3 19.78 3m-7.34 3.67a1.23 1.23 0 1 1 0-2.46a1.23 1.23 0 0 1 1.23 1.23c0 .68-.55 1.23-1.23 1.23m6.12 6.11a1.23 1.23 0 1 1-.02-2.46c.68-.01 1.23.54 1.24 1.24c-.01.67-.55 1.21-1.22 1.22m0-6.11a1.23 1.23 0 1 1-.02-2.46a1.231 1.231 0 0 1 .02 2.46M4.22 10h8.56A1.22 1.22 0 0 1 14 11.22v8.56c0 .67-.55 1.22-1.22 1.22H4.22C3.55 21 3 20.45 3 19.78v-8.56c0-.67.55-1.22 1.22-1.22m4.28 4.28c-.67 0-1.22.55-1.22 1.22s.55 1.22 1.22 1.22s1.22-.55 1.22-1.22a1.22 1.22 0 0 0-1.22-1.22m-3.06-3.06c-.67 0-1.22.55-1.22 1.22a1.22 1.22 0 0 0 1.22 1.22c.67 0 1.22-.55 1.22-1.22s-.55-1.22-1.22-1.22m6.11 6.11c-.67 0-1.22.55-1.22 1.22s.55 1.22 1.22 1.22a1.22 1.22 0 0 0 1.22-1.22c0-.67-.54-1.21-1.21-1.22z"},null,-1)]))}const Fn=Ot({name:"mdi-dice-multiple",render:Hn});var $n=`
    .p-colorpicker {
        display: inline-block;
        position: relative;
    }

    .p-colorpicker-dragging {
        cursor: pointer;
    }

    .p-colorpicker-preview {
        width: dt('colorpicker.preview.width');
        height: dt('colorpicker.preview.height');
        padding: 0;
        border: 0 none;
        border-radius: dt('colorpicker.preview.border.radius');
        transition:
            background dt('colorpicker.transition.duration'),
            color dt('colorpicker.transition.duration'),
            border-color dt('colorpicker.transition.duration'),
            outline-color dt('colorpicker.transition.duration'),
            box-shadow dt('colorpicker.transition.duration');
        outline-color: transparent;
        cursor: pointer;
    }

    .p-colorpicker-preview:enabled:focus-visible {
        border-color: dt('colorpicker.preview.focus.border.color');
        box-shadow: dt('colorpicker.preview.focus.ring.shadow');
        outline: dt('colorpicker.preview.focus.ring.width') dt('colorpicker.preview.focus.ring.style') dt('colorpicker.preview.focus.ring.color');
        outline-offset: dt('colorpicker.preview.focus.ring.offset');
    }

    .p-colorpicker-panel {
        background: dt('colorpicker.panel.background');
        border: 1px solid dt('colorpicker.panel.border.color');
        border-radius: dt('colorpicker.panel.border.radius');
        box-shadow: dt('colorpicker.panel.shadow');
        width: 193px;
        height: 166px;
        position: absolute;
        top: 0;
        left: 0;
    }

    .p-colorpicker-panel-inline {
        box-shadow: none;
        position: static;
    }

    .p-colorpicker-content {
        position: relative;
    }

    .p-colorpicker-color-selector {
        width: 150px;
        height: 150px;
        inset-block-start: 8px;
        inset-inline-start: 8px;
        position: absolute;
    }

    .p-colorpicker-color-background {
        width: 100%;
        height: 100%;
        background: linear-gradient(to top, #000 0%, rgba(0, 0, 0, 0) 100%), linear-gradient(to right, #fff 0%, rgba(255, 255, 255, 0) 100%);
    }

    .p-colorpicker-color-handle {
        position: absolute;
        inset-block-start: 0px;
        inset-inline-start: 150px;
        border-radius: 100%;
        width: 10px;
        height: 10px;
        border-width: 1px;
        border-style: solid;
        margin: -5px 0 0 -5px;
        cursor: pointer;
        opacity: 0.85;
        border-color: dt('colorpicker.handle.color');
    }

    .p-colorpicker-hue {
        width: 17px;
        height: 150px;
        inset-block-start: 8px;
        inset-inline-start: 167px;
        position: absolute;
        opacity: 0.85;
        background: linear-gradient(0deg, red 0, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, red);
    }

    .p-colorpicker-hue-handle {
        position: absolute;
        inset-block-start: 150px;
        inset-inline-start: 0px;
        width: 21px;
        margin-inline-start: -2px;
        margin-block-start: -5px;
        height: 10px;
        border-width: 2px;
        border-style: solid;
        opacity: 0.85;
        cursor: pointer;
        border-color: dt('colorpicker.handle.color');
    }
`,Rn={root:"p-colorpicker p-component",preview:function(e){var n=e.props;return["p-colorpicker-preview",{"p-disabled":n.disabled}]},panel:function(e){var n=e.instance,o=e.props;return["p-colorpicker-panel",{"p-colorpicker-panel-inline":o.inline,"p-disabled":o.disabled,"p-invalid":n.$invalid}]},colorSelector:"p-colorpicker-color-selector",colorBackground:"p-colorpicker-color-background",colorHandle:"p-colorpicker-color-handle",hue:"p-colorpicker-hue",hueHandle:"p-colorpicker-hue-handle"},Kn=nt.extend({name:"colorpicker",style:$n,classes:Rn}),Un={name:"BaseColorPicker",extends:it,props:{defaultColor:{type:null,default:"ff0000"},inline:{type:Boolean,default:!1},format:{type:String,default:"hex"},tabindex:{type:String,default:null},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},appendTo:{type:[String,Object],default:"body"},inputId:{type:String,default:null},panelClass:null,overlayClass:null},style:Kn,provide:function(){return{$pcColorPicker:this,$parentInstance:this}}},ft={name:"ColorPicker",extends:Un,inheritAttrs:!1,emits:["change","show","hide"],data:function(){return{overlayVisible:!1}},hsbValue:null,localHue:null,outsideClickListener:null,documentMouseMoveListener:null,documentMouseUpListener:null,scrollHandler:null,resizeListener:null,hueDragging:null,colorDragging:null,selfUpdate:null,picker:null,colorSelector:null,colorHandle:null,hueView:null,hueHandle:null,watch:{modelValue:{immediate:!0,handler:function(e){this.hsbValue=this.toHSB(e),this.selfUpdate?this.selfUpdate=!1:this.updateUI()}}},beforeUnmount:function(){this.unbindOutsideClickListener(),this.unbindDragListeners(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.picker&&this.autoZIndex&&ke.clear(this.picker),this.clearRefs()},mounted:function(){this.updateUI()},methods:{pickColor:function(e){var n=this.colorSelector.getBoundingClientRect(),o=n.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),l=n.left+document.body.scrollLeft,i=Math.floor(100*Math.max(0,Math.min(150,(e.pageX||e.changedTouches[0].pageX)-l))/150),s=Math.floor(100*(150-Math.max(0,Math.min(150,(e.pageY||e.changedTouches[0].pageY)-o)))/150);this.hsbValue=this.validateHSB({h:this.localHue,s:i,b:s}),this.selfUpdate=!0,this.updateColorHandle(),this.updateInput(),this.updateModel(e)},pickHue:function(e){var n=this.hueView.getBoundingClientRect().top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0);this.localHue=Math.floor(360*(150-Math.max(0,Math.min(150,(e.pageY||e.changedTouches[0].pageY)-n)))/150),this.hsbValue=this.validateHSB({h:this.localHue,s:100,b:100}),this.selfUpdate=!0,this.updateColorSelector(),this.updateHue(),this.updateModel(e),this.updateInput()},updateModel:function(e){var n=this.d_value;switch(this.format){case"hex":n=this.HSBtoHEX(this.hsbValue);break;case"rgb":n=this.HSBtoRGB(this.hsbValue);break;case"hsb":n=this.hsbValue;break}this.writeValue(n,e),this.$emit("change",{event:e,value:n})},updateColorSelector:function(){if(this.colorSelector){var e=this.validateHSB({h:this.hsbValue.h,s:100,b:100});this.colorSelector.style.backgroundColor="#"+this.HSBtoHEX(e)}},updateColorHandle:function(){this.colorHandle&&(this.colorHandle.style.left=Math.floor(150*this.hsbValue.s/100)+"px",this.colorHandle.style.top=Math.floor(150*(100-this.hsbValue.b)/100)+"px")},updateHue:function(){this.hueHandle&&(this.hueHandle.style.top=Math.floor(150-150*this.hsbValue.h/360)+"px")},updateInput:function(){this.$refs.input&&(this.$refs.input.style.backgroundColor="#"+this.HSBtoHEX(this.hsbValue))},updateUI:function(){this.updateHue(),this.updateColorHandle(),this.updateInput(),this.updateColorSelector()},validateHSB:function(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}},validateRGB:function(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}},validateHEX:function(e){var n=6-e.length;if(n>0){for(var o=[],l=0;l<n;l++)o.push("0");o.push(e),e=o.join("")}return e},HEXtoRGB:function(e){var n=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return{r:n>>16,g:(n&65280)>>8,b:n&255}},HEXtoHSB:function(e){return this.RGBtoHSB(this.HEXtoRGB(e))},RGBtoHSB:function(e){var n={h:0,s:0,b:0},o=Math.min(e.r,e.g,e.b),l=Math.max(e.r,e.g,e.b),i=l-o;return n.b=l,n.s=l!==0?255*i/l:0,n.s!==0?e.r===l?n.h=(e.g-e.b)/i:e.g===l?n.h=2+(e.b-e.r)/i:n.h=4+(e.r-e.g)/i:n.h=-1,n.h*=60,n.h<0&&(n.h+=360),n.s*=100/255,n.b*=100/255,n},HSBtoRGB:function(e){var n={r:null,g:null,b:null},o=Math.round(e.h),l=Math.round(e.s*255/100),i=Math.round(e.b*255/100);if(l===0)n={r:i,g:i,b:i};else{var s=i,u=(255-l)*i/255,d=(s-u)*(o%60)/60;o===360&&(o=0),o<60?(n.r=s,n.b=u,n.g=u+d):o<120?(n.g=s,n.b=u,n.r=s-d):o<180?(n.g=s,n.r=u,n.b=u+d):o<240?(n.b=s,n.r=u,n.g=s-d):o<300?(n.b=s,n.g=u,n.r=u+d):o<360?(n.r=s,n.g=u,n.b=s-d):(n.r=0,n.g=0,n.b=0)}return{r:Math.round(n.r),g:Math.round(n.g),b:Math.round(n.b)}},RGBtoHEX:function(e){var n=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];for(var o in n)n[o].length===1&&(n[o]="0"+n[o]);return n.join("")},HSBtoHEX:function(e){return this.RGBtoHEX(this.HSBtoRGB(e))},toHSB:function(e){var n;if(e)switch(this.format){case"hex":n=this.HEXtoHSB(e);break;case"rgb":n=this.RGBtoHSB(e);break;case"hsb":n=e;break}else n=this.HEXtoHSB(this.defaultColor);return this.localHue==null||!this.overlayVisible?this.localHue=n.h:n.h=this.localHue,n},onOverlayEnter:function(e){this.updateUI(),this.alignOverlay(),this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.autoZIndex&&ke.set("overlay",e,this.baseZIndex,this.$primevue.config.zIndex.overlay),this.$attrSelector&&e.setAttribute(this.$attrSelector,""),this.$emit("show")},onOverlayLeave:function(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.clearRefs(),this.$emit("hide")},onOverlayAfterLeave:function(e){this.autoZIndex&&ke.clear(e)},alignOverlay:function(){this.appendTo==="self"?Ct(this.picker,this.$refs.input):Mt(this.picker,this.$refs.input)},onInputClick:function(){this.disabled||(this.overlayVisible=!this.overlayVisible)},onInputKeydown:function(e){switch(e.code){case"Space":this.overlayVisible=!this.overlayVisible,e.preventDefault();break;case"Escape":case"Tab":this.overlayVisible=!1;break}},onInputBlur:function(e){var n,o;(n=(o=this.formField).onBlur)===null||n===void 0||n.call(o)},onColorMousedown:function(e){this.disabled||(this.bindDragListeners(),this.onColorDragStart(e))},onColorDragStart:function(e){this.disabled||(this.colorDragging=!0,this.pickColor(e),this.$el.setAttribute("p-colorpicker-dragging","true"),!this.isUnstyled&&Re(this.$el,"p-colorpicker-dragging"),e.preventDefault())},onDrag:function(e){this.colorDragging&&(this.pickColor(e),e.preventDefault()),this.hueDragging&&(this.pickHue(e),e.preventDefault())},onDragEnd:function(){this.colorDragging=!1,this.hueDragging=!1,this.$el.setAttribute("p-colorpicker-dragging","false"),!this.isUnstyled&&kt(this.$el,"p-colorpicker-dragging"),this.unbindDragListeners()},onHueMousedown:function(e){this.disabled||(this.bindDragListeners(),this.onHueDragStart(e))},onHueDragStart:function(e){this.disabled||(this.hueDragging=!0,this.pickHue(e),!this.isUnstyled&&Re(this.$el,"p-colorpicker-dragging"),e.preventDefault())},isInputClicked:function(e){return this.$refs.input&&this.$refs.input.isSameNode(e.target)},bindDragListeners:function(){this.bindDocumentMouseMoveListener(),this.bindDocumentMouseUpListener()},unbindDragListeners:function(){this.unbindDocumentMouseMoveListener(),this.unbindDocumentMouseUpListener()},bindOutsideClickListener:function(){var e=this;this.outsideClickListener||(this.outsideClickListener=function(n){e.overlayVisible&&e.picker&&!e.picker.contains(n.target)&&!e.isInputClicked(n)&&(e.overlayVisible=!1)},document.addEventListener("click",this.outsideClickListener,!0))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener,!0),this.outsideClickListener=null)},bindScrollListener:function(){var e=this;this.scrollHandler||(this.scrollHandler=new wt(this.$refs.container,function(){e.overlayVisible&&(e.overlayVisible=!1)})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.overlayVisible&&!_t()&&(e.overlayVisible=!1)},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},bindDocumentMouseMoveListener:function(){this.documentMouseMoveListener||(this.documentMouseMoveListener=this.onDrag.bind(this),document.addEventListener("mousemove",this.documentMouseMoveListener))},unbindDocumentMouseMoveListener:function(){this.documentMouseMoveListener&&(document.removeEventListener("mousemove",this.documentMouseMoveListener),this.documentMouseMoveListener=null)},bindDocumentMouseUpListener:function(){this.documentMouseUpListener||(this.documentMouseUpListener=this.onDragEnd.bind(this),document.addEventListener("mouseup",this.documentMouseUpListener))},unbindDocumentMouseUpListener:function(){this.documentMouseUpListener&&(document.removeEventListener("mouseup",this.documentMouseUpListener),this.documentMouseUpListener=null)},pickerRef:function(e){this.picker=e},colorSelectorRef:function(e){this.colorSelector=e},colorHandleRef:function(e){this.colorHandle=e},hueViewRef:function(e){this.hueView=e},hueHandleRef:function(e){this.hueHandle=e},clearRefs:function(){this.picker=null,this.colorSelector=null,this.colorHandle=null,this.hueView=null,this.hueHandle=null},onOverlayClick:function(e){It.emit("overlay-click",{originalEvent:e,target:this.$el})}},components:{Portal:St}};function me(t){"@babel/helpers - typeof";return me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(t)}function Ze(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,o)}return n}function qe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ze(Object(n),!0).forEach(function(o){zn(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function zn(t,e,n){return(e=jn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jn(t){var e=Nn(t,"string");return me(e)=="symbol"?e:e+""}function Nn(t,e){if(me(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(me(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Gn=["id","tabindex","disabled"];function Zn(t,e,n,o,l,i){var s=ne("Portal");return y(),C("div",T({ref:"container",class:t.cx("root")},t.ptmi("root")),[t.inline?D("",!0):(y(),C("input",T({key:0,ref:"input",id:t.inputId,type:"text",class:t.cx("preview"),readonly:"",tabindex:t.tabindex,disabled:t.disabled,onClick:e[0]||(e[0]=function(){return i.onInputClick&&i.onInputClick.apply(i,arguments)}),onKeydown:e[1]||(e[1]=function(){return i.onInputKeydown&&i.onInputKeydown.apply(i,arguments)}),onBlur:e[2]||(e[2]=function(){return i.onInputBlur&&i.onInputBlur.apply(i,arguments)})},t.ptm("preview")),null,16,Gn)),g(s,{appendTo:t.appendTo,disabled:t.inline},{default:V(function(){return[g(ot,T({name:"p-connected-overlay",onEnter:i.onOverlayEnter,onLeave:i.onOverlayLeave,onAfterLeave:i.onOverlayAfterLeave},t.ptm("transition")),{default:V(function(){return[t.inline||l.overlayVisible?(y(),C("div",T({key:0,ref:i.pickerRef,class:[t.cx("panel"),t.panelClass,t.overlayClass],onClick:e[11]||(e[11]=function(){return i.onOverlayClick&&i.onOverlayClick.apply(i,arguments)})},qe(qe({},t.ptm("panel")),t.ptm("overlay"))),[O("div",T({class:t.cx("content")},t.ptm("content")),[O("div",T({ref:i.colorSelectorRef,class:t.cx("colorSelector"),onMousedown:e[3]||(e[3]=function(u){return i.onColorMousedown(u)}),onTouchstart:e[4]||(e[4]=function(u){return i.onColorDragStart(u)}),onTouchmove:e[5]||(e[5]=function(u){return i.onDrag(u)}),onTouchend:e[6]||(e[6]=function(u){return i.onDragEnd()})},t.ptm("colorSelector")),[O("div",T({class:t.cx("colorBackground")},t.ptm("colorBackground")),[O("div",T({ref:i.colorHandleRef,class:t.cx("colorHandle")},t.ptm("colorHandle")),null,16)],16)],16),O("div",T({ref:i.hueViewRef,class:t.cx("hue"),onMousedown:e[7]||(e[7]=function(u){return i.onHueMousedown(u)}),onTouchstart:e[8]||(e[8]=function(u){return i.onHueDragStart(u)}),onTouchmove:e[9]||(e[9]=function(u){return i.onDrag(u)}),onTouchend:e[10]||(e[10]=function(u){return i.onDragEnd()})},t.ptm("hue")),[O("div",T({ref:i.hueHandleRef,class:t.cx("hueHandle")},t.ptm("hueHandle")),null,16)],16)],16)],16)):D("",!0)]}),_:1},16,["onEnter","onLeave","onAfterLeave"])]}),_:1},8,["appendTo","disabled"])],16)}ft.render=Zn;function he(){return`#${Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}`}const qn={class:"flex flex-col lg:flex-row justify-between mt-1"},Xn={class:"flex flex-col w-full"},Yn={class:"flex flex-col w-full"},Wn={key:1,class:"flex flex-col mt-2 gap-1 items-center"},Jn=oe({__name:"PlotIndicator",props:{modelValue:{required:!0,type:Object},columns:{required:!0,type:Array}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,o=e,l=A(he()),i=B({get:()=>l.value,set:k=>{!k.startsWith("#")&&(k.length===3||k.length===6)&&/^[0-9a-fA-F]+$/.test(k)&&(k=`#${k}`),l.value=k}}),s=A(ee.line),u=A(Object.keys(ee)),d=A(""),c=A(!1),r=A(""),I=A(3);function M(){i.value=he()}const F=B(()=>{if(c.value||!d.value)return{};const k={color:i.value,type:s.value};return r.value&&s.value===ee.line&&(k.fill_to=r.value),s.value==ee.scatter&&(k.scatterSymbolSize=I.value),{[d.value]:k}});function P(){o("update:modelValue",F.value)}return K(()=>n.modelValue,()=>{if([d.value]=Object.keys(n.modelValue),c.value=!1,d.value&&n.modelValue){const k=n.modelValue[d.value];i.value=k.color||he(),s.value=k.type||ee.line,r.value=k.fill_to||""}},{immediate:!0}),Lt([i,s,r,I],()=>{P()},{debounce:200}),(k,w)=>{const h=be,p=ft,b=an,_=lt,f=Fn,x=ge,E=sn,$=pt,Z=ln;return y(),C("div",null,[O("div",qn,[O("div",Xn,[w[5]||(w[5]=O("label",{for:"plotTypeSelector",class:"form-label"},"Type",-1)),g(h,{id:"plotTypeSelector",modelValue:a(s),"onUpdate:modelValue":w[0]||(w[0]=H=>z(s)?s.value=H:null),class:"text-left",size:"small",options:a(u)},null,8,["modelValue","options"])]),O("div",Yn,[w[6]||(w[6]=O("label",{for:"selAvailableIndicator",class:"colsel"},"Color",-1)),g(E,null,{default:V(()=>[g(b,{class:"p-0!"},{default:V(()=>[g(p,{modelValue:a(i),"onUpdate:modelValue":w[1]||(w[1]=H=>z(i)?i.value=H:null),type:"color",class:"m-auto"},null,8,["modelValue"])]),_:1}),g(_,{id:"colsel",modelValue:a(i),"onUpdate:modelValue":w[2]||(w[2]=H=>z(i)?i.value=H:null),size:"small",class:"grow"},null,8,["modelValue"]),g(b,null,{default:V(()=>[g(x,{severity:"primary",size:"small",onClick:M},{icon:V(()=>[g(f)]),_:1})]),_:1})]),_:1})])]),a(s)===a(ee).line?(y(),j($,{key:0,modelValue:a(r),"onUpdate:modelValue":w[3]||(w[3]=H=>z(r)?r.value=H:null),columns:t.columns,class:"mt-1",label:"Area chart - Fill to (leave empty for line chart)"},null,8,["modelValue","columns"])):D("",!0),a(s)===a(ee).scatter?(y(),C("div",Wn,[w[7]||(w[7]=O("label",{for:"scatterSymbolSize",class:"text-nowrap"},"Scatter symbol size",-1)),g(Z,{id:"scatterSymbolSize",modelValue:a(I),"onUpdate:modelValue":w[4]||(w[4]=H=>z(I)?I.value=H:null),min:0,"show-buttons":"",size:"small","button-layout":"horizontal",class:"text-center w-full"},null,8,["modelValue"])])):D("",!0)])}}});var Qn=`
    .p-listbox {
        display: block;
        background: dt('listbox.background');
        color: dt('listbox.color');
        border: 1px solid dt('listbox.border.color');
        border-radius: dt('listbox.border.radius');
        transition:
            background dt('listbox.transition.duration'),
            color dt('listbox.transition.duration'),
            border-color dt('listbox.transition.duration'),
            box-shadow dt('listbox.transition.duration'),
            outline-color dt('listbox.transition.duration');
        outline-color: transparent;
        box-shadow: dt('listbox.shadow');
    }

    .p-listbox.p-disabled {
        opacity: 1;
        background: dt('listbox.disabled.background');
        color: dt('listbox.disabled.color');
    }

    .p-listbox.p-disabled .p-listbox-option {
        color: dt('listbox.disabled.color');
    }

    .p-listbox.p-invalid {
        border-color: dt('listbox.invalid.border.color');
    }

    .p-listbox-header {
        padding: dt('listbox.list.header.padding');
    }

    .p-listbox-filter {
        width: 100%;
    }

    .p-listbox-list-container {
        overflow: auto;
    }

    .p-listbox-list {
        list-style-type: none;
        margin: 0;
        padding: dt('listbox.list.padding');
        outline: 0 none;
        display: flex;
        flex-direction: column;
        gap: dt('listbox.list.gap');
    }

    .p-listbox-option {
        display: flex;
        align-items: center;
        cursor: pointer;
        position: relative;
        overflow: hidden;
        padding: dt('listbox.option.padding');
        border: 0 none;
        border-radius: dt('listbox.option.border.radius');
        color: dt('listbox.option.color');
        transition:
            background dt('listbox.transition.duration'),
            color dt('listbox.transition.duration'),
            border-color dt('listbox.transition.duration'),
            box-shadow dt('listbox.transition.duration'),
            outline-color dt('listbox.transition.duration');
    }

    .p-listbox-striped li:nth-child(even of .p-listbox-option) {
        background: dt('listbox.option.striped.background');
    }

    .p-listbox .p-listbox-list .p-listbox-option.p-listbox-option-selected {
        background: dt('listbox.option.selected.background');
        color: dt('listbox.option.selected.color');
    }

    .p-listbox:not(.p-disabled) .p-listbox-option.p-listbox-option-selected.p-focus {
        background: dt('listbox.option.selected.focus.background');
        color: dt('listbox.option.selected.focus.color');
    }

    .p-listbox:not(.p-disabled) .p-listbox-option:not(.p-listbox-option-selected):not(.p-disabled).p-focus {
        background: dt('listbox.option.focus.background');
        color: dt('listbox.option.focus.color');
    }

    .p-listbox:not(.p-disabled) .p-listbox-option:not(.p-listbox-option-selected):not(.p-disabled):hover {
        background: dt('listbox.option.focus.background');
        color: dt('listbox.option.focus.color');
    }

    .p-listbox-option-blank-icon {
        flex-shrink: 0;
    }

    .p-listbox-option-check-icon {
        position: relative;
        flex-shrink: 0;
        margin-inline-start: dt('listbox.checkmark.gutter.start');
        margin-inline-end: dt('listbox.checkmark.gutter.end');
        color: dt('listbox.checkmark.color');
    }

    .p-listbox-option-group {
        margin: 0;
        padding: dt('listbox.option.group.padding');
        color: dt('listbox.option.group.color');
        background: dt('listbox.option.group.background');
        font-weight: dt('listbox.option.group.font.weight');
    }

    .p-listbox-empty-message {
        padding: dt('listbox.empty.message.padding');
    }

    .p-listbox-fluid {
        width: 100%;
    }
`,ei={root:function(e){var n=e.instance,o=e.props;return["p-listbox p-component",{"p-listbox-striped":o.striped,"p-disabled":o.disabled,"p-listbox-fluid":o.fluid,"p-invalid":n.$invalid}]},header:"p-listbox-header",pcFilter:"p-listbox-filter",listContainer:"p-listbox-list-container",list:"p-listbox-list",optionGroup:"p-listbox-option-group",option:function(e){var n=e.instance,o=e.props,l=e.option,i=e.index,s=e.getItemOptions;return["p-listbox-option",{"p-listbox-option-selected":n.isSelected(l)&&o.highlightOnSelect,"p-focus":n.focusedOptionIndex===n.getOptionIndex(i,s),"p-disabled":n.isOptionDisabled(l)}]},optionCheckIcon:"p-listbox-option-check-icon",optionBlankIcon:"p-listbox-option-blank-icon",emptyMessage:"p-listbox-empty-message"},ti=nt.extend({name:"listbox",style:Qn,classes:ei}),ni={name:"BaseListbox",extends:it,props:{options:Array,optionLabel:null,optionValue:null,optionDisabled:null,optionGroupLabel:null,optionGroupChildren:null,listStyle:null,scrollHeight:{type:String,default:"14rem"},dataKey:null,multiple:{type:Boolean,default:!1},metaKeySelection:{type:Boolean,default:!1},filter:Boolean,filterPlaceholder:String,filterLocale:String,filterMatchMode:{type:String,default:"contains"},filterFields:{type:Array,default:null},virtualScrollerOptions:{type:Object,default:null},autoOptionFocus:{type:Boolean,default:!0},selectOnFocus:{type:Boolean,default:!1},focusOnHover:{type:Boolean,default:!0},highlightOnSelect:{type:Boolean,default:!0},checkmark:{type:Boolean,default:!1},filterMessage:{type:String,default:null},selectionMessage:{type:String,default:null},emptySelectionMessage:{type:String,default:null},emptyFilterMessage:{type:String,default:null},emptyMessage:{type:String,default:null},filterIcon:{type:String,default:void 0},striped:{type:Boolean,default:!1},tabindex:{type:Number,default:0},fluid:{type:Boolean,default:null},ariaLabel:{type:String,default:null},ariaLabelledby:{type:String,default:null}},style:ti,provide:function(){return{$pcListbox:this,$parentInstance:this}}};function Me(t){return si(t)||li(t)||oi(t)||ii()}function ii(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oi(t,e){if(t){if(typeof t=="string")return Be(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Be(t,e):void 0}}function li(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function si(t){if(Array.isArray(t))return Be(t)}function Be(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var $e={name:"Listbox",extends:ni,inheritAttrs:!1,emits:["change","focus","blur","filter","item-dblclick","option-dblclick"],list:null,virtualScroller:null,optionTouched:!1,startRangeIndex:-1,searchTimeout:null,searchValue:"",data:function(){return{filterValue:null,focused:!1,focusedOptionIndex:-1}},watch:{options:function(){this.autoUpdateModel()}},mounted:function(){this.autoUpdateModel()},methods:{getOptionIndex:function(e,n){return this.virtualScrollerDisabled?e:n&&n(e).index},getOptionLabel:function(e){return this.optionLabel?ue(e,this.optionLabel):typeof e=="string"?e:null},getOptionValue:function(e){return this.optionValue?ue(e,this.optionValue):e},getOptionRenderKey:function(e,n){return(this.dataKey?ue(e,this.dataKey):this.getOptionLabel(e))+"_"+n},getPTOptions:function(e,n,o,l){return this.ptm(l,{context:{selected:this.isSelected(e),focused:this.focusedOptionIndex===this.getOptionIndex(o,n),disabled:this.isOptionDisabled(e)}})},isOptionDisabled:function(e){return this.optionDisabled?ue(e,this.optionDisabled):!1},isOptionGroup:function(e){return this.optionGroupLabel&&e.optionGroup&&e.group},getOptionGroupLabel:function(e){return ue(e,this.optionGroupLabel)},getOptionGroupChildren:function(e){return ue(e,this.optionGroupChildren)},getAriaPosInset:function(e){var n=this;return(this.optionGroupLabel?e-this.visibleOptions.slice(0,e).filter(function(o){return n.isOptionGroup(o)}).length:e)+1},onFirstHiddenFocus:function(){Ce(this.list);var e=ze(this.$el,':not([data-p-hidden-focusable="true"])');this.$refs.lastHiddenFocusableElement.tabIndex=Rt(e)?void 0:-1,this.$refs.firstHiddenFocusableElement.tabIndex=-1},onLastHiddenFocus:function(e){var n=e.relatedTarget;if(n===this.list){var o=ze(this.$el,':not([data-p-hidden-focusable="true"])');Ce(o),this.$refs.firstHiddenFocusableElement.tabIndex=void 0}else Ce(this.$refs.firstHiddenFocusableElement);this.$refs.lastHiddenFocusableElement.tabIndex=-1},onFocusout:function(e){!this.$el.contains(e.relatedTarget)&&this.$refs.lastHiddenFocusableElement&&this.$refs.firstHiddenFocusableElement&&(this.$refs.lastHiddenFocusableElement.tabIndex=this.$refs.firstHiddenFocusableElement.tabIndex=void 0)},onListFocus:function(e){this.focused=!0,this.focusedOptionIndex=this.focusedOptionIndex!==-1?this.focusedOptionIndex:this.autoOptionFocus?this.findFirstFocusedOptionIndex():this.findSelectedOptionIndex(),this.autoUpdateModel(),this.scrollInView(this.focusedOptionIndex),this.$emit("focus",e)},onListBlur:function(e){this.focused=!1,this.focusedOptionIndex=this.startRangeIndex=-1,this.searchValue="",this.$emit("blur",e)},onListKeyDown:function(e){var n=this,o=e.metaKey||e.ctrlKey;switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"NumpadEnter":case"Space":this.onSpaceKey(e);break;case"Tab":break;case"ShiftLeft":case"ShiftRight":this.onShiftKey(e);break;default:if(this.multiple&&e.code==="KeyA"&&o){var l=this.visibleOptions.filter(function(i){return n.isValidOption(i)}).map(function(i){return n.getOptionValue(i)});this.updateModel(e,l),e.preventDefault();break}!o&&$t(e.key)&&(this.searchOptions(e,e.key),e.preventDefault());break}},onOptionSelect:function(e,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;this.disabled||this.isOptionDisabled(n)||(this.multiple?this.onOptionSelectMultiple(e,n):this.onOptionSelectSingle(e,n),this.optionTouched=!1,o!==-1&&(this.focusedOptionIndex=o))},onOptionMouseDown:function(e,n){this.changeFocusedOptionIndex(e,n)},onOptionMouseMove:function(e,n){this.focusOnHover&&this.focused&&this.changeFocusedOptionIndex(e,n)},onOptionTouchEnd:function(){this.disabled||(this.optionTouched=!0)},onOptionDblClick:function(e,n){this.$emit("item-dblclick",{originalEvent:e,value:n}),this.$emit("option-dblclick",{originalEvent:e,value:n})},onOptionSelectSingle:function(e,n){var o=this.isSelected(n),l=!1,i=null,s=this.optionTouched?!1:this.metaKeySelection,u=this.getOptionValue(n)!==""?this.getOptionValue(n):this.getOptionLabel(n);if(s){var d=e&&(e.metaKey||e.ctrlKey);o?d&&(i=null,l=!0):(i=u,l=!0)}else i=o?null:u,l=!0;l&&this.updateModel(e,i)},onOptionSelectMultiple:function(e,n){var o=this.isSelected(n),l=null,i=this.optionTouched?!1:this.metaKeySelection,s=this.getOptionValue(n)!==""?this.getOptionValue(n):this.getOptionLabel(n);if(i){var u=e.metaKey||e.ctrlKey;o?l=u?this.removeOption(n):[s]:(l=u?this.d_value||[]:[],l=[].concat(Me(l),[s]))}else l=o?this.removeOption(n):[].concat(Me(this.d_value||[]),[s]);this.updateModel(e,l)},onOptionSelectRange:function(e){var n=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(o===-1&&(o=this.findNearestSelectedOptionIndex(l,!0)),l===-1&&(l=this.findNearestSelectedOptionIndex(o)),o!==-1&&l!==-1){var i=Math.min(o,l),s=Math.max(o,l),u=this.visibleOptions.slice(i,s+1).filter(function(d){return n.isValidOption(d)}).map(function(d){return n.getOptionValue(d)});this.updateModel(e,u)}},onFilterChange:function(e){this.$emit("filter",{originalEvent:e,value:e.target.value,filterValue:this.visibleOptions}),this.focusedOptionIndex=this.startRangeIndex=-1},onFilterBlur:function(){this.focusedOptionIndex=this.startRangeIndex=-1},onFilterKeyDown:function(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,!0);break;case"Home":this.onHomeKey(e,!0);break;case"End":this.onEndKey(e,!0);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"ShiftLeft":case"ShiftRight":this.onShiftKey(e);break}},onArrowDownKey:function(e){var n=this.focusedOptionIndex!==-1?this.findNextOptionIndex(this.focusedOptionIndex):this.findFirstFocusedOptionIndex();this.multiple&&e.shiftKey&&this.onOptionSelectRange(e,this.startRangeIndex,n),this.changeFocusedOptionIndex(e,n),e.preventDefault()},onArrowUpKey:function(e){var n=this.focusedOptionIndex!==-1?this.findPrevOptionIndex(this.focusedOptionIndex):this.findLastFocusedOptionIndex();this.multiple&&e.shiftKey&&this.onOptionSelectRange(e,n,this.startRangeIndex),this.changeFocusedOptionIndex(e,n),e.preventDefault()},onArrowLeftKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n&&(this.focusedOptionIndex=-1)},onHomeKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n){var o=e.currentTarget;e.shiftKey?o.setSelectionRange(0,e.target.selectionStart):(o.setSelectionRange(0,0),this.focusedOptionIndex=-1)}else{var l=e.metaKey||e.ctrlKey,i=this.findFirstOptionIndex();this.multiple&&e.shiftKey&&l&&this.onOptionSelectRange(e,i,this.startRangeIndex),this.changeFocusedOptionIndex(e,i)}e.preventDefault()},onEndKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n){var o=e.currentTarget;if(e.shiftKey)o.setSelectionRange(e.target.selectionStart,o.value.length);else{var l=o.value.length;o.setSelectionRange(l,l),this.focusedOptionIndex=-1}}else{var i=e.metaKey||e.ctrlKey,s=this.findLastOptionIndex();this.multiple&&e.shiftKey&&i&&this.onOptionSelectRange(e,this.startRangeIndex,s),this.changeFocusedOptionIndex(e,s)}e.preventDefault()},onPageUpKey:function(e){this.scrollInView(0),e.preventDefault()},onPageDownKey:function(e){this.scrollInView(this.visibleOptions.length-1),e.preventDefault()},onEnterKey:function(e){this.focusedOptionIndex!==-1&&(this.multiple&&e.shiftKey?this.onOptionSelectRange(e,this.focusedOptionIndex):this.onOptionSelect(e,this.visibleOptions[this.focusedOptionIndex]))},onSpaceKey:function(e){e.preventDefault(),this.onEnterKey(e)},onShiftKey:function(){this.startRangeIndex=this.focusedOptionIndex},isOptionMatched:function(e){var n;return this.isValidOption(e)&&typeof this.getOptionLabel(e)=="string"&&((n=this.getOptionLabel(e))===null||n===void 0?void 0:n.toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale)))},isValidOption:function(e){return xe(e)&&!(this.isOptionDisabled(e)||this.isOptionGroup(e))},isValidSelectedOption:function(e){return this.isValidOption(e)&&this.isSelected(e)},isEquals:function(e,n){return Ue(e,n,this.equalityKey)},isSelected:function(e){var n=this,o=this.getOptionValue(e)!==""?this.getOptionValue(e):this.getOptionLabel(e);return this.multiple?(this.d_value||[]).some(function(l){return n.isEquals(l,o)}):this.isEquals(this.d_value,o)},findFirstOptionIndex:function(){var e=this;return this.visibleOptions.findIndex(function(n){return e.isValidOption(n)})},findLastOptionIndex:function(){var e=this;return Oe(this.visibleOptions,function(n){return e.isValidOption(n)})},findNextOptionIndex:function(e){var n=this,o=e<this.visibleOptions.length-1?this.visibleOptions.slice(e+1).findIndex(function(l){return n.isValidOption(l)}):-1;return o>-1?o+e+1:e},findPrevOptionIndex:function(e){var n=this,o=e>0?Oe(this.visibleOptions.slice(0,e),function(l){return n.isValidOption(l)}):-1;return o>-1?o:e},findSelectedOptionIndex:function(){var e=this;if(this.$filled)if(this.multiple){for(var n=function(){var s=e.d_value[l],u=e.visibleOptions.findIndex(function(d){return e.isValidSelectedOption(d)&&e.isEquals(s,e.getOptionValue(d))});if(u>-1)return{v:u}},o,l=this.d_value.length-1;l>=0;l--)if(o=n(),o)return o.v}else return this.visibleOptions.findIndex(function(i){return e.isValidSelectedOption(i)});return-1},findFirstSelectedOptionIndex:function(){var e=this;return this.$filled?this.visibleOptions.findIndex(function(n){return e.isValidSelectedOption(n)}):-1},findLastSelectedOptionIndex:function(){var e=this;return this.$filled?Oe(this.visibleOptions,function(n){return e.isValidSelectedOption(n)}):-1},findNextSelectedOptionIndex:function(e){var n=this,o=this.$filled&&e<this.visibleOptions.length-1?this.visibleOptions.slice(e+1).findIndex(function(l){return n.isValidSelectedOption(l)}):-1;return o>-1?o+e+1:-1},findPrevSelectedOptionIndex:function(e){var n=this,o=this.$filled&&e>0?Oe(this.visibleOptions.slice(0,e),function(l){return n.isValidSelectedOption(l)}):-1;return o>-1?o:-1},findNearestSelectedOptionIndex:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=-1;return this.$filled&&(n?(o=this.findPrevSelectedOptionIndex(e),o=o===-1?this.findNextSelectedOptionIndex(e):o):(o=this.findNextSelectedOptionIndex(e),o=o===-1?this.findPrevSelectedOptionIndex(e):o)),o>-1?o:e},findFirstFocusedOptionIndex:function(){var e=this.findFirstSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e},findLastFocusedOptionIndex:function(){var e=this.findLastSelectedOptionIndex();return e<0?this.findLastOptionIndex():e},searchOptions:function(e,n){var o=this;this.searchValue=(this.searchValue||"")+n;var l=-1;xe(this.searchValue)&&(this.focusedOptionIndex!==-1?(l=this.visibleOptions.slice(this.focusedOptionIndex).findIndex(function(i){return o.isOptionMatched(i)}),l=l===-1?this.visibleOptions.slice(0,this.focusedOptionIndex).findIndex(function(i){return o.isOptionMatched(i)}):l+this.focusedOptionIndex):l=this.visibleOptions.findIndex(function(i){return o.isOptionMatched(i)}),l===-1&&this.focusedOptionIndex===-1&&(l=this.findFirstFocusedOptionIndex()),l!==-1&&this.changeFocusedOptionIndex(e,l)),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){o.searchValue="",o.searchTimeout=null},500)},removeOption:function(e){var n=this;return this.d_value.filter(function(o){return!Ue(o,n.getOptionValue(e),n.equalityKey)})},changeFocusedOptionIndex:function(e,n){this.focusedOptionIndex!==n&&(this.focusedOptionIndex=n,this.scrollInView(),this.selectOnFocus&&!this.multiple&&this.onOptionSelect(e,this.visibleOptions[n]))},scrollInView:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;this.$nextTick(function(){var o=n!==-1?"".concat(e.$id,"_").concat(n):e.focusedOptionId,l=Ft(e.list,'li[id="'.concat(o,'"]'));l?l.scrollIntoView&&l.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}):e.virtualScrollerDisabled||e.virtualScroller&&e.virtualScroller.scrollToIndex(n!==-1?n:e.focusedOptionIndex)})},autoUpdateModel:function(){this.selectOnFocus&&this.autoOptionFocus&&!this.$filled&&!this.multiple&&this.focused&&(this.focusedOptionIndex=this.findFirstFocusedOptionIndex(),this.onOptionSelect(null,this.visibleOptions[this.focusedOptionIndex]))},updateModel:function(e,n){this.writeValue(n,e),this.$emit("change",{originalEvent:e,value:n})},listRef:function(e,n){this.list=e,n&&n(e)},virtualScrollerRef:function(e){this.virtualScroller=e}},computed:{optionsListFlat:function(){return this.filterValue?Ke.filter(this.options,this.searchFields,this.filterValue,this.filterMatchMode,this.filterLocale):this.options},optionsListGroup:function(){var e=this,n=[];return(this.options||[]).forEach(function(o){var l=e.getOptionGroupChildren(o)||[],i=e.filterValue?Ke.filter(l,e.searchFields,e.filterValue,e.filterMatchMode,e.filterLocale):l;i!=null&&i.length&&n.push.apply(n,[{optionGroup:o,group:!0}].concat(Me(i)))}),n},visibleOptions:function(){return this.optionGroupLabel?this.optionsListGroup:this.optionsListFlat},hasSelectedOption:function(){return xe(this.d_value)},equalityKey:function(){return this.optionValue?null:this.dataKey},searchFields:function(){return this.filterFields||[this.optionLabel]},filterResultMessageText:function(){return xe(this.visibleOptions)?this.filterMessageText.replaceAll("{0}",this.visibleOptions.length):this.emptyFilterMessageText},filterMessageText:function(){return this.filterMessage||this.$primevue.config.locale.searchMessage||""},emptyFilterMessageText:function(){return this.emptyFilterMessage||this.$primevue.config.locale.emptySearchMessage||this.$primevue.config.locale.emptyFilterMessage||""},emptyMessageText:function(){return this.emptyMessage||this.$primevue.config.locale.emptyMessage||""},selectionMessageText:function(){return this.selectionMessage||this.$primevue.config.locale.selectionMessage||""},emptySelectionMessageText:function(){return this.emptySelectionMessage||this.$primevue.config.locale.emptySelectionMessage||""},selectedMessageText:function(){return this.$filled?this.selectionMessageText.replaceAll("{0}",this.multiple?this.d_value.length:"1"):this.emptySelectionMessageText},focusedOptionId:function(){return this.focusedOptionIndex!==-1?"".concat(this.$id,"_").concat(this.focusedOptionIndex):null},ariaSetSize:function(){var e=this;return this.visibleOptions.filter(function(n){return!e.isOptionGroup(n)}).length},virtualScrollerDisabled:function(){return!this.virtualScrollerOptions},containerDataP:function(){return Ht({invalid:this.$invalid,disabled:this.disabled})}},directives:{ripple:Et},components:{InputText:lt,VirtualScroller:Bt,InputIcon:Dt,IconField:At,SearchIcon:Tt,CheckIcon:Pt,BlankIcon:Vt}},ai=["id","data-p"],ri=["tabindex"],ui=["id","aria-multiselectable","aria-label","aria-labelledby","aria-activedescendant","aria-disabled"],di=["id"],ci=["id","aria-label","aria-selected","aria-disabled","aria-setsize","aria-posinset","onClick","onMousedown","onMousemove","onDblclick","data-p-selected","data-p-focused","data-p-disabled"],pi=["tabindex"];function fi(t,e,n,o,l,i){var s=ne("InputText"),u=ne("SearchIcon"),d=ne("InputIcon"),c=ne("IconField"),r=ne("CheckIcon"),I=ne("BlankIcon"),M=ne("VirtualScroller"),F=Kt("ripple");return y(),C("div",T({id:t.$id,class:t.cx("root"),onFocusout:e[7]||(e[7]=function(){return i.onFocusout&&i.onFocusout.apply(i,arguments)}),"data-p":i.containerDataP},t.ptmi("root")),[O("span",T({ref:"firstHiddenFocusableElement",role:"presentation","aria-hidden":"true",class:"p-hidden-accessible p-hidden-focusable",tabindex:t.disabled?-1:t.tabindex,onFocus:e[0]||(e[0]=function(){return i.onFirstHiddenFocus&&i.onFirstHiddenFocus.apply(i,arguments)})},t.ptm("hiddenFirstFocusableEl"),{"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0}),null,16,ri),t.$slots.header?(y(),C("div",{key:0,class:je(t.cx("header"))},[te(t.$slots,"header",{value:t.d_value,options:i.visibleOptions})],2)):D("",!0),t.filter?(y(),C("div",T({key:1,class:t.cx("header")},t.ptm("header")),[g(c,{unstyled:t.unstyled,pt:t.ptm("pcFilterContainer")},{default:V(function(){return[g(s,{modelValue:l.filterValue,"onUpdate:modelValue":e[1]||(e[1]=function(P){return l.filterValue=P}),type:"text",class:je(t.cx("pcFilter")),placeholder:t.filterPlaceholder,role:"searchbox",autocomplete:"off",disabled:t.disabled,unstyled:t.unstyled,"aria-owns":t.$id+"_list","aria-activedescendant":i.focusedOptionId,tabindex:!t.disabled&&!l.focused?t.tabindex:-1,onInput:i.onFilterChange,onBlur:i.onFilterBlur,onKeydown:i.onFilterKeyDown,pt:t.ptm("pcFilter")},null,8,["modelValue","class","placeholder","disabled","unstyled","aria-owns","aria-activedescendant","tabindex","onInput","onBlur","onKeydown","pt"]),g(d,{unstyled:t.unstyled,pt:t.ptm("pcFilterIconContainer")},{default:V(function(){return[te(t.$slots,"filtericon",{},function(){return[t.filterIcon?(y(),C("span",T({key:0,class:t.filterIcon},t.ptm("filterIcon")),null,16)):(y(),j(u,Ut(T({key:1},t.ptm("filterIcon"))),null,16))]})]}),_:3},8,["unstyled","pt"])]}),_:3},8,["unstyled","pt"]),O("span",T({role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenFilterResult"),{"data-p-hidden-accessible":!0}),R(i.filterResultMessageText),17)],16)):D("",!0),O("div",T({class:t.cx("listContainer"),style:[{"max-height":i.virtualScrollerDisabled?t.scrollHeight:""},t.listStyle]},t.ptm("listContainer")),[g(M,T({ref:i.virtualScrollerRef},t.virtualScrollerOptions,{items:i.visibleOptions,style:[{height:t.scrollHeight},t.listStyle],tabindex:-1,disabled:i.virtualScrollerDisabled,pt:t.ptm("virtualScroller")}),zt({content:V(function(P){var k=P.styleClass,w=P.contentRef,h=P.items,p=P.getItemOptions,b=P.contentStyle,_=P.itemSize;return[O("ul",T({ref:function(x){return i.listRef(x,w)},id:t.$id+"_list",class:[t.cx("list"),k],style:b,tabindex:-1,role:"listbox","aria-multiselectable":t.multiple,"aria-label":t.ariaLabel,"aria-labelledby":t.ariaLabelledby,"aria-activedescendant":l.focused?i.focusedOptionId:void 0,"aria-disabled":t.disabled,onFocus:e[3]||(e[3]=function(){return i.onListFocus&&i.onListFocus.apply(i,arguments)}),onBlur:e[4]||(e[4]=function(){return i.onListBlur&&i.onListBlur.apply(i,arguments)}),onKeydown:e[5]||(e[5]=function(){return i.onListKeyDown&&i.onListKeyDown.apply(i,arguments)})},t.ptm("list")),[(y(!0),C(Se,null,st(h,function(f,x){return y(),C(Se,{key:i.getOptionRenderKey(f,i.getOptionIndex(x,p))},[i.isOptionGroup(f)?(y(),C("li",T({key:0,id:t.$id+"_"+i.getOptionIndex(x,p),style:{height:_?_+"px":void 0},class:t.cx("optionGroup"),role:"option"},{ref_for:!0},t.ptm("optionGroup")),[te(t.$slots,"optiongroup",{option:f.optionGroup,index:i.getOptionIndex(x,p)},function(){return[G(R(i.getOptionGroupLabel(f.optionGroup)),1)]})],16,di)):at((y(),C("li",T({key:1,id:t.$id+"_"+i.getOptionIndex(x,p),style:{height:_?_+"px":void 0},class:t.cx("option",{option:f,index:x,getItemOptions:p}),role:"option","aria-label":i.getOptionLabel(f),"aria-selected":i.isSelected(f),"aria-disabled":i.isOptionDisabled(f),"aria-setsize":i.ariaSetSize,"aria-posinset":i.getAriaPosInset(i.getOptionIndex(x,p)),onClick:function($){return i.onOptionSelect($,f,i.getOptionIndex(x,p))},onMousedown:function($){return i.onOptionMouseDown($,i.getOptionIndex(x,p))},onMousemove:function($){return i.onOptionMouseMove($,i.getOptionIndex(x,p))},onTouchend:e[2]||(e[2]=function(E){return i.onOptionTouchEnd()}),onDblclick:function($){return i.onOptionDblClick($,f)}},{ref_for:!0},i.getPTOptions(f,p,x,"option"),{"data-p-selected":!t.checkmark&&i.isSelected(f),"data-p-focused":l.focusedOptionIndex===i.getOptionIndex(x,p),"data-p-disabled":i.isOptionDisabled(f)}),[t.checkmark?(y(),C(Se,{key:0},[i.isSelected(f)?(y(),j(r,T({key:0,class:t.cx("optionCheckIcon")},{ref_for:!0},t.ptm("optionCheckIcon")),null,16,["class"])):(y(),j(I,T({key:1,class:t.cx("optionBlankIcon")},{ref_for:!0},t.ptm("optionBlankIcon")),null,16,["class"]))],64)):D("",!0),te(t.$slots,"option",{option:f,selected:i.isSelected(f),index:i.getOptionIndex(x,p)},function(){return[G(R(i.getOptionLabel(f)),1)]})],16,ci)),[[F]])],64)}),128)),l.filterValue&&(!h||h&&h.length===0)?(y(),C("li",T({key:0,class:t.cx("emptyMessage"),role:"option"},t.ptm("emptyMessage")),[te(t.$slots,"emptyfilter",{},function(){return[G(R(i.emptyFilterMessageText),1)]})],16)):!t.options||t.options&&t.options.length===0?(y(),C("li",T({key:1,class:t.cx("emptyMessage"),role:"option"},t.ptm("emptyMessage")),[te(t.$slots,"empty",{},function(){return[G(R(i.emptyMessageText),1)]})],16)):D("",!0)],16,ui)]}),_:2},[t.$slots.loader?{name:"loader",fn:V(function(P){var k=P.options;return[te(t.$slots,"loader",{options:k})]}),key:"0"}:void 0]),1040,["items","style","disabled","pt"])],16),te(t.$slots,"footer",{value:t.d_value,options:i.visibleOptions}),!t.options||t.options&&t.options.length===0?(y(),C("span",T({key:2,role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenEmptyMessage"),{"data-p-hidden-accessible":!0}),R(i.emptyMessageText),17)):D("",!0),O("span",T({role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenSelectedMessage"),{"data-p-hidden-accessible":!0}),R(i.selectedMessageText),17),O("span",T({ref:"lastHiddenFocusableElement",role:"presentation","aria-hidden":"true",class:"p-hidden-accessible p-hidden-focusable",tabindex:t.disabled?-1:t.tabindex,onFocus:e[6]||(e[6]=function(){return i.onLastHiddenFocus&&i.onLastHiddenFocus.apply(i,arguments)})},t.ptm("hiddenLastFocusableEl"),{"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0}),null,16,pi)],16,ai)}$e.render=fi;var Le,Xe;function hi(){if(Xe)return Le;Xe=1;var t=function(p){return e(p)&&!n(p)};function e(h){return!!h&&typeof h=="object"}function n(h){var p=Object.prototype.toString.call(h);return p==="[object RegExp]"||p==="[object Date]"||i(h)}var o=typeof Symbol=="function"&&Symbol.for,l=o?Symbol.for("react.element"):60103;function i(h){return h.$$typeof===l}function s(h){return Array.isArray(h)?[]:{}}function u(h,p){return p.clone!==!1&&p.isMergeableObject(h)?k(s(h),h,p):h}function d(h,p,b){return h.concat(p).map(function(_){return u(_,b)})}function c(h,p){if(!p.customMerge)return k;var b=p.customMerge(h);return typeof b=="function"?b:k}function r(h){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(h).filter(function(p){return Object.propertyIsEnumerable.call(h,p)}):[]}function I(h){return Object.keys(h).concat(r(h))}function M(h,p){try{return p in h}catch{return!1}}function F(h,p){return M(h,p)&&!(Object.hasOwnProperty.call(h,p)&&Object.propertyIsEnumerable.call(h,p))}function P(h,p,b){var _={};return b.isMergeableObject(h)&&I(h).forEach(function(f){_[f]=u(h[f],b)}),I(p).forEach(function(f){F(h,f)||(M(h,f)&&b.isMergeableObject(p[f])?_[f]=c(f,b)(h[f],p[f],b):_[f]=u(p[f],b))}),_}function k(h,p,b){b=b||{},b.arrayMerge=b.arrayMerge||d,b.isMergeableObject=b.isMergeableObject||t,b.cloneUnlessOtherwiseSpecified=u;var _=Array.isArray(p),f=Array.isArray(h),x=_===f;return x?_?b.arrayMerge(h,p,b):P(h,p,b):u(p,b)}k.all=function(p,b){if(!Array.isArray(p))throw new Error("first argument should be an array");return p.reduce(function(_,f){return k(_,f,b)},{})};var w=k;return Le=w,Le}var mi=hi();const bi=jt(mi),Ve=A({BollingerBands:{main_plot:{bb_upperband:{color:"#008af4",type:"line",fill_to:"bb_lowerband"},bb_lowerband:{color:"#008af4",type:"line"}}},RSI:{subplots:{RSI:{rsi:{color:"#ff8000",type:"line"}}}},MACD:{subplots:{MACD:{macdsignal:{color:"#ff8000",type:"line"},macd:{color:"#1370f4",type:"line"}}}}});function Ye(t,e){const n=Ae(t);if(!e)return n;const o={};for(const i in t.main_plot){const s=e[i]||i;o[s]=t.main_plot[i],o[s].fill_to!==void 0&&(o[s].fill_to=e[o[s].fill_to]||o[s].fill_to)}"main_plot"in t&&(n.main_plot=o);const l={};for(const i in t.subplots){const s={};for(const u in t.subplots[i]){const d=e[u]||u;s[d]=t.subplots[i][u],s[d].fill_to!==void 0&&(s[d].fill_to=e[s[d].fill_to]||s[d].fill_to)}l[i]=s}return"subplots"in t&&(n.subplots=l),n}function gi(){function t(n){return Ve.value[n]||{}}function e(n,o,l={}){const i=t(n);if(!i)return o;const s=Ye(i,l);return bi(o,s)}return{plotTemplates:Ve,applyPlotTemplate:e,getTemplateContent:t,replaceTemplateColumns:Ye,plotTemplateNames:B(()=>Object.keys(Ve.value))}}const vi={key:0,class:"pt-1"},yi={key:0,class:"w-full"},xi={key:1},Oi=["for"],Si={class:"mt-2 flex gap-1 justify-end"},Ii=oe({__name:"PlotFromTemplate",props:Nt({columns:{}},{visible:{type:Boolean},visibleModifiers:{}}),emits:["update:visible"],setup(t){const e=Gt(t,"visible"),{plotTemplateNames:n,applyPlotTemplate:o,getTemplateContent:l}=gi(),i=Ie();function s(){d.value&&(i.editablePlotConfig={...o(d.value,i.editablePlotConfig,c.value)},e.value=!1)}function u(){r.value=!r.value,c.value=Zt(l(d.value)).reduce((I,M)=>(I[M]=M,I),{})}const d=A("");K(()=>e.value,I=>{I&&(d.value="",r.value=!1)});const c=A({}),r=A(!1);return(I,M)=>{const F=$e,P=be,k=tt,w=ge,h=un;return e.value?(y(),C("div",vi,[a(r)?(y(),C("div",xi,[M[3]||(M[3]=O("h5",{class:"mt-1 text-center text-md mb-1"},"Re-map indicators",-1)),(y(!0),C(Se,null,st(Object.keys(a(c)),p=>(y(),C("div",{key:p,class:"flex gap-2 align-center"},[O("label",{for:`indicator-${p}`,class:"grow w-full"},R(p),9,Oi),g(P,{id:`indicator-${p}`,modelValue:a(c)[p],"onUpdate:modelValue":b=>a(c)[p]=b,class:"grow w-full",size:"small",options:I.columns},null,8,["id","modelValue","onUpdate:modelValue","options"])]))),128))])):(y(),C("div",yi,[M[2]||(M[2]=O("label",{for:"selectTemplate"},"Select Template",-1)),g(F,{id:"selectTemplate",modelValue:a(d),"onUpdate:modelValue":M[0]||(M[0]=p=>z(d)?d.value=p:null),options:a(n),"select-size":4},null,8,["modelValue","options"])])),O("div",Si,[g(w,{size:"small",title:"Abort",severity:"secondary",onClick:M[1]||(M[1]=p=>e.value=!1)},{default:V(()=>[g(k)]),_:1}),a(r)?D("",!0):(y(),j(w,{key:0,disabled:!a(d),size:"small",style:{width:"33%"},title:"Use template",label:" Use Template",severity:"primary",onClick:u},{icon:V(()=>[g(h,{class:"me-1"})]),_:1},8,["disabled"])),a(r)?(y(),j(w,{key:1,disabled:!a(d),size:"small",style:{width:"33%"},title:"Apply template",severity:"primary",onClick:s},{icon:V(()=>[g(h,{class:"me-1"})]),default:V(()=>[M[4]||(M[4]=G(" Apply Template "))]),_:1,__:[4]},8,["disabled"])):D("",!0)])])):D("",!0)}}}),ht=oe({__name:"PlotConfigSelect",props:{allowEdit:{type:Boolean,default:!1},editableName:{type:String,default:"plot configuration"}},setup(t){const e=Ie();return(n,o)=>{const l=be,i=ct;return y(),j(i,{modelValue:a(e).plotConfigName,"onUpdate:modelValue":o[1]||(o[1]=s=>a(e).plotConfigName=s),"allow-edit":t.allowEdit,"allow-add":t.allowEdit,"allow-duplicate":t.allowEdit,"editable-name":"plot configuration",onRename:a(e).renamePlotConfig,onDelete:a(e).deletePlotConfig,onNew:a(e).newPlotConfig,onDuplicate:a(e).duplicatePlotConfig},{default:V(()=>[g(l,{id:"plotConfigSelect",modelValue:a(e).plotConfigName,"onUpdate:modelValue":[o[0]||(o[0]=s=>a(e).plotConfigName=s),a(e).plotConfigChanged],options:a(e).availablePlotConfigNames,class:"w-full text-left",size:"small"},null,8,["modelValue","options","onUpdate:modelValue"])]),_:1},8,["modelValue","allow-edit","allow-add","allow-duplicate","onRename","onDelete","onNew","onDuplicate"])}}}),_i={key:0},wi={class:"flex flex-row mt-1 gap-1"},ki={class:"flex flex-row gap-1"},Ci={key:3,class:"w-full ms-1 mt-2"},Mi=oe({__name:"PlotConfigurator",props:{columns:{required:!0,type:Array},isVisible:{required:!1,default:!1,type:Boolean}},setup(t){const e=t,n=Ie(),o=rt(),l=A("default"),i=A(""),s=A(!1),u=A(!1),d=A("main_plot"),c=A(),r=A(!0),I=B(()=>d.value==="main_plot"),M=B(()=>I.value?n.editablePlotConfig.main_plot:n.editablePlotConfig.subplots[d.value]),F=B(()=>["main_plot",...Object.keys(n.editablePlotConfig.subplots)]),P=B(()=>{let L=[];return I.value&&(L=Object.keys(n.editablePlotConfig.main_plot)),d.value in n.editablePlotConfig.subplots&&(L=Object.keys(n.editablePlotConfig.subplots[d.value])),L.map(m=>({value:m,text:e.columns.includes(m)?m:`${m} <-- not available in this chart`}))});function k(L){const m=Object.keys(L)[0],N=L[m];I.value?n.editablePlotConfig.main_plot[m]={...N}:n.editablePlotConfig.subplots[d.value][m]={...N},n.editablePlotConfig={...n.editablePlotConfig},s.value=!1}const w=B({get(){return s.value?{}:i.value?{[i.value]:M.value[i.value]}:{}},set(L){Object.keys(L)[0]&&L?k(L):s.value=!1}}),h=B({get(){return JSON.stringify(n.editablePlotConfig,null,2)},set(L){try{c.value=JSON.parse(L),r.value=!0}catch{r.value=!1}}});function p(){I.value?(console.log(`Removing ${i.value} from MainPlot`),delete n.editablePlotConfig.main_plot[i.value]):(console.log(`Removing ${i.value} from ${d.value}`),delete n.editablePlotConfig.subplots[d.value][i.value]),n.editablePlotConfig={...n.editablePlotConfig},i.value=""}function b(){s.value=!s.value,i.value=""}function _(L){n.editablePlotConfig.subplots={...n.editablePlotConfig.subplots,[L]:{}},d.value=L}function f(L){delete n.editablePlotConfig.subplots[L],n.editablePlotConfig={...n.editablePlotConfig},d.value=F.value[F.value.length-1]}function x(L,m){n.editablePlotConfig.subplots[m]=n.editablePlotConfig.subplots[L],delete n.editablePlotConfig.subplots[L],d.value=m}function E(){n.editablePlotConfig=Ae(n.customPlotConfigs[n.plotConfigName])}function $(){c.value!==void 0&&r.value&&(n.editablePlotConfig=c.value)}async function Z(){if(o.activeBot.isWebserverMode&&!o.activeBot.strategy.strategy){Ne("No strategy selected, can't load plot config.");return}try{await o.activeBot.getStrategyPlotConfig(),o.activeBot.strategyPlotConfig&&(n.editablePlotConfig=o.activeBot.strategyPlotConfig)}catch{Ne("Failed to load Plot configuration from Strategy.")}}function H(){n.saveCustomPlotConfig(l.value,n.editablePlotConfig)}function q(L){s.value=!1,L&&(k({[L]:{color:he()}}),i.value=L)}K(d,()=>{i.value=""}),K(()=>n.plotConfigName,()=>{i.value="",l.value=n.plotConfigName}),K(()=>e.isVisible,()=>{e.isVisible?(n.editablePlotConfig=Ae(n.plotConfig),n.isEditing=!0,l.value=n.plotConfigName):n.isEditing=!1},{immediate:!0});const Y=A(!1),W=B({get(){return n.editablePlotConfig.options?.showTags??!0},set(L){n.editablePlotConfig.options||(n.editablePlotConfig.options={}),n.editablePlotConfig.options.showTags=L}});return(L,m)=>{const N=ht,le=qt,_e=ut,se=$e,J=ct,Q=ge,ce=pt,ve=Ii,we=Jn,v=Xt;return t.columns?(y(),C("div",_i,[m[18]||(m[18]=O("label",{for:"idPlotConfigName"},"Plot config name",-1)),g(N,{"allow-edit":""}),g(le),g(_e,{modelValue:a(W),"onUpdate:modelValue":m[0]||(m[0]=S=>z(W)?W.value=S:null),class:"mb-1"},{default:V(()=>m[9]||(m[9]=[G("Show Tags in Tooltips")])),_:1,__:[9]},8,["modelValue"]),g(le),m[19]||(m[19]=O("label",{for:"fieldSel",class:"mb"},"Target Plot",-1)),g(J,{modelValue:a(d),"onUpdate:modelValue":m[2]||(m[2]=S=>z(d)?d.value=S:null),"allow-edit":!a(I),"allow-add":"","editable-name":"plot configuration","align-vertical":"",onNew:_,onDelete:f,onRename:x},{default:V(()=>[g(se,{id:"fieldSel",modelValue:a(d),"onUpdate:modelValue":m[1]||(m[1]=S=>z(d)?d.value=S:null),options:a(F),size:"small",pt:{list:{class:"h-30"}}},null,8,["modelValue","options"])]),_:1},8,["modelValue","allow-edit"]),g(le),O("div",null,[m[10]||(m[10]=O("label",{for:"selectedIndicators"},"Indicators in this plot",-1)),g(se,{id:"selectedIndicators",modelValue:a(i),"onUpdate:modelValue":m[3]||(m[3]=S=>z(i)?i.value=S:null),size:"small","empty-message":"No indicators selected","option-label":"text","option-value":"value",disabled:a(s),options:a(P),pt:{list:{class:"h-30"}}},null,8,["modelValue","disabled","options"])]),O("div",wi,[g(Q,{severity:"secondary",title:"Remove indicator to plot",size:"small",disabled:!a(i),class:"col",onClick:p},{default:V(()=>m[11]||(m[11]=[G(" Remove indicator ")])),_:1,__:[11]},8,["disabled"]),g(Q,{severity:"secondary",title:"Load indicator config from template",size:"small",onClick:m[4]||(m[4]=S=>Y.value=!a(Y))},{default:V(()=>m[12]||(m[12]=[G(" Indicator from template ")])),_:1,__:[12]}),g(Q,{severity:"primary",title:"Add indicator to plot",size:"small",class:"col",disabled:a(s),onClick:b},{default:V(()=>m[13]||(m[13]=[G(" Add new indicator ")])),_:1,__:[13]},8,["disabled"])]),a(s)?(y(),j(ce,{key:0,columns:t.columns,class:"mt-1",label:"Select indicator to add",onIndicatorSelected:q},null,8,["columns"])):D("",!0),g(ve,{visible:a(Y),"onUpdate:visible":m[5]||(m[5]=S=>z(Y)?Y.value=S:null),columns:t.columns},null,8,["visible","columns"]),a(i)&&!a(Y)?(y(),j(we,{key:1,modelValue:a(w),"onUpdate:modelValue":m[6]||(m[6]=S=>z(w)?w.value=S:null),class:"mt-1",columns:t.columns},null,8,["modelValue","columns"])):D("",!0),g(le),O("div",ki,[g(Q,{severity:"secondary",size:"small",disabled:a(s),title:"Reset to last saved configuration",onClick:E},{default:V(()=>m[14]||(m[14]=[G("Reset")])),_:1,__:[14]},8,["disabled"]),g(Q,{disabled:a(o).activeBot.isWebserverMode&&!a(o).activeBot.botFeatures.plotConfigFromServer||!a(o).activeBot.isBotOnline||a(s),severity:"secondary",size:"small",onClick:Z},{default:V(()=>m[15]||(m[15]=[G(" From strategy ")])),_:1,__:[15]},8,["disabled"]),g(Q,{id:"showButton",severity:"secondary",size:"small",disabled:a(s),title:"Show configuration for easy transfer to a strategy",onClick:m[7]||(m[7]=S=>u.value=!a(u))},{default:V(()=>[G(R(a(u)?"Hide":"Show"),1)]),_:1},8,["disabled"]),g(Q,{severity:"primary",size:"small","data-toggle":"tooltip",disabled:a(s),title:"Save configuration",onClick:H},{default:V(()=>m[16]||(m[16]=[G("Save")])),_:1,__:[16]},8,["disabled"])]),a(u)?(y(),j(Q,{key:2,class:"ms-1 mt-1",severity:"secondary",size:"small",title:"Load configuration from text box below",onClick:$},{default:V(()=>m[17]||(m[17]=[G("Load from String")])),_:1,__:[17]})):D("",!0),a(u)?(y(),C("div",Ci,[g(v,{id:"TextArea",modelValue:a(h),"onUpdate:modelValue":m[8]||(m[8]=S=>z(h)?h.value=S:null),class:"w-full min-h-[250px]",size:"small",state:a(r)},null,8,["modelValue","state"])])):D("",!0)])):D("",!0)}}}),Li=Fe(Mi,[["__scopeId","data-v-11b2db96"]]);function Vi(t,e,n,o){const l=t.indexOf(n),i=t.indexOf(o),s=l>0&&i>0;return s&&t.push(`${n}-${o}`),e.map(u=>{const d=u.slice();if(s){const c=d===null||d[i]===null||d[l]===null?null:d[i]-d[l];d.push(c)}return d})}function Pi(t){const e=[];return"main_plot"in t&&Object.entries(t.main_plot).forEach(([n,o])=>{o.fill_to&&e.push([n,o.fill_to])}),"subplots"in t&&Object.values(t.subplots).forEach(n=>{Object.entries(n).forEach(([o,l])=>{l.fill_to&&e.push([o,l.fill_to])})}),e}const Ti=2,Ai=3,mt=4;function ie(t,e,n=Ai){const o=e%t;let l=n===Ti;return n===mt&&(l=o>t/2),e-o+(l?t:0)}function Di(t,e,n){const o=Yt("Shift",{events:["keydown","keyup"]}),l=B(()=>e.value==="dark"?"white":"black"),i=A({x:0,y:0}),s=144,u=A(!0),d=A(!1),c=A(!1),r=35,I=170;function M(p){return ie(n.value,p,mt)}function F(p){u.value&&!c.value&&h(p.offsetX,p.offsetY)}function P(p){if(d.value)c.value?(w(),c.value=!1,t.value?.chart?.getZr().off("mousemove",F),t.value?.chart?.getZr().off("mousedown",P)):c.value=!0;else{const b=t.value?.convertFromPixel({seriesIndex:0},[p.offsetX,p.offsetY])??[0,0];b[0]=M(Number(b[0]));const _=t.value?.convertToPixel({seriesIndex:0},b)??[0,0];i.value={x:_[0],y:_[1]},t.value?.chart?.getZr().on("mousemove",F),k()}}function k(){d.value=!0,t.value?.setOption({dataZoom:[{disabled:!0}],graphic:[{type:"rect",shape:{x:i.value.x,width:0,y:i.value.y,height:0},style:{fill:l.value,opacity:.1}},{type:"rect",z:5,shape:{x:i.value.x,width:I,y:i.value.y,height:r,r:5},style:{fill:"#002fff",opacity:.8},textContent:{z:10,style:{text:"0 bars - 0%",font:"14px sans-serif",fill:"white"}},textConfig:{position:"inside"}}]})}function w(){d.value=!1,t.value?.setOption({dataZoom:[{disabled:!1}],graphic:[{$action:"remove"},{$action:"remove"}]})}function h(p,b){const _=t.value?.convertFromPixel({seriesIndex:0},[i.value.x,i.value.y])??[0,0],f=t.value?.convertFromPixel({seriesIndex:0},[p,b])??[0,0],x=Number(_[1]),E=Number(f[1]),$=M(Number(_[0])),Z=M(Number(f[0])),H=Math.abs($-Z),q=t.value?.convertToPixel({seriesIndex:0},[Z,0])[0]??0,Y=Wt(H,{units:["d","h","m"]}),W=Math.abs((x-E)/x*100).toFixed(2);t.value?.setOption({graphic:[{shape:{width:q>i.value.x?-1*(i.value.x-q):q-i.value.x,height:b>i.value.y?-1*(i.value.y-b):b-i.value.y}},{shape:{x:i.value.x+(q-i.value.x)/2-I/2,y:b>i.value.y?b-(r+5):b+9},textContent:{style:{textAlign:p<i.value.x?"left":"right",text:`${H/n.value} bars (${x<E?W:"-"+W}%) 
 ${Y}`}}}]}),u.value=!1,setTimeout(()=>{u.value=!0},1e3/s)}K(()=>o.value,()=>{o.value&&!d.value&&t.value?.chart?.getZr().on("mousedown",P)})}function Bi(t,e){const n=t.indexOf("open"),o=t.indexOf("close"),l=t.indexOf("high"),i=t.indexOf("low");let s;return e.map((u,d)=>{const c=u.slice(),r=d===0?(c[n]+c[o])/2:(s[n]+s[o])/2,I=(c[n]+c[l]+c[i]+c[o])/4,M=Math.max(c[l],c[n],c[o]),F=Math.min(c[i],c[n],c[o]);return c[n]=r,c[o]=I,c[l]=M,c[i]=F,s=c.slice(),c})}function Ei(t){if(!t)return{baseCurrency:"",quoteCurrency:""};const[e,n]=t.split("/");if(n!==void 0){const o=n.split(":");return{baseCurrency:e,quoteCurrency:o[0]||n}}return{baseCurrency:n??"",quoteCurrency:e??""}}function bt(t,e){return`${t.ft_order_side==="buy"?"+":"-"}${De("cost"in t?t.cost:t.amount*t.safe_price,e)}`}function We(t,e,n,o){let l=`${t.is_short?"Short":"Long"} ${n}
  ${dt(t.profit_ratio)} ${t.profit_abs?"("+De(t.profit_abs,o)+")":""}
  ${bt(e,o)}
  Enter-tag: ${t.enter_tag??""}
  Order Price: ${De(e.safe_price,o)}`;return l+=`${"ft_order_tag"in e&&e.ft_order_tag&&t.enter_tag!=e.ft_order_tag?`
Order-Tag: `+e.ft_order_tag:""}`,l+=`${t.exit_reason?`
Exit-Tag: `+t.exit_reason:""}`,l}function Hi(t,e,n){let o=`${t.is_short?"Short":"Long"} adjustment
  ${bt(e,n)}
  Enter-tag: ${t.enter_tag??""}`;return o+=`${"ft_order_tag"in e&&e.ft_order_tag?`
Order-Tag: `+e.ft_order_tag:""}`,o}const Fi="path://m 52.444161,104.1909 8.386653,25.34314 8.386651,25.34313 -16.731501,0.0422 -16.731501,0.0422 8.344848,-25.38539 z m 0.08656,-48.368126 8.386652,25.343139 8.386652,25.343137 -16.731501,0.0422 -16.731502,0.0422 8.344848,-25.385389 z",Je="path://m 102.20764,19.885384 h 24.1454 v 41.928829 h -24.1454 z m 12.17344,36.423813 8.38665,25.343139 8.38666,25.343134 -16.7315,0.0422 -16.731507,0.0422 8.344847,-25.385386 z",Pe="#AD00FF",Te="#0066FF";function $i(t,e){const n=[],o=t.data_stop_ts+t.timeframe_ms;for(let l=0,i=e.length;l<i;l+=1){const s=e[l],u=s.open_fill_timestamp??s.open_timestamp;if((ie(t.timeframe_ms??0,s.open_timestamp)<=o||!s.close_timestamp||s.close_timestamp&&s.close_timestamp>=t.data_start_ts)&&s.orders)for(let d=0;d<s.orders.length;d++){const c=s.orders[d],r=c.order_filled_timestamp??("order_timestamp"in c?c.order_timestamp:s.open_timestamp),{quoteCurrency:I}=Ei(s.quote_currency??s.pair??"");r&&ie(t.timeframe_ms??0,r)<=o&&r>t.data_start_ts&&(d===0?n.push([ie(t.timeframe_ms??0,u),c.safe_price,Je,c.ft_order_side=="sell"?180:0,s.is_short?Pe:Te,(s.is_short?"Short":"Long")+(c.order_filled_timestamp?"":" (open)"),We(s,c,"entry",I)]):d===s.orders.length-1&&s.close_timestamp?ie(t.timeframe_ms??0,s.close_timestamp)<=o&&s.close_timestamp>t.data_start_ts&&s.is_open===!1&&n.push([ie(t.timeframe_ms??0,s.close_timestamp),c.safe_price,Je,s.is_short?0:180,s.is_short?Pe:Te,dt(s.profit_ratio,2),We(s,c,"exit",I)]):(c.ft_order_side!=="stoploss"||"filled"in c&&(c.filled??0)>0)&&n.push([ie(t.timeframe_ms??0,r),c.safe_price,Fi,c.ft_order_side=="sell"?180:0,s.is_short?Pe:Te,"",Hi(s,c,I)]))}}return{tradeData:n}}function Ri(t,e,n,o){const{tradeData:l}=$i(n,o),i=o.find(u=>u.is_open),s={name:t,type:"scatter",xAxisIndex:0,yAxisIndex:0,encode:{x:0,y:1,label:5,tooltip:6},label:{show:!0,fontSize:12,backgroundColor:e!=="dark"?"#fff":"#000",padding:2,color:e==="dark"?"#fff":"#000",rotate:75,offset:[10,0],align:"left"},itemStyle:{color:u=>u.data?u.data[4]:"#000",opacity:.9},symbol:u=>u[2],symbolRotate:u=>u[3],symbolSize:13,data:l};if(i){const u=n.timeframe_ms*10;s.markLine={symbol:"none",label:{show:!0,position:"middle"},data:[[{name:"Stoploss",yAxis:i.stop_loss_abs,lineStyle:{color:"#ff0000AA",type:"solid"},xAxis:n.data_stop_ts-u>i.open_timestamp?i.open_timestamp:n.data_stop_ts-u},{lineStyle:{color:"#ff0000AA",type:"solid"},yAxis:i.stop_loss_abs,xAxis:i.close_timestamp??n.data_stop_ts+n.timeframe_ms}]]}}return s}function Ki(t,e){return!t.annotations||!e?{}:{markArea:{label:{position:"insideTop"},data:t.annotations.filter(o=>o.type=="area").map(o=>[{xAxis:o.start,yAxis:o.y_start,itemStyle:{color:o.color},label:{formatter:o.label}},{xAxis:o.end,yAxis:o.y_end}])}}}function Ee(t,e,n,o,l=0){const i={name:n,type:o.type||"line",xAxisIndex:l,yAxisIndex:l,itemStyle:{color:o.color||he()},encode:{x:t,y:e},showSymbol:!1};return o.type===ee.scatter&&(i.symbolSize=o.scatterSymbolSize??3,i.emphasis={disabled:!0}),i}function Qe(t,e,n,o,l=0){const i={type:ee.line},s=Ee(t,e,n,i,l),u={stack:n,stackStrategy:"all",lineStyle:{opacity:0},showSymbol:!1,areaStyle:{color:o.color,opacity:.1},tooltip:{show:!1}};return Object.assign(s,u),s}const Ui={class:"h-full w-full"},et=55,fe=8,zi="#00ff26",ji="#00ff26",Ni="#faba25",Gi="#faba25",Zi=oe({__name:"CandleChart",props:{trades:{},dataset:{},heikinAshi:{type:Boolean},showMarkArea:{type:Boolean},useUTC:{type:Boolean},plotConfig:{},theme:{},sliderPosition:{},colorUp:{},colorDown:{},labelSide:{}},setup(t){dn([pn,vn,fn,yn,xn,hn,On,mn,Sn,bn,In,_n,wn,kn,Cn,Mn,Ln,Vn,gn,Pn]);const e=t,n=B(()=>e.labelSide==="left"),o=n.value?"5.5%":"1%",l=n.value?"1%":"5.5%",i=e.colorUp,s=e.colorUp,u=e.colorDown,d=e.colorDown,c=A(),r=A({}),I=B(()=>e.dataset?e.dataset.strategy:""),M=B(()=>e.dataset?e.dataset.pair:""),F=B(()=>e.dataset?e.dataset.timeframe:""),P=B(()=>e.dataset!==null&&typeof e.dataset=="object"),k=B(()=>e.trades.filter(f=>f.pair===M.value)),w=B(()=>`${I.value} - ${M.value} - ${F.value}`),h=B(()=>Pi(e.plotConfig));Di(c,Ge(()=>e.theme),Ge(()=>e.dataset.timeframe_ms));function p(f=!1){if(!P.value)return;r.value?.title&&(r.value.title[0].text=w.value);const x=e.dataset.columns.slice(),E=x.findIndex(v=>v==="__date_ts"),$=x.findIndex(v=>v==="open"),Z=x.findIndex(v=>v==="high"),H=x.findIndex(v=>v==="low"),q=x.findIndex(v=>v==="close"),Y=x.findIndex(v=>v==="volume"),W=x.findIndex(v=>v==="enter_tag"),L=x.findIndex(v=>v==="exit_tag"),m=x.findIndex(v=>v==="_buy_signal_close"||v==="_enter_long_signal_close"),N=x.findIndex(v=>v==="_sell_signal_close"||v==="_exit_long_signal_close"),le=x.findIndex(v=>v==="_enter_short_signal_close"),_e=x.findIndex(v=>v==="_exit_short_signal_close"),se="subplots"in e.plotConfig?Object.keys(e.plotConfig.subplots).length+1:1;if(Array.isArray(r.value?.dataZoom))if(f){const v=(1-250/e.dataset.length)*100;r.value.dataZoom.forEach((S,U)=>{r.value&&r.value.dataZoom&&(r.value.dataZoom[U].start=v)})}else r.value.dataZoom.forEach((v,S)=>{r.value&&r.value.dataZoom&&(delete r.value.dataZoom[S].start,delete r.value.dataZoom[S].end)});let J=e.heikinAshi?Bi(x,e.dataset.data):e.dataset.data.slice();h.value.forEach(([v,S])=>{J=Vi(x,J,v,S)});const Q=Array(J.length>0?J[J.length-2].length:0);Q[E]=J[J.length-1][E]+e.dataset.timeframe_ms*3,J.push(Q);const ce={dataset:{source:J},grid:[{left:o,right:l,bottom:`${se*fe+2}%`},{left:o,right:l,bottom:`${se*fe}%`,height:`${fe}%`}],series:[{name:"Candles",type:"candlestick",barWidth:"80%",itemStyle:{color:i,color0:u,borderColor:s,borderColor0:d},encode:{x:E,y:[$,q,H,Z]},...Ki(e.dataset,e.showMarkArea)},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,itemStyle:{color:"#777777"},large:!0,encode:{x:E,y:Y}}]};if(Array.isArray(ce.series)){const v=[{colData:m,name:"Entry",symbol:"triangle",symbolSize:10,color:zi,tooltipPrefix:"Long entry",colTooltip:W},{colData:N,name:"Exit",symbol:"diamond",symbolSize:8,color:Ni,tooltipPrefix:"Long exit",colTooltip:L},{colData:le,name:"Entry",symbol:"triangle",symbolSize:10,symbolRotate:180,color:ji,tooltipPrefix:"Short entry",colTooltip:W},{colData:_e,name:"Exit",symbol:"pin",symbolSize:8,color:Gi,tooltipPrefix:"Short exit",colTooltip:L}];for(const S of v)S.colData>=0&&ce.series.push({name:S.name,type:"scatter",symbol:S.symbol,symbolSize:S.symbolSize,symbolRotate:S.symbolRotate??0,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:S.color},tooltip:{valueFormatter:U=>Array.isArray(U)?U.length>0&&U[0]?`${S.tooltipPrefix} ${U[0]} ${U[1]?.toString().substring(0,100)?`(${U[1]})`:""}`:"":U?`${S.tooltipPrefix} ${U}`:""},encode:{x:E,y:S.colData,tooltip:S.colTooltip>=0?[S.colData,S.colTooltip]:[S.colData]}})}if(Object.assign(r.value,ce),"main_plot"in e.plotConfig&&Object.entries(e.plotConfig.main_plot).forEach(([v,S])=>{const U=x.findIndex(ae=>ae===v);if(U>0){if(!Array.isArray(r.value?.legend)&&r.value?.legend?.data&&r.value.legend.data.push(v),Array.isArray(r.value?.series)){if(r.value?.series.push(Ee(E,U,v,S)),S.fill_to){const ae=`${v}-${S.fill_to}`,X=x.findIndex(pe=>pe===ae),re={color:S.color,type:ee.line},ye=Qe(E,X,v,re,0);r.value.series[r.value.series.length-1].stack=v,r.value.series.push(ye)}r.value?.series.splice(r.value?.series.length-1,0)}}else console.log(`element ${v} for main plot not found in columns.`)}),"subplots"in e.plotConfig){let v=2;Object.entries(e.plotConfig.subplots).forEach(([S,U])=>{const ae=v;Array.isArray(r.value.yAxis)&&r.value.yAxis.length<=v&&r.value.yAxis.push({scale:!0,gridIndex:ae,name:S,position:e.labelSide,nameLocation:"middle",nameGap:et,axisLabel:{show:!0,hideOverlap:!0},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}),Array.isArray(r.value.xAxis)&&r.value.xAxis.length<=v&&r.value.xAxis.push({type:"time",gridIndex:ae,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20}),Array.isArray(r.value.dataZoom)&&r.value.dataZoom.forEach(X=>X.xAxisIndex&&Array.isArray(X.xAxisIndex)?X.xAxisIndex.push(v):null),r.value.grid&&Array.isArray(r.value.grid)&&r.value.grid.push({left:o,right:l,bottom:`${(se-v+1)*fe}%`,height:`${fe}%`}),Object.entries(U).forEach(([X,re])=>{const ye=x.findIndex(pe=>pe===X);if(ye>0){if(!Array.isArray(r.value.legend)&&r.value.legend?.data&&r.value.legend.data.push(X),r.value.series&&Array.isArray(r.value.series)){if(r.value.series.push(Ee(E,ye,X,re,v)),re.fill_to){const pe=`${X}-${re.fill_to}`,gt=x.findIndex(xt=>xt===pe),vt={color:re.color,type:ee.line},yt=Qe(E,gt,X,vt,v);r.value.series[r.value.series.length-1].stack=X,r.value.series.push(yt)}r.value?.series.splice(r.value?.series.length-1,0)}}else console.log(`element ${X} was not found in the columns.`)}),v+=1})}Array.isArray(r.value.grid)&&(r.value.grid[r.value.grid.length-1].bottom="50px",delete r.value.grid[r.value.grid.length-1].top);const ve="Trades";!Array.isArray(r.value.legend)&&r.value.legend?.data&&r.value.legend.data.splice(4,0,ve);const we=Ri(ve,e.theme,e.dataset,k.value);Array.isArray(r.value.series)&&r.value.series.push(we),c.value?.setOption(r.value,{replaceMerge:["series","grid","yAxis","xAxis","legend"],notMerge:f})}function b(){c.value?.setOption({},{notMerge:!0}),r.value={title:[{show:!1}],backgroundColor:"rgba(0, 0, 0, 0)",useUTC:e.useUTC,animation:!1,legend:{data:["Candles","Volume","Entry","Exit"],right:"1%",type:"scroll",pageTextStyle:{color:e.theme==="dark"?"#dedede":"#333"},pageIconColor:e.theme==="dark"?"#aaa":"#2f4554",pageIconInactiveColor:e.theme==="dark"?"#2f4554":"#aaa"},tooltip:{show:!0,trigger:"axis",renderMode:"richText",backgroundColor:"rgba(80,80,80,0.7)",borderWidth:0,textStyle:{color:"#fff"},axisPointer:{type:"cross",lineStyle:{color:"#cccccc",width:1,opacity:1}},position(f,x,E,$,Z){const H={top:60},q=f[0]<Z.viewSize[0]/2;return H[["left","right"][+q]]=q?5:60,H}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},xAxis:[{type:"time",axisLine:{onZero:!1},axisTick:{show:!0},axisLabel:{show:!0},axisPointer:{label:{show:!1}},position:"top",splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"},{type:"time",gridIndex:1,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,max:f=>f.max+(f.max-f.min)*.02,min:f=>f.min-(f.max-f.min)*.04,position:e.labelSide},{scale:!0,gridIndex:1,splitNumber:2,name:"volume",nameLocation:"middle",position:e.labelSide,nameGap:et,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:80,end:100},{xAxisIndex:[0,1],bottom:10,start:80,end:100,...Tn}]},console.log("Initialized"),p(!0)}function _(){if(!e.sliderPosition)return;const f=e.sliderPosition.startValue-e.dataset.timeframe_ms*40,x=e.sliderPosition.endValue?e.sliderPosition.endValue+e.dataset.timeframe_ms*40:e.sliderPosition.startValue+e.dataset.timeframe_ms*80;c.value&&c.value.dispatchAction({type:"dataZoom",dataZoomIndex:0,startValue:f,endValue:x})}return He(()=>{b()}),K([()=>e.useUTC,()=>e.theme,()=>e.plotConfig],()=>b()),K([()=>e.dataset,()=>e.heikinAshi,()=>e.showMarkArea],()=>p()),K(()=>e.sliderPosition,()=>_()),(f,x)=>(y(),C("div",Ui,[a(P)?(y(),j(a(cn),{key:0,ref_key:"candleChart",ref:c,theme:f.theme,autoresize:"","manual-update":""},null,8,["theme"])):D("",!0)]))}}),qi=Fe(Zi,[["__scopeId","data-v-240c21c0"]]),Xi={class:"flex h-full"},Yi={class:"flex-fill w-full flex-col align-items-stretch flex h-full"},Wi={class:"flex me-0"},Ji={class:"ms-1 md:ms-2 flex flex-wrap md:flex-nowrap items-center gap-1"},Qi={class:"md:ms-2 text-nowrap"},eo={class:"flex flex-col"},to={class:"flex flex-row flex-wrap"},no={key:0,class:"ms-2 text-sm text-nowrap",title:"Long entry signals"},io={key:1,class:"ms-2 text-sm text-nowrap",title:"Long exit signals"},oo={class:"flex flex-row flex-wrap"},lo={key:0,class:"ms-2 text-sm text-nowrap"},so={key:1,class:"ms-2 text-sm text-nowrap"},ao={class:"ms-auto flex items-center gap-2"},ro={class:"me-0 md:me-1"},uo={class:"h-full flex"},co={class:"min-w-0 w-full shrink"},po={key:1,class:"m-auto"},fo={key:1,class:"text-lg"},ho={key:2},mo={key:0,class:"grow border rounded-md ps-1 border-surface-300 dark:border-surface-700"},bo=oe({__name:"CandleChartContainer",props:{trades:{default:()=>[]},availablePairs:{},timeframe:{},historicView:{type:Boolean,default:!1},reloadDataOnSwitch:{type:Boolean,default:!1},plotConfigModal:{type:Boolean,default:!0},strategy:{default:""},sliderPosition:{default:void 0}},emits:["refreshData"],setup(t,{emit:e}){const n=t,o=e,l=Jt(),i=Qt(),s=rt(),u=Ie(),d=A(),c=B(()=>n.historicView?s.activeBot.history[`${s.activeBot.plotPair}__${n.timeframe}`]?.data:s.activeBot.candleData[`${s.activeBot.plotPair}__${n.timeframe}`]?.data),r=B(()=>n.strategy||c.value?.strategy||""),I=B(()=>c.value?c.value.all_columns??c.value.columns:[]),M=B(()=>c.value?c.value.columns??c.value.all_columns:[]),F=B(()=>c.value&&c.value.data.length>0),P=B(()=>n.historicView?s.activeBot.historyStatus===de.loading:s.activeBot.candleDataStatus===de.loading),k=B(()=>{switch(n.historicView?s.activeBot.historyStatus:s.activeBot.candleDataStatus){case de.not_loaded:return"Not loaded yet.";case de.loading:return"Loading...";case de.success:return"No data available";case de.error:return"Failed to load data";default:return"Unknown"}}),w=A(!1);function h(){n.plotConfigModal?w.value=!w.value:d.value=!d.value}function p(){o("refreshData",s.activeBot.plotPair,u.usedColumns)}function b(){F.value||p()}return K(()=>n.availablePairs,()=>{n.availablePairs.find(_=>_===s.activeBot.plotPair)||([s.activeBot.plotPair]=n.availablePairs,p())}),K(()=>s.activeBot.selectedPair,()=>{s.activeBot.plotPair=s.activeBot.selectedPair}),K(()=>s.activeBot.plotPair,()=>{n.historicView?n.reloadDataOnSwitch&&b():p()}),K(()=>u.plotConfig,()=>{const _=u.usedColumns.some(f=>I.value.includes(f)&&!M.value.includes(f));l.useReducedPairCalls&&_&&p()}),K(()=>n.timeframe,()=>{b()}),He(()=>{d.value=n.plotConfigModal,s.activeBot.selectedPair?s.activeBot.plotPair=s.activeBot.selectedPair:n.availablePairs.length>0&&([s.activeBot.plotPair]=n.availablePairs),u.plotConfigChanged(),n.historicView||b()}),(_,f)=>{const x=be,E=en,$=ge,Z=rn,H=ut,q=ht,Y=tn,W=qi,L=Li,m=on;return y(),C("div",Xi,[O("div",Yi,[O("div",Wi,[O("div",Ji,[O("span",Qi,R(a(r))+" | "+R(_.timeframe||""),1),g(x,{modelValue:a(s).activeBot.plotPair,"onUpdate:modelValue":f[0]||(f[0]=N=>a(s).activeBot.plotPair=N),class:"md:ms-2",options:_.availablePairs,size:"small",clearable:!1,onInput:p},null,8,["modelValue","options"]),g($,{title:"Refresh chart",severity:"secondary",disabled:!a(s).activeBot.plotPair||a(P),size:"small",onClick:p},{default:V(()=>[g(E)]),_:1},8,["disabled"]),a(P)?(y(),j(Z,{key:0,class:"w-8 h-8","stroke-width":"8",small:"",label:"Spinning"})):D("",!0),O("div",eo,[O("div",to,[a(c)?(y(),C("small",no,"Long entries: "+R(a(c).enter_long_signals||a(c).buy_signals),1)):D("",!0),a(c)?(y(),C("small",io,"Long exit: "+R(a(c).exit_long_signals||a(c).sell_signals),1)):D("",!0)]),O("div",oo,[a(c)&&a(c).enter_short_signals?(y(),C("small",lo,"Short entries: "+R(a(c).enter_short_signals),1)):D("",!0),a(c)&&a(c).exit_short_signals?(y(),C("small",so,"Short exits: "+R(a(c).exit_short_signals),1)):D("",!0)])])]),O("div",ao,[g(H,{modelValue:a(l).showMarkArea,"onUpdate:modelValue":f[1]||(f[1]=N=>a(l).showMarkArea=N)},{default:V(()=>f[4]||(f[4]=[O("span",{class:"text-nowrap"},"Show Chart Areas",-1)])),_:1,__:[4]},8,["modelValue"]),g(H,{modelValue:a(l).useHeikinAshiCandles,"onUpdate:modelValue":f[2]||(f[2]=N=>a(l).useHeikinAshiCandles=N)},{default:V(()=>f[5]||(f[5]=[O("span",{class:"text-nowrap"},"Heikin Ashi",-1)])),_:1,__:[5]},8,["modelValue"]),g(q),O("div",ro,[g($,{size:"small",title:"Plot configurator",severity:"secondary",onClick:h},{icon:V(()=>[g(Y,{width:"12",height:"12"})]),_:1})])])]),O("div",uo,[O("div",co,[a(F)?(y(),j(W,{key:0,dataset:a(c),trades:_.trades,"plot-config":a(u).plotConfig,"heikin-ashi":a(l).useHeikinAshiCandles,"show-mark-area":a(l).showMarkArea,"use-u-t-c":a(l).timezone==="UTC",theme:a(l).chartTheme,"slider-position":_.sliderPosition,"color-up":a(i).colorUp,"color-down":a(i).colorDown,"label-side":a(l).chartLabelSide},null,8,["dataset","trades","plot-config","heikin-ashi","show-mark-area","use-u-t-c","theme","slider-position","color-up","color-down","label-side"])):(y(),C("div",po,[a(P)?(y(),j(Z,{key:0,class:"w-5 h-5",label:"Spinning"})):(y(),C("div",fo,R(a(k)),1)),a(s).activeBot.historyTakesLonger?(y(),C("p",ho," This is taking longer than expected ... Hold on ... ")):D("",!0)]))]),g(ot,{name:"fade"},{default:V(()=>[_.plotConfigModal?D("",!0):at((y(),C("div",mo,[g(L,{columns:a(I),"is-visible":a(d)??!1},null,8,["columns","is-visible"])],512)),[[nn,a(d)]])]),_:1})])]),_.plotConfigModal?(y(),j(m,{key:0,id:"plotConfiguratorModal",visible:a(w),"onUpdate:visible":f[3]||(f[3]=N=>z(w)?w.value=N:null),header:"Plot Configurator","ok-only":"","hide-backdrop":""},{default:V(()=>[g(L,{"is-visible":a(w),columns:a(I)},null,8,["is-visible","columns"])]),_:1},8,["visible"])):D("",!0)])}}}),Io=Fe(bo,[["__scopeId","data-v-950018e6"]]);export{Io as _};
//# sourceMappingURL=CandleChartContainer-B0Gc7mC3.js.map
