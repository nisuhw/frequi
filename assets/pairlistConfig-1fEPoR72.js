import{_ as q}from"./plus-box-outline-EwMT-Jc6.js";import{d as G,aY as H,a8 as W,c as _,o as h,a as M,e as m,F as X,t as K,s as Q,g as Z,h as I,H as ee,m as te,V as ae,u as ne,r as i,W as N,X as V,j as x,Y as oe,cN as d,c3 as se,p as E}from"./index-ClGwpIlp.js";var C=(n=>(n.string="string",n.number="number",n.boolean="boolean",n.option="option",n.list="list",n))(C||{});const le={class:"flex flex-row gap-2"},ie={class:"flex gap-1 flex-col w-full"},fe=G({__name:"BaseStringList",props:H({placeholder:{default:""},size:{default:"small"}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const l=W(n,"modelValue");return(k,f)=>{const g=Q,p=ee,r=Z,a=q;return h(),_("div",le,[M("div",ie,[(h(!0),_(X,null,K(l.value,(o,u)=>(h(),_("div",{key:u,class:"flex flex-row gap-1"},[m(g,{modelValue:l.value[u],"onUpdate:modelValue":v=>l.value[u]=v,size:"small",class:"w-full",placeholder:n.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"]),m(r,{severity:"secondary",variant:"outlined",title:"Delete this value.",class:"flex align-items-center justify-content-center",onClick:v=>l.value.splice(u,1)},{icon:I(()=>[m(p)]),_:1},8,["onClick"])]))),128))]),m(r,{title:"Add new value",severity:"secondary",class:"mt-auto flex align-items-center justify-content-center",onClick:f[0]||(f[0]=o=>l.value.push(""))},{icon:I(()=>[m(a)]),_:1})])}}}),re={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ue(n,l){return h(),_("svg",re,[...l[0]||(l[0]=[M("path",{fill:"currentColor",d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"},null,-1)])])}const ve=te({name:"mdi-chevron-up",render:ue}),me=ae("pairlistConfig",()=>{const n=ne(),l=i(!1),k=i(),f=i(n.activeBot?.stakeCurrency??"USDT"),g=i([]),p=i(!1),r=i({exchange:n.activeBot?.botState.exchange??"",trade_mode:{trading_mode:n.activeBot?.botState.trading_mode??N.SPOT,margin_mode:n.activeBot?.botState.trading_mode===N.FUTURES?V.ISOLATED:V.NONE}}),a=i(b()),o=i([]),u=i(""),v=x(()=>!!a.value.pairlists[0]?.is_pairlist_generator),T=x(()=>v.value&&a.value.pairlists.length>0),j=x(()=>JSON.stringify(y(),null,2)),O=e=>o.value.findIndex(t=>t.name===e)>-1;function U(e,t){e=structuredClone(d(e)),e.showParameters=!1,e.id||(e.id=Date.now().toString(36)+Math.random().toString(36).substring(2));for(const s in e.params)e.params[s]&&(e.params[s].value=se(e.params[s].default)?e.params[s].default:"");a.value.pairlists.splice(t,0,e)}function F(e){a.value.pairlists.splice(e,1)}function L(e=""){const t=o.value.findIndex(s=>s.name===a.value.name);a.value.name=e,t>-1?o.value[t]=structuredClone(d(a.value)):o.value.push(structuredClone(d(a.value)))}function B(e){const t=b({name:e});o.value.push(t),a.value=structuredClone(t)}function $(e=""){const t=b({name:e,pairlists:d(a.value.pairlists),blacklist:d(a.value.blacklist)});o.value.push(t),a.value=structuredClone(t)}function D(){const e=o.value.findIndex(t=>t.name===a.value.name);e>-1&&(o.value.splice(e,1),S(o.value.length>0&&o.value[0]?o.value[0].name:"default"))}function S(e){const t=o.value.find(s=>e===s.name);t?a.value=structuredClone(d(t)):B(e)}function b({name:e="",pairlists:t=[],blacklist:s=[]}={}){return{name:e,pairlists:t,blacklist:s}}function P(){a.value.blacklist.push("")}function R(e){a.value.blacklist.splice(e,1)}function z(e){const t=o.value.find(s=>s.name===e);t&&(a.value.blacklist=structuredClone(d(t.blacklist)))}async function A(){const e=Y();l.value=!0;try{const{job_id:t}=await n.activeBot.evaluatePairlist(e);console.log("jobId",t),k.value=window.setInterval(async()=>{if(!(await n.activeBot.getBackgroundJobStatus(t)).running){clearInterval(k.value);const c=await n.activeBot.getPairlistEvalResult(t);l.value=!1,c.status==="success"?g.value=c.result.whitelist:c.error&&(E(c.error,"error"),l.value=!1)}},1e3)}catch{E("Evaluation failed","error"),l.value=!1}}function J(e,t){return e===C.number?Number(t):e===C.boolean?!!t:e===C.list?t:String(t)}function Y(){const t={pairlists:y(),stake_currency:f.value,blacklist:a.value.blacklist};return p.value&&(console.log("setting custom exchange props"),t.exchange=r.value.exchange,t.trading_mode=r.value.trade_mode.trading_mode,t.margin_mode=r.value.trade_mode.margin_mode),t}function y(){const e=[];return a.value.pairlists.forEach(t=>{const s={method:t.name};for(const c in t.params){const w=t.params[c];w?.value&&(s[c]=J(w.type,w.value))}e.push(s)}),e}return oe(()=>a.value,()=>{u.value=a.value.name},{deep:!0}),{evaluating:l,whitelist:g,config:a,configJSON:j,savedConfigs:o,configName:u,startPairlistEvaluation:A,addToConfig:U,removeFromConfig:F,saveConfig:L,duplicateConfig:$,deleteConfig:D,newConfig:B,selectOrCreateConfig:S,addToBlacklist:P,removeFromBlacklist:R,duplicateBlacklist:z,isSavedConfig:O,firstPairlistIsGenerator:v,pairlistValid:T,stakeCurrency:f,customExchange:p,selectedExchange:r}},{persist:{key:"ftPairlistConfig",pick:["savedConfigs","configName"]}});export{C as P,fe as _,ve as a,me as u};
//# sourceMappingURL=pairlistConfig-1fEPoR72.js.map
