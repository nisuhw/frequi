import{d as $,j as d,O as D,b3 as O,r as A,x as C,q as u,o as r,f as t,A as N,u as j,b9 as m,b as z,c as h,a as T,e as c,E as P,g as E,h as v,D as F,C as x,I as V,K as G}from"./index-ClGwpIlp.js";import{s as U,a as W}from"./index-BargtoSX.js";import{u as H,r as q,s as K,i as J,a as Q,b as X,c as Y,d as Z}from"./installCanvasRenderer-CUWBVOGO.js";import{i as ee,f as te}from"./ftEchartsTransforms-BQmZ3bmz.js";import{o as oe,i as ae,b as se,f as ie}from"./chartZoom-DLaCzouw.js";import{s as le}from"./index-BxBtczTd.js";const k="Trade Count",re=$({__name:"TimePeriodChart",props:{dailyStats:{},showTitle:{type:Boolean,default:!0},profitCol:{}},setup(S){H([oe,ae,J,se,Q,X,Y,Z,ie,ee]);const e=S,a=d(()=>e.profitCol==="abs_profit"?"Absolute profit":"Relative profit"),n=D(),i=O(),B=A(null),w=d(()=>e.dailyStats.data.reduce((o,s)=>s[e.profitCol]<o?s[e.profitCol]:o,e.dailyStats.data[0]?.[e.profitCol]??0)*(e.profitCol==="rel_profit"?100:1)),f=d(()=>e.dailyStats.data.reduce((o,s)=>s[e.profitCol]>o?s[e.profitCol]:o,e.dailyStats.data[0]?.[e.profitCol]??0)*(e.profitCol==="rel_profit"?100:1));q(te.multiple);const b={type:"linear",x:0,y:0,x2:1,y2:0,colorStops:[{offset:0,color:i.colorProfit},{offset:.5,color:i.colorProfit},{offset:.5,color:i.colorLoss},{offset:1,color:i.colorLoss}]},p=d(()=>({title:{text:"Daily profit",show:e.showTitle},backgroundColor:"rgba(0, 0, 0, 0)",dataset:[{dimensions:["date",e.profitCol,"trade_count"],source:e.dailyStats.data},{transform:{type:"ft:multiple",config:{dimension:e.profitCol,factor:e.profitCol=="rel_profit"?100:1}}}],tooltip:{trigger:"axis",axisPointer:{type:"line",label:{backgroundColor:"#6a7985"}}},legend:{data:[{name:a.value,lineStyle:{color:b},itemStyle:{color:b}},{name:k}],top:0,right:"5%"},xAxis:[{type:"category"}],visualMap:[{dimension:1,seriesIndex:0,show:!1,pieces:[{max:0,min:w.value,color:i.colorLoss},{min:0,max:f.value,color:i.colorProfit}]}],yAxis:[{type:"value",name:a.value,splitLine:{show:!1},nameRotate:90,nameLocation:"middle",nameGap:35,axisLabel:{formatter:o=>e.profitCol==="rel_profit"?`${o}%`:`${o}`}},{type:"value",name:k,nameRotate:90,nameLocation:"middle",nameGap:30}],grid:{left:"50",right:"45",bottom:"15%"},series:[{type:"line",name:a.value,datasetIndex:1},{type:"bar",name:k,itemStyle:{color:"rgba(150,150,150,0.3)"},yAxisIndex:1,datasetIndex:1}]}));return(o,s)=>S.dailyStats.data?(r(),C(t(K),{key:0,ref_key:"dailyChart",ref:B,option:t(p),theme:t(n).chartTheme,style:{height:"100%"},autoresize:""},null,8,["option","theme"])):u("",!0)}}),ne=N(re,[["__scopeId","data-v-a5edae54"]]),ce={class:"flex flex-col h-full"},de={key:0,class:"mb-2"},fe={class:"me-auto inline text-xl"},me={class:"flex align-center justify-between"},ue={key:1},pe={key:2,class:"flex items-center justify-center h-full w-full p-2"},ye={key:3},Ce=$({__name:"PeriodBreakdown",props:{multiBotView:{type:Boolean}},setup(S){const e=j(),a=D(),n=S,i=d(()=>e.activeBot?.botFeatures?.weeklyMonthlyStats||n.multiBotView),B=d(()=>{const o=[{value:m.daily,text:"Days"}];return i.value&&(o.push({value:m.weekly,text:"Weeks"}),o.push({value:m.monthly,text:"Months"})),o}),w=A([{value:"abs_profit",text:"Abs $"},{value:"rel_profit",text:"Rel %"}]),f=d(()=>{if(n.multiBotView)switch(a.timeProfitPeriod){case m.weekly:return e.allWeeklyStatsSelectedBots;case m.monthly:return e.allMonthlyStatsSelectedBots;default:return e.allDailyStatsSelectedBots}switch(a.timeProfitPeriod){case m.weekly:return e.activeBot.weeklyStats;case m.monthly:return e.activeBot.monthlyStats;default:return e.activeBot.dailyStats}}),b=d(()=>({...f.value,data:f.value.data?Object.values(f.value.data).sort((o,s)=>o.date>s.date?1:-1):[]}));function p(){n.multiBotView?e.allGetTimeSummary(a.timeProfitPeriod):e.activeBot.getTimeSummary(a.timeProfitPeriod)}return z(()=>{p()}),(o,s)=>{const R=F,I=E,g=le,M=ne,y=W,L=U;return r(),h("div",ce,[n.multiBotView?u("",!0):(r(),h("div",de,[T("h3",fe,P(t(i)?"Period":"Daily")+" Breakdown",1),c(I,{class:"float-end",severity:"secondary",onClick:p},{icon:v(()=>[c(R)]),_:1})])),T("div",me,[t(i)?(r(),C(g,{key:0,id:"order-direction",modelValue:t(a).timeProfitPeriod,"onUpdate:modelValue":s[0]||(s[0]=l=>t(a).timeProfitPeriod=l),options:t(B),name:"radios-btn-default",size:"small","allow-empty":!1,"option-label":"text","option-value":"value",onChange:p},null,8,["modelValue","options"])):u("",!0),c(g,{modelValue:t(a).timeProfitPreference,"onUpdate:modelValue":s[1]||(s[1]=l=>t(a).timeProfitPreference=l),name:"radios-btn-select",size:"small","allow-empty":!1,"option-label":"text","option-value":"value",options:t(w),buttons:"","button-variant":"outline-primary"},null,8,["modelValue","options"])]),n.multiBotView&&(t(e).selectedBotCount<=1||t(a).timeProfitPreference!="rel_profit")?(r(),h("div",ue,[t(f)?(r(),C(M,{key:0,"daily-stats":t(b),"show-title":!1,"profit-col":t(a).timeProfitPreference},null,8,["daily-stats","profit-col"])):u("",!0)])):(r(),h("div",pe," Time period chart is only available when a single bot is selected and showing absolute profit. ")),n.multiBotView?u("",!0):(r(),h("div",ye,[c(L,{size:"small",value:t(f).data},{default:v(()=>[c(y,{field:"date",header:"Day"}),c(y,{field:"abs_profit",header:"Profit"},{body:v(({data:l,field:_})=>[x(P(("formatPrice"in o?o.formatPrice:t(V))(l[_],t(e).activeBot.stakeCurrencyDecimals)),1)]),_:1}),c(y,{field:"fiat_value",header:`In ${t(e).activeBot.dailyStats.fiat_display_currency}`},{body:v(({data:l,field:_})=>[x(P(("formatPrice"in o?o.formatPrice:t(V))(l[_],2)),1)]),_:1},8,["header"]),c(y,{field:"trade_count",header:"Trades"}),t(e).activeBot.botFeatures.advancedDailyMetrics?(r(),C(y,{key:0,field:"rel_profit",header:"Profit%"},{body:v(({data:l,field:_})=>[x(P(("formatPercent"in o?o.formatPercent:t(G))(l[_],2)),1)]),_:1})):u("",!0)]),_:1},8,["value"])]))])}}});export{Ce as _};
//# sourceMappingURL=PeriodBreakdown.vue_vue_type_script_setup_true_lang-D4do-mnd.js.map
