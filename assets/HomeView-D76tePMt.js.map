{"version":3,"file":"HomeView-D76tePMt.js","sources":["../../src/components/BotRename.vue","../../src/components/ExportModal.vue","../../src/components/BotList.vue","../../src/views/HomeView.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { useBotStore } from '@/stores/ftbotwrapper';\nimport type { BotDescriptor } from '@/types';\nconst props = defineProps({\n  bot: { type: Object as () => BotDescriptor, required: true },\n});\nconst emit = defineEmits<{ cancelled: []; saved: [] }>();\n\nconst botStore = useBotStore();\nconst newName = ref<string>('');\n\nonMounted(() => {\n  newName.value = props.bot.botName;\n});\n\nconst save = () => {\n  botStore.updateBot(props.bot.botId, {\n    botName: newName.value,\n  });\n\n  emit('saved');\n};\n</script>\n\n<template>\n  <form class=\"flex w-full gap-2\" @submit.prevent=\"save\">\n    <InputText v-model=\"newName\" size=\"small\" class=\"w-full\" placeholder=\"Bot name\" autofocus />\n\n    <div class=\"flex gap-1\">\n      <Button type=\"submit\" size=\"small\" severity=\"secondary\" title=\"Save\" class=\"w-8 h-8 p-0!\">\n        <i-mdi-check />\n      </Button>\n\n      <Button\n        size=\"small\"\n        severity=\"secondary\"\n        title=\"Cancel\"\n        class=\"w-8 h-8 p-0!\"\n        @click=\"$emit('cancelled')\"\n      >\n        <i-mdi-close />\n      </Button>\n    </div>\n  </form>\n</template>\n","<script setup lang=\"ts\">\ninterface Props {\n  buttonText?: string;\n  dialogTitle?: string;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  buttonText: 'Open Text Area',\n  dialogTitle: 'Text Area Dialog',\n});\n\nconst dialogOpen = ref(false);\nconst textContent = ref('');\nconst toast = useToast();\n\nfunction openDialog() {\n  // Get ftAuthLoginInfo from localStorage and convert to base64\n  const authInfo = localStorage.getItem('ftAuthLoginInfo');\n  if (authInfo) {\n    try {\n      // Parse the authInfo JSON\n      const parsedAuthInfo = JSON.parse(authInfo);\n\n      // Extract the required attributes from each bot entry\n      const extractedBots = Object.values(parsedAuthInfo).map((bot: any) => ({\n        botName: bot.botName,\n        url: bot.apiUrl,\n        username: bot.username,\n        accessToken: bot.accessToken,\n        refreshToken: bot.refreshToken,\n      }));\n\n      // Convert the array to JSON string and then to base64\n      textContent.value = btoa(JSON.stringify(extractedBots));\n    } catch (error) {\n      console.error('Error parsing auth info:', error);\n      textContent.value = '';\n    }\n  } else {\n    textContent.value = '';\n  }\n  dialogOpen.value = true;\n}\n\nfunction closeDialog() {\n  dialogOpen.value = false;\n}\n\nasync function copyToClipboard() {\n  try {\n    await navigator.clipboard.writeText(textContent.value);\n    toast.add({\n      summary: 'Success',\n      detail: 'Content copied to clipboard',\n      severity: 'success',\n      life: 3000,\n    });\n  } catch (err) {\n    console.error('Failed to copy text to clipboard:', err);\n    toast.add({\n      summary: 'Error',\n      detail: 'Failed to copy content to clipboard',\n      severity: 'error',\n      life: 3000,\n    });\n  }\n}\n\nfunction selectAll(event: Event) {\n  const target = event.target as HTMLTextAreaElement;\n  target.select();\n}\n\ndefineExpose({\n  openDialog,\n});\n</script>\n\n<template>\n  <div>\n    <Button severity=\"secondary\" @click=\"openDialog\">\n      <i-mdi-export-variant class=\"me-1\" />{{ props.buttonText }}\n    </Button>\n    <Dialog\n      v-model:visible=\"dialogOpen\"\n      :header=\"props.dialogTitle\"\n      :dismissable-mask=\"true\"\n      class=\"w-[600px]\"\n    >\n      <div class=\"flex flex-col gap-4\">\n        <div class=\"flex flex-col gap-2\">\n          <label for=\"textArea\" class=\"font-medium\">Exported JSON in Base64:</label>\n          <Textarea\n            id=\"textArea\"\n            v-model=\"textContent\"\n            rows=\"8\"\n            class=\"w-full\"\n            placeholder=\"No bot found...\"\n            readonly\n            style=\"resize: none; overflow-y: auto\"\n            @focus=\"selectAll\"\n          />\n        </div>\n        <div class=\"flex justify-end gap-2\">\n          <Button severity=\"secondary\" @click=\"copyToClipboard\">\n            <i-mdi-content-copy class=\"me-1\" />Copy\n          </Button>\n          <Button severity=\"primary\" @click=\"closeDialog\">Close</Button>\n        </div>\n      </div>\n    </Dialog>\n  </div>\n</template>\n","<script setup lang=\"ts\">\nimport LoginModal from '@/components/LoginModal.vue';\nimport ExportModal from '@/components/ExportModal.vue';\n\nimport { useBotStore } from '@/stores/ftbotwrapper';\nimport type { AuthStorageWithBotId, BotDescriptor } from '@/types';\nimport { useSortable } from '@vueuse/integrations/useSortable';\n\ndefineProps<{\n  small?: boolean;\n}>();\n\nconst botStore = useBotStore();\n\nconst editingBots = ref<string[]>([]);\nconst loginModal = ref<typeof LoginModal>();\nconst sortContainer = ref<HTMLElement | null>(null);\nconst botListComp = computed<BotDescriptor[]>(() => {\n  //Convert to array\n  return botStore.availableBotsSorted;\n});\n\nuseSortable(sortContainer, botListComp, {\n  handle: '.handle',\n  onUpdate: (e) => {\n    const oldBotId = botListComp.value[e.oldIndex].botId;\n    const newBotId = botListComp.value[e.newIndex].botId;\n    botStore.updateBot(oldBotId, { sortId: e.newIndex });\n    botStore.updateBot(newBotId, { sortId: e.oldIndex });\n  },\n});\n\nconst editBot = (botId: string) => {\n  if (!editingBots.value.includes(botId)) {\n    editingBots.value.push(botId);\n  }\n};\n\nconst editBotLogin = (botId: string) => {\n  const loginInfo: AuthStorageWithBotId = {\n    ...botStore.botStores[botId].getLoginInfo(),\n    botId,\n  };\n  loginModal.value?.openLoginModal(loginInfo);\n};\n\nconst stopEditBot = (botId: string) => {\n  if (!editingBots.value.includes(botId)) {\n    return;\n  }\n\n  editingBots.value.splice(editingBots.value.indexOf(botId), 1);\n};\n</script>\n\n<template>\n  <div v-if=\"botStore.botCount > 0\" class=\"w-full mx-2\">\n    <h3 v-if=\"!small\" class=\"font-bold text-2xl mb-2\">Available bots</h3>\n    <ul\n      ref=\"sortContainer\"\n      class=\"flex flex-col divide-y border-x border-surface-500 rounded-sm border-y divide-solid divide-surface-500\"\n    >\n      <li\n        v-for=\"bot in botListComp\"\n        :key=\"bot.botId\"\n        :active=\"bot.botId === botStore.selectedBot\"\n        button\n        :title=\"`${bot.botId} - ${bot.botName} - ${bot.botUrl} - ${\n          botStore.botStores[bot.botId].isBotLoggedIn ? '' : 'Login info expired!'\n        }`\"\n        class=\"flex items-center p-2\"\n        :class=\"{\n          'bg-primary-100 dark:bg-primary-800 underline font-semibold':\n            bot.botId === botStore.selectedBot,\n        }\"\n        @click=\"botStore.selectBot(bot.botId)\"\n      >\n        <i-mdi-reorder-horizontal v-if=\"!small\" class=\"handle cursor-pointer me-2 fs-4\" />\n        <BotRename\n          v-if=\"editingBots.includes(bot.botId)\"\n          :bot=\"bot\"\n          @saved=\"stopEditBot(bot.botId)\"\n          @cancelled=\"stopEditBot(bot.botId)\"\n        />\n\n        <BotEntry\n          v-else\n          :bot=\"bot\"\n          :no-buttons=\"small\"\n          @edit=\"editBot(bot.botId)\"\n          @edit-login=\"editBotLogin(bot.botId)\"\n        />\n      </li>\n    </ul>\n    <div v-if=\"!small\" class=\"mt-2 flex gap-2 justify-center\">\n      <LoginModal ref=\"loginModal\" login-text=\"Add new bot\" />\n      <ExportModal button-text=\"Export\" dialog-title=\"Export Data\" />\n    </div>\n  </div>\n</template>\n","<template>\n  <div class=\"mt-5\">\n    <div class=\"flex justify-center\">\n      <BotList class=\"max-w-xl\" />\n    </div>\n    <Divider />\n    <div\n      title=\"Freqtrade logo\"\n      class=\"logo-svg my-5 mx-auto dark:bg-white bg-black sm:w-[250px] sm:h-[250px] w-[150px] h-[150px] transition-all duration-300\"\n    />\n    <h1 class=\"font-bold text-2xl sm:text-4xl mb-4 transition-all\">Welcome to the Freqtrade UI</h1>\n    <div>This page allows you to control your trading bot.</div>\n    <Divider />\n    <p class=\"mb-2\">\n      If you need any help, please refer to the\n      <a\n        class=\"text-primary underline cursor-pointer\"\n        href=\"https://www.freqtrade.io/en/latest/\"\n        target=\"_blank\"\n      >\n        Freqtrade Documentation\n      </a>\n      .\n    </p>\n\n    <p class=\"mb-5\">Have fun - <i>wishes you the Freqtrade team</i></p>\n  </div>\n</template>\n\n<style lang=\"css\" scoped>\n.logo-svg {\n  -webkit-mask: url(../assets/freqtrade-logo-mask.png) no-repeat center;\n  -webkit-mask-size: 240px 240px;\n  mask: url(../assets/freqtrade-logo-mask.png) no-repeat center;\n  mask-size: contain;\n}\n</style>\n"],"names":["props","__props","emit","__emit","botStore","useBotStore","newName","ref","onMounted","save","_createElementBlock","_createVNode","_component_InputText","_unref","$event","_createElementVNode","_hoisted_1","_component_Button","_component_i_mdi_check","$emit","_component_i_mdi_close","dialogOpen","textContent","toast","useToast","openDialog","authInfo","parsedAuthInfo","extractedBots","bot","error","closeDialog","copyToClipboard","err","selectAll","event","__expose","_component_i_mdi_export_variant","_createTextVNode","_toDisplayString","_component_Dialog","_hoisted_2","_component_Textarea","_hoisted_3","_component_i_mdi_content_copy","_cache","editingBots","loginModal","sortContainer","botListComp","computed","useSortable","e","oldBotId","newBotId","editBot","botId","editBotLogin","loginInfo","stopEditBot","_openBlock","small","_Fragment","_renderList","_createBlock","_component_i_mdi_reorder_horizontal","_component_BotRename","_component_BotEntry","_hoisted_4","LoginModal","ExportModal","_component_BotList","_component_Divider"],"mappings":"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"}