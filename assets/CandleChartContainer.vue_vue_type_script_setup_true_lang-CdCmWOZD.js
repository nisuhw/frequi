import{$ as Ue,as as Mt,ag as ut,O as A,c as k,a as g,d as le,r as D,o as Ke,V as U,e as y,b as v,z as R,a6 as ye,f as a,i as j,g as xe,h as V,_ as dt,I as Pt,at as Lt,a0 as ct,au as Vt,av as At,aw as Tt,ax as qe,ay as Dt,az as $t,aA as Bt,aB as Pe,N as oe,k as H,Z as Et,j as T,aC as ee,aD as Ht,l as G,s as pt,aE as Ft,aF as zt,aG as Rt,aH as Ut,aI as Kt,aJ as jt,af as Nt,aK as ke,aL as We,aj as Gt,ac as Ye,aM as Ce,aN as Zt,aO as Je,ap as Le,aP as Xt,aQ as de,ao as qt,a2 as ie,n as je,aR as Wt,aS as Yt,F as me,m as Ne,W as Jt,x as Z,aT as Qt,aU as He,aV as en,a5 as tn,aW as Se,aX as nn,u as Ge,v as on,X as ft,C as Qe,t as ht,aY as ln,aZ as sn,G as mt,E as Fe,a_ as et,a$ as tt,L as bt,b0 as an,b1 as ce,y as rn,b2 as un,b3 as dn}from"./index-D29yCp72.js";import{s as gt}from"./index-DkSGa2Ur.js";import{s as cn,a as pn,_ as vt,b as fn}from"./index-BVqpLxLT.js";import{_ as hn}from"./check-BvKfympZ.js";import{u as mn,s as bn,e as gn,a as vn,b as yn,c as xn,d as Sn,i as On}from"./installCanvasRenderer-CZoFrcfF.js";import{a as wn,c as In,b as kn,h as Cn,j as _n,f as Mn,k as Pn,l as Ln,m as Vn,n as An,o as Tn,i as Dn,g as $n,p as Bn,d as En}from"./chartZoom-HUt5osHp.js";import{s as Hn}from"./index-DdoQYVm8.js";var Fn=`
    .p-textarea {
        font-family: inherit;
        font-feature-settings: inherit;
        font-size: 1rem;
        color: dt('textarea.color');
        background: dt('textarea.background');
        padding-block: dt('textarea.padding.y');
        padding-inline: dt('textarea.padding.x');
        border: 1px solid dt('textarea.border.color');
        transition:
            background dt('textarea.transition.duration'),
            color dt('textarea.transition.duration'),
            border-color dt('textarea.transition.duration'),
            outline-color dt('textarea.transition.duration'),
            box-shadow dt('textarea.transition.duration');
        appearance: none;
        border-radius: dt('textarea.border.radius');
        outline-color: transparent;
        box-shadow: dt('textarea.shadow');
    }

    .p-textarea:enabled:hover {
        border-color: dt('textarea.hover.border.color');
    }

    .p-textarea:enabled:focus {
        border-color: dt('textarea.focus.border.color');
        box-shadow: dt('textarea.focus.ring.shadow');
        outline: dt('textarea.focus.ring.width') dt('textarea.focus.ring.style') dt('textarea.focus.ring.color');
        outline-offset: dt('textarea.focus.ring.offset');
    }

    .p-textarea.p-invalid {
        border-color: dt('textarea.invalid.border.color');
    }

    .p-textarea.p-variant-filled {
        background: dt('textarea.filled.background');
    }

    .p-textarea.p-variant-filled:enabled:hover {
        background: dt('textarea.filled.hover.background');
    }

    .p-textarea.p-variant-filled:enabled:focus {
        background: dt('textarea.filled.focus.background');
    }

    .p-textarea:disabled {
        opacity: 1;
        background: dt('textarea.disabled.background');
        color: dt('textarea.disabled.color');
    }

    .p-textarea::placeholder {
        color: dt('textarea.placeholder.color');
    }

    .p-textarea.p-invalid::placeholder {
        color: dt('textarea.invalid.placeholder.color');
    }

    .p-textarea-fluid {
        width: 100%;
    }

    .p-textarea-resizable {
        overflow: hidden;
        resize: none;
    }

    .p-textarea-sm {
        font-size: dt('textarea.sm.font.size');
        padding-block: dt('textarea.sm.padding.y');
        padding-inline: dt('textarea.sm.padding.x');
    }

    .p-textarea-lg {
        font-size: dt('textarea.lg.font.size');
        padding-block: dt('textarea.lg.padding.y');
        padding-inline: dt('textarea.lg.padding.x');
    }
`,zn={root:function(e){var n=e.instance,o=e.props;return["p-textarea p-component",{"p-filled":n.$filled,"p-textarea-resizable ":o.autoResize,"p-textarea-sm p-inputfield-sm":o.size==="small","p-textarea-lg p-inputfield-lg":o.size==="large","p-invalid":n.$invalid,"p-variant-filled":n.$variant==="filled","p-textarea-fluid":n.$fluid}]}},Rn=Ue.extend({name:"textarea",style:Fn,classes:zn}),Un={name:"BaseTextarea",extends:Mt,props:{autoResize:Boolean},style:Rn,provide:function(){return{$pcTextarea:this,$parentInstance:this}}};function ge(t){"@babel/helpers - typeof";return ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(t)}function Kn(t,e,n){return(e=jn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jn(t){var e=Nn(t,"string");return ge(e)=="symbol"?e:e+""}function Nn(t,e){if(ge(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(ge(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yt={name:"Textarea",extends:Un,inheritAttrs:!1,observer:null,mounted:function(){var e=this;this.autoResize&&(this.observer=new ResizeObserver(function(){requestAnimationFrame(function(){e.resize()})}),this.observer.observe(this.$el))},updated:function(){this.autoResize&&this.resize()},beforeUnmount:function(){this.observer&&this.observer.disconnect()},methods:{resize:function(){if(this.$el.offsetParent){var e=this.$el.style.height,n=parseInt(e)||0,o=this.$el.scrollHeight,l=!n||o>n,i=n&&o<n;i?(this.$el.style.height="auto",this.$el.style.height="".concat(this.$el.scrollHeight,"px")):l&&(this.$el.style.height="".concat(o,"px"))}},onInput:function(e){this.autoResize&&this.resize(),this.writeValue(e.target.value,e)}},computed:{attrs:function(){return A(this.ptmi("root",{context:{filled:this.$filled,disabled:this.disabled}}),this.formField)},dataP:function(){return ut(Kn({invalid:this.$invalid,fluid:this.$fluid,filled:this.$variant==="filled"},this.size,this.size))}}},Gn=["value","name","disabled","aria-invalid","data-p"];function Zn(t,e,n,o,l,i){return g(),k("textarea",A({class:t.cx("root"),value:t.d_value,name:t.name,disabled:t.disabled,"aria-invalid":t.invalid||void 0,"data-p":i.dataP,onInput:e[0]||(e[0]=function(){return i.onInput&&i.onInput.apply(i,arguments)})},i.attrs),null,16,Gn)}yt.render=Zn;const Xn={class:"flex flex-row"},qn={class:"flex flex-col grow"},Wn={for:"selAvailableIndicator",class:"form-label"},xt=le({__name:"PlotIndicatorSelect",props:{modelValue:{default:""},columns:{},label:{}},emits:["update:modelValue","indicatorSelected"],setup(t,{emit:e}){const n=t,o=e,l=D("");function i(){o("indicatorSelected",l.value),o("update:modelValue",l.value)}function s(){l.value="",i()}return Ke(()=>{l.value=n.modelValue}),U(l,()=>{i()}),U(()=>n.modelValue,u=>{l.value=u}),(u,d)=>{const x=ye,c=dt,_=xe;return g(),k("div",Xn,[y("div",qn,[y("label",Wn,R(t.label),1),v(x,{modelValue:a(l),"onUpdate:modelValue":d[0]||(d[0]=C=>j(l)?l.value=C:null),options:t.columns,size:"small",clearable:!1,filter:"","auto-filter-focus":""},null,8,["modelValue","options"])]),v(_,{size:"small",title:"Abort",class:"ms-1 mt-auto",severity:"secondary",onClick:s},{icon:V(()=>[v(c)]),_:1})])}}}),Yn={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Jn(t,e){return g(),k("svg",Yn,[...e[0]||(e[0]=[y("path",{fill:"currentColor",d:"M19.78 3h-8.56C10.55 3 10 3.55 10 4.22V8h6v6h3.78c.67 0 1.22-.55 1.22-1.22V4.22C21 3.55 20.45 3 19.78 3m-7.34 3.67a1.23 1.23 0 1 1 0-2.46a1.23 1.23 0 0 1 1.23 1.23c0 .68-.55 1.23-1.23 1.23m6.12 6.11a1.23 1.23 0 1 1-.02-2.46c.68-.01 1.23.54 1.24 1.24c-.01.67-.55 1.21-1.22 1.22m0-6.11a1.23 1.23 0 1 1-.02-2.46a1.231 1.231 0 0 1 .02 2.46M4.22 10h8.56A1.22 1.22 0 0 1 14 11.22v8.56c0 .67-.55 1.22-1.22 1.22H4.22C3.55 21 3 20.45 3 19.78v-8.56c0-.67.55-1.22 1.22-1.22m4.28 4.28c-.67 0-1.22.55-1.22 1.22s.55 1.22 1.22 1.22s1.22-.55 1.22-1.22a1.22 1.22 0 0 0-1.22-1.22m-3.06-3.06c-.67 0-1.22.55-1.22 1.22a1.22 1.22 0 0 0 1.22 1.22c.67 0 1.22-.55 1.22-1.22s-.55-1.22-1.22-1.22m6.11 6.11c-.67 0-1.22.55-1.22 1.22s.55 1.22 1.22 1.22a1.22 1.22 0 0 0 1.22-1.22c0-.67-.54-1.21-1.21-1.22z"},null,-1)])])}const Qn=Pt({name:"mdi-dice-multiple",render:Jn});var ei=`
    .p-colorpicker {
        display: inline-block;
        position: relative;
    }

    .p-colorpicker-dragging {
        cursor: pointer;
    }

    .p-colorpicker-preview {
        width: dt('colorpicker.preview.width');
        height: dt('colorpicker.preview.height');
        padding: 0;
        border: 0 none;
        border-radius: dt('colorpicker.preview.border.radius');
        transition:
            background dt('colorpicker.transition.duration'),
            color dt('colorpicker.transition.duration'),
            border-color dt('colorpicker.transition.duration'),
            outline-color dt('colorpicker.transition.duration'),
            box-shadow dt('colorpicker.transition.duration');
        outline-color: transparent;
        cursor: pointer;
    }

    .p-colorpicker-preview:enabled:focus-visible {
        border-color: dt('colorpicker.preview.focus.border.color');
        box-shadow: dt('colorpicker.preview.focus.ring.shadow');
        outline: dt('colorpicker.preview.focus.ring.width') dt('colorpicker.preview.focus.ring.style') dt('colorpicker.preview.focus.ring.color');
        outline-offset: dt('colorpicker.preview.focus.ring.offset');
    }

    .p-colorpicker-panel {
        background: dt('colorpicker.panel.background');
        border: 1px solid dt('colorpicker.panel.border.color');
        border-radius: dt('colorpicker.panel.border.radius');
        box-shadow: dt('colorpicker.panel.shadow');
        width: 193px;
        height: 166px;
        position: absolute;
        top: 0;
        left: 0;
    }

    .p-colorpicker-panel-inline {
        box-shadow: none;
        position: static;
    }

    .p-colorpicker-content {
        position: relative;
    }

    .p-colorpicker-color-selector {
        width: 150px;
        height: 150px;
        inset-block-start: 8px;
        inset-inline-start: 8px;
        position: absolute;
    }

    .p-colorpicker-color-background {
        width: 100%;
        height: 100%;
        background: linear-gradient(to top, #000 0%, rgba(0, 0, 0, 0) 100%), linear-gradient(to right, #fff 0%, rgba(255, 255, 255, 0) 100%);
    }

    .p-colorpicker-color-handle {
        position: absolute;
        inset-block-start: 0px;
        inset-inline-start: 150px;
        border-radius: 100%;
        width: 10px;
        height: 10px;
        border-width: 1px;
        border-style: solid;
        margin: -5px 0 0 -5px;
        cursor: pointer;
        opacity: 0.85;
        border-color: dt('colorpicker.handle.color');
    }

    .p-colorpicker-hue {
        width: 17px;
        height: 150px;
        inset-block-start: 8px;
        inset-inline-start: 167px;
        position: absolute;
        opacity: 0.85;
        background: linear-gradient(0deg, red 0, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, red);
    }

    .p-colorpicker-hue-handle {
        position: absolute;
        inset-block-start: 150px;
        inset-inline-start: 0px;
        width: 21px;
        margin-inline-start: -2px;
        margin-block-start: -5px;
        height: 10px;
        border-width: 2px;
        border-style: solid;
        opacity: 0.85;
        cursor: pointer;
        border-color: dt('colorpicker.handle.color');
    }
`,ti={root:"p-colorpicker p-component",preview:function(e){var n=e.props;return["p-colorpicker-preview",{"p-disabled":n.disabled}]},panel:function(e){var n=e.instance,o=e.props;return["p-colorpicker-panel",{"p-colorpicker-panel-inline":o.inline,"p-disabled":o.disabled,"p-invalid":n.$invalid}]},colorSelector:"p-colorpicker-color-selector",colorBackground:"p-colorpicker-color-background",colorHandle:"p-colorpicker-color-handle",hue:"p-colorpicker-hue",hueHandle:"p-colorpicker-hue-handle"},ni=Ue.extend({name:"colorpicker",style:ei,classes:ti}),ii={name:"BaseColorPicker",extends:ct,props:{defaultColor:{type:null,default:"ff0000"},inline:{type:Boolean,default:!1},format:{type:String,default:"hex"},tabindex:{type:String,default:null},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},appendTo:{type:[String,Object],default:"body"},inputId:{type:String,default:null},panelClass:null,overlayClass:null},style:ni,provide:function(){return{$pcColorPicker:this,$parentInstance:this}}},St={name:"ColorPicker",extends:ii,inheritAttrs:!1,emits:["change","show","hide"],data:function(){return{overlayVisible:!1}},hsbValue:null,localHue:null,outsideClickListener:null,documentMouseMoveListener:null,documentMouseUpListener:null,scrollHandler:null,resizeListener:null,hueDragging:null,colorDragging:null,selfUpdate:null,picker:null,colorSelector:null,colorHandle:null,hueView:null,hueHandle:null,watch:{modelValue:{immediate:!0,handler:function(e){this.hsbValue=this.toHSB(e),this.selfUpdate?this.selfUpdate=!1:this.updateUI()}}},beforeUnmount:function(){this.unbindOutsideClickListener(),this.unbindDragListeners(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.picker&&this.autoZIndex&&Pe.clear(this.picker),this.clearRefs()},mounted:function(){this.updateUI()},methods:{pickColor:function(e){var n=this.colorSelector.getBoundingClientRect(),o=n.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),l=n.left+document.body.scrollLeft,i=Math.floor(100*Math.max(0,Math.min(150,(e.pageX||e.changedTouches[0].pageX)-l))/150),s=Math.floor(100*(150-Math.max(0,Math.min(150,(e.pageY||e.changedTouches[0].pageY)-o)))/150);this.hsbValue=this.validateHSB({h:this.localHue,s:i,b:s}),this.selfUpdate=!0,this.updateColorHandle(),this.updateInput(),this.updateModel(e)},pickHue:function(e){var n=this.hueView.getBoundingClientRect().top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0);this.localHue=Math.floor(360*(150-Math.max(0,Math.min(150,(e.pageY||e.changedTouches[0].pageY)-n)))/150),this.hsbValue=this.validateHSB({h:this.localHue,s:this.hsbValue.s,b:this.hsbValue.b}),this.selfUpdate=!0,this.updateColorSelector(),this.updateHue(),this.updateModel(e),this.updateInput()},updateModel:function(e){var n=this.d_value;switch(this.format){case"hex":n=this.HSBtoHEX(this.hsbValue);break;case"rgb":n=this.HSBtoRGB(this.hsbValue);break;case"hsb":n=this.hsbValue;break}this.writeValue(n,e),this.$emit("change",{event:e,value:n})},updateColorSelector:function(){if(this.colorSelector){var e=this.validateHSB({h:this.hsbValue.h,s:100,b:100});this.colorSelector.style.backgroundColor="#"+this.HSBtoHEX(e)}},updateColorHandle:function(){this.colorHandle&&(this.colorHandle.style.left=Math.floor(150*this.hsbValue.s/100)+"px",this.colorHandle.style.top=Math.floor(150*(100-this.hsbValue.b)/100)+"px")},updateHue:function(){this.hueHandle&&(this.hueHandle.style.top=Math.floor(150-150*this.hsbValue.h/360)+"px")},updateInput:function(){this.$refs.input&&(this.$refs.input.style.backgroundColor="#"+this.HSBtoHEX(this.hsbValue))},updateUI:function(){this.updateHue(),this.updateColorHandle(),this.updateInput(),this.updateColorSelector()},validateHSB:function(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}},validateRGB:function(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}},validateHEX:function(e){var n=6-e.length;if(n>0){for(var o=[],l=0;l<n;l++)o.push("0");o.push(e),e=o.join("")}return e},HEXtoRGB:function(e){var n=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return{r:n>>16,g:(n&65280)>>8,b:n&255}},HEXtoHSB:function(e){return this.RGBtoHSB(this.HEXtoRGB(e))},RGBtoHSB:function(e){var n={h:0,s:0,b:0},o=Math.min(e.r,e.g,e.b),l=Math.max(e.r,e.g,e.b),i=l-o;return n.b=l,n.s=l!==0?255*i/l:0,n.s!==0?e.r===l?n.h=(e.g-e.b)/i:e.g===l?n.h=2+(e.b-e.r)/i:n.h=4+(e.r-e.g)/i:n.h=-1,n.h*=60,n.h<0&&(n.h+=360),n.s*=100/255,n.b*=100/255,n},HSBtoRGB:function(e){var n={r:null,g:null,b:null},o=Math.round(e.h),l=Math.round(e.s*255/100),i=Math.round(e.b*255/100);if(l===0)n={r:i,g:i,b:i};else{var s=i,u=(255-l)*i/255,d=(s-u)*(o%60)/60;o===360&&(o=0),o<60?(n.r=s,n.b=u,n.g=u+d):o<120?(n.g=s,n.b=u,n.r=s-d):o<180?(n.g=s,n.r=u,n.b=u+d):o<240?(n.b=s,n.r=u,n.g=s-d):o<300?(n.b=s,n.g=u,n.r=u+d):o<360?(n.r=s,n.g=u,n.b=s-d):(n.r=0,n.g=0,n.b=0)}return{r:Math.round(n.r),g:Math.round(n.g),b:Math.round(n.b)}},RGBtoHEX:function(e){var n=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];for(var o in n)n[o].length===1&&(n[o]="0"+n[o]);return n.join("")},HSBtoHEX:function(e){return this.RGBtoHEX(this.HSBtoRGB(e))},toHSB:function(e){var n;if(e)switch(this.format){case"hex":n=this.HEXtoHSB(e);break;case"rgb":n=this.RGBtoHSB(e);break;case"hsb":n=e;break}else n=this.HEXtoHSB(this.defaultColor);return n.s===0||n.b===0?n.h=this.localHue:this.localHue=n.h,n},onOverlayEnter:function(e){this.updateUI(),this.alignOverlay(),this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.autoZIndex&&Pe.set("overlay",e,this.baseZIndex+this.$primevue.config.zIndex.overlay),this.$attrSelector&&e.setAttribute(this.$attrSelector,""),this.$emit("show")},onOverlayLeave:function(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.clearRefs(),this.$emit("hide")},onOverlayAfterLeave:function(e){this.autoZIndex&&Pe.clear(e)},alignOverlay:function(){this.appendTo==="self"?$t(this.picker,this.$refs.input):Bt(this.picker,this.$refs.input)},onInputClick:function(){this.disabled||(this.overlayVisible=!this.overlayVisible)},onInputKeydown:function(e){switch(e.code){case"Space":this.overlayVisible=!this.overlayVisible,e.preventDefault();break;case"Escape":case"Tab":this.overlayVisible=!1;break}},onInputBlur:function(e){var n,o;(n=(o=this.formField).onBlur)===null||n===void 0||n.call(o)},onColorMousedown:function(e){this.disabled||(this.bindDragListeners(),this.onColorDragStart(e))},onColorDragStart:function(e){this.disabled||(this.colorDragging=!0,this.pickColor(e),this.$el.setAttribute("p-colorpicker-dragging","true"),!this.isUnstyled&&qe(this.$el,"p-colorpicker-dragging"),e.preventDefault())},onDrag:function(e){this.colorDragging&&(this.pickColor(e),e.preventDefault()),this.hueDragging&&(this.pickHue(e),e.preventDefault())},onDragEnd:function(){this.colorDragging=!1,this.hueDragging=!1,this.$el.setAttribute("p-colorpicker-dragging","false"),!this.isUnstyled&&Dt(this.$el,"p-colorpicker-dragging"),this.unbindDragListeners()},onHueMousedown:function(e){this.disabled||(this.bindDragListeners(),this.onHueDragStart(e))},onHueDragStart:function(e){this.disabled||(this.hueDragging=!0,this.pickHue(e),!this.isUnstyled&&qe(this.$el,"p-colorpicker-dragging"),e.preventDefault())},isInputClicked:function(e){return this.$refs.input&&this.$refs.input.isSameNode(e.target)},bindDragListeners:function(){this.bindDocumentMouseMoveListener(),this.bindDocumentMouseUpListener()},unbindDragListeners:function(){this.unbindDocumentMouseMoveListener(),this.unbindDocumentMouseUpListener()},bindOutsideClickListener:function(){var e=this;this.outsideClickListener||(this.outsideClickListener=function(n){e.overlayVisible&&e.picker&&!e.picker.contains(n.target)&&!e.isInputClicked(n)&&(e.overlayVisible=!1)},document.addEventListener("click",this.outsideClickListener,!0))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener,!0),this.outsideClickListener=null)},bindScrollListener:function(){var e=this;this.scrollHandler||(this.scrollHandler=new Tt(this.$refs.container,function(){e.overlayVisible&&(e.overlayVisible=!1)})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.overlayVisible&&!At()&&(e.overlayVisible=!1)},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},bindDocumentMouseMoveListener:function(){this.documentMouseMoveListener||(this.documentMouseMoveListener=this.onDrag.bind(this),document.addEventListener("mousemove",this.documentMouseMoveListener))},unbindDocumentMouseMoveListener:function(){this.documentMouseMoveListener&&(document.removeEventListener("mousemove",this.documentMouseMoveListener),this.documentMouseMoveListener=null)},bindDocumentMouseUpListener:function(){this.documentMouseUpListener||(this.documentMouseUpListener=this.onDragEnd.bind(this),document.addEventListener("mouseup",this.documentMouseUpListener))},unbindDocumentMouseUpListener:function(){this.documentMouseUpListener&&(document.removeEventListener("mouseup",this.documentMouseUpListener),this.documentMouseUpListener=null)},pickerRef:function(e){this.picker=e},colorSelectorRef:function(e){this.colorSelector=e},colorHandleRef:function(e){this.colorHandle=e},hueViewRef:function(e){this.hueView=e},hueHandleRef:function(e){this.hueHandle=e},clearRefs:function(){this.picker=null,this.colorSelector=null,this.colorHandle=null,this.hueView=null,this.hueHandle=null},onOverlayClick:function(e){Vt.emit("overlay-click",{originalEvent:e,target:this.$el})}},components:{Portal:Lt}};function ve(t){"@babel/helpers - typeof";return ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(t)}function nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,o)}return n}function it(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nt(Object(n),!0).forEach(function(o){oi(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function oi(t,e,n){return(e=li(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function li(t){var e=si(t,"string");return ve(e)=="symbol"?e:e+""}function si(t,e){if(ve(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(ve(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ai=["id","tabindex","disabled"];function ri(t,e,n,o,l,i){var s=oe("Portal");return g(),k("div",A({ref:"container",class:t.cx("root")},t.ptmi("root")),[t.inline?H("",!0):(g(),k("input",A({key:0,ref:"input",id:t.inputId,type:"text",class:t.cx("preview"),readonly:"",tabindex:t.tabindex,disabled:t.disabled,onClick:e[0]||(e[0]=function(){return i.onInputClick&&i.onInputClick.apply(i,arguments)}),onKeydown:e[1]||(e[1]=function(){return i.onInputKeydown&&i.onInputKeydown.apply(i,arguments)}),onBlur:e[2]||(e[2]=function(){return i.onInputBlur&&i.onInputBlur.apply(i,arguments)})},t.ptm("preview")),null,16,ai)),v(s,{appendTo:t.appendTo,disabled:t.inline},{default:V(function(){return[v(Et,A({name:"p-anchored-overlay",onEnter:i.onOverlayEnter,onLeave:i.onOverlayLeave,onAfterLeave:i.onOverlayAfterLeave},t.ptm("transition")),{default:V(function(){return[t.inline||l.overlayVisible?(g(),k("div",A({key:0,ref:i.pickerRef,class:[t.cx("panel"),t.panelClass,t.overlayClass],onClick:e[11]||(e[11]=function(){return i.onOverlayClick&&i.onOverlayClick.apply(i,arguments)})},it(it({},t.ptm("panel")),t.ptm("overlay"))),[y("div",A({class:t.cx("content")},t.ptm("content")),[y("div",A({ref:i.colorSelectorRef,class:t.cx("colorSelector"),onMousedown:e[3]||(e[3]=function(u){return i.onColorMousedown(u)}),onTouchstart:e[4]||(e[4]=function(u){return i.onColorDragStart(u)}),onTouchmove:e[5]||(e[5]=function(u){return i.onDrag(u)}),onTouchend:e[6]||(e[6]=function(u){return i.onDragEnd()})},t.ptm("colorSelector")),[y("div",A({class:t.cx("colorBackground")},t.ptm("colorBackground")),[y("div",A({ref:i.colorHandleRef,class:t.cx("colorHandle")},t.ptm("colorHandle")),null,16)],16)],16),y("div",A({ref:i.hueViewRef,class:t.cx("hue"),onMousedown:e[7]||(e[7]=function(u){return i.onHueMousedown(u)}),onTouchstart:e[8]||(e[8]=function(u){return i.onHueDragStart(u)}),onTouchmove:e[9]||(e[9]=function(u){return i.onDrag(u)}),onTouchend:e[10]||(e[10]=function(u){return i.onDragEnd()})},t.ptm("hue")),[y("div",A({ref:i.hueHandleRef,class:t.cx("hueHandle")},t.ptm("hueHandle")),null,16)],16)],16)],16)):H("",!0)]}),_:1},16,["onEnter","onLeave","onAfterLeave"])]}),_:1},8,["appendTo","disabled"])],16)}St.render=ri;function be(){return`#${Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}`}const ui={class:"flex flex-col lg:flex-row justify-between mt-1"},di={class:"flex flex-col w-full"},ci={class:"flex flex-col w-full"},pi={key:1,class:"flex flex-col mt-2 gap-1 items-center"},fi=le({__name:"PlotIndicator",props:{modelValue:{},columns:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,o=e,l=D(be()),i=T({get:()=>l.value,set:w=>{!w.startsWith("#")&&(w.length===3||w.length===6)&&/^[0-9a-fA-F]+$/.test(w)&&(w=`#${w}`),l.value=w}}),s=D(ee.line),u=D(Object.keys(ee)),d=D(""),x=D(!1),c=D(""),_=D(3);function C(){i.value=be()}const $=T(()=>{if(x.value||!d.value)return{};const w={color:i.value,type:s.value};return c.value&&s.value===ee.line&&(w.fill_to=c.value),s.value==ee.scatter&&(w.scatterSymbolSize=_.value),{[d.value]:w}});function P(){o("update:modelValue",$.value)}return U(()=>n.modelValue,()=>{const[w]=Object.keys(n.modelValue);if(w&&(d.value=w),x.value=!1,d.value&&n.modelValue){const O=n.modelValue[d.value];if(!O)return;i.value=O.color||be(),s.value=O.type||ee.line,c.value=O.fill_to||""}},{immediate:!0}),Ht([i,s,c,_],()=>{P()},{debounce:200}),(w,O)=>{const p=ye,r=St,b=pn,L=pt,f=Qn,S=xe,B=cn,z=xt,J=gt;return g(),k("div",null,[y("div",ui,[y("div",di,[O[5]||(O[5]=y("label",{for:"plotTypeSelector",class:"form-label"},"Type",-1)),v(p,{id:"plotTypeSelector",modelValue:a(s),"onUpdate:modelValue":O[0]||(O[0]=F=>j(s)?s.value=F:null),class:"text-left",size:"small",options:a(u)},null,8,["modelValue","options"])]),y("div",ci,[O[6]||(O[6]=y("label",{for:"selAvailableIndicator",class:"colsel"},"Color",-1)),v(B,null,{default:V(()=>[v(b,{class:"p-0!"},{default:V(()=>[v(r,{modelValue:a(i),"onUpdate:modelValue":O[1]||(O[1]=F=>j(i)?i.value=F:null),type:"color",class:"m-auto"},null,8,["modelValue"])]),_:1}),v(L,{id:"colsel",modelValue:a(i),"onUpdate:modelValue":O[2]||(O[2]=F=>j(i)?i.value=F:null),size:"small",class:"grow"},null,8,["modelValue"]),v(b,null,{default:V(()=>[v(S,{severity:"primary",size:"small",onClick:C},{icon:V(()=>[v(f)]),_:1})]),_:1})]),_:1})])]),a(s)===a(ee).line?(g(),G(z,{key:0,modelValue:a(c),"onUpdate:modelValue":O[3]||(O[3]=F=>j(c)?c.value=F:null),columns:t.columns,class:"mt-1",label:"Area chart - Fill to (leave empty for line chart)"},null,8,["modelValue","columns"])):H("",!0),a(s)===a(ee).scatter?(g(),k("div",pi,[O[7]||(O[7]=y("label",{for:"scatterSymbolSize",class:"text-nowrap"},"Scatter symbol size",-1)),v(J,{id:"scatterSymbolSize",modelValue:a(_),"onUpdate:modelValue":O[4]||(O[4]=F=>j(_)?_.value=F:null),min:0,"show-buttons":"",size:"small","button-layout":"horizontal",class:"text-center w-full"},null,8,["modelValue"])])):H("",!0)])}}});var hi=`
    .p-listbox {
        display: block;
        background: dt('listbox.background');
        color: dt('listbox.color');
        border: 1px solid dt('listbox.border.color');
        border-radius: dt('listbox.border.radius');
        transition:
            background dt('listbox.transition.duration'),
            color dt('listbox.transition.duration'),
            border-color dt('listbox.transition.duration'),
            box-shadow dt('listbox.transition.duration'),
            outline-color dt('listbox.transition.duration');
        outline-color: transparent;
        box-shadow: dt('listbox.shadow');
    }

    .p-listbox.p-disabled {
        opacity: 1;
        background: dt('listbox.disabled.background');
        color: dt('listbox.disabled.color');
    }

    .p-listbox.p-disabled .p-listbox-option {
        color: dt('listbox.disabled.color');
    }

    .p-listbox.p-invalid {
        border-color: dt('listbox.invalid.border.color');
    }

    .p-listbox-header {
        padding: dt('listbox.list.header.padding');
    }

    .p-listbox-filter {
        width: 100%;
    }

    .p-listbox-list-container {
        overflow: auto;
    }

    .p-listbox-list {
        list-style-type: none;
        margin: 0;
        padding: dt('listbox.list.padding');
        outline: 0 none;
        display: flex;
        flex-direction: column;
        gap: dt('listbox.list.gap');
    }

    .p-listbox-option {
        display: flex;
        align-items: center;
        cursor: pointer;
        position: relative;
        overflow: hidden;
        padding: dt('listbox.option.padding');
        border: 0 none;
        border-radius: dt('listbox.option.border.radius');
        color: dt('listbox.option.color');
        transition:
            background dt('listbox.transition.duration'),
            color dt('listbox.transition.duration'),
            border-color dt('listbox.transition.duration'),
            box-shadow dt('listbox.transition.duration'),
            outline-color dt('listbox.transition.duration');
    }

    .p-listbox-striped li:nth-child(even of .p-listbox-option) {
        background: dt('listbox.option.striped.background');
    }

    .p-listbox .p-listbox-list .p-listbox-option.p-listbox-option-selected {
        background: dt('listbox.option.selected.background');
        color: dt('listbox.option.selected.color');
    }

    .p-listbox:not(.p-disabled) .p-listbox-option.p-listbox-option-selected.p-focus {
        background: dt('listbox.option.selected.focus.background');
        color: dt('listbox.option.selected.focus.color');
    }

    .p-listbox:not(.p-disabled) .p-listbox-option:not(.p-listbox-option-selected):not(.p-disabled).p-focus {
        background: dt('listbox.option.focus.background');
        color: dt('listbox.option.focus.color');
    }

    .p-listbox:not(.p-disabled) .p-listbox-option:not(.p-listbox-option-selected):not(.p-disabled):hover {
        background: dt('listbox.option.focus.background');
        color: dt('listbox.option.focus.color');
    }

    .p-listbox-option-blank-icon {
        flex-shrink: 0;
    }

    .p-listbox-option-check-icon {
        position: relative;
        flex-shrink: 0;
        margin-inline-start: dt('listbox.checkmark.gutter.start');
        margin-inline-end: dt('listbox.checkmark.gutter.end');
        color: dt('listbox.checkmark.color');
    }

    .p-listbox-option-group {
        margin: 0;
        padding: dt('listbox.option.group.padding');
        color: dt('listbox.option.group.color');
        background: dt('listbox.option.group.background');
        font-weight: dt('listbox.option.group.font.weight');
    }

    .p-listbox-empty-message {
        padding: dt('listbox.empty.message.padding');
    }

    .p-listbox-fluid {
        width: 100%;
    }
`,mi={root:function(e){var n=e.instance,o=e.props;return["p-listbox p-component",{"p-listbox-striped":o.striped,"p-disabled":o.disabled,"p-listbox-fluid":o.fluid,"p-invalid":n.$invalid}]},header:"p-listbox-header",pcFilter:"p-listbox-filter",listContainer:"p-listbox-list-container",list:"p-listbox-list",optionGroup:"p-listbox-option-group",option:function(e){var n=e.instance,o=e.props,l=e.option,i=e.index,s=e.getItemOptions;return["p-listbox-option",{"p-listbox-option-selected":n.isSelected(l)&&o.highlightOnSelect,"p-focus":n.focusedOptionIndex===n.getOptionIndex(i,s),"p-disabled":n.isOptionDisabled(l)}]},optionCheckIcon:"p-listbox-option-check-icon",optionBlankIcon:"p-listbox-option-blank-icon",emptyMessage:"p-listbox-empty-message"},bi=Ue.extend({name:"listbox",style:hi,classes:mi}),gi={name:"BaseListbox",extends:ct,props:{options:Array,optionLabel:null,optionValue:null,optionDisabled:null,optionGroupLabel:null,optionGroupChildren:null,listStyle:null,scrollHeight:{type:String,default:"14rem"},dataKey:null,multiple:{type:Boolean,default:!1},metaKeySelection:{type:Boolean,default:!1},filter:Boolean,filterPlaceholder:String,filterLocale:String,filterMatchMode:{type:String,default:"contains"},filterFields:{type:Array,default:null},virtualScrollerOptions:{type:Object,default:null},autoOptionFocus:{type:Boolean,default:!0},selectOnFocus:{type:Boolean,default:!1},focusOnHover:{type:Boolean,default:!0},highlightOnSelect:{type:Boolean,default:!0},checkmark:{type:Boolean,default:!1},filterMessage:{type:String,default:null},selectionMessage:{type:String,default:null},emptySelectionMessage:{type:String,default:null},emptyFilterMessage:{type:String,default:null},emptyMessage:{type:String,default:null},filterIcon:{type:String,default:void 0},striped:{type:Boolean,default:!1},tabindex:{type:Number,default:0},fluid:{type:Boolean,default:null},ariaLabel:{type:String,default:null},ariaLabelledby:{type:String,default:null}},style:bi,provide:function(){return{$pcListbox:this,$parentInstance:this}}};function Ve(t){return Si(t)||xi(t)||yi(t)||vi()}function vi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yi(t,e){if(t){if(typeof t=="string")return ze(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ze(t,e):void 0}}function xi(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Si(t){if(Array.isArray(t))return ze(t)}function ze(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var Ze={name:"Listbox",extends:gi,inheritAttrs:!1,emits:["change","focus","blur","filter","item-dblclick","option-dblclick"],list:null,virtualScroller:null,optionTouched:!1,startRangeIndex:-1,searchTimeout:null,searchValue:"",data:function(){return{filterValue:null,focused:!1,focusedOptionIndex:-1}},watch:{options:function(){this.autoUpdateModel()}},mounted:function(){this.autoUpdateModel()},methods:{getOptionIndex:function(e,n){return this.virtualScrollerDisabled?e:n&&n(e).index},getOptionLabel:function(e){return this.optionLabel?de(e,this.optionLabel):typeof e=="string"||typeof e=="number"||typeof e=="boolean"?e:null},getOptionValue:function(e){return this.optionValue?de(e,this.optionValue):e},getOptionRenderKey:function(e,n){return(this.dataKey?de(e,this.dataKey):this.getOptionLabel(e))+"_"+n},getPTOptions:function(e,n,o,l){return this.ptm(l,{context:{selected:this.isSelected(e),focused:this.focusedOptionIndex===this.getOptionIndex(o,n),disabled:this.isOptionDisabled(e)}})},isOptionDisabled:function(e){return this.optionDisabled?de(e,this.optionDisabled):!1},isOptionGroup:function(e){return this.optionGroupLabel&&e.optionGroup&&e.group},getOptionGroupLabel:function(e){return de(e,this.optionGroupLabel)},getOptionGroupChildren:function(e){return de(e,this.optionGroupChildren)},getAriaPosInset:function(e){var n=this;return(this.optionGroupLabel?e-this.visibleOptions.slice(0,e).filter(function(o){return n.isOptionGroup(o)}).length:e)+1},onFirstHiddenFocus:function(){Le(this.list);var e=Je(this.$el,':not([data-p-hidden-focusable="true"])');this.$refs.lastHiddenFocusableElement.tabIndex=Xt(e)?void 0:-1,this.$refs.firstHiddenFocusableElement.tabIndex=-1},onLastHiddenFocus:function(e){var n=e.relatedTarget;if(n===this.list){var o=Je(this.$el,':not([data-p-hidden-focusable="true"])');Le(o),this.$refs.firstHiddenFocusableElement.tabIndex=void 0}else Le(this.$refs.firstHiddenFocusableElement);this.$refs.lastHiddenFocusableElement.tabIndex=-1},onFocusout:function(e){!this.$el.contains(e.relatedTarget)&&this.$refs.lastHiddenFocusableElement&&this.$refs.firstHiddenFocusableElement&&(this.$refs.lastHiddenFocusableElement.tabIndex=this.$refs.firstHiddenFocusableElement.tabIndex=void 0)},onListFocus:function(e){this.focused=!0,this.focusedOptionIndex=this.focusedOptionIndex!==-1?this.focusedOptionIndex:this.autoOptionFocus?this.findFirstFocusedOptionIndex():this.findSelectedOptionIndex(),this.autoUpdateModel(),this.scrollInView(this.focusedOptionIndex),this.$emit("focus",e)},onListBlur:function(e){this.focused=!1,this.focusedOptionIndex=this.startRangeIndex=-1,this.searchValue="",this.$emit("blur",e)},onListKeyDown:function(e){var n=this,o=e.metaKey||e.ctrlKey;switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"NumpadEnter":case"Space":this.onSpaceKey(e);break;case"Tab":break;case"ShiftLeft":case"ShiftRight":this.onShiftKey(e);break;default:if(this.multiple&&e.code==="KeyA"&&o){var l=this.visibleOptions.filter(function(i){return n.isValidOption(i)}).map(function(i){return n.getOptionValue(i)});this.updateModel(e,l),e.preventDefault();break}!o&&Zt(e.key)&&(this.searchOptions(e,e.key),e.preventDefault());break}},onOptionSelect:function(e,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;this.disabled||this.isOptionDisabled(n)||(this.multiple?this.onOptionSelectMultiple(e,n):this.onOptionSelectSingle(e,n),this.optionTouched=!1,o!==-1&&(this.focusedOptionIndex=o))},onOptionMouseDown:function(e,n){this.changeFocusedOptionIndex(e,n)},onOptionMouseMove:function(e,n){this.focusOnHover&&this.focused&&this.changeFocusedOptionIndex(e,n)},onOptionTouchEnd:function(){this.disabled||(this.optionTouched=!0)},onOptionDblClick:function(e,n){this.$emit("item-dblclick",{originalEvent:e,value:n}),this.$emit("option-dblclick",{originalEvent:e,value:n})},onOptionSelectSingle:function(e,n){var o=this.isSelected(n),l=!1,i=null,s=this.optionTouched?!1:this.metaKeySelection;if(s){var u=e&&(e.metaKey||e.ctrlKey);o?u&&(i=null,l=!0):(i=this.getOptionValue(n),l=!0)}else i=o?null:this.getOptionValue(n),l=!0;l&&this.updateModel(e,i)},onOptionSelectMultiple:function(e,n){var o=this.isSelected(n),l=null,i=this.optionTouched?!1:this.metaKeySelection;if(i){var s=e.metaKey||e.ctrlKey;o?l=s?this.removeOption(n):[this.getOptionValue(n)]:(l=s?this.d_value||[]:[],l=[].concat(Ve(l),[this.getOptionValue(n)]))}else l=o?this.removeOption(n):[].concat(Ve(this.d_value||[]),[this.getOptionValue(n)]);this.updateModel(e,l)},onOptionSelectRange:function(e){var n=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(o===-1&&(o=this.findNearestSelectedOptionIndex(l,!0)),l===-1&&(l=this.findNearestSelectedOptionIndex(o)),o!==-1&&l!==-1){var i=Math.min(o,l),s=Math.max(o,l),u=this.visibleOptions.slice(i,s+1).filter(function(d){return n.isValidOption(d)}).map(function(d){return n.getOptionValue(d)});this.updateModel(e,u)}},onFilterChange:function(e){this.$emit("filter",{originalEvent:e,value:e.target.value,filterValue:this.visibleOptions}),this.focusedOptionIndex=this.startRangeIndex=-1},onFilterKeyDown:function(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,!0);break;case"Home":this.onHomeKey(e,!0);break;case"End":this.onEndKey(e,!0);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"ShiftLeft":case"ShiftRight":this.onShiftKey(e);break}},onArrowDownKey:function(e){var n=this.focusedOptionIndex!==-1?this.findNextOptionIndex(this.focusedOptionIndex):this.findFirstFocusedOptionIndex();this.multiple&&e.shiftKey&&this.onOptionSelectRange(e,this.startRangeIndex,n),this.changeFocusedOptionIndex(e,n),e.preventDefault()},onArrowUpKey:function(e){var n=this.focusedOptionIndex!==-1?this.findPrevOptionIndex(this.focusedOptionIndex):this.findLastFocusedOptionIndex();this.multiple&&e.shiftKey&&this.onOptionSelectRange(e,n,this.startRangeIndex),this.changeFocusedOptionIndex(e,n),e.preventDefault()},onArrowLeftKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n&&(this.focusedOptionIndex=-1)},onHomeKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n){var o=e.currentTarget;e.shiftKey?o.setSelectionRange(0,e.target.selectionStart):(o.setSelectionRange(0,0),this.focusedOptionIndex=-1)}else{var l=e.metaKey||e.ctrlKey,i=this.findFirstOptionIndex();this.multiple&&e.shiftKey&&l&&this.onOptionSelectRange(e,i,this.startRangeIndex),this.changeFocusedOptionIndex(e,i)}e.preventDefault()},onEndKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n){var o=e.currentTarget;if(e.shiftKey)o.setSelectionRange(e.target.selectionStart,o.value.length);else{var l=o.value.length;o.setSelectionRange(l,l),this.focusedOptionIndex=-1}}else{var i=e.metaKey||e.ctrlKey,s=this.findLastOptionIndex();this.multiple&&e.shiftKey&&i&&this.onOptionSelectRange(e,this.startRangeIndex,s),this.changeFocusedOptionIndex(e,s)}e.preventDefault()},onPageUpKey:function(e){this.scrollInView(0),e.preventDefault()},onPageDownKey:function(e){this.scrollInView(this.visibleOptions.length-1),e.preventDefault()},onEnterKey:function(e){this.focusedOptionIndex!==-1&&(this.multiple&&e.shiftKey?this.onOptionSelectRange(e,this.focusedOptionIndex):this.onOptionSelect(e,this.visibleOptions[this.focusedOptionIndex]))},onSpaceKey:function(e){e.preventDefault(),this.onEnterKey(e)},onShiftKey:function(){this.startRangeIndex=this.focusedOptionIndex},isOptionMatched:function(e){var n;return this.isValidOption(e)&&typeof this.getOptionLabel(e)=="string"&&((n=this.getOptionLabel(e))===null||n===void 0?void 0:n.toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale)))},isValidOption:function(e){return ke(e)&&!(this.isOptionDisabled(e)||this.isOptionGroup(e))},isValidSelectedOption:function(e){return this.isValidOption(e)&&this.isSelected(e)},isEquals:function(e,n){return Ye(e,n,this.equalityKey)},isSelected:function(e){var n=this,o=this.getOptionValue(e);return this.multiple?(this.d_value||[]).some(function(l){return n.isEquals(l,o)}):this.isEquals(this.d_value,o)},findFirstOptionIndex:function(){var e=this;return this.visibleOptions.findIndex(function(n){return e.isValidOption(n)})},findLastOptionIndex:function(){var e=this;return Ce(this.visibleOptions,function(n){return e.isValidOption(n)})},findNextOptionIndex:function(e){var n=this,o=e<this.visibleOptions.length-1?this.visibleOptions.slice(e+1).findIndex(function(l){return n.isValidOption(l)}):-1;return o>-1?o+e+1:e},findPrevOptionIndex:function(e){var n=this,o=e>0?Ce(this.visibleOptions.slice(0,e),function(l){return n.isValidOption(l)}):-1;return o>-1?o:e},findSelectedOptionIndex:function(){var e=this;if(this.$filled)if(this.multiple){for(var n=function(){var s=e.d_value[l],u=e.visibleOptions.findIndex(function(d){return e.isValidSelectedOption(d)&&e.isEquals(s,e.getOptionValue(d))});if(u>-1)return{v:u}},o,l=this.d_value.length-1;l>=0;l--)if(o=n(),o)return o.v}else return this.visibleOptions.findIndex(function(i){return e.isValidSelectedOption(i)});return-1},findFirstSelectedOptionIndex:function(){var e=this;return this.$filled?this.visibleOptions.findIndex(function(n){return e.isValidSelectedOption(n)}):-1},findLastSelectedOptionIndex:function(){var e=this;return this.$filled?Ce(this.visibleOptions,function(n){return e.isValidSelectedOption(n)}):-1},findNextSelectedOptionIndex:function(e){var n=this,o=this.$filled&&e<this.visibleOptions.length-1?this.visibleOptions.slice(e+1).findIndex(function(l){return n.isValidSelectedOption(l)}):-1;return o>-1?o+e+1:-1},findPrevSelectedOptionIndex:function(e){var n=this,o=this.$filled&&e>0?Ce(this.visibleOptions.slice(0,e),function(l){return n.isValidSelectedOption(l)}):-1;return o>-1?o:-1},findNearestSelectedOptionIndex:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=-1;return this.$filled&&(n?(o=this.findPrevSelectedOptionIndex(e),o=o===-1?this.findNextSelectedOptionIndex(e):o):(o=this.findNextSelectedOptionIndex(e),o=o===-1?this.findPrevSelectedOptionIndex(e):o)),o>-1?o:e},findFirstFocusedOptionIndex:function(){var e=this.findFirstSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e},findLastFocusedOptionIndex:function(){var e=this.findLastSelectedOptionIndex();return e<0?this.findLastOptionIndex():e},searchOptions:function(e,n){var o=this;this.searchValue=(this.searchValue||"")+n;var l=-1;ke(this.searchValue)&&(this.focusedOptionIndex!==-1?(l=this.visibleOptions.slice(this.focusedOptionIndex).findIndex(function(i){return o.isOptionMatched(i)}),l=l===-1?this.visibleOptions.slice(0,this.focusedOptionIndex).findIndex(function(i){return o.isOptionMatched(i)}):l+this.focusedOptionIndex):l=this.visibleOptions.findIndex(function(i){return o.isOptionMatched(i)}),l===-1&&this.focusedOptionIndex===-1&&(l=this.findFirstFocusedOptionIndex()),l!==-1&&this.changeFocusedOptionIndex(e,l)),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){o.searchValue="",o.searchTimeout=null},500)},removeOption:function(e){var n=this;return this.d_value.filter(function(o){return!Ye(o,n.getOptionValue(e),n.equalityKey)})},changeFocusedOptionIndex:function(e,n){this.focusedOptionIndex!==n&&(this.focusedOptionIndex=n,this.scrollInView(),this.selectOnFocus&&!this.multiple&&this.onOptionSelect(e,this.visibleOptions[n]))},scrollInView:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;this.$nextTick(function(){var o=n!==-1?"".concat(e.$id,"_").concat(n):e.focusedOptionId,l=Gt(e.list,'li[id="'.concat(o,'"]'));l?l.scrollIntoView&&l.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}):e.virtualScrollerDisabled||e.virtualScroller&&e.virtualScroller.scrollToIndex(n!==-1?n:e.focusedOptionIndex)})},autoUpdateModel:function(){this.selectOnFocus&&this.autoOptionFocus&&!this.$filled&&!this.multiple&&this.focused&&(this.focusedOptionIndex=this.findFirstFocusedOptionIndex(),this.onOptionSelect(null,this.visibleOptions[this.focusedOptionIndex]))},updateModel:function(e,n){this.writeValue(n,e),this.$emit("change",{originalEvent:e,value:n})},listRef:function(e,n){this.list=e,n&&n(e)},virtualScrollerRef:function(e){this.virtualScroller=e}},computed:{optionsListFlat:function(){return this.filterValue?We.filter(this.options,this.searchFields,this.filterValue,this.filterMatchMode,this.filterLocale):this.options},optionsListGroup:function(){var e=this,n=[];return(this.options||[]).forEach(function(o){var l=e.getOptionGroupChildren(o)||[],i=e.filterValue?We.filter(l,e.searchFields,e.filterValue,e.filterMatchMode,e.filterLocale):l;i!=null&&i.length&&n.push.apply(n,[{optionGroup:o,group:!0}].concat(Ve(i)))}),n},visibleOptions:function(){return this.optionGroupLabel?this.optionsListGroup:this.optionsListFlat},hasSelectedOption:function(){return ke(this.d_value)},equalityKey:function(){return this.optionValue?null:this.dataKey},searchFields:function(){return this.filterFields||[this.optionLabel]},filterResultMessageText:function(){return ke(this.visibleOptions)?this.filterMessageText.replaceAll("{0}",this.visibleOptions.length):this.emptyFilterMessageText},filterMessageText:function(){return this.filterMessage||this.$primevue.config.locale.searchMessage||""},emptyFilterMessageText:function(){return this.emptyFilterMessage||this.$primevue.config.locale.emptySearchMessage||this.$primevue.config.locale.emptyFilterMessage||""},emptyMessageText:function(){return this.emptyMessage||this.$primevue.config.locale.emptyMessage||""},selectionMessageText:function(){return this.selectionMessage||this.$primevue.config.locale.selectionMessage||""},emptySelectionMessageText:function(){return this.emptySelectionMessage||this.$primevue.config.locale.emptySelectionMessage||""},selectedMessageText:function(){return this.$filled?this.selectionMessageText.replaceAll("{0}",this.multiple?this.d_value.length:"1"):this.emptySelectionMessageText},focusedOptionId:function(){return this.focusedOptionIndex!==-1?"".concat(this.$id,"_").concat(this.focusedOptionIndex):null},ariaSetSize:function(){var e=this;return this.visibleOptions.filter(function(n){return!e.isOptionGroup(n)}).length},virtualScrollerDisabled:function(){return!this.virtualScrollerOptions},containerDataP:function(){return ut({invalid:this.$invalid,disabled:this.disabled})}},directives:{ripple:Nt},components:{InputText:pt,VirtualScroller:jt,InputIcon:Kt,IconField:Ut,SearchIcon:Rt,CheckIcon:zt,BlankIcon:Ft}},Oi=["id","data-p"],wi=["tabindex"],Ii=["id","aria-multiselectable","aria-label","aria-labelledby","aria-activedescendant","aria-disabled"],ki=["id"],Ci=["id","aria-label","aria-selected","aria-disabled","aria-setsize","aria-posinset","onClick","onMousedown","onMousemove","onDblclick","data-p-selected","data-p-focused","data-p-disabled"],_i=["tabindex"];function Mi(t,e,n,o,l,i){var s=oe("InputText"),u=oe("SearchIcon"),d=oe("InputIcon"),x=oe("IconField"),c=oe("CheckIcon"),_=oe("BlankIcon"),C=oe("VirtualScroller"),$=qt("ripple");return g(),k("div",A({id:t.$id,class:t.cx("root"),onFocusout:e[7]||(e[7]=function(){return i.onFocusout&&i.onFocusout.apply(i,arguments)}),"data-p":i.containerDataP},t.ptmi("root")),[y("span",A({ref:"firstHiddenFocusableElement",role:"presentation","aria-hidden":"true",class:"p-hidden-accessible p-hidden-focusable",tabindex:t.disabled?-1:t.tabindex,onFocus:e[0]||(e[0]=function(){return i.onFirstHiddenFocus&&i.onFirstHiddenFocus.apply(i,arguments)})},t.ptm("hiddenFirstFocusableEl"),{"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0}),null,16,wi),t.$slots.header?(g(),k("div",A({key:0,class:t.cx("header")},t.ptm("header")),[ie(t.$slots,"header",{value:t.d_value,options:i.visibleOptions})],16)):H("",!0),t.filter?(g(),k("div",A({key:1,class:t.cx("header")},t.ptm("header")),[v(x,{unstyled:t.unstyled,pt:t.ptm("pcFilterContainer")},{default:V(function(){return[v(s,{modelValue:l.filterValue,"onUpdate:modelValue":e[1]||(e[1]=function(P){return l.filterValue=P}),type:"text",class:je(t.cx("pcFilter")),placeholder:t.filterPlaceholder,role:"searchbox",autocomplete:"off",disabled:t.disabled,unstyled:t.unstyled,"aria-owns":t.$id+"_list","aria-activedescendant":i.focusedOptionId,tabindex:!t.disabled&&!l.focused?t.tabindex:-1,onInput:i.onFilterChange,onKeydown:i.onFilterKeyDown,pt:t.ptm("pcFilter")},null,8,["modelValue","class","placeholder","disabled","unstyled","aria-owns","aria-activedescendant","tabindex","onInput","onKeydown","pt"]),v(d,{unstyled:t.unstyled,pt:t.ptm("pcFilterIconContainer")},{default:V(function(){return[ie(t.$slots,"filtericon",{},function(){return[t.filterIcon?(g(),k("span",A({key:0,class:t.filterIcon},t.ptm("filterIcon")),null,16)):(g(),G(u,Wt(A({key:1},t.ptm("filterIcon"))),null,16))]})]}),_:3},8,["unstyled","pt"])]}),_:3},8,["unstyled","pt"]),y("span",A({role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenFilterResult"),{"data-p-hidden-accessible":!0}),R(i.filterResultMessageText),17)],16)):H("",!0),y("div",A({class:t.cx("listContainer"),style:[{"max-height":i.virtualScrollerDisabled?t.scrollHeight:""},t.listStyle]},t.ptm("listContainer")),[v(C,A({ref:i.virtualScrollerRef},t.virtualScrollerOptions,{items:i.visibleOptions,style:[{height:t.scrollHeight},t.listStyle],tabindex:-1,disabled:i.virtualScrollerDisabled,pt:t.ptm("virtualScroller")}),Yt({content:V(function(P){var w=P.styleClass,O=P.contentRef,p=P.items,r=P.getItemOptions,b=P.contentStyle,L=P.itemSize;return[y("ul",A({ref:function(S){return i.listRef(S,O)},id:t.$id+"_list",class:[t.cx("list"),w],style:b,tabindex:-1,role:"listbox","aria-multiselectable":t.multiple,"aria-label":t.ariaLabel,"aria-labelledby":t.ariaLabelledby,"aria-activedescendant":l.focused?i.focusedOptionId:void 0,"aria-disabled":t.disabled,onFocus:e[3]||(e[3]=function(){return i.onListFocus&&i.onListFocus.apply(i,arguments)}),onBlur:e[4]||(e[4]=function(){return i.onListBlur&&i.onListBlur.apply(i,arguments)}),onKeydown:e[5]||(e[5]=function(){return i.onListKeyDown&&i.onListKeyDown.apply(i,arguments)})},t.ptm("list")),[(g(!0),k(me,null,Ne(p,function(f,S){return g(),k(me,{key:i.getOptionRenderKey(f,i.getOptionIndex(S,r))},[i.isOptionGroup(f)?(g(),k("li",A({key:0,id:t.$id+"_"+i.getOptionIndex(S,r),style:{height:L?L+"px":void 0},class:t.cx("optionGroup"),role:"option"},{ref_for:!0},t.ptm("optionGroup")),[ie(t.$slots,"optiongroup",{option:f.optionGroup,index:i.getOptionIndex(S,r)},function(){return[Z(R(i.getOptionGroupLabel(f.optionGroup)),1)]})],16,ki)):Jt((g(),k("li",A({key:1,id:t.$id+"_"+i.getOptionIndex(S,r),style:{height:L?L+"px":void 0},class:t.cx("option",{option:f,index:S,getItemOptions:r}),role:"option","aria-label":i.getOptionLabel(f),"aria-selected":i.isSelected(f),"aria-disabled":i.isOptionDisabled(f),"aria-setsize":i.ariaSetSize,"aria-posinset":i.getAriaPosInset(i.getOptionIndex(S,r)),onClick:function(z){return i.onOptionSelect(z,f,i.getOptionIndex(S,r))},onMousedown:function(z){return i.onOptionMouseDown(z,i.getOptionIndex(S,r))},onMousemove:function(z){return i.onOptionMouseMove(z,i.getOptionIndex(S,r))},onTouchend:e[2]||(e[2]=function(B){return i.onOptionTouchEnd()}),onDblclick:function(z){return i.onOptionDblClick(z,f)}},{ref_for:!0},i.getPTOptions(f,r,S,"option"),{"data-p-selected":!t.checkmark&&i.isSelected(f),"data-p-focused":l.focusedOptionIndex===i.getOptionIndex(S,r),"data-p-disabled":i.isOptionDisabled(f)}),[t.checkmark?(g(),k(me,{key:0},[i.isSelected(f)?(g(),G(c,A({key:0,class:t.cx("optionCheckIcon")},{ref_for:!0},t.ptm("optionCheckIcon")),null,16,["class"])):(g(),G(_,A({key:1,class:t.cx("optionBlankIcon")},{ref_for:!0},t.ptm("optionBlankIcon")),null,16,["class"]))],64)):H("",!0),ie(t.$slots,"option",{option:f,selected:i.isSelected(f),index:i.getOptionIndex(S,r)},function(){return[Z(R(i.getOptionLabel(f)),1)]})],16,Ci)),[[$]])],64)}),128)),l.filterValue&&(!p||p&&p.length===0)?(g(),k("li",A({key:0,class:t.cx("emptyMessage"),role:"option"},t.ptm("emptyMessage")),[ie(t.$slots,"emptyfilter",{},function(){return[Z(R(i.emptyFilterMessageText),1)]})],16)):!t.options||t.options&&t.options.length===0?(g(),k("li",A({key:1,class:t.cx("emptyMessage"),role:"option"},t.ptm("emptyMessage")),[ie(t.$slots,"empty",{},function(){return[Z(R(i.emptyMessageText),1)]})],16)):H("",!0)],16,Ii)]}),_:2},[t.$slots.loader?{name:"loader",fn:V(function(P){var w=P.options;return[ie(t.$slots,"loader",{options:w})]}),key:"0"}:void 0]),1040,["items","style","disabled","pt"])],16),ie(t.$slots,"footer",{value:t.d_value,options:i.visibleOptions}),!t.options||t.options&&t.options.length===0?(g(),k("span",A({key:2,role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenEmptyMessage"),{"data-p-hidden-accessible":!0}),R(i.emptyMessageText),17)):H("",!0),y("span",A({role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenSelectedMessage"),{"data-p-hidden-accessible":!0}),R(i.selectedMessageText),17),y("span",A({ref:"lastHiddenFocusableElement",role:"presentation","aria-hidden":"true",class:"p-hidden-accessible p-hidden-focusable",tabindex:t.disabled?-1:t.tabindex,onFocus:e[6]||(e[6]=function(){return i.onLastHiddenFocus&&i.onLastHiddenFocus.apply(i,arguments)})},t.ptm("hiddenLastFocusableEl"),{"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0}),null,16,_i)],16,Oi)}Ze.render=Mi;var Ae,ot;function Pi(){if(ot)return Ae;ot=1;var t=function(r){return e(r)&&!n(r)};function e(p){return!!p&&typeof p=="object"}function n(p){var r=Object.prototype.toString.call(p);return r==="[object RegExp]"||r==="[object Date]"||i(p)}var o=typeof Symbol=="function"&&Symbol.for,l=o?Symbol.for("react.element"):60103;function i(p){return p.$$typeof===l}function s(p){return Array.isArray(p)?[]:{}}function u(p,r){return r.clone!==!1&&r.isMergeableObject(p)?w(s(p),p,r):p}function d(p,r,b){return p.concat(r).map(function(L){return u(L,b)})}function x(p,r){if(!r.customMerge)return w;var b=r.customMerge(p);return typeof b=="function"?b:w}function c(p){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(p).filter(function(r){return Object.propertyIsEnumerable.call(p,r)}):[]}function _(p){return Object.keys(p).concat(c(p))}function C(p,r){try{return r in p}catch{return!1}}function $(p,r){return C(p,r)&&!(Object.hasOwnProperty.call(p,r)&&Object.propertyIsEnumerable.call(p,r))}function P(p,r,b){var L={};return b.isMergeableObject(p)&&_(p).forEach(function(f){L[f]=u(p[f],b)}),_(r).forEach(function(f){$(p,f)||(C(p,f)&&b.isMergeableObject(r[f])?L[f]=x(f,b)(p[f],r[f],b):L[f]=u(r[f],b))}),L}function w(p,r,b){b=b||{},b.arrayMerge=b.arrayMerge||d,b.isMergeableObject=b.isMergeableObject||t,b.cloneUnlessOtherwiseSpecified=u;var L=Array.isArray(r),f=Array.isArray(p),S=L===f;return S?L?b.arrayMerge(p,r,b):P(p,r,b):u(r,b)}w.all=function(r,b){if(!Array.isArray(r))throw new Error("first argument should be an array");return r.reduce(function(L,f){return w(L,f,b)},{})};var O=w;return Ae=O,Ae}var Li=Pi();const Vi=Qt(Li),Te=D({BollingerBands:{main_plot:{bb_upperband:{color:"#008af4",type:"line",fill_to:"bb_lowerband"},bb_lowerband:{color:"#008af4",type:"line"}}},RSI:{subplots:{RSI:{rsi:{color:"#ff8000",type:"line"}}}},MACD:{subplots:{MACD:{macdsignal:{color:"#ff8000",type:"line"},macd:{color:"#1370f4",type:"line"}}}}});function lt(t,e){const n=He(t);if(!e)return n;const o={};for(const i in t.main_plot){const s=e[i]||i;o[s]=t.main_plot[i],o[s].fill_to!==void 0&&(o[s].fill_to=e[o[s].fill_to]||o[s].fill_to)}"main_plot"in t&&(n.main_plot=o);const l={};for(const i in t.subplots){const s={};for(const u in t.subplots[i]){const d=e[u]||u;s[d]=t.subplots[i][u],s[d].fill_to!==void 0&&(s[d].fill_to=e[s[d].fill_to]||s[d].fill_to)}l[i]=s}return"subplots"in t&&(n.subplots=l),n}function Ai(){function t(n){return Te.value[n]||{}}function e(n,o,l={}){const i=t(n);if(!i)return o;const s=lt(i,l);return Vi(o,s)}return{plotTemplates:Te,applyPlotTemplate:e,getTemplateContent:t,replaceTemplateColumns:lt,plotTemplateNames:T(()=>Object.keys(Te.value))}}const Ti={key:0,class:"pt-1"},Di={key:0,class:"w-full"},$i={key:1},Bi=["for"],Ei={class:"mt-2 flex gap-1 justify-end"},Hi=le({__name:"PlotFromTemplate",props:en({columns:{}},{visible:{type:Boolean},visibleModifiers:{}}),emits:["update:visible"],setup(t){const e=tn(t,"visible"),{plotTemplateNames:n,applyPlotTemplate:o,getTemplateContent:l}=Ai(),i=Se();function s(){d.value&&(i.editablePlotConfig={...o(d.value,i.editablePlotConfig,x.value)},e.value=!1)}function u(){c.value=!c.value,x.value=nn(l(d.value)).reduce((_,C)=>(_[C]=C,_),{})}const d=D("");U(()=>e.value,_=>{_&&(d.value="",c.value=!1)});const x=D({}),c=D(!1);return(_,C)=>{const $=Ze,P=ye,w=dt,O=xe,p=hn;return e.value?(g(),k("div",Ti,[a(c)?(g(),k("div",$i,[C[3]||(C[3]=y("h5",{class:"mt-1 text-center text-md mb-1"},"Re-map indicators",-1)),(g(!0),k(me,null,Ne(Object.keys(a(x)),r=>(g(),k("div",{key:r,class:"flex gap-2 align-center"},[y("label",{for:`indicator-${r}`,class:"grow w-full"},R(r),9,Bi),v(P,{id:`indicator-${r}`,modelValue:a(x)[r],"onUpdate:modelValue":b=>a(x)[r]=b,class:"grow w-full",size:"small",options:t.columns},null,8,["id","modelValue","onUpdate:modelValue","options"])]))),128))])):(g(),k("div",Di,[C[2]||(C[2]=y("label",{for:"selectTemplate"},"Select Template",-1)),v($,{id:"selectTemplate",modelValue:a(d),"onUpdate:modelValue":C[0]||(C[0]=r=>j(d)?d.value=r:null),options:a(n),"select-size":4},null,8,["modelValue","options"])])),y("div",Ei,[v(O,{size:"small",title:"Abort",severity:"secondary",onClick:C[1]||(C[1]=r=>e.value=!1)},{default:V(()=>[v(w)]),_:1}),a(c)?H("",!0):(g(),G(O,{key:0,disabled:!a(d),size:"small",style:{width:"33%"},title:"Use template",label:" Use Template",severity:"primary",onClick:u},{icon:V(()=>[v(p,{class:"me-1"})]),_:1},8,["disabled"])),a(c)?(g(),G(O,{key:1,disabled:!a(d),size:"small",style:{width:"33%"},title:"Apply template",severity:"primary",onClick:s},{icon:V(()=>[v(p,{class:"me-1"})]),default:V(()=>[C[4]||(C[4]=Z(" Apply Template ",-1))]),_:1},8,["disabled"])):H("",!0)])])):H("",!0)}}}),Ot=le({__name:"PlotConfigSelect",props:{allowEdit:{type:Boolean,default:!1},editableName:{default:"plot configuration"}},setup(t){const e=Se();return(n,o)=>{const l=ye,i=vt;return g(),G(i,{modelValue:a(e).plotConfigName,"onUpdate:modelValue":o[1]||(o[1]=s=>a(e).plotConfigName=s),"allow-edit":t.allowEdit,"allow-add":t.allowEdit,"allow-duplicate":t.allowEdit,"editable-name":"plot configuration",onRename:a(e).renamePlotConfig,onDelete:a(e).deletePlotConfig,onNew:a(e).newPlotConfig,onDuplicate:a(e).duplicatePlotConfig},{default:V(()=>[v(l,{id:"plotConfigSelect",modelValue:a(e).plotConfigName,"onUpdate:modelValue":[o[0]||(o[0]=s=>a(e).plotConfigName=s),a(e).plotConfigChanged],options:a(e).availablePlotConfigNames,class:"w-full text-left",size:"small"},null,8,["modelValue","options","onUpdate:modelValue"])]),_:1},8,["modelValue","allow-edit","allow-add","allow-duplicate","onRename","onDelete","onNew","onDuplicate"])}}}),Fi={key:0},zi={class:"grid grid-cols-2 items-center gap-2 w-full"},Ri={class:"flex flex-row mt-1 gap-1"},Ui={class:"flex flex-row gap-1"},Ki={key:3,class:"w-full ms-1 mt-2"},ji=le({__name:"PlotConfigurator",props:{columns:{},isVisible:{type:Boolean,default:!1}},setup(t){const e=t,n=Se(),o=Ge(),l=D("default"),i=D(""),s=D(!1),u=D(!1),d=D("main_plot"),x=D(),c=D(!0),_=T(()=>d.value==="main_plot"),C=T(()=>_.value?n.editablePlotConfig.main_plot:n.editablePlotConfig.subplots[d.value]),$=T(()=>["main_plot",...Object.keys(n.editablePlotConfig.subplots)]),P=T(()=>{let I=[];_.value&&(I=Object.keys(n.editablePlotConfig.main_plot));const m=n.editablePlotConfig.subplots[d.value];return m&&(I=Object.keys(m)),I.map(X=>({value:X,text:e.columns.includes(X)?X:`${X} <-- not available in this chart`}))});function w(I){console.log("Adding indicator",I);const m=Object.keys(I)[0];if(!m)return;const X=I[m];_.value?n.editablePlotConfig.main_plot[m]={...X}:n.editablePlotConfig.subplots[d.value][m]={...X},n.editablePlotConfig={...n.editablePlotConfig},s.value=!1}const O=T({get(){if(s.value)return{};if(i.value){const I=C.value?.[i.value];if(I)return{[i.value]:I}}return{}},set(I){Object.keys(I)[0]&&I?w(I):s.value=!1}}),p=T({get(){return JSON.stringify(n.editablePlotConfig,null,2)},set(I){try{x.value=JSON.parse(I),c.value=!0}catch{c.value=!1}}});function r(){_.value?(console.log(`Removing ${i.value} from MainPlot`),delete n.editablePlotConfig.main_plot[i.value]):(console.log(`Removing ${i.value} from ${d.value}`),delete n.editablePlotConfig.subplots[d.value]?.[i.value]),n.editablePlotConfig={...n.editablePlotConfig},i.value=""}function b(){s.value=!s.value,i.value=""}function L(I){n.editablePlotConfig.subplots={...n.editablePlotConfig.subplots,[I]:{}},d.value=I}function f(I){delete n.editablePlotConfig.subplots[I],n.editablePlotConfig={...n.editablePlotConfig},d.value=$.value[$.value.length-1]??"main_plot"}function S(I,m){const X=n.editablePlotConfig.subplots[I];X&&(n.editablePlotConfig.subplots[m]=X),d.value=m,delete n.editablePlotConfig.subplots[I]}function B(){const I=n.customPlotConfigs[n.plotConfigName];I&&(n.editablePlotConfig=He(I))}function z(){x.value!==void 0&&c.value&&(n.editablePlotConfig=x.value)}async function J(){if(o.activeBot.isWebserverMode&&!o.activeBot.strategy.strategy){Qe("No strategy selected, can't load plot config.");return}try{const I=await o.activeBot.getStrategyPlotConfig();I&&(n.editablePlotConfig=I)}catch{Qe("Failed to load Plot configuration from Strategy.")}}function F(){n.saveCustomPlotConfig(l.value,n.editablePlotConfig)}function W(I){s.value=!1,I&&(w({[I]:{color:be()}}),i.value=I)}U(d,()=>{i.value=""}),U(()=>n.plotConfigName,()=>{i.value="",l.value=n.plotConfigName}),U(()=>e.isVisible,()=>{e.isVisible?(n.editablePlotConfig=He(n.plotConfig),n.isEditing=!0,l.value=n.plotConfigName):n.isEditing=!1},{immediate:!0});const Q=D(!1),E=T({get(){return n.editablePlotConfig.options?.showTags??!0},set(I){n.editablePlotConfig.options||(n.editablePlotConfig.options={}),n.editablePlotConfig.options.showTags=I}}),se=T({get(){return n.editablePlotConfig.options?.markAreaZIndex??1},set(I){n.editablePlotConfig.options||(n.editablePlotConfig.options={}),n.editablePlotConfig.options.markAreaZIndex=I}});return(I,m)=>{const X=Ot,re=on,pe=ft,ne=gt,fe=Ze,Oe=vt,Y=xe,we=xt,_e=Hi,h=fi,K=yt;return t.columns?(g(),k("div",Fi,[m[20]||(m[20]=y("label",{for:"idPlotConfigName"},"Plot config name",-1)),v(X,{"allow-edit":""}),v(re),v(pe,{modelValue:a(E),"onUpdate:modelValue":m[0]||(m[0]=M=>j(E)?E.value=M:null),class:"mb-1"},{default:V(()=>[...m[10]||(m[10]=[Z("Show Tags in Tooltips",-1)])]),_:1},8,["modelValue"]),y("div",zi,[m[11]||(m[11]=y("label",null,[Z("Mark Area Z-Index "),y("br"),y("small",null,"(defaults to 1 - Candlechart is at Z=2)")],-1)),v(ne,{modelValue:a(se),"onUpdate:modelValue":m[1]||(m[1]=M=>j(se)?se.value=M:null),class:"mb-1",size:"small"},null,8,["modelValue"])]),v(re),m[21]||(m[21]=y("label",{for:"fieldSel",class:"mb"},"Target Plot",-1)),v(Oe,{modelValue:a(d),"onUpdate:modelValue":m[3]||(m[3]=M=>j(d)?d.value=M:null),"allow-edit":!a(_),"allow-add":"","editable-name":"plot configuration","align-vertical":"",onNew:L,onDelete:f,onRename:S},{default:V(()=>[v(fe,{id:"fieldSel",modelValue:a(d),"onUpdate:modelValue":m[2]||(m[2]=M=>j(d)?d.value=M:null),options:a($),size:"small",pt:{listContainer:{class:"h-30"}}},null,8,["modelValue","options"])]),_:1},8,["modelValue","allow-edit"]),v(re),y("div",null,[m[12]||(m[12]=y("label",{for:"selectedIndicators"},"Indicators in this plot",-1)),v(fe,{id:"selectedIndicators",modelValue:a(i),"onUpdate:modelValue":m[4]||(m[4]=M=>j(i)?i.value=M:null),size:"small","empty-message":"No indicators selected","option-label":"text","option-value":"value",disabled:a(s),options:a(P),pt:{listContainer:{class:"h-30"}}},null,8,["modelValue","disabled","options"])]),y("div",Ri,[v(Y,{severity:"secondary",title:"Remove indicator to plot",size:"small",disabled:!a(i),class:"col",onClick:r},{default:V(()=>[...m[13]||(m[13]=[Z(" Remove indicator ",-1)])]),_:1},8,["disabled"]),v(Y,{severity:"secondary",title:"Load indicator config from template",size:"small",onClick:m[5]||(m[5]=M=>Q.value=!a(Q))},{default:V(()=>[...m[14]||(m[14]=[Z(" Indicator from template ",-1)])]),_:1}),v(Y,{severity:"primary",title:"Add indicator to plot",size:"small",class:"col",disabled:a(s),onClick:b},{default:V(()=>[...m[15]||(m[15]=[Z(" Add new indicator ",-1)])]),_:1},8,["disabled"])]),a(s)?(g(),G(we,{key:0,columns:t.columns,class:"mt-1",label:"Select indicator to add",onIndicatorSelected:W},null,8,["columns"])):H("",!0),v(_e,{visible:a(Q),"onUpdate:visible":m[6]||(m[6]=M=>j(Q)?Q.value=M:null),columns:t.columns},null,8,["visible","columns"]),a(i)&&!a(Q)?(g(),G(h,{key:1,modelValue:a(O),"onUpdate:modelValue":m[7]||(m[7]=M=>j(O)?O.value=M:null),class:"mt-1",columns:t.columns},null,8,["modelValue","columns"])):H("",!0),v(re),y("div",Ui,[v(Y,{severity:"secondary",size:"small",disabled:a(s),title:"Reset to last saved configuration",onClick:B},{default:V(()=>[...m[16]||(m[16]=[Z("Reset",-1)])]),_:1},8,["disabled"]),v(Y,{disabled:a(o).activeBot.isWebserverMode&&!a(o).activeBot.botFeatures.plotConfigFromServer||!a(o).activeBot.isBotOnline||a(s),severity:"secondary",size:"small",onClick:J},{default:V(()=>[...m[17]||(m[17]=[Z(" From strategy ",-1)])]),_:1},8,["disabled"]),v(Y,{id:"showButton",severity:"secondary",size:"small",disabled:a(s),title:"Show configuration for easy transfer to a strategy",onClick:m[8]||(m[8]=M=>u.value=!a(u))},{default:V(()=>[Z(R(a(u)?"Hide":"Show"),1)]),_:1},8,["disabled"]),v(Y,{severity:"primary",size:"small","data-toggle":"tooltip",disabled:a(s),title:"Save configuration",onClick:F},{default:V(()=>[...m[18]||(m[18]=[Z("Save",-1)])]),_:1},8,["disabled"])]),a(u)?(g(),G(Y,{key:2,class:"ms-1 mt-1",severity:"secondary",size:"small",title:"Load configuration from text box below",onClick:z},{default:V(()=>[...m[19]||(m[19]=[Z("Load from String",-1)])]),_:1})):H("",!0),a(u)?(g(),k("div",Ki,[v(K,{id:"TextArea",modelValue:a(p),"onUpdate:modelValue":m[9]||(m[9]=M=>j(p)?p.value=M:null),class:"w-full min-h-[250px]",size:"small",state:a(c)},null,8,["modelValue","state"])])):H("",!0)])):H("",!0)}}}),Ni=ht(ji,[["__scopeId","data-v-ef3bbe31"]]);function Gi(t,e,n,o){const l=t.indexOf(n),i=t.indexOf(o),s=l>0&&i>0;return s&&t.push(`${n}-${o}`),e.map(u=>{const d=u.slice();if(s){const x=d===null||d[i]===null||d[l]===null?null:d[i]-d[l];d.push(x)}return d})}function Zi(t){const e=[];return"main_plot"in t&&Object.entries(t.main_plot).forEach(([n,o])=>{o.fill_to&&e.push([n,o.fill_to])}),"subplots"in t&&Object.values(t.subplots).forEach(n=>{Object.entries(n).forEach(([o,l])=>{l.fill_to&&e.push([o,l.fill_to])})}),e}const Xi=2,qi=3,wt=4;function ae(t,e,n=qi){const o=e%t;let l=n===Xi;return n===wt&&(l=o>t/2),e-o+(l?t:0)}function Wi(t,e,n){const o=ln("Shift",{events:["keydown","keyup"]}),l=T(()=>e.value==="dark"?"white":"black"),i=D({x:0,y:0}),s=144,u=D(!0),d=D(!1),x=D(!1),c=35,_=170;function C(r){return ae(n.value,r,wt)}function $(r){u.value&&!x.value&&p(r.offsetX,r.offsetY)}function P(r){if(d.value)x.value?(O(),x.value=!1,t.value?.chart?.getZr().off("mousemove",$),t.value?.chart?.getZr().off("mousedown",P)):x.value=!0;else{const b=t.value?.convertFromPixel({seriesIndex:0},[r.offsetX,r.offsetY])??[0,0];b[0]=C(Number(b[0]));const L=t.value?.convertToPixel({seriesIndex:0},b)??[0,0];i.value={x:L[0],y:L[1]},t.value?.chart?.getZr().on("mousemove",$),w()}}function w(){d.value=!0,t.value?.setOption({dataZoom:[{disabled:!0}],graphic:[{type:"rect",shape:{x:i.value.x,width:0,y:i.value.y,height:0},style:{fill:l.value,opacity:.1}},{type:"rect",z:5,shape:{x:i.value.x,width:_,y:i.value.y,height:c,r:5},style:{fill:"#002fff",opacity:.8},textContent:{z:10,style:{text:"0 bars - 0%",font:"14px sans-serif",fill:"white"}},textConfig:{position:"inside"}}]})}function O(){d.value=!1,t.value?.setOption({dataZoom:[{disabled:!1}],graphic:[{$action:"remove"},{$action:"remove"}]})}function p(r,b){const L=t.value?.convertFromPixel({seriesIndex:0},[i.value.x,i.value.y])??[0,0],f=t.value?.convertFromPixel({seriesIndex:0},[r,b])??[0,0],S=Number(L[1]),B=Number(f[1]),z=C(Number(L[0])),J=C(Number(f[0])),F=Math.abs(z-J),W=t.value?.convertToPixel({seriesIndex:0},[J,0])[0]??0,Q=sn(F,{units:["d","h","m"]}),E=Math.abs((S-B)/S*100).toFixed(2);t.value?.setOption({graphic:[{shape:{width:W>i.value.x?-1*(i.value.x-W):W-i.value.x,height:b>i.value.y?-1*(i.value.y-b):b-i.value.y}},{shape:{x:i.value.x+(W-i.value.x)/2-_/2,y:b>i.value.y?b-(c+5):b+9},textContent:{style:{textAlign:r<i.value.x?"left":"right",text:`${F/n.value} bars (${S<B?E:"-"+E}%) 
 ${Q}`}}}]}),u.value=!1,setTimeout(()=>{u.value=!0},1e3/s)}U(()=>o.value,()=>{o.value&&!d.value&&t.value?.chart?.getZr().on("mousedown",P)})}function Yi(t,e){const n=t.indexOf("open"),o=t.indexOf("close"),l=t.indexOf("high"),i=t.indexOf("low");let s;return e.map((u,d)=>{const x=u.slice(),c=x[n]??0,_=x[o]??0,C=x[l]??0,$=x[i]??0,P=d===0?(c+_)/2:((s[n]??0)+(s[o]??0))/2,w=(c+C+$+_)/4,O=Math.max(C,c,_),p=Math.min($,c,_);return x[n]=P,x[o]=w,x[l]=O,x[i]=p,s=x.slice(),x})}function Ji(t){if(!t)return{baseCurrency:"",quoteCurrency:""};const[e,n]=t.split("/");if(n!==void 0&&e!==void 0){const o=n.split(":");return{baseCurrency:e,quoteCurrency:o[0]||n}}return{baseCurrency:n??"",quoteCurrency:e??""}}function It(t,e){return`${t.ft_order_side==="buy"?"+":"-"}${Fe("cost"in t?t.cost:t.amount*t.safe_price,e)}`}function st(t,e,n,o){let l=`${t.is_short?"Short":"Long"} ${n}
  ${mt(t.profit_ratio)} ${t.profit_abs?"("+Fe(t.profit_abs,o)+")":""}
  ${It(e,o)}
  Enter-tag: ${t.enter_tag??""}
  Order Price: ${Fe(e.safe_price,o)}`;return l+=`${"ft_order_tag"in e&&e.ft_order_tag&&t.enter_tag!=e.ft_order_tag?`
Order-Tag: `+e.ft_order_tag:""}`,l+=`${t.exit_reason?`
Exit-Tag: `+t.exit_reason:""}`,l}function Qi(t,e,n){let o=`${t.is_short?"Short":"Long"} adjustment
  ${It(e,n)}
  Enter-tag: ${t.enter_tag??""}`;return o+=`${"ft_order_tag"in e&&e.ft_order_tag?`
Order-Tag: `+e.ft_order_tag:""}`,o}const eo="path://m 52.444161,104.1909 8.386653,25.34314 8.386651,25.34313 -16.731501,0.0422 -16.731501,0.0422 8.344848,-25.38539 z m 0.08656,-48.368126 8.386652,25.343139 8.386652,25.343137 -16.731501,0.0422 -16.731502,0.0422 8.344848,-25.385389 z",at="path://m 102.20764,19.885384 h 24.1454 v 41.928829 h -24.1454 z m 12.17344,36.423813 8.38665,25.343139 8.38666,25.343134 -16.7315,0.0422 -16.731507,0.0422 8.344847,-25.385386 z",De="#AD00FF",$e="#0066FF";function to(t,e){const n=[],o=t.data_stop_ts+t.timeframe_ms;for(const l of e){const i=l.open_fill_timestamp??l.open_timestamp;if((ae(t.timeframe_ms??0,l.open_timestamp)<=o||!l.close_timestamp||l.close_timestamp&&l.close_timestamp>=t.data_start_ts)&&l.orders)for(const[s,u]of l.orders.entries()){const d=u.order_filled_timestamp??("order_timestamp"in u?u.order_timestamp:l.open_timestamp),{quoteCurrency:x}=Ji(l.quote_currency??l.pair??"");d&&ae(t.timeframe_ms??0,d)<=o&&d>t.data_start_ts&&(s===0?n.push([ae(t.timeframe_ms??0,i),u.safe_price,at,u.ft_order_side=="sell"?180:0,l.is_short?De:$e,(l.is_short?"Short":"Long")+(u.order_filled_timestamp?"":" (open)"),st(l,u,"entry",x)]):s===l.orders.length-1&&l.close_timestamp?ae(t.timeframe_ms??0,l.close_timestamp)<=o&&l.close_timestamp>t.data_start_ts&&l.is_open===!1&&n.push([ae(t.timeframe_ms??0,l.close_timestamp),u.safe_price,at,l.is_short?0:180,l.is_short?De:$e,mt(l.profit_ratio,2),st(l,u,"exit",x)]):(u.ft_order_side!=="stoploss"||"filled"in u&&(u.filled??0)>0)&&n.push([ae(t.timeframe_ms??0,d),u.safe_price,eo,u.ft_order_side=="sell"?180:0,l.is_short?De:$e,"",Qi(l,u,x)]))}}return{tradeData:n}}function no(t,e,n,o){const{tradeData:l}=to(n,o),i=o.find(u=>u.is_open),s={name:t,type:"scatter",xAxisIndex:0,yAxisIndex:0,encode:{x:0,y:1,label:5,tooltip:6},label:{show:!0,fontSize:12,backgroundColor:e!=="dark"?"#fff":"#000",padding:2,color:e==="dark"?"#fff":"#000",rotate:75,offset:[10,0],align:"left"},itemStyle:{color:u=>u.data?u.data[4]:"#000",opacity:.9},symbol:u=>u[2],symbolRotate:u=>u[3],symbolSize:13,data:l};if(i){const u=n.timeframe_ms*10;s.markLine={symbol:"none",label:{show:!0,position:"middle"},data:[[{name:"Stoploss",yAxis:i.stop_loss_abs,lineStyle:{color:"#ff0000AA",type:"solid"},xAxis:n.data_stop_ts-u>i.open_timestamp?i.open_timestamp:n.data_stop_ts-u},{lineStyle:{color:"#ff0000AA",type:"solid"},yAxis:i.stop_loss_abs,xAxis:i.close_timestamp??n.data_stop_ts+n.timeframe_ms}]]}}return s}function io(t,e,n){if(!t.annotations||!e)return{};const o={label:{position:"insideTop"},z:n??1,data:t.annotations.filter(i=>i.type=="area").map(i=>[{z2:i.z_index??1,xAxis:i.start,yAxis:i.y_start,itemStyle:{color:i.color},label:{formatter:i.label}},{z2:i.z_index??1,xAxis:i.end,yAxis:i.y_end}])},l={label:{position:"middle"},symbol:["none","none"],z:n??1,data:t.annotations.filter(i=>i.type=="line").map(i=>[{name:i.label,xAxis:i.start,yAxis:i.y_start,lineStyle:{color:i.color,width:i.width??1,type:i.line_style??"solid"},z2:i.z_index??1},{xAxis:i.end,yAxis:i.y_end,z2:i.z_index??1}])};return{markArea:o,markLine:l}}function oo(t,e,n){if(!(!t.annotations||!e))return{type:"scatter",symbol:"none",xAxisIndex:0,...io(t,e,n)}}function Re(t,e,n,o,l=0){const i={name:n,type:o.type||"line",xAxisIndex:l,yAxisIndex:l,itemStyle:{color:o.color||be()},encode:{x:t,y:e},showSymbol:!1};return o.type===ee.scatter&&(i.symbolSize=o.scatterSymbolSize??3,i.emphasis={disabled:!0}),i}function rt(t,e,n,o,l=0){const i={type:ee.line},s=Re(t,e,n,i,l),u={stack:n,stackStrategy:"all",lineStyle:{opacity:0},showSymbol:!1,areaStyle:{color:o.color,opacity:.1},tooltip:{show:!1}};return Object.assign(s,u),s}const lo={class:"h-full w-full"},Be=55,he=8,Ee=!1,so="#00ff26",ao="#00ff26",ro="#faba25",uo="#faba25",co=le({__name:"CandleChart",props:{trades:{},dataset:{},heikinAshi:{type:Boolean},showMarkArea:{type:Boolean},useUTC:{type:Boolean},plotConfig:{},theme:{},sliderPosition:{},colorUp:{},colorDown:{},labelSide:{},startCandleCount:{}},setup(t){mn([gn,wn,vn,In,kn,yn,Cn,xn,_n,Sn,Mn,Pn,Ln,Vn,An,Tn,Dn,$n,On,Bn]);const e=t,n=T(()=>e.labelSide==="left"),o=n.value?"5.5%":"1%",l=n.value?"1%":"5.5%",i=e.colorUp,s=e.colorUp,u=e.colorDown,d=e.colorDown,x=D(),c=D({}),_=T(()=>e.dataset?e.dataset.strategy:""),C=T(()=>e.dataset?e.dataset.pair:""),$=T(()=>e.dataset?e.dataset.timeframe:""),P=T(()=>e.dataset!==null&&typeof e.dataset=="object"),w=T(()=>e.trades.filter(f=>f.pair===C.value)),O=T(()=>`${_.value} - ${C.value} - ${$.value}`),p=T(()=>Zi(e.plotConfig));Wi(x,et(()=>e.theme),et(()=>e.dataset.timeframe_ms));function r(f=!1){if(!P.value)return;c.value?.title&&(c.value.title[0].text=O.value);const S=e.dataset.columns.slice(),B=S.findIndex(h=>h==="__date_ts"),z=S.findIndex(h=>h==="open"),J=S.findIndex(h=>h==="high"),F=S.findIndex(h=>h==="low"),W=S.findIndex(h=>h==="close"),Q=S.findIndex(h=>h==="volume"),E=S.findIndex(h=>h==="enter_tag"),se=S.findIndex(h=>h==="exit_tag"),I=S.findIndex(h=>h==="_buy_signal_close"||h==="_enter_long_signal_close"),m=S.findIndex(h=>h==="_sell_signal_close"||h==="_exit_long_signal_close"),X=S.findIndex(h=>h==="_enter_short_signal_close"),re=S.findIndex(h=>h==="_exit_short_signal_close"),pe="subplots"in e.plotConfig?Object.keys(e.plotConfig.subplots).length+1:1;if(Array.isArray(c.value?.dataZoom))if(f){const h=(1-(e.startCandleCount+2)/e.dataset.length)*100;c.value.dataZoom.forEach((K,M)=>{c.value&&c.value.dataZoom&&(c.value.dataZoom[M].start=h)})}else c.value.dataZoom.forEach((h,K)=>{c.value&&c.value.dataZoom&&(delete c.value.dataZoom[K].start,delete c.value.dataZoom[K].end)});let ne=e.heikinAshi?Yi(S,e.dataset.data):e.dataset.data.slice();p.value.forEach(([h,K])=>{h&&K&&(ne=Gi(S,ne,h,K))});const fe=5,Oe=ne[ne.length-1]?.[B];if(Oe){const h=Array(fe);h[B]=Oe+e.dataset.timeframe_ms*fe,ne.push(h)}const Y={dataset:{source:ne},grid:[{left:o,right:l,bottom:`${pe*he+2}%`},{left:o,right:l,bottom:`${pe*he}%`,height:`${he}%`}],series:[{name:"Candles",type:"candlestick",barWidth:"80%",itemStyle:{color:i,color0:u,borderColor:s,borderColor0:d},encode:{x:B,y:[z,W,F,J]}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,itemStyle:{color:"#777777"},large:!0,encode:{x:B,y:Q}}]};if(Array.isArray(Y.series)){const h=oo(e.dataset,e.showMarkArea,e.plotConfig.options?.markAreaZIndex);h&&Y.series.push(h);const K=[{colData:I,name:"Entry",symbol:"triangle",symbolSize:10,color:so,tooltipPrefix:"Long entry",colTooltip:E},{colData:m,name:"Exit",symbol:"diamond",symbolSize:8,color:ro,tooltipPrefix:"Long exit",colTooltip:se},{colData:X,name:"Entry",symbol:"triangle",symbolSize:10,symbolRotate:180,color:ao,tooltipPrefix:"Short entry",colTooltip:E},{colData:re,name:"Exit",symbol:"pin",symbolSize:8,color:uo,tooltipPrefix:"Short exit",colTooltip:se}];for(const M of K)M.colData>=0&&Y.series.push({name:M.name,type:"scatter",symbol:M.symbol,symbolSize:M.symbolSize,symbolRotate:M.symbolRotate??0,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:M.color},tooltip:{valueFormatter:N=>{if(Array.isArray(N)){if(N.length>0&&N[0]){const te=(Array.isArray(N[1])?N[1][M.colTooltip]?.toString():N[1]?.toString()).substring(0,100);return`${M.tooltipPrefix} ${N[0]} ${te?`(${te})`:""}`}return""}return N?`${M.tooltipPrefix} ${N}`:""}},encode:{x:B,y:M.colData,tooltip:M.colTooltip>=0?[M.colData,M.colTooltip]:[M.colData]}})}if(Object.assign(c.value,Y),"main_plot"in e.plotConfig&&Object.entries(e.plotConfig.main_plot).forEach(([h,K])=>{const M=S.findIndex(N=>N===h);if(M>0){if(!Array.isArray(c.value?.legend)&&c.value?.legend?.data&&c.value.legend.data.push(h),Array.isArray(c.value?.series)){if(c.value?.series.push(Re(B,M,h,K)),K.fill_to){const N=`${h}-${K.fill_to}`,q=S.findIndex(Me=>Me===N),te={color:K.color,type:ee.line},Ie=rt(B,q,h,te,0),ue=c.value.series[c.value.series.length-1];ue&&(ue.stack=h),c.value.series.push(Ie)}c.value?.series.splice(c.value?.series.length-1,0)}}else console.log(`element ${h} for main plot not found in columns.`)}),"subplots"in e.plotConfig){let h=2;Object.entries(e.plotConfig.subplots).forEach(([K,M])=>{const N=h;Array.isArray(c.value.yAxis)&&c.value.yAxis.length<=h&&c.value.yAxis.push({scale:!0,gridIndex:N,name:K,position:e.labelSide,nameLocation:"middle",nameGap:Be,axisLabel:{show:!0,hideOverlap:!0,overflow:"truncate"},axisLine:{show:Ee},axisTick:{show:!1},splitLine:{show:!1}}),Array.isArray(c.value.xAxis)&&c.value.xAxis.length<=h&&c.value.xAxis.push({type:"time",gridIndex:N,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20}),Array.isArray(c.value.dataZoom)&&c.value.dataZoom.forEach(q=>q.xAxisIndex&&Array.isArray(q.xAxisIndex)?q.xAxisIndex.push(h):null),c.value.grid&&Array.isArray(c.value.grid)&&c.value.grid.push({left:o,right:l,bottom:`${(pe-h+1)*he}%`,height:`${he}%`}),Object.entries(M).forEach(([q,te])=>{const Ie=S.findIndex(ue=>ue===q);if(Ie>0){if(!Array.isArray(c.value.legend)&&c.value.legend?.data&&c.value.legend.data.push(q),c.value.series&&Array.isArray(c.value.series)){if(c.value.series.push(Re(B,Ie,q,te,h)),te.fill_to){const ue=`${q}-${te.fill_to}`,Me=S.findIndex(_t=>_t===ue),kt={color:te.color,type:ee.line},Ct=rt(B,Me,q,kt,h),Xe=c.value.series[c.value.series.length-1];Xe&&(Xe.stack=q),c.value.series.push(Ct)}c.value?.series.splice(c.value?.series.length-1,0)}}else console.log(`element ${q} was not found in the columns.`)}),h+=1})}if(Array.isArray(c.value.grid)){const h=c.value.grid[c.value.grid.length-1];h&&(h.bottom="50px",delete h.top)}const we="Trades";!Array.isArray(c.value.legend)&&c.value.legend?.data&&c.value.legend.data.splice(4,0,we);const _e=no(we,e.theme,e.dataset,w.value);Array.isArray(c.value.series)&&c.value.series.push(_e),x.value?.setOption(c.value,{replaceMerge:["series","grid","yAxis","xAxis","legend"],notMerge:f})}function b(){x.value?.setOption({},{notMerge:!0}),c.value={title:[{show:!1}],backgroundColor:"rgba(0, 0, 0, 0)",useUTC:e.useUTC,animation:!1,legend:{data:["Candles","Volume","Entry","Exit"],right:"1%",top:0,type:"scroll",pageTextStyle:{color:e.theme==="dark"?"#dedede":"#333"},pageIconColor:e.theme==="dark"?"#aaa":"#2f4554",pageIconInactiveColor:e.theme==="dark"?"#2f4554":"#aaa"},tooltip:{show:!0,trigger:"axis",renderMode:"richText",backgroundColor:"rgba(80,80,80,0.7)",borderWidth:0,textStyle:{color:"#fff"},axisPointer:{type:"cross",lineStyle:{color:"#cccccc",width:1,opacity:1}},position(f,S,B,z,J){const F={top:60},W=f[0]<J.viewSize[0]/2;return F[["left","right"][+W]]=W?5:60,F}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},xAxis:[{type:"time",axisLine:{onZero:!1},axisTick:{show:!0},axisLabel:{show:!0},axisPointer:{label:{show:!1}},position:"top",splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"},{type:"time",gridIndex:1,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,max:f=>tt(f.max+(f.max-f.min)*.02),min:f=>tt(f.min-(f.max-f.min)*.04),name:" ",nameLocation:"middle",nameGap:Be,axisLine:{show:Ee},axisLabel:{hideOverlap:!0,overflow:"truncate"},position:e.labelSide},{scale:!0,gridIndex:1,splitNumber:2,name:"volume",nameLocation:"middle",position:e.labelSide,nameGap:Be,axisLabel:{show:!1},axisLine:{show:Ee},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:80,end:100},{xAxisIndex:[0,1],bottom:10,start:80,end:100,...En}]},console.log("Initialized"),r(!0)}function L(){if(!e.sliderPosition)return;const f=e.sliderPosition.startValue-e.dataset.timeframe_ms*40,S=e.sliderPosition.endValue?e.sliderPosition.endValue+e.dataset.timeframe_ms*40:e.sliderPosition.startValue+e.dataset.timeframe_ms*80;x.value&&x.value.dispatchAction({type:"dataZoom",dataZoomIndex:0,startValue:f,endValue:S})}return Ke(()=>{b()}),U([()=>e.useUTC,()=>e.theme,()=>e.plotConfig],()=>b()),U([()=>e.dataset,()=>e.heikinAshi,()=>e.showMarkArea],()=>r()),U(()=>e.sliderPosition,()=>L()),(f,S)=>(g(),k("div",lo,[a(P)?(g(),G(a(bn),{key:0,ref_key:"candleChart",ref:x,theme:t.theme,autoresize:"","manual-update":""},null,8,["theme"])):H("",!0)]))}}),po=ht(co,[["__scopeId","data-v-1e045e47"]]),fo={class:"flex me-0 w-full items-center justify-between"},ho={class:"ms-1 md:ms-2 flex flex-wrap md:flex-nowrap items-center gap-1"},mo={class:"flex flex-col md:flex-row md:gap-2"},bo={class:"flex flex-row flex-wrap gap-2"},go={key:0,class:"text-sm text-nowrap",title:"Long entry signals"},vo={key:1,class:"text-sm text-nowrap",title:"Long exit signals"},yo={class:"flex flex-row flex-wrap gap-2"},xo={key:0,class:"text-sm text-nowrap"},So={key:1,class:"text-sm text-nowrap"},Oo={key:0},wo={key:1,class:"w-4 h-4"},Io={class:"h-full flex"},ko={class:"min-w-0 w-full flex-1"},Co={key:1,class:"m-auto"},_o={key:1,class:"text-lg"},Mo={key:2},Po=le({__name:"SingleCandleChartContainer",props:{trades:{default:()=>[]},availablePairs:{},timeframe:{},historicView:{type:Boolean,default:!1},pair:{default:""},sliderPosition:{default:void 0},isSinglePairView:{type:Boolean,default:!0}},emits:["refreshData"],setup(t,{emit:e}){const n=t,o=e,l=bt(),i=an(),s=Ge(),u=Se(),d=T(()=>n.historicView?s.activeBot.history[`${n.pair}__${n.timeframe}`]?.data:s.activeBot.candleData[`${n.pair}__${n.timeframe}`]?.data),x=T(()=>d.value?d.value.all_columns??d.value.columns:[]),c=T(()=>d.value?d.value.columns??d.value.all_columns:[]),_=T(()=>d.value&&d.value.data.length>0),C=T(()=>n.historicView?s.activeBot.historyStatus===ce.loading:s.activeBot.candleDataStatus===ce.loading),$=T(()=>{switch(n.historicView?s.activeBot.historyStatus:s.activeBot.candleDataStatus){case ce.not_loaded:return"Not loaded yet.";case ce.loading:return"Loading...";case ce.success:return"No data available";case ce.error:return"Failed to load data";default:return"Unknown"}});function P(){o("refreshData",n.pair,u.usedColumns)}function w(){_.value||P()}function O(){const[p]=n.availablePairs}return U(()=>n.availablePairs,()=>{n.availablePairs.find(p=>p===n.pair)||(O(),P())}),U(()=>u.plotConfig,()=>{const p=u.usedColumns.some(r=>x.value.includes(r)&&!c.value.includes(r));l.useReducedPairCalls&&p&&P()}),U(()=>n.timeframe,()=>{w()}),(p,r)=>{const b=fn,L=po;return g(),k("div",{class:je(["flex-fill w-full flex-col align-items-stretch flex",{"h-full":t.isSinglePairView,"h-150 border border-r border-b border-surface-300 dark:border-surface-700":!t.isSinglePairView}])},[y("div",fo,[y("div",ho,[y("div",mo,[y("div",bo,[a(d)?(g(),k("small",go,"Long entries: "+R(a(d).enter_long_signals||a(d).buy_signals),1)):H("",!0),a(d)?(g(),k("small",vo,"Long exit: "+R(a(d).exit_long_signals||a(d).sell_signals),1)):H("",!0)]),y("div",yo,[a(d)&&a(d).enter_short_signals?(g(),k("small",xo,"Short entries: "+R(a(d).enter_short_signals),1)):H("",!0),a(d)&&a(d).exit_short_signals?(g(),k("small",So,"Short exits: "+R(a(d).exit_short_signals),1)):H("",!0)])])]),y("div",null,R(t.pair||"Pair"),1),a(C)?(g(),k("div",Oo,[v(b,{class:"w-4 h-4","stroke-width":"4",small:"",label:"Spinning"})])):(g(),k("div",wo))]),y("div",Io,[y("div",ko,[a(_)?(g(),G(L,{key:0,dataset:a(d),trades:t.trades,"plot-config":a(u).plotConfig,"heikin-ashi":a(l).useHeikinAshiCandles,"show-mark-area":a(l).showMarkArea,"use-u-t-c":a(l).timezone==="UTC",theme:a(l).chartTheme,"slider-position":t.sliderPosition,"color-up":a(i).colorUp,"color-down":a(i).colorDown,"start-candle-count":a(l).chartDefaultCandleCount,"label-side":a(l).chartLabelSide},null,8,["dataset","trades","plot-config","heikin-ashi","show-mark-area","use-u-t-c","theme","slider-position","color-up","color-down","start-candle-count","label-side"])):(g(),k("div",Co,[a(C)?(g(),G(b,{key:0,class:"w-5 h-5",label:"Spinning"})):(g(),k("div",_o,R(a($)),1)),a(s).activeBot.historyTakesLonger?(g(),k("p",Mo," This is taking longer than expected ... Hold on ... ")):H("",!0)]))])])],2)}}}),Lo={class:"flex h-full"},Vo={class:"flex-fill w-full flex-col align-items-stretch flex h-full"},Ao={class:"flex me-0 items-center md:gap-2"},To={class:"md:ms-2 text-nowrap"},Do={class:"ms-auto flex items-center gap-2"},$o={class:"me-0 md:me-1"},Bo={key:1,class:"flex flex-col items-center justify-center h-full w-full"},jo=le({__name:"CandleChartContainer",props:{trades:{default:()=>[]},availablePairs:{},timeframe:{},historicView:{type:Boolean,default:!1},reloadDataOnSwitch:{type:Boolean,default:!1},strategy:{default:""},sliderPosition:{default:void 0}},emits:["refreshData"],setup(t,{emit:e}){const n=t,o=e,l=bt(),i=Ge(),s=Se(),u=T(()=>{const p=i.activeBot.plotMultiPairs[0];return n.historicView?i.activeBot.history[`${p}__${n.timeframe}`]?.data:i.activeBot.candleData[`${p}__${n.timeframe}`]?.data}),d=T(()=>u.value?u.value.all_columns??u.value.columns:[]),x=T(()=>n.strategy||u.value?.strategy||""),c=D(!1);function _(){c.value=!c.value}const C=T(()=>i.activeBot.plotMultiPairs.length===1);U(()=>i.activeBot.selectedPair,()=>{i.activeBot.plotMultiPairs=[i.activeBot.selectedPair]}),Ke(()=>{i.activeBot.selectedPair?i.activeBot.plotMultiPairs=[i.activeBot.selectedPair]:n.availablePairs.length>0&&w(),s.plotConfigChanged()});function $(){for(const p of i.activeBot.plotMultiPairs)o("refreshData",p,s.usedColumns)}function P(p,r){for(const b of p)r?.includes(b)||o("refreshData",b,s.usedColumns)}function w(){const[p]=n.availablePairs;p&&(i.activeBot.plotMultiPairs=[p])}U(()=>n.availablePairs,()=>{(i.activeBot.plotMultiPairs.length===0||i.activeBot.plotMultiPairs.some(p=>!n.availablePairs.includes(p)))&&(w(),$())}),U(()=>i.activeBot.plotMultiPairs,(p,r)=>{p.length!==0&&(!n.historicView||n.reloadDataOnSwitch)&&P(p,r)},{immediate:!0}),U(()=>l.multiPairSelection,()=>{!l.multiPairSelection&&i.activeBot.plotMultiPairs.length>1&&i.activeBot.plotMultiPairs[0]&&(i.activeBot.plotMultiPairs=[i.activeBot.plotMultiPairs[0]])});const O=T({get(){return i.activeBot.plotMultiPairs[0]||""},set(p){i.activeBot.plotMultiPairs=[p]}});return(p,r)=>{const b=Hn,L=ye,f=rn,S=xe,B=ft,z=Ot,J=un,F=Po,W=Ni,Q=dn;return g(),k("div",Lo,[y("div",Vo,[y("div",Ao,[y("span",To,R(a(x))+" | "+R(t.timeframe||""),1),a(l).multiPairSelection?(g(),G(b,{key:0,modelValue:a(i).activeBot.plotMultiPairs,"onUpdate:modelValue":r[0]||(r[0]=E=>a(i).activeBot.plotMultiPairs=E),class:"w-80",options:t.availablePairs,optionlabel:"",placeholder:"Select pairs to plot",size:"small",filter:""},null,8,["modelValue","options"])):(g(),G(L,{key:1,modelValue:a(O),"onUpdate:modelValue":r[1]||(r[1]=E=>j(O)?O.value=E:null),class:"w-80",options:t.availablePairs,size:"small",clearable:!1,onInput:$},null,8,["modelValue","options"])),v(S,{title:"Refresh chart",severity:"secondary",disabled:a(i).activeBot.plotMultiPairs.length==0,size:"small",onClick:$},{default:V(()=>[v(f)]),_:1},8,["disabled"]),v(B,{modelValue:a(l).multiPairSelection,"onUpdate:modelValue":r[2]||(r[2]=E=>a(l).multiPairSelection=E)},{default:V(()=>[...r[7]||(r[7]=[y("span",{class:"text-nowrap"},"Multi pair",-1)])]),_:1},8,["modelValue"]),y("div",Do,[v(B,{modelValue:a(l).showMarkArea,"onUpdate:modelValue":r[3]||(r[3]=E=>a(l).showMarkArea=E)},{default:V(()=>[...r[8]||(r[8]=[y("span",{class:"text-nowrap"},"Show Chart Areas",-1)])]),_:1},8,["modelValue"]),v(B,{modelValue:a(l).useHeikinAshiCandles,"onUpdate:modelValue":r[4]||(r[4]=E=>a(l).useHeikinAshiCandles=E)},{default:V(()=>[...r[9]||(r[9]=[y("span",{class:"text-nowrap"},"Heikin Ashi",-1)])]),_:1},8,["modelValue"]),v(z),y("div",$o,[v(S,{size:"small",title:"Plot configurator",severity:"secondary",onClick:_},{icon:V(()=>[v(J,{width:"12",height:"12"})]),_:1})])])]),a(i).activeBot.plotMultiPairs?.length>0?(g(),k("div",{key:0,class:je({"min-w-0 w-full h-full ":a(C),"grid grid-cols-1 lg:grid-cols-2":!a(C)})},[(g(!0),k(me,null,Ne(a(i).activeBot.plotMultiPairs,E=>(g(),G(F,{key:E,"available-pairs":t.availablePairs,pair:E,"historic-view":a(i).activeBot.isWebserverMode,timeframe:t.timeframe,trades:n.trades,"slider-position":n.sliderPosition,"is-single-pair-view":a(C),onRefreshData:r[5]||(r[5]=se=>$())},null,8,["available-pairs","pair","historic-view","timeframe","trades","slider-position","is-single-pair-view"]))),128))],2)):(g(),k("div",Bo,[...r[10]||(r[10]=[y("span",{class:"text-2xl font-semibold"},"No pair selected",-1)])]))]),v(Q,{id:"plotConfiguratorModal",visible:a(c),"onUpdate:visible":r[6]||(r[6]=E=>j(c)?c.value=E:null),header:"Plot Configurator","ok-only":"","hide-backdrop":""},{default:V(()=>[v(W,{"is-visible":a(c),columns:a(d)},null,8,["is-visible","columns"])]),_:1},8,["visible"])])}}});export{jo as _,yt as s};
//# sourceMappingURL=CandleChartContainer.vue_vue_type_script_setup_true_lang-CdCmWOZD.js.map
