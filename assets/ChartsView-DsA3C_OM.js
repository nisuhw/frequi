import{_ as T}from"./CandleChartContainer-B0Gc7mC3.js";import{s as L}from"./index-BdcaoksP.js";import{_ as W}from"./TimeRangeSelect.vue_vue_type_script_setup_true_lang-CiAKCcKa.js";import{_ as U,a as N}from"./StrategySelect.vue_vue_type_script_setup_true_lang-D-SdulY2.js";import{_ as O}from"./ExchangeSelect.vue_vue_type_script_setup_true_lang-D5NH5zO_.js";import{V as P,r as c,d as $,u as H,p as _,o as R,W as j,X as q,Y as A,c as p,a as g,q as h,e as m,f as a,b as d,h as u,Z as x,$ as F,j as B,a0 as b,t as V,a1 as I,y as X}from"./index-BoH2X4lE.js";import"./index-C37AQFYw.js";import"./index-6JvTfbEk.js";import"./check-BvUZzYk1.js";import"./plus-box-outline-CTP-ap11.js";import"./content-copy-BFTpfONv.js";import"./installCanvasRenderer-Db7nzp7W.js";import"./chartZoom-BxGMNc4V.js";import"./index-Cw_wDOQ2.js";const Y=P("chartConfig",()=>{const v=c(""),e=c(!1),o=c("1h"),n=c("");return{strategy:v,useLiveData:e,selectedTimeframe:o,timerange:n}},{persist:{key:"ftUIChartSettings",pick:["useLiveData"]}}),Z={class:"flex flex-col h-full"},z={key:0,class:"md:mx-3 mt-2 px-1"},G={class:"mb-2 border dark:border-surface-700 border-surface-300 rounded-md p-2 text-start"},J={class:"flex flex-row gap-5"},K={class:"grid grid-cols-3 md:grid-cols-5 mx-1 gap-1 md:gap-2"},Q={class:"text-start md:me-1 col-span-2"},ee={class:"flex flex-col text-start"},te={class:"md:mx-2 mt-2 pb-1 h-full"},_e=$({__name:"ChartsView",setup(v){const e=H(),o=Y(),n=_(()=>e.activeBot.isWebserverMode?o.selectedTimeframe||e.activeBot.strategy.timeframe||"":e.activeBot.timeframe),y=_(()=>{if(e.activeBot.isWebserverMode){if(o.useLiveData)return Object.keys(f.value?.markets||{}).sort()||[];if(n.value&&n.value!==""){const i=n.value;return e.activeBot.pairlistWithTimeframe.filter(([t,l])=>l===i).map(([t])=>t)}return e.activeBot.pairlist}return e.activeBot.whitelist});R(()=>{e.activeBot.isWebserverMode?e.activeBot.getAvailablePairs({}):(!e.activeBot.whitelist||e.activeBot.whitelist.length===0)&&e.activeBot.getWhitelist()});function E(i,t){if(console.log("Refreshing OHLCV for pair:",i,n.value,"with columns:",t),e.activeBot.isWebserverMode&&n.value){const l={pair:i,timeframe:n.value,timerange:o.timerange,strategy:o.strategy,columns:t,live_mode:o.useLiveData};s.value.customExchange&&(l.exchange=s.value.selectedExchange.exchange,l.trading_mode=s.value.selectedExchange.trade_mode.trading_mode,l.margin_mode=s.value.selectedExchange.trade_mode.margin_mode),e.activeBot.getPairHistory(l)}else e.activeBot.getPairCandles({pair:i,timeframe:n.value,columns:t})}const s=c({customExchange:!1,selectedExchange:{exchange:e.activeBot.botState.exchange,trade_mode:{margin_mode:q.NONE,trading_mode:j.SPOT}}}),f=c(null);return A(()=>o.useLiveData,async()=>{if(e.activeBot.isWebserverMode&&o.useLiveData){const i={};s.value.customExchange&&(i.exchange=s.value.selectedExchange.exchange,i.trading_mode=s.value.selectedExchange.trade_mode.trading_mode,i.margin_mode=s.value.selectedExchange.trade_mode.margin_mode),f.value=await e.activeBot.getMarkets(i)}},{immediate:!0}),(i,t)=>{const l=F,S=O,C=U,w=N,M=W,k=L,D=T;return g(),p("div",Z,[a(e).activeBot.isWebserverMode?(g(),p("div",z,[d(k,{header:"Settings",toggleable:""},{default:u(()=>[m("div",G,[m("div",J,[d(l,{modelValue:a(s).customExchange,"onUpdate:modelValue":t[0]||(t[0]=r=>a(s).customExchange=r),class:"mb-2"},{default:u(()=>t[6]||(t[6]=[B(" Custom Exchange ")])),_:1,__:[6]},8,["modelValue"]),x(m("span",null," Current Exchange: "+V(a(e).activeBot.botState.exchange)+" "+V(a(e).activeBot.botState.trading_mode),513),[[b,!a(s).customExchange]])]),d(I,{name:"fade"},{default:u(()=>[x(d(S,{modelValue:a(s).selectedExchange,"onUpdate:modelValue":t[1]||(t[1]=r=>a(s).selectedExchange=r)},null,8,["modelValue"]),[[b,a(s).customExchange]])]),_:1})]),m("div",K,[m("div",Q,[t[8]||(t[8]=m("span",null,"Strategy",-1)),d(C,{modelValue:a(o).strategy,"onUpdate:modelValue":t[2]||(t[2]=r=>a(o).strategy=r),class:"mt-1 mb-1"},null,8,["modelValue"]),a(e).activeBot.botFeatures.chartLiveData?(g(),X(l,{key:0,modelValue:a(o).useLiveData,"onUpdate:modelValue":t[3]||(t[3]=r=>a(o).useLiveData=r),class:"align-self-center",title:"Use live data from the exchange. Only use if you don't have data downloaded locally."},{default:u(()=>t[7]||(t[7]=[B(" Use Live Data ")])),_:1,__:[7]},8,["modelValue"])):h("",!0)]),m("div",ee,[t[9]||(t[9]=m("span",null,"Timeframe",-1)),d(w,{modelValue:a(o).selectedTimeframe,"onUpdate:modelValue":t[4]||(t[4]=r=>a(o).selectedTimeframe=r),class:"mt-1"},null,8,["modelValue"])]),d(M,{modelValue:a(o).timerange,"onUpdate:modelValue":t[5]||(t[5]=r=>a(o).timerange=r),class:"col-span-3 md:col-span-2"},null,8,["modelValue"])])]),_:1})])):h("",!0),m("div",te,[d(D,{"available-pairs":a(y),"historic-view":a(e).activeBot.isWebserverMode,timeframe:a(n),trades:a(e).activeBot.trades,timerange:a(e).activeBot.isWebserverMode?a(o).timerange:void 0,strategy:a(e).activeBot.isWebserverMode?a(o).strategy:void 0,"plot-config-modal":!1,onRefreshData:E},null,8,["available-pairs","historic-view","timeframe","trades","timerange","strategy"])])])}}});export{_e as default};
//# sourceMappingURL=ChartsView-DsA3C_OM.js.map
