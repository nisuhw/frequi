import{m as V,c as m,o as a,a as s,d as j,u as q,r as w,b as H,w as O,e as l,s as U,f as b,i as D,g as E,h as I,_ as J,j as P,k as W,l as G,n as K,p as M,q as z,F as Q,t as X,v as Y,x as F,y as Z,z as ee,A as te,B as oe,C as A}from"./index-ClGwpIlp.js";import{_ as ne}from"./check-nPLqaRRc.js";import{u as se,_ as le}from"./useSortable-jtnNPDb0-BYSvNwce.js";const ae={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function re(c,e){return a(),m("svg",ae,[...e[0]||(e[0]=[s("path",{fill:"currentColor",d:"M15 16h4v2h-4zm0-8h7v2h-7zm0 4h6v2h-6zM3 18a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V8H3zM14 5h-3l-1-1H6L5 5H2v2h12z"},null,-1)])])}const ie=V({name:"mdi-delete-sweep",render:re}),ce={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function de(c,e){return a(),m("svg",ce,[...e[0]||(e[0]=[s("path",{fill:"currentColor",d:"M9 16v-6H5l7-7l7 7h-4v6zm-4 4v-2h14v2z"},null,-1)])])}const ue=V({name:"mdi-upload",render:de}),me={class:"flex gap-1"},pe=j({__name:"BotRename",props:{bot:{}},emits:["cancelled","saved"],setup(c,{emit:e}){const r=c,p=e,g=q(),i=w("");H(()=>{i.value=r.bot.botName});const k=()=>{g.updateBot(r.bot.botId,{botName:i.value}),p("saved")};return(C,_)=>{const $=U,N=ne,h=E,S=J;return a(),m("form",{class:"flex w-full gap-2",onSubmit:O(k,["prevent"])},[l($,{modelValue:b(i),"onUpdate:modelValue":_[0]||(_[0]=x=>D(i)?i.value=x:null),size:"small",class:"w-full",placeholder:"Bot name",autofocus:""},null,8,["modelValue"]),s("div",me,[l(h,{type:"submit",size:"small",severity:"secondary",title:"Save",class:"w-8 h-8 p-0!"},{default:I(()=>[l(N)]),_:1}),l(h,{size:"small",severity:"secondary",title:"Cancel",class:"w-8 h-8 p-0!",onClick:_[1]||(_[1]=x=>C.$emit("cancelled"))},{default:I(()=>[l(S)]),_:1})])],32)}}}),_e={class:"w-full mx-2"},fe={key:0,class:"font-bold text-2xl mb-2"},be=["active","title","onClick"],ve={key:1,class:"flex flex-col gap-2 mt-4"},ge={class:"flex gap-2 justify-center"},he=j({__name:"BotList",props:{small:{type:Boolean}},setup(c){const e=q(),r=w([]),p=w(),g=w(null),i=P(()=>e.availableBotsSorted);se(g,i,{handle:".handle",onUpdate:o=>{const d=i.value[o.oldIndex]?.botId,u=i.value[o.newIndex]?.botId;d&&u&&(e.updateBot(d,{sortId:o.newIndex}),e.updateBot(u,{sortId:o.oldIndex}))}});function k(o){r.value.includes(o)||r.value.push(o)}function C(o){const d=e.botStores[o];if(!d){console.error("Bot not found");return}const u={...d.getLoginInfo(),botId:o};p.value?.openLoginModal(u)}function _(o){r.value.includes(o)&&r.value.splice(r.value.indexOf(o),1)}const $=W();function N(){$.require({message:"Are you sure you want to remove all bots? This cannot be undone.",header:"Clear All Bots",icon:"pi pi-exclamation-triangle",rejectLabel:"Cancel",acceptLabel:"Delete",rejectClass:"p-button-secondary p-button-outlined",acceptClass:"p-button-danger",accept:()=>{e.clearAllBots()}})}const{open:h,onChange:S}=G({accept:".json",multiple:!1});S(async o=>{const d=o?.[0];if(!d)return;const u=new FileReader;u.onload=async L=>{try{const f=JSON.parse(L.target?.result);if(Array.isArray(f)){let y=0;for(const n of f){const B=e.nextBotId,{login:t,initializeBot:v}=K(B);v({botName:n.botName,apiUrl:n.url,username:n.username,accessToken:"",refreshToken:"",autoRefresh:!0,sortId:Object.keys(e.availableBots).length+1});const R=Object.keys(e.availableBots).length+1;e.addBot({botName:n.botName,botId:B,botUrl:n.url,sortId:R}),y++;try{await t({botName:n.botName,url:n.url,username:n.username,password:n.password}),console.log(`Successfully logged in bot: ${n.botName}`)}catch(T){console.error(`Failed to login bot ${n.botName}`,T)}}e.allRefreshFull(),M(`Successfully imported ${y} bots`,"success")}}catch(f){M(`Failed to parse JSON: ${f}`,"error"),console.error("Failed to parse JSON",f)}},u.readAsText(d)});function x(){h()}return(o,d)=>{const u=le,L=pe,f=Z,y=ue,n=E,B=ie;return a(),m("div",_e,[c.small?z("",!0):(a(),m("h3",fe,"Available bots")),s("ul",{ref_key:"sortContainer",ref:g,class:"flex flex-col divide-y border-x border-surface-500 rounded-sm border-y divide-solid divide-surface-500"},[(a(!0),m(Q,null,X(b(i),t=>(a(),m("li",{key:t.botId,active:t.botId===b(e).selectedBot,button:"",title:`${t.botId} - ${t.botName} - ${t.botUrl} - ${b(e).botStores[t.botId]?.isBotLoggedIn?"":"Login info expired!"}`,class:Y(["flex items-center p-2",{"bg-primary-100 dark:bg-primary-800 underline font-semibold":t.botId===b(e).selectedBot}]),onClick:v=>b(e).selectBot(t.botId)},[c.small?z("",!0):(a(),F(u,{key:0,class:"handle cursor-pointer me-2 fs-4"})),b(r).includes(t.botId)?(a(),F(L,{key:1,bot:t,onSaved:v=>_(t.botId),onCancelled:v=>_(t.botId)},null,8,["bot","onSaved","onCancelled"])):(a(),F(f,{key:2,bot:t,"no-buttons":c.small,onEdit:v=>k(t.botId),onEditLogin:v=>C(t.botId)},null,8,["bot","no-buttons","onEdit","onEditLogin"]))],10,be))),128))],512),c.small?z("",!0):(a(),m("div",ve,[s("div",ge,[l(ee,{ref_key:"loginModal",ref:p,"login-text":"Add new bot"},null,512),l(n,{label:"Import Bots",severity:"info",onClick:x},{icon:I(()=>[l(y)]),_:1}),l(n,{label:"Clear All",severity:"danger",onClick:N},{icon:I(()=>[l(B)]),_:1})])]))])}}}),xe={},ye={class:"mt-5"},Be={class:"flex justify-center"};function we(c,e){const r=he,p=oe;return a(),m("div",ye,[s("div",Be,[l(r,{class:"max-w-xl"})]),l(p),e[0]||(e[0]=s("div",{title:"Freqtrade logo",class:"logo-svg my-5 mx-auto dark:bg-white bg-black sm:w-[250px] sm:h-[250px] w-[150px] h-[150px] transition-all duration-300"},null,-1)),e[1]||(e[1]=s("h1",{class:"font-bold text-2xl sm:text-4xl mb-4 transition-all"},"Welcome to the Freqtrade UI",-1)),e[2]||(e[2]=s("div",null,"This page allows you to control your trading bot.",-1)),l(p),e[3]||(e[3]=s("p",{class:"mb-2"},[A(" If you need any help, please refer to the "),s("a",{class:"text-primary underline cursor-pointer",href:"https://www.freqtrade.io/en/latest/",target:"_blank"}," Freqtrade Documentation "),A(" . ")],-1)),e[4]||(e[4]=s("p",{class:"mb-5"},[A("Have fun - "),s("i",null,"wishes you the Freqtrade team")],-1))])}const $e=te(xe,[["render",we],["__scopeId","data-v-4307fab4"]]);export{$e as default};
//# sourceMappingURL=HomeView-DERIV_to.js.map
