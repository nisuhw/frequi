{"version":3,"file":"TradesLogChart-Bt_97ZzR.js","sources":["../../src/utils/charts/binCount.ts","../../src/components/charts/ProfitDistributionChart.vue","../../src/components/charts/CumProfitChart.vue","../../src/components/charts/TradesLogChart.vue"],"sourcesContent":["export function binData(data: number[], bins: number) {\n  const minimum = Math.min(...data);\n  const maximum = Math.max(...data);\n  const binSize = ((maximum - minimum) * 1.01) / bins;\n  // console.log(`data ranges from ${minimum} to ${maximum}, binsize ${binSize}`);\n  // Count occurances an array with [bucketStart, count in this bucket]\n  const baseBins = [...Array(bins).keys()].map((i) => [\n    Math.round((minimum + i * binSize) * 1000) / 1000,\n    0,\n  ]);\n\n  // console.log(baseBins);\n  for (let i = 0; i < data.length; i++) {\n    const index = Math.min(Math.floor((data[i]! - minimum) / binSize), bins - 1);\n    if (!isNaN(index)) {\n      baseBins[index]![1]!++;\n    }\n  }\n\n  return baseBins;\n}\n","<script setup lang=\"ts\">\nimport ECharts from 'vue-echarts';\nimport type { EChartsOption } from 'echarts';\n\nimport { use } from 'echarts/core';\nimport { CanvasRenderer } from 'echarts/renderers';\nimport { BarChart } from 'echarts/charts';\nimport {\n  DatasetComponent,\n  DataZoomComponent,\n  LegendComponent,\n  TitleComponent,\n  TooltipComponent,\n} from 'echarts/components';\n\nimport type { ClosedTrade } from '@/types';\n\nuse([\n  BarChart,\n\n  CanvasRenderer,\n\n  DatasetComponent,\n  DataZoomComponent,\n  LegendComponent,\n  TitleComponent,\n  TooltipComponent,\n]);\n\n// Define Column labels here to avoid typos\nconst CHART_PROFIT = 'Trade count';\n\nconst props = withDefaults(\n  defineProps<{\n    trades: ClosedTrade[];\n    showTitle?: boolean;\n  }>(),\n  {\n    showTitle: true,\n  },\n);\nconst settingsStore = useSettingsStore();\n// registerTransform(ecStat.transform.histogram);\n// console.log(profits);\n// const data = [[]];\nconst binOptions = [\n  { text: '10', value: 10 },\n  { text: '15', value: 15 },\n  { text: '20', value: 20 },\n  { text: '25', value: 25 },\n  { text: '50', value: 50 },\n];\nconst data = computed(() => {\n  const profits = props.trades\n    .filter((trade) => isDefined(trade.profit_ratio))\n    .map((trade) => trade.profit_ratio ?? 0);\n\n  return binData(profits, settingsStore.profitDistributionBins);\n});\n\nconst chartOptions = computed((): EChartsOption => {\n  const chartOptionsLoc: EChartsOption = {\n    title: {\n      text: 'Profit distribution',\n      left: 'center',\n      show: props.showTitle,\n    },\n    backgroundColor: 'rgba(0, 0, 0, 0)',\n    dataset: {\n      source: data.value,\n    },\n    tooltip: {\n      trigger: 'axis',\n      axisPointer: {\n        type: 'line',\n        label: {\n          backgroundColor: '#6a7985',\n        },\n      },\n    },\n    legend: {\n      data: [CHART_PROFIT],\n      right: '5%',\n      top: 0,\n      selectedMode: false,\n    },\n    xAxis: {\n      type: 'category',\n      name: 'Profit %',\n      nameLocation: 'middle',\n      nameGap: 25,\n    },\n    yAxis: [\n      {\n        type: 'value',\n        name: CHART_PROFIT,\n        splitLine: {\n          show: false,\n        },\n        nameRotate: 90,\n        nameLocation: 'middle',\n        nameGap: 35,\n        position: 'left',\n      },\n    ],\n    grid: {\n      ...echartsGridDefault,\n      bottom: 50,\n    },\n\n    series: [\n      {\n        type: 'bar',\n        name: CHART_PROFIT,\n        animation: true,\n        encode: {\n          x: 'x0',\n          y: 'y0',\n        },\n\n        // symbol: 'none',\n      },\n    ],\n  };\n  return chartOptionsLoc;\n});\n</script>\n\n<template>\n  <div class=\"flex flex-col h-full relative\">\n    <div class=\"grow mb-2\">\n      <ECharts v-if=\"trades\" :option=\"chartOptions\" autoresize :theme=\"settingsStore.chartTheme\" />\n    </div>\n    <div\n      class=\"z-2 absolute fixed-top flex items-center gap-10 ms-2\"\n      :class=\"{ 'mx-auto': showTitle }\"\n      label-for=\"input-bins\"\n      size=\"sm\"\n    >\n      <label for=\"input-bins\">Bins</label>\n      <Select\n        id=\"input-bins\"\n        v-model=\"settingsStore.profitDistributionBins\"\n        size=\"small\"\n        option-label=\"text\"\n        option-value=\"value\"\n        class=\"mt-1\"\n        :options=\"binOptions\"\n      ></Select>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.echarts {\n  width: 100%;\n  height: 100%;\n  min-height: 150px;\n}\n</style>\n","<script setup lang=\"ts\">\nimport type { EChartsOption } from 'echarts';\nimport ECharts from 'vue-echarts';\n\nimport { BarChart, LineChart } from 'echarts/charts';\nimport {\n  DataZoomComponent,\n  DatasetComponent,\n  GridComponent,\n  LegendComponent,\n  TitleComponent,\n  TooltipComponent,\n} from 'echarts/components';\nimport { use } from 'echarts/core';\nimport { CanvasRenderer } from 'echarts/renderers';\n\nimport type {\n  ClosedTrade,\n  CumProfitChartData,\n  CumProfitData,\n  CumProfitDataPerDate,\n  Trade,\n} from '@/types';\nimport type { ComputedRefWithControl } from '@vueuse/core';\n\nuse([\n  BarChart,\n  LineChart,\n\n  CanvasRenderer,\n\n  DatasetComponent,\n  DataZoomComponent,\n  GridComponent,\n  LegendComponent,\n  TitleComponent,\n  TooltipComponent,\n]);\n\n// Define Column labels here to avoid typos\nconst CHART_PROFIT = 'Profit';\n\nconst props = withDefaults(\n  defineProps<{\n    trades: ClosedTrade[];\n    openTrades?: Trade[];\n    showTitle?: boolean;\n    profitColumn?: string;\n  }>(),\n  {\n    openTrades: () => [],\n    showTitle: true,\n    profitColumn: 'profit_abs',\n  },\n);\nconst settingsStore = useSettingsStore();\nconst colorStore = useColorStore();\n// const botList = ref<string[]>([]);\n\nconst chart = ref<InstanceType<typeof ECharts>>();\n\nconst openProfit = computed<number>(() => {\n  return props.openTrades.reduce(\n    (a, v) => a + (v['total_profit_abs'] ?? v[props.profitColumn] ?? 0),\n    0,\n  );\n});\n\nconst cumulativeData = computed<CumProfitChartData[]>(() => {\n  // const res: CumProfitData[] = [];\n  const resD: CumProfitDataPerDate = {};\n  const closedTrades = props.trades\n    .slice()\n    .sort((a, b) => (a.close_timestamp > b.close_timestamp ? 1 : -1));\n  let profit = 0.0;\n  let first = true;\n\n  for (let i = 0, len = closedTrades.length; i < len; i += 1) {\n    const trade = closedTrades[i];\n    if (!trade) continue;\n    if (first) {\n      // Start with chart with a 0 entry\n      first = false;\n      if (!resD[trade.open_timestamp]) {\n        // New timestamp\n        resD[trade.open_timestamp] = { profit, [trade.botId]: profit };\n      } else {\n        // Add to existing profit\n        resD[trade.open_timestamp]![trade.botId] = profit;\n      }\n    }\n\n    if (trade.close_timestamp && trade[props.profitColumn]) {\n      profit += trade[props.profitColumn];\n      const resDEntry = resD[trade.close_timestamp];\n      if (!resDEntry) {\n        // New timestamp\n        resD[trade.close_timestamp] = { profit, [trade.botId]: profit };\n      } else {\n        // Add to existing profit\n        resDEntry.profit += trade[props.profitColumn];\n        if (resDEntry[trade.botId]) {\n          resDEntry[trade.botId] += trade[props.profitColumn];\n        } else {\n          resDEntry[trade.botId] = profit;\n        }\n      }\n      // res.push({ date: trade.close_timestamp, profit, [trade.botId]: profit });\n    }\n  }\n\n  const valueArray: CumProfitChartData[] = Object.entries(resD).map(\n    ([k, v]: [string, CumProfitData]) => {\n      const obj = { date: parseInt(k, 10), profit: v.profit };\n      // TODO: The below could allow \"lines\" per bot\"\n      // this.botList.forEach((botId) => {\n      // obj[botId] = v[botId];\n      // });\n      return obj;\n    },\n  );\n\n  if (props.openTrades.length > 0) {\n    let lastProfit = 0;\n    let lastDate = 0;\n    const lastPoint = valueArray[valueArray.length - 1];\n    if (lastPoint) {\n      lastProfit = lastPoint.profit ?? 0;\n      lastDate = lastPoint.date ?? 0;\n    } else {\n      const firstOpenTrade = props.openTrades[0];\n      lastDate = firstOpenTrade ? firstOpenTrade.open_timestamp : 0;\n    }\n    const resultWithOpen = (lastProfit ?? 0) + openProfit.value;\n    valueArray.push({ date: lastDate, currentProfit: lastProfit });\n    // Add one day to date to ensure it's showing properly\n    const tomorrow = Date.now() + 24 * 60 * 60 * 1000;\n    valueArray.push({ date: tomorrow, currentProfit: resultWithOpen });\n  }\n  return valueArray;\n});\n\nfunction generateChart(initial = false) {\n  const { colorProfit, colorLoss } = colorStore;\n  const chartOptionsLoc: EChartsOption = {\n    dataset: {\n      dimensions: ['date', 'profit', 'currentProfit'],\n      source: cumulativeData.value,\n    },\n\n    series: [\n      {\n        // Keep  current-profit before profit, so the starting symbol is behind\n        type: 'line',\n        name: 'currentProfit',\n\n        animation: initial,\n\n        lineStyle: {\n          color: openProfit.value > 0 ? colorProfit : colorLoss,\n          type: 'dotted',\n        },\n        itemStyle: {\n          color: openProfit.value > 0 ? colorProfit : colorLoss,\n        },\n        encode: {\n          x: 'date',\n          y: 'currentProfit',\n        },\n      },\n      {\n        type: 'line',\n        name: CHART_PROFIT,\n        animation: initial,\n        step: 'end',\n        lineStyle: {\n          color: settingsStore.chartTheme === 'dark' ? '#c2c2c2' : 'black',\n        },\n        itemStyle: {\n          color: settingsStore.chartTheme === 'dark' ? '#c2c2c2' : 'black',\n        },\n        encode: {\n          x: 'date',\n          y: 'profit',\n        },\n        // symbol: 'none',\n      },\n    ],\n  };\n  // TODO: maybe have profit lines per bot?\n  // this.botList.forEach((botId: string) => {\n  //   console.log('bot', botId);\n  //   chartOptionsLoc.series.push({\n  //     type: 'line',\n  //     name: botId,\n  //     animation: true,\n  //     step: 'end',\n  //     lineStyle: {\n  //       color: settingsStore.chartTheme === 'dark' ? '#c2c2c2' : 'black',\n  //     },\n  //     itemStylesettingsStore.chartTheme === 'dark' ? '#c2c2c2' : 'black',\n  //     },\n  //     // symbol: 'none',\n  //   });\n  // });\n  return chartOptionsLoc;\n}\nfunction updateChart(initial = false) {\n  const chartOptionsLoc = generateChart(initial);\n  chart.value?.setOption(chartOptionsLoc, {\n    replaceMerge: ['series', 'dataset'],\n  });\n}\n\nconst cumProfitChartOptions: ComputedRefWithControl<EChartsOption> = computedWithControl(\n  () => props.trades,\n  () => {\n    const chartOptionsLoc: EChartsOption = {\n      title: {\n        text: 'Cumulative Profit',\n        left: 'center',\n        show: props.showTitle,\n      },\n      backgroundColor: 'rgba(0, 0, 0, 0)',\n      tooltip: {\n        trigger: 'axis',\n        formatter: (params) => {\n          const profit = params[0].data.profit;\n          const currentProfit = params[0].data['currentProfit'];\n          const profitText = currentProfit\n            ? `Projected profit (incl. unrealized): ${formatPrice(currentProfit, 3)}`\n            : `Profit: ${formatPrice(profit, 3)}`;\n          return `${timestampToDateString(params[1].data.date)}<br />${\n            params[1].marker\n          }${profitText}`;\n        },\n        axisPointer: {\n          type: 'line',\n          label: {\n            backgroundColor: '#6a7985',\n          },\n        },\n      },\n      legend: {\n        data: [CHART_PROFIT],\n        right: '5%',\n        top: 0,\n        selectedMode: false,\n      },\n      useUTC: false,\n      xAxis: {\n        type: 'time',\n      },\n      yAxis: [\n        {\n          type: 'value',\n          name: CHART_PROFIT,\n          splitLine: {\n            show: false,\n          },\n          nameRotate: 90,\n          nameLocation: 'middle',\n          nameGap: 40,\n        },\n      ],\n      grid: {\n        ...echartsGridDefault,\n      },\n      dataZoom: [\n        {\n          type: 'inside',\n          // xAxisIndex: [0],\n          start: 0,\n\n          end: 100,\n        },\n        {\n          // xAxisIndex: [0],\n          bottom: 10,\n          start: 0,\n          end: 100,\n          ...dataZoomPartial,\n        },\n      ],\n    };\n\n    const chartOptionsLoc1 = generateChart(false);\n    // Merge the series and dataset, but not the rest\n    chartOptionsLoc.series = chartOptionsLoc1.series;\n    chartOptionsLoc.dataset = chartOptionsLoc1.dataset;\n    // console.log('computed chartOptionsLoc', chartOptionsLoc);\n    return chartOptionsLoc;\n  },\n);\n\nonMounted(() => {\n  // initializeChart();\n});\n\nwatchThrottled(\n  () => props.openTrades,\n  () => {\n    // cumProfitChartOptions.trigger();\n    updateChart();\n  },\n  { throttle: 60 * 1000 },\n);\nwatch(\n  () => settingsStore.chartTheme,\n  () => {\n    cumProfitChartOptions.trigger();\n  },\n);\n</script>\n\n<template>\n  <ECharts\n    v-if=\"trades\"\n    ref=\"chart\"\n    :option=\"cumProfitChartOptions\"\n    :theme=\"settingsStore.chartTheme\"\n    autoresize\n  />\n</template>\n\n<style scoped>\n.echarts {\n  width: 100%;\n  height: 100%;\n  min-height: 150px;\n}\n</style>\n","<script setup lang=\"ts\">\nimport ECharts from 'vue-echarts';\nimport type { EChartsOption } from 'echarts';\n\nimport { use } from 'echarts/core';\nimport { CanvasRenderer } from 'echarts/renderers';\nimport { LineChart, BarChart } from 'echarts/charts';\nimport {\n  DatasetComponent,\n  DataZoomComponent,\n  LegendComponent,\n  TitleComponent,\n  TooltipComponent,\n  VisualMapComponent,\n  VisualMapPiecewiseComponent,\n} from 'echarts/components';\n\nimport type { ClosedTrade } from '@/types';\n\nuse([\n  BarChart,\n  LineChart,\n\n  CanvasRenderer,\n\n  DatasetComponent,\n  DataZoomComponent,\n  LegendComponent,\n  TitleComponent,\n  TooltipComponent,\n  VisualMapComponent,\n  VisualMapPiecewiseComponent,\n]);\n\n// Define Column labels here to avoid typos\nconst CHART_PROFIT = 'Profit %';\nconst CHART_COLOR = '#9be0a8';\n\nconst props = withDefaults(\n  defineProps<{\n    trades: ClosedTrade[];\n    showTitle?: boolean;\n  }>(),\n  {\n    showTitle: true,\n  },\n);\nconst settingsStore = useSettingsStore();\nconst colorStore = useColorStore();\nconst chartData = computed(() => {\n  const res: (number | string)[][] = [];\n  const sortedTrades = props.trades\n    .slice(0)\n    .sort((a, b) => (a.close_timestamp > b.close_timestamp ? 1 : -1));\n  for (let i = 0, len = sortedTrades.length; i < len; i += 1) {\n    const trade = sortedTrades[i];\n    if (trade) {\n      const entry = [\n        i,\n        ((trade.profit_ratio ?? 0) * 100).toFixed(2),\n        trade.pair,\n        trade.botName,\n        timestampms(trade.close_timestamp),\n        trade.is_short === undefined || !trade.is_short ? 'Long' : 'Short',\n      ];\n      res.push(entry);\n    }\n  }\n  return res;\n});\n\nconst chartOptions = computed((): EChartsOption => {\n  // const { chartData } = this;\n  // Show a maximum of 50 trades by default - allowing to zoom out further.\n  const datazoomStart = chartData.value.length > 0 ? (1 - 50 / chartData.value.length) * 100 : 100;\n  return {\n    title: {\n      text: 'Trades log',\n      left: 'center',\n      show: props.showTitle,\n    },\n    backgroundColor: 'rgba(0, 0, 0, 0)',\n    dataset: {\n      dimensions: ['date', 'profit'],\n      source: chartData.value,\n    },\n    tooltip: {\n      trigger: 'axis',\n      formatter: (params) => {\n        const botName = params[0].data[3] ? ` | ${params[0].data[3]}` : '';\n        return `${params[0].data[2]} | ${params[0].data[5]} ${botName}<br>${params[0].data[4]}<br>Profit ${params[0].data[1]} %`;\n      },\n      axisPointer: {\n        type: 'line',\n        label: {\n          backgroundColor: '#6a7985',\n        },\n      },\n    },\n    xAxis: {\n      type: 'category',\n      show: false,\n    },\n    yAxis: [\n      {\n        type: 'value',\n        name: CHART_PROFIT,\n        splitLine: {\n          show: false,\n        },\n        nameRotate: 90,\n        nameLocation: 'middle',\n        nameGap: 30,\n      },\n    ],\n    grid: {\n      ...echartsGridDefault,\n      left: 80,\n    },\n    dataZoom: [\n      {\n        type: 'inside',\n        start: datazoomStart,\n        end: 100,\n      },\n      {\n        bottom: 10,\n        start: datazoomStart,\n        end: 100,\n        ...dataZoomPartial,\n      },\n    ],\n    visualMap: [\n      {\n        show: true,\n        seriesIndex: 0,\n        pieces: [\n          {\n            max: 0.0,\n            color: colorStore.colorLoss,\n          },\n          {\n            min: 0.0,\n            color: colorStore.colorProfit,\n          },\n        ],\n      },\n    ],\n    series: [\n      {\n        type: 'bar',\n        name: CHART_PROFIT,\n        barCategoryGap: '0%',\n        animation: false,\n        label: {\n          show: true,\n          position: 'top',\n          rotate: 90,\n          offset: [7.5, 7.5],\n          formatter: '{@[1]} %',\n          color: settingsStore.chartTheme === 'dark' ? '#c2c2c2' : '#3c3c3c',\n        },\n        encode: {\n          x: 0,\n          y: 1,\n        },\n\n        itemStyle: {\n          color: CHART_COLOR,\n        },\n      },\n    ],\n  };\n});\n</script>\n\n<template>\n  <ECharts\n    v-if=\"trades.length > 0\"\n    :option=\"chartOptions\"\n    autoresize\n    :theme=\"settingsStore.chartTheme\"\n  />\n</template>\n\n<style scoped>\n.echarts {\n  width: 100%;\n  height: 100%;\n  min-height: 150px;\n}\n</style>\n"],"names":["binData","data","bins","minimum","binSize","baseBins","i","index","CHART_PROFIT","use","BarChart","CanvasRenderer","DatasetComponent","DataZoomComponent","LegendComponent","TitleComponent","TooltipComponent","props","__props","settingsStore","useSettingsStore","binOptions","computed","profits","trade","isDefined","chartOptions","echartsGridDefault","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createBlock","_unref","ECharts","_normalizeClass","_cache","_createVNode","_component_Select","$event","LineChart","GridComponent","colorStore","useColorStore","chart","ref","openProfit","a","v","cumulativeData","resD","closedTrades","b","profit","first","len","resDEntry","valueArray","k","lastProfit","lastDate","lastPoint","firstOpenTrade","resultWithOpen","tomorrow","generateChart","initial","colorProfit","colorLoss","updateChart","chartOptionsLoc","cumProfitChartOptions","computedWithControl","params","currentProfit","profitText","formatPrice","timestampToDateString","dataZoomPartial","chartOptionsLoc1","onMounted","watchThrottled","watch","CHART_COLOR","VisualMapComponent","VisualMapPiecewiseComponent","chartData","res","sortedTrades","entry","timestampms","datazoomStart","botName"],"mappings":"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"}