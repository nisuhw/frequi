import{a as W,b as F,_ as H}from"./TradesLogChart-C8OYeMAa.js";import{c as J}from"./TradeList.vue_vue_type_script_setup_true_lang-DJjX5yQg.js";import{b as X,c as Y}from"./InfoBox.vue_vue_type_script_setup_true_lang-BPU9KVxe.js";import{d as G,u as U,p as u,y as b,a as c,f as e,h as a,b as s,e as g,q as _,c as R,$ as Z,j as w,t as S,i as ee,b5 as te,K as oe,I as se,M as ae,r as re,O as B,b6 as L,o as ne,Q as O,P as N}from"./index-BoH2X4lE.js";import{s as ie,a as le}from"./index-XMmgsqZe.js";import{_ as de}from"./DraggableContainer.vue_vue_type_script_setup_true_lang-CmQDiJjg.js";import{_ as ue}from"./PeriodBreakdown.vue_vue_type_script_setup_true_lang-DMOiMqnr.js";import"./installCanvasRenderer-Db7nzp7W.js";import"./chartZoom-BxGMNc4V.js";import"./index-C37AQFYw.js";import"./index-RC2r1XTr.js";import"./index-BSvU5bU4.js";import"./index-DKJIafZ-.js";import"./index-Bxpi6mYZ.js";import"./index-Cw_wDOQ2.js";import"./install-ClPI-YBr.js";const ce={class:"flex flex-row justify-between items-center"},pe={key:2},me={key:0},fe=["title"],_e={class:"text-sm"},ye={key:0},he={class:"text-profit"},be={class:"text-loss"},ge=G({__name:"BotComparisonList",setup(j){const o=U(),y=u({get:()=>Object.values(o.botStores).every(d=>d.isSelected),set:d=>{for(const r in o.botStores)o.botStores[r].isSelected=d}}),$=u(()=>{const d=[],r={botId:void 0,botName:"Summary",profitClosed:0,profitClosedRatio:void 0,profitOpen:0,profitOpenRatio:void 0,stakeCurrency:"USDT",wins:0,losses:0};return Object.entries(o.allProfit).forEach(([n,i])=>{const p=o.allOpenTrades[n].reduce((t,l)=>t+l.stake_amount,0),m=o.allOpenTrades[n].reduce((t,l)=>t+(l.total_profit_ratio??l.profit_ratio)*l.stake_amount,0)/p,f=o.allOpenTrades[n].reduce((t,l)=>t+(l.total_profit_abs??l.profit_abs??0),0);d.push({botId:n,botName:o.availableBots[n].botName||o.availableBots[n].botId,trades:`${o.allOpenTradeCount[n]} / ${o.allBotState[n]?.max_open_trades||"N/A"}`,profitClosed:i.profit_closed_coin,profitClosedRatio:i.profit_closed_ratio||0,stakeCurrency:o.allBotState[n]?.stake_currency||"",profitOpenRatio:m,profitOpen:f,wins:i.winning_trades,losses:i.losing_trades,balance:o.allBalance[n]?.total_bot??o.allBalance[n]?.total,stakeCurrencyDecimals:o.allBotState[n]?.stake_currency_decimals||3,isDryRun:o.allBotState[n]?.dry_run,isOnline:o.botStores[n]?.isBotOnline}),i.profit_closed_coin!==void 0&&o.botStores[n].isSelected&&(r.profitClosed+=i.profit_closed_coin,r.profitOpen+=f,r.wins+=i.winning_trades,r.losses+=i.losing_trades,r.stakeCurrency=o.allBotState[n]?.stake_currency||r.stakeCurrency)}),d.push(r),d});return(d,r)=>{const n=Z,i=te,p=le,m=X,f=ie;return c(),b(f,{size:"small",value:e($)},{default:a(()=>[s(p,{field:"botName",header:"Bot"},{body:a(({data:t,field:l})=>[g("div",ce,[g("div",null,[t.botId&&e(o).botCount>1?(c(),b(n,{key:0,modelValue:e(o).botStores[t.botId??""].isSelected,"onUpdate:modelValue":h=>e(o).botStores[t.botId??""].isSelected=h,title:"Show this bot in Dashboard"},{default:a(()=>[w(S(t[l]),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])):_("",!0),!t.botId&&e(o).botCount>1?(c(),b(n,{key:1,modelValue:e(y),"onUpdate:modelValue":r[0]||(r[0]=h=>ee(y)?y.value=h:null),title:"Toggle all bots",class:"font-bold"},{default:a(()=>[w(S(t[l]),1)]),_:2},1032,["modelValue"])):_("",!0),e(o).botCount<=1?(c(),R("span",pe,S(t[l]),1)):_("",!0)]),t.isOnline&&t.isDryRun?(c(),b(i,{key:0,class:"items-center bg-green-800 text-slate-200",severity:"success"},{default:a(()=>r[1]||(r[1]=[w("Dry")])),_:1,__:[1]})):_("",!0),t.isOnline&&!t.isDryRun?(c(),b(i,{key:1,class:"items-center",severity:"warning"},{default:a(()=>r[2]||(r[2]=[w("Live")])),_:1,__:[2]})):_("",!0),t.isOnline===!1?(c(),b(i,{key:2,class:"items-center",severity:"secondary"},{default:a(()=>r[3]||(r[3]=[w("Offline")])),_:1,__:[3]})):_("",!0)])]),_:1}),s(p,{field:"trades",header:"Trades"}),s(p,{header:"Open Profit"},{body:a(({data:t})=>[t.profitOpen&&t.botId!="Summary"?(c(),b(m,{key:0,"profit-ratio":t.profitOpenRatio,"profit-abs":t.profitOpen,"profit-desc":`Total Profit (Open and realized) ${("formatPercent"in d?d.formatPercent:e(oe))(t.profitOpenRatio??0)}`,"stake-currency":t.stakeCurrency},null,8,["profit-ratio","profit-abs","profit-desc","stake-currency"])):_("",!0)]),_:1}),s(p,{header:"Closed Profit"},{body:a(({data:t})=>[t.profitClosed&&t.botId!="Summary"?(c(),b(m,{key:0,"profit-ratio":t.profitClosedRatio,"profit-abs":t.profitClosed,"stake-currency":t.stakeCurrency},null,8,["profit-ratio","profit-abs","stake-currency"])):_("",!0)]),_:1}),s(p,{field:"balance",header:"Balance"},{body:a(({data:t})=>[t.balance?(c(),R("div",me,[g("span",{title:t.stakeCurrency},S(("formatPrice"in d?d.formatPrice:e(se))(t.balance??0,t.stakeCurrencyDecimals)),9,fe),g("span",_e,S(` ${t.stakeCurrency}${t.isDryRun?" (dry)":""}`),1)])):_("",!0)]),_:1}),s(p,{field:"winVsLoss",header:"W/L"},{body:a(({data:t})=>[t.losses!==void 0?(c(),R("div",ye,[g("span",he,S(t.wins),1),r[4]||(r[4]=w(" / ")),g("span",be,S(t.losses),1)])):_("",!0)]),_:1})]),_:1},8,["value"])}}}),we={class:"flex justify-content-center"},Ce={class:"flex justify-content-center"},Ue=G({__name:"DashboardView",setup(j){const o=U(),y=ae(),$=re("");function d(D){$.value=D}const r=u(()=>["","sm","md","lg","xl"].includes($.value)),n=u(()=>y.layoutLocked||!r.value),i=u(()=>r.value?y.dashboardLayout:[...y.getDashboardLayoutSm]);function p(D){r.value&&(console.log("newlayout",D),console.log("saving dashboard"),y.dashboardLayout=D)}const m=u(()=>B(i.value,L.dailyChart)),f=u(()=>B(i.value,L.botComparison)),t=u(()=>B(i.value,L.allOpenTrades)),l=u(()=>B(i.value,L.allClosedTrades)),h=u(()=>B(i.value,L.cumChartChart)),T=u(()=>B(i.value,L.profitDistributionChart)),k=u(()=>B(i.value,L.tradesLogChart)),z=u(()=>({sm:y.getDashboardLayoutSm}));return ne(async()=>{o.allGetDaily({timescale:30}),o.activeBot.getOpenTrades(),o.activeBot.getProfit()}),(D,P)=>{const A=ue,C=de,v=N("GridItem"),E=ge,V=Y,I=J,M=W,q=F,K=H,Q=N("GridLayout");return c(),b(Q,{class:"h-full w-full",style:{padding:"1px"},"row-height":50,layout:e(i),"vertical-compact":!1,margin:[2,2],"responsive-layouts":e(z),"is-resizable":!e(n),"is-draggable":!e(n),responsive:!0,"prevent-collision":!0,cols:{lg:12,md:12,sm:12,xs:4,xxs:2},"col-num":12,onLayoutUpdated:p,"onUpdate:breakpoint":d},{default:a(({gridItemProps:x})=>[s(v,O(x,{i:e(m).i,x:e(m).x,y:e(m).y,w:e(m).w,h:e(m).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:a(()=>[s(C,{header:`Profit over time ${e(o).botCount>1?"combined":""}`},{default:a(()=>[s(A,{"multi-bot-view":""})]),_:1},8,["header"])]),_:2},1040,["i","x","y","w","h"]),s(v,O(x,{i:e(f).i,x:e(f).x,y:e(f).y,w:e(f).w,h:e(f).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:a(()=>[s(C,{header:"Bot comparison"},{default:a(()=>[s(E)]),_:1})]),_:2},1040,["i","x","y","w","h"]),s(v,O(x,{i:e(t).i,x:e(t).x,y:e(t).y,w:e(t).w,h:e(t).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:a(()=>[s(C,null,{header:a(()=>[g("div",we,[P[0]||(P[0]=w(" Open Trades ")),s(V,{class:"ms-2",hint:"Open trades of all selected bots. Click on a trade to go to the trade page for that trade/bot."})])]),default:a(()=>[s(I,{"active-trades":"",trades:e(o).allOpenTradesSelectedBots,"multi-bot-view":""},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),s(v,O(x,{i:e(h).i,x:e(h).x,y:e(h).y,w:e(h).w,h:e(h).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:a(()=>[s(C,{header:"Cumulative Profit"},{default:a(()=>[s(M,{trades:e(o).allTradesSelectedBots,"open-trades":e(o).allOpenTradesSelectedBots,"show-title":!1},null,8,["trades","open-trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),s(v,O(x,{i:e(l).i,x:e(l).x,y:e(l).y,w:e(l).w,h:e(l).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:a(()=>[s(C,null,{header:a(()=>[g("div",Ce,[P[1]||(P[1]=w(" Closed Trades ")),s(V,{class:"ms-2",hint:"Closed trades for all selected bots. Click on a trade to go to the trade page for that trade/bot."})])]),default:a(()=>[s(I,{"active-trades":!1,"show-filter":"",trades:e(o).allClosedTradesSelectedBots,"multi-bot-view":""},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),s(v,O(x,{i:e(T).i,x:e(T).x,y:e(T).y,w:e(T).w,h:e(T).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:a(()=>[s(C,{header:"Profit Distribution"},{default:a(()=>[s(q,{trades:e(o).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),s(v,O(x,{i:e(k).i,x:e(k).x,y:e(k).y,w:e(k).w,h:e(k).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:a(()=>[s(C,{header:"Trades Log"},{default:a(()=>[s(K,{trades:e(o).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"])]),_:1},8,["layout","responsive-layouts","is-resizable","is-draggable"])}}});export{Ue as default};
//# sourceMappingURL=DashboardView-D8kOjlN5.js.map
